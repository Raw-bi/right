
<!DOCTYPE html><html><head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<style type="text/css">body,html{height:100%;margin:0}body{margin:0;font-size:12px;font-family:'Source Sans Pro',sans-serif;-webkit-font-smoothing:antialiased;cursor:default;overflow:hidden}.noselect{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}*{box-sizing:border-box}svg{display:block;max-width:100vw}g.node{cursor:pointer}svg .g-bar .axis-label:hover{opacity:.7!important}svg .g-bar .breadcrumb .item .label{cursor:pointer}svg .g-bar .breadcrumb .item .label:hover{opacity:.7}svg .g-bar .breadcrumb .item:first-child .separator{display:none}svg .g-bar .breadcrumb .item:last-child .label{cursor:auto}svg .g-bar .breadcrumb .item:last-child .label:hover{opacity:1}.node .segment:focus,.node circle:focus,.node rect:focus,.node:focus{outline:0;filter:none;stroke:none;stroke-width:0}.node .segment:focus-visible,.node circle:focus-visible,.node rect:focus-visible,.node:focus-visible{outline:0;filter:drop-shadow(2px 0 0 #fff) drop-shadow(-2px 0 0 #fff) drop-shadow(0 2px 0 #fff) drop-shadow(0 -2px 0 #fff);stroke:#4D90FE!important;stroke-width:3px!important}.flourish-popup.all-events .flourish-popup-content,.flourish-popup.all-events .flourish-popup-svg g{pointer-events:all!important}.zoomout-button{opacity:.9;background:#f4f4f4;cursor:pointer;transition:opacity .3s;position:absolute;top:11px;right:13px;z-index:2;font-size:20px;width:2.5em;height:2.5em;border-radius:50%;text-align:center}.zoomout-button svg{width:40px;height:40px;top:.18em;position:relative;display:inline;transition:transform .3s}.zoomout-button svg path{fill:#333}.zoomout-button:hover{opacity:1}.zoomout-button:hover svg{transform:scale(1.1)}.zoomout-button.top-left{left:11px}.zoomout-button.bottom-right{top:initial;bottom:11px}@media screen and (max-width:600px){.zoomout-button{transform:scale(.8) translate(8px,-8px)}}.zoomout-button:hover{fill:#ccc}.control-group{display:inline-block;margin-right:10px}#filter,#size-by-control{max-width:100%}#filter .button-container,#filter .dropdown,#size-by-control .button-container,#size-by-control .dropdown{margin:0}/*# sourceMappingURL=style.css.map */</style>>
	<title>2025 update Ukraine total commitments Wolf</title></head>
	<body>
	

<script>window.Flourish = {"environment":"live","is_read_only":true};</script><script>var template=function(e){"use strict";var t="http://www.w3.org/1999/xhtml",n={svg:"http://www.w3.org/2000/svg",xhtml:t,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function r(e){var t=e+="",r=t.indexOf(":");return r>=0&&"xmlns"!==(t=e.slice(0,r))&&(e=e.slice(r+1)),n.hasOwnProperty(t)?{space:n[t],local:e}:e}function i(e){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===t&&n.documentElement.namespaceURI===t?n.createElement(e):n.createElementNS(r,e)}}function a(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function o(e){var t=r(e);return(t.local?a:i)(t)}function l(){}function s(e){return null==e?l:function(){return this.querySelector(e)}}function c(){return[]}function u(e){return null==e?c:function(){return this.querySelectorAll(e)}}function d(e){return function(){return this.matches(e)}}function f(e){return new Array(e.length)}function p(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}p.prototype={constructor:p,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var h="$";function _(e,t,n,r,i,a){for(var o,l=0,s=t.length,c=a.length;l<c;++l)(o=t[l])?(o.__data__=a[l],r[l]=o):n[l]=new p(e,a[l]);for(;l<s;++l)(o=t[l])&&(i[l]=o)}function y(e,t,n,r,i,a,o){var l,s,c,u={},d=t.length,f=a.length,_=new Array(d);for(l=0;l<d;++l)(s=t[l])&&(_[l]=c=h+o.call(s,s.__data__,l,t),c in u?i[l]=s:u[c]=s);for(l=0;l<f;++l)(s=u[c=h+o.call(e,a[l],l,a)])?(r[l]=s,s.__data__=a[l],u[c]=null):n[l]=new p(e,a[l]);for(l=0;l<d;++l)(s=t[l])&&u[_[l]]===s&&(i[l]=s)}function b(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function m(e){return function(){this.removeAttribute(e)}}function g(e){return function(){this.removeAttributeNS(e.space,e.local)}}function v(e,t){return function(){this.setAttribute(e,t)}}function x(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function w(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function k(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function M(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function z(e){return function(){this.style.removeProperty(e)}}function A(e,t,n){return function(){this.style.setProperty(e,t,n)}}function E(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function C(e,t){return e.style.getPropertyValue(t)||M(e).getComputedStyle(e,null).getPropertyValue(t)}function T(e){return function(){delete this[e]}}function N(e,t){return function(){this[e]=t}}function S(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function L(e){return e.trim().split(/^|\s+/)}function O(e){return e.classList||new F(e)}function F(e){this._node=e,this._names=L(e.getAttribute("class")||"")}function j(e,t){for(var n=O(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function P(e,t){for(var n=O(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function $(e){return function(){j(this,e)}}function B(e){return function(){P(this,e)}}function D(e,t){return function(){(t.apply(this,arguments)?j:P)(this,e)}}function q(){this.textContent=""}function H(e){return function(){this.textContent=e}}function R(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function Y(){this.innerHTML=""}function U(e){return function(){this.innerHTML=e}}function I(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function W(){this.nextSibling&&this.parentNode.appendChild(this)}function V(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function G(){return null}function X(){var e=this.parentNode;e&&e.removeChild(this)}function Z(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function J(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}F.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Q={},K=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(Q={mouseenter:"mouseover",mouseleave:"mouseout"}));function ee(e,t,n){return e=te(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function te(e,t,n){return function(r){var i=K;K=r;try{e.call(this,this.__data__,t,n)}finally{K=i}}}function ne(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,a=t.length;r<a;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?t.length=i:delete this.__on}}}function re(e,t,n){var r=Q.hasOwnProperty(e.type)?ee:te;return function(i,a,o){var l,s=this.__on,c=r(t,a,o);if(s)for(var u=0,d=s.length;u<d;++u)if((l=s[u]).type===e.type&&l.name===e.name)return this.removeEventListener(l.type,l.listener,l.capture),this.addEventListener(l.type,l.listener=c,l.capture=n),void(l.value=t);this.addEventListener(e.type,c,n),l={type:e.type,name:e.name,value:t,listener:c,capture:n},s?s.push(l):this.__on=[l]}}function ie(e,t,n){var r=M(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function ae(e,t){return function(){return ie(this,e,t)}}function oe(e,t){return function(){return ie(this,e,t.apply(this,arguments))}}var le=[null];function se(e,t){this._groups=e,this._parents=t}function ce(){return new se([[document.documentElement]],le)}function ue(e){return"string"==typeof e?new se([[document.querySelector(e)]],[document.documentElement]):new se([[e]],le)}se.prototype=ce.prototype={constructor:se,select:function(e){"function"!=typeof e&&(e=s(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o,l=t[i],c=l.length,u=r[i]=new Array(c),d=0;d<c;++d)(a=l[d])&&(o=e.call(a,a.__data__,d,l))&&("__data__"in a&&(o.__data__=a.__data__),u[d]=o);return new se(r,this._parents)},selectAll:function(e){"function"!=typeof e&&(e=u(e));for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o,l=t[a],s=l.length,c=0;c<s;++c)(o=l[c])&&(r.push(e.call(o,o.__data__,c,l)),i.push(o));return new se(r,i)},filter:function(e){"function"!=typeof e&&(e=d(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o=t[i],l=o.length,s=r[i]=[],c=0;c<l;++c)(a=o[c])&&e.call(a,a.__data__,c,o)&&s.push(a);return new se(r,this._parents)},data:function(e,t){if(!e)return h=new Array(this.size()),u=-1,this.each((function(e){h[++u]=e})),h;var n,r=t?y:_,i=this._parents,a=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var o=a.length,l=new Array(o),s=new Array(o),c=new Array(o),u=0;u<o;++u){var d=i[u],f=a[u],p=f.length,h=e.call(d,d&&d.__data__,u,i),b=h.length,m=s[u]=new Array(b),g=l[u]=new Array(b);r(d,f,m,g,c[u]=new Array(p),h,t);for(var v,x,w=0,k=0;w<b;++w)if(v=m[w]){for(w>=k&&(k=w+1);!(x=g[k])&&++k<b;);v._next=x||null}}return(l=new se(l,i))._enter=s,l._exit=c,l},enter:function(){return new se(this._enter||this._groups.map(f),this._parents)},exit:function(){return new se(this._exit||this._groups.map(f),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,a=this.exit();return r="function"==typeof e?e(r):r.append(e+""),null!=t&&(i=t(i)),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(e){for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),l=0;l<a;++l)for(var s,c=t[l],u=n[l],d=c.length,f=o[l]=new Array(d),p=0;p<d;++p)(s=c[p]||u[p])&&(f[p]=s);for(;l<r;++l)o[l]=t[l];return new se(o,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=b);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,l=n[a],s=l.length,c=i[a]=new Array(s),u=0;u<s;++u)(o=l[u])&&(c[u]=o);c.sort(t)}return new se(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each((function(){e[++t]=this})),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){var e=0;return this.each((function(){++e})),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,a=t[n],o=0,l=a.length;o<l;++o)(i=a[o])&&e.call(i,i.__data__,o,a);return this},attr:function(e,t){var n=r(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==t?n.local?g:m:"function"==typeof t?n.local?k:w:n.local?x:v)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?z:"function"==typeof t?E:A)(e,t,null==n?"":n)):C(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?T:"function"==typeof t?S:N)(e,t)):this.node()[e]},classed:function(e,t){var n=L(e+"");if(arguments.length<2){for(var r=O(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?D:t?$:B)(n,t))},text:function(e){return arguments.length?this.each(null==e?q:("function"==typeof e?R:H)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Y:("function"==typeof e?I:U)(e)):this.node().innerHTML},raise:function(){return this.each(W)},lower:function(){return this.each(V)},append:function(e){var t="function"==typeof e?e:o(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:o(e),r=null==t?G:"function"==typeof t?t:s(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(X)},clone:function(e){return this.select(e?J:Z)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,a=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),o=a.length;if(!(arguments.length<2)){for(l=t?re:ne,null==n&&(n=!1),r=0;r<o;++r)this.each(l(a[r],t,n));return this}var l=this.node().__on;if(l)for(var s,c=0,u=l.length;c<u;++c)for(r=0,s=l[c];r<o;++r)if((i=a[r]).type===s.type&&i.name===s.name)return s.value},dispatch:function(e,t){return this.each(("function"==typeof t?oe:ae)(e,t))}};var de=new Date,fe=new Date;function pe(e,t,n,r){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=function(t){return e(t=new Date(+t)),t},i.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},i.round=function(e){var t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},i.range=function(n,r,a){var o,l=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&a>0))return l;do{l.push(o=new Date(+n)),t(n,a),e(n)}while(o<n&&n<r);return l},i.filter=function(n){return pe((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(i.count=function(t,r){return de.setTime(+t),fe.setTime(+r),e(de),e(fe),Math.floor(n(de,fe))},i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?function(t){return r(t)%e==0}:function(t){return i.count(0,t)%e==0}):i:null}),i}var he=864e5,_e=6048e5,ye=pe((function(e){e.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/he}),(function(e){return e.getDate()-1})),be=ye;function me(e){return pe((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/_e}))}ye.range;var ge=me(0),ve=me(1),xe=me(2),we=me(3),ke=me(4),Me=me(5),ze=me(6);ge.range,ve.range,xe.range,we.range,ke.range,Me.range,ze.range;var Ae=pe((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));Ae.every=function(e){return isFinite(e=Math.floor(e))&&e>0?pe((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};var Ee=Ae;Ae.range;var Ce=pe((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/he}),(function(e){return e.getUTCDate()-1})),Te=Ce;function Ne(e){return pe((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/_e}))}Ce.range;var Se=Ne(0),Le=Ne(1),Oe=Ne(2),Fe=Ne(3),je=Ne(4),Pe=Ne(5),$e=Ne(6);Se.range,Le.range,Oe.range,Fe.range,je.range,Pe.range,$e.range;var Be=pe((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));Be.every=function(e){return isFinite(e=Math.floor(e))&&e>0?pe((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};var De=Be;function qe(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function He(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Re(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}Be.range;var Ye,Ue,Ie,We={"-":"",_:" ",0:"0"},Ve=/^\s*\d+/,Ge=/^%/,Xe=/[\\^$*+?|[\]().{}]/g;function Ze(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function Je(e){return e.replace(Xe,"\\$&")}function Qe(e){return new RegExp("^(?:"+e.map(Je).join("|")+")","i")}function Ke(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function et(e,t,n){var r=Ve.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function tt(e,t,n){var r=Ve.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function nt(e,t,n){var r=Ve.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function rt(e,t,n){var r=Ve.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function it(e,t,n){var r=Ve.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function at(e,t,n){var r=Ve.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function ot(e,t,n){var r=Ve.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function lt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function st(e,t,n){var r=Ve.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function ct(e,t,n){var r=Ve.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function ut(e,t,n){var r=Ve.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function dt(e,t,n){var r=Ve.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function ft(e,t,n){var r=Ve.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function pt(e,t,n){var r=Ve.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function ht(e,t,n){var r=Ve.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function _t(e,t,n){var r=Ve.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function yt(e,t,n){var r=Ve.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function bt(e,t,n){var r=Ge.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function mt(e,t,n){var r=Ve.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function gt(e,t,n){var r=Ve.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function vt(e,t){return Ze(e.getDate(),t,2)}function xt(e,t){return Ze(e.getHours(),t,2)}function wt(e,t){return Ze(e.getHours()%12||12,t,2)}function kt(e,t){return Ze(1+be.count(Ee(e),e),t,3)}function Mt(e,t){return Ze(e.getMilliseconds(),t,3)}function zt(e,t){return Mt(e,t)+"000"}function At(e,t){return Ze(e.getMonth()+1,t,2)}function Et(e,t){return Ze(e.getMinutes(),t,2)}function Ct(e,t){return Ze(e.getSeconds(),t,2)}function Tt(e){var t=e.getDay();return 0===t?7:t}function Nt(e,t){return Ze(ge.count(Ee(e)-1,e),t,2)}function St(e){var t=e.getDay();return t>=4||0===t?ke(e):ke.ceil(e)}function Lt(e,t){return e=St(e),Ze(ke.count(Ee(e),e)+(4===Ee(e).getDay()),t,2)}function Ot(e){return e.getDay()}function Ft(e,t){return Ze(ve.count(Ee(e)-1,e),t,2)}function jt(e,t){return Ze(e.getFullYear()%100,t,2)}function Pt(e,t){return Ze((e=St(e)).getFullYear()%100,t,2)}function $t(e,t){return Ze(e.getFullYear()%1e4,t,4)}function Bt(e,t){var n=e.getDay();return Ze((e=n>=4||0===n?ke(e):ke.ceil(e)).getFullYear()%1e4,t,4)}function Dt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ze(t/60|0,"0",2)+Ze(t%60,"0",2)}function qt(e,t){return Ze(e.getUTCDate(),t,2)}function Ht(e,t){return Ze(e.getUTCHours(),t,2)}function Rt(e,t){return Ze(e.getUTCHours()%12||12,t,2)}function Yt(e,t){return Ze(1+Te.count(De(e),e),t,3)}function Ut(e,t){return Ze(e.getUTCMilliseconds(),t,3)}function It(e,t){return Ut(e,t)+"000"}function Wt(e,t){return Ze(e.getUTCMonth()+1,t,2)}function Vt(e,t){return Ze(e.getUTCMinutes(),t,2)}function Gt(e,t){return Ze(e.getUTCSeconds(),t,2)}function Xt(e){var t=e.getUTCDay();return 0===t?7:t}function Zt(e,t){return Ze(Se.count(De(e)-1,e),t,2)}function Jt(e){var t=e.getUTCDay();return t>=4||0===t?je(e):je.ceil(e)}function Qt(e,t){return e=Jt(e),Ze(je.count(De(e),e)+(4===De(e).getUTCDay()),t,2)}function Kt(e){return e.getUTCDay()}function en(e,t){return Ze(Le.count(De(e)-1,e),t,2)}function tn(e,t){return Ze(e.getUTCFullYear()%100,t,2)}function nn(e,t){return Ze((e=Jt(e)).getUTCFullYear()%100,t,2)}function rn(e,t){return Ze(e.getUTCFullYear()%1e4,t,4)}function an(e,t){var n=e.getUTCDay();return Ze((e=n>=4||0===n?je(e):je.ceil(e)).getUTCFullYear()%1e4,t,4)}function on(){return"+0000"}function ln(){return"%"}function sn(e){return+e}function cn(e){return Math.floor(+e/1e3)}function un(e){throw new TypeError("Expected a value of type string but got a value of type "+typeof e)}function dn(e){return function(t){return"string"!=typeof t&&un(t),(t=t.trim())?e(t):null}}Ye=function(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,l=e.months,s=e.shortMonths,c=Qe(i),u=Ke(i),d=Qe(a),f=Ke(a),p=Qe(o),h=Ke(o),_=Qe(l),y=Ke(l),b=Qe(s),m=Ke(s),g={a:function(e){return o[e.getDay()]},A:function(e){return a[e.getDay()]},b:function(e){return s[e.getMonth()]},B:function(e){return l[e.getMonth()]},c:null,d:vt,e:vt,f:zt,g:Pt,G:Bt,H:xt,I:wt,j:kt,L:Mt,m:At,M:Et,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:sn,s:cn,S:Ct,u:Tt,U:Nt,V:Lt,w:Ot,W:Ft,x:null,X:null,y:jt,Y:$t,Z:Dt,"%":ln},v={a:function(e){return o[e.getUTCDay()]},A:function(e){return a[e.getUTCDay()]},b:function(e){return s[e.getUTCMonth()]},B:function(e){return l[e.getUTCMonth()]},c:null,d:qt,e:qt,f:It,g:nn,G:an,H:Ht,I:Rt,j:Yt,L:Ut,m:Wt,M:Vt,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:sn,s:cn,S:Gt,u:Xt,U:Zt,V:Qt,w:Kt,W:en,x:null,X:null,y:tn,Y:rn,Z:on,"%":ln},x={a:function(e,t,n){var r=p.exec(t.slice(n));return r?(e.w=h[r[0].toLowerCase()],n+r[0].length):-1},A:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.w=f[r[0].toLowerCase()],n+r[0].length):-1},b:function(e,t,n){var r=b.exec(t.slice(n));return r?(e.m=m[r[0].toLowerCase()],n+r[0].length):-1},B:function(e,t,n){var r=_.exec(t.slice(n));return r?(e.m=y[r[0].toLowerCase()],n+r[0].length):-1},c:function(e,n,r){return M(e,t,n,r)},d:ut,e:ut,f:yt,g:ot,G:at,H:ft,I:ft,j:dt,L:_t,m:ct,M:pt,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=u[r[0].toLowerCase()],n+r[0].length):-1},q:st,Q:mt,s:gt,S:ht,u:tt,U:nt,V:rt,w:et,W:it,x:function(e,t,r){return M(e,n,t,r)},X:function(e,t,n){return M(e,r,t,n)},y:ot,Y:at,Z:lt,"%":bt};function w(e,t){return function(n){var r,i,a,o=[],l=-1,s=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++l<c;)37===e.charCodeAt(l)&&(o.push(e.slice(s,l)),null!=(i=We[r=e.charAt(++l)])?r=e.charAt(++l):i="e"===r?" ":"0",(a=t[r])&&(r=a(n,i)),o.push(r),s=l+1);return o.push(e.slice(s,l)),o.join("")}}function k(e,t){return function(n){var r,i,a=Re(1900,void 0,1);if(M(a,e,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(t&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=He(Re(a.y,0,1))).getUTCDay(),r=i>4||0===i?Le.ceil(r):Le(r),r=Te.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=qe(Re(a.y,0,1))).getDay(),r=i>4||0===i?ve.ceil(r):ve(r),r=be.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?He(Re(a.y,0,1)).getUTCDay():qe(Re(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,He(a)):qe(a)}}function M(e,t,n,r){for(var i,a,o=0,l=t.length,s=n.length;o<l;){if(r>=s)return-1;if(37===(i=t.charCodeAt(o++))){if(i=t.charAt(o++),!(a=x[i in We?t.charAt(o++):i])||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return g.x=w(n,g),g.X=w(r,g),g.c=w(t,g),v.x=w(n,v),v.X=w(r,v),v.c=w(t,v),{format:function(e){var t=w(e+="",g);return t.toString=function(){return e},t},parse:function(e){var t=k(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=w(e+="",v);return t.toString=function(){return e},t},utcParse:function(e){var t=k(e+="",!0);return t.toString=function(){return e},t}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Ye.format,Ye.parse,Ue=Ye.utcFormat,Ie=Ye.utcParse;var fn=new Date(1972,3,27,19,45,5),pn={"%b %d":[{regex:/^june\s(30|[12][0-9]|0?[1-9])$/i,toDate:function(e){return new Date(null,5,e.split(/\s/)[1])}},{regex:/^july\s(3[01]|[12][0-9]|0?[1-9])$/i,toDate:function(e){return new Date(null,6,e.split(/\s/)[1])}},{regex:/^sept\s(30|[12][0-9]|0?[1-9])$/i,toDate:function(e){return new Date(null,8,e.split(/\s/)[1])}}],"%d %b":[{regex:/^(0?[1-9]|[1-9][0-9])\sjune$/i,toDate:function(e){return new Date(null,5,e.split(/\s/)[0])}},{regex:/^(0?[1-9]|[1-9][0-9])\sjuly$/i,toDate:function(e){return new Date(null,6,e.split(/\s/)[0])}},{regex:/^(0?[1-9]|[1-9][0-9])\ssept$/i,toDate:function(e){return new Date(null,8,e.split(/\s/)[0])}}]};function hn(e){return function(t){var n=null;return e.forEach((function(e){t.match(e.regex)&&(n=e.toDate(t))})),n}}function _n(e,t){var n,r=Ie(e),i=Ue(e);return n=dn("function"==typeof t?function(e){return t(e,null!==r(e))}:function(e){return null!==r(e)}),Object.freeze({test:n,parse:dn((function(t){return r(t)||(pn[e]?hn(pn[e])(t):null)})),format:function(e){return i(e)},type:"datetime",description:e,id:"datetime$"+e,example:i(fn)})}var yn=Object.freeze([_n("%Y-%m-%dT%H:%M:%S.%LZ"),_n("%Y-%m-%d %H:%M:%S"),_n("%Y-%m-%dT%H:%M:%S"),_n("%Y-%m-%dT%H:%M:%SZ"),_n("%d/%m/%Y",(function(e,t){if(!t)return!1;var n=e.split("/").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&n[2]>=1e3})),_n("%d/%m/%Y %H:%M",(function(e,t){if(!t)return!1;var n=e.split(/[/ :]/).map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&n[2]>=1e3&&n[3]>=0&&n[3]<24&&n[4]>=0&&n[4]<60})),_n("%d/%m/%y",(function(e,t){if(!t)return!1;var n=e.split("/").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&!isNaN(n[2])})),_n("%m/%d/%Y",(function(e,t){if(!t)return!1;var n=e.split("/").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&n[2]>=1e3})),_n("%m/%d/%Y %H:%M",(function(e,t){if(!t)return!1;var n=e.split(/[/ :]/).map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&n[2]>=1e3&&n[3]>=0&&n[3]<24&&n[4]>=0&&n[4]<60})),_n("%m/%d/%y",(function(e,t){if(!t)return!1;var n=e.split("/").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&!isNaN(n[2])})),_n("%Y/%m/%d",(function(e,t){if(!t)return!1;var n=e.split("/").map(parseFloat);return n[0]>=1e3&&n[1]>0&&n[1]<=12&&n[2]>0&&n[2]<=31})),_n("%d-%m-%Y",(function(e,t){if(!t)return!1;var n=e.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&n[2]>=1e3})),_n("%d-%m-%y",(function(e,t){if(!t)return!1;var n=e.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&!isNaN(n[2])})),_n("%d.%m.%Y",(function(e,t){if(!t)return!1;var n=e.split(".").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&n[2]>=1e3})),_n("%m.%d.%y",(function(e,t){if(!t)return!1;var n=e.split(".").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&!isNaN(n[2])})),_n("%m-%d-%Y",(function(e,t){if(!t)return!1;var n=e.split("-").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&n[2]>=1e3})),_n("%m-%d-%y",(function(e,t){if(!t)return!1;var n=e.split("-").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&!isNaN(n[2])})),_n("%Y-%m-%d",(function(e,t){if(!t)return!1;var n=e.split("-").map(parseFloat);return n[0]>=1e3&&n[1]>0&&n[1]<=12&&n[2]>0&&n[2]<=31})),_n("%Y-%m",(function(e,t){if(!t)return!1;var n=e.split("-").map(parseFloat);return n[0]>=1e3&&n[1]>0&&n[1]<=12})),_n("%d %b %Y",(function(e,t){if(!t)return!1;var n=e.split(" ").map(parseFloat);return n[0]>0&&n[0]<=31&&n[2]>=1e3})),_n("%d %B %Y",(function(e,t){if(!t)return!1;var n=e.split(" ").map(parseFloat);return n[0]>0&&n[0]<=31&&n[2]>=1e3})),_n("%d %b %y"),_n("%-d %b ’%y"),_n("%d %B %y"),_n("%d-%b-%Y",(function(e,t){if(!t)return!1;var n=e.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[2]>=1e3})),_n("%d-%B-%Y",(function(e,t){if(!t)return!1;var n=e.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[2]>=1e3})),_n("%d-%b-%y"),_n("%d-%B-%y"),_n("%m/%Y",(function(e,t){if(!t)return!1;var n=e.split("/").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>=1e3})),_n("%m/%y"),_n("%b %Y",(function(e,t){return!!t&&e.split(" ").map(parseFloat)[1]>=1e3})),_n("%B %Y",(function(e,t){return!!t&&e.split(" ").map(parseFloat)[1]>=1e3})),_n("%b-%y"),_n("%b %y"),_n("%B %y"),_n("%b '%y"),_n("%B %-d %Y"),_n("%d %b",(function(e,t){return!!t||!!hn(pn["%d %b"])(e)})),_n("%d %B"),_n("%b %d",(function(e,t){return!!t||!!hn(pn["%b %d"])(e)})),_n("%B %d"),_n("%d-%m",(function(e,t){if(!t)return!1;var n=e.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12})),_n("%m-%d"),_n("%d/%m"),_n("%m/%d"),_n("%b %d %Y"),_n("%b %d %Y, %-I.%M%p"),_n("%Y",(function(e,t){if(!t)return!1;var n=parseFloat(e);return n>1499&&n<2200})),_n("%B"),_n("%b"),_n("%X"),_n("%I:%M %p"),_n("%-I.%M%p"),_n("%H:%M",(function(e,t){if(!t)return!1;var n=e.split(":").map(parseFloat);return n[0]>=0&&n[0]<24})),_n("%H:%M:%S"),_n("%M:%S"),_n("%-I%p"),_n("Q%q %Y",(function(e,t){return!!t&&6===e.replace(/\s/g,"").length})),_n("%Y Q%q",(function(e,t){return!!t&&6===e.replace(/\s/g,"").length}))]);function bn(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function mn(e){return(e=bn(Math.abs(e)))?e[1]:NaN}var gn,vn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function xn(e){if(!(t=vn.exec(e)))throw new Error("invalid format: "+e);var t;return new wn({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function wn(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function kn(e,t){var n=bn(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}xn.prototype=wn.prototype,wn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Mn={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return kn(100*e,t)},r:kn,s:function(e,t){var n=bn(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(gn=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+bn(e,Math.max(0,t+a-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function zn(e){return e}var An,En,Cn,Tn=Array.prototype.map,Nn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Sn(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?zn:(t=Tn.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,a=[],o=0,l=t[0],s=0;i>0&&l>0&&(s+l+1>r&&(l=Math.max(1,r-s)),a.push(e.substring(i-=l,i+l)),!((s+=l+1)>r));)l=t[o=(o+1)%t.length];return a.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",a=void 0===e.currency?"":e.currency[1]+"",o=void 0===e.decimal?".":e.decimal+"",l=void 0===e.numerals?zn:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(Tn.call(e.numerals,String)),s=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"-":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=xn(e)).fill,n=e.align,d=e.sign,f=e.symbol,p=e.zero,h=e.width,_=e.comma,y=e.precision,b=e.trim,m=e.type;"n"===m?(_=!0,m="g"):Mn[m]||(void 0===y&&(y=12),b=!0,m="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var g="$"===f?i:"#"===f&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",v="$"===f?a:/[%p]/.test(m)?s:"",x=Mn[m],w=/[defgprs%]/.test(m);function k(e){var i,a,s,f=g,k=v;if("c"===m)k=x(e)+k,e="";else{var M=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:x(Math.abs(e),y),b&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),M&&0==+e&&"+"!==d&&(M=!1),f=(M?"("===d?d:c:"-"===d||"("===d?"":d)+f,k=("s"===m?Nn[8+gn/3]:"")+k+(M&&"("===d?")":""),w)for(i=-1,a=e.length;++i<a;)if(48>(s=e.charCodeAt(i))||s>57){k=(46===s?o+e.slice(i+1):e.slice(i))+k,e=e.slice(0,i);break}}_&&!p&&(e=r(e,1/0));var z=f.length+e.length+k.length,A=z<h?new Array(h-z+1).join(t):"";switch(_&&p&&(e=r(A+e,A.length?h-k.length:1/0),A=""),n){case"<":e=f+e+k+A;break;case"=":e=f+A+e+k;break;case"^":e=A.slice(0,z=A.length>>1)+f+e+k+A.slice(z);break;default:e=A+f+e+k}return l(e)}return y=void 0===y?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),k.toString=function(){return e+""},k}return{format:d,formatPrefix:function(e,t){var n=d(((e=xn(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(mn(t)/3))),i=Math.pow(10,-r),a=Nn[8+r/3];return function(e){return n(i*e)+a}}}}!function(e){An=Sn(e),En=An.format,Cn=An.formatPrefix}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});var Ln={test:dn((function(e){return/^(\+|-)?\d{1,3}(,\d{3})*(\.\d+)?((e|E)(\+|-)?\d+)?$/.test(e.trim())})),parse:dn((function(e){return parseFloat(e.replace(/,/g,""))})),description:"Comma thousand separator, point decimal mark",thousand_separator:",",decimal_mark:".",id:"number$comma_point",example:"12,235.56"},On={test:dn((function(e){return/^(\+|-)?\d{1,3}(\s\d{3})*(\.\d+)?((e|E)(\+|-)?\d+)?$/.test(e.trim())})),parse:dn((function(e){return parseFloat(e.replace(/\s/g,""))})),description:"Space thousand separator, point decimal mark",thousand_separator:" ",decimal_mark:".",id:"number$space_point",example:"12 235.56"},Fn={test:dn((function(e){return/^(\+|-)?\d+(\.\d+)?((e|E)(\+|-)?\d+)?$/.test(e.trim())})),parse:dn((function(e){return parseFloat(e)})),description:"No thousand separator, point decimal mark",thousand_separator:"",decimal_mark:".",id:"number$none_point",example:"12235.56"},jn={test:dn((function(e){return/^(\+|-)?\d{1,3}(\.\d{3})*(,\d+)?((e|E)(\+|-)?\d+)?$/.test(e.trim())})),parse:dn((function(e){return parseFloat(e.replace(/\./g,"").replace(/,/,"."))})),description:"Point thousand separator, comma decimal mark",thousand_separator:".",decimal_mark:",",id:"number$point_comma",example:"12.235,56"},Pn={test:dn((function(e){return/^(\+|-)?\d{1,3}(\s\d{3})*(,\d+)?((e|E)(\+|-)?\d+)?$/.test(e.trim())})),parse:dn((function(e){return parseFloat(e.replace(/\s/g,"").replace(/,/,"."))})),description:"Space thousand separator, comma decimal mark",thousand_separator:" ",decimal_mark:",",id:"number$space_comma",example:"12 235,56"},$n={test:dn((function(e){return/^(\+|-)?\d+(,\d+)?((e|E)(\+|-)?\d+)?$/.test(e.trim())})),parse:dn((function(e){return parseFloat(e.replace(/,/,"."))})),description:"No thousand separator, comma decimal mark",thousand_separator:"",decimal_mark:",",id:"number$none_comma",example:"12235,56"},Bn=Object.freeze([Ln,On,jn,Pn,Fn,$n]);Bn.forEach((function(e){e.type="number",e.format=function(e){var t,n,r=Sn({decimal:e.decimal_mark,thousands:e.thousand_separator,grouping:[3],currency:["",""]});return function(e,i){return null===e?"":(i||(i=",.2f"),i!==n&&(n=i,t=r.format(n)),t(e))}}(e),Object.freeze(e)}));var Dn,qn=Object.freeze({test:function(e){return"string"==typeof e||un(e)},parse:function(e){return"string"==typeof e?e:un(e)},format:function(e){if("string"==typeof e)return e},type:"string",description:"Arbitrary string",id:"string$arbitrary_string"}),Hn=Object.freeze({datetime:yn,number:Bn}),Rn=Object.freeze(["datetime","number","string"]),Yn=Object.freeze({n_max:250,n_failing_values:0,failure_fraction:.05,sort:!0}),Un=Object.freeze(Object.keys(Yn));function In(e,t){return e.index-t.index}function Wn(e,t){return t.n_success-e.n_success||In(e,t)}function Vn(e){return(""+e).trim()}function Gn(e){return void 0===e?function(e){return Vn(e)}:"function"==typeof e?function(t,n){return Vn(e(t,n))}:function(t){return Vn(t[""+e])}}function Xn(e){e?Array.isArray(e)||(e=[e]):e=Rn;var t=e.reduce((function(e,t){var n=Hn[t];return n&&Array.prototype.push.apply(e,n),e}),[]),n=-1!==e.indexOf("string"),r=Un.reduce((function(e,t){return e[t]=Yn[t],e}),{}),i=function(e,i){i=Gn(i);var a=e.map(i).filter((function(e){return e}));if(!a.length)return n?[qn]:[];var o=Math.min(r.n_max,a.length),l=Math.floor(o*r.failure_fraction),s=r.n_failing_values,c=r.sort?Wn:In,u=t.slice().reduce((function(e,t,n){for(var r=u=0,i=[],c=!1,u=0;u<o;u++){var d=a[u];if(!t.test(d)&&(++r>l?c=!0:-1===i.indexOf(d)&&(i.push(d),i.length>s&&(c=!0)),c))break}return c||e.push({interp:t,n_success:o-r,index:n}),e}),[]).sort(c).map((function(e){return e.interp}));return n&&u.push(qn),u};return Un.forEach((function(e){var t;i[(t=e,t.replace(/_(\w)/g,(function(e,t){return t.toUpperCase()})))]=function(t){return void 0===t?r[e]:(r[e]=t,i)}})),i}Xn.DATETIME_IDS=Object.freeze(yn.map((function(e){return e.id}))),Xn.NUMBER_IDS=Object.freeze(Bn.map((function(e){return e.id}))),Xn.STRING_IDS=Object.freeze([qn.id]),Xn.getInterpretation=(Dn=yn.concat(Bn,qn).reduce((function(e,t){return e[t.id]=t,e}),{}),function(e){return Dn[e]}),Xn._createAccessorFunction=Gn;const Zn=Xn.getInterpretation,Jn=Object.freeze({transform_labels:!1,transform:"multiply",multiply_divide_constant:1,exponentiate_constant:0,multiplier:1,prefix:"",n_dec:2,suffix:"",strip_zeros:!0,strip_separator:!0,negative_sign:"-$nk"});function Qn(e,t){const n=Zn(t);if(!n)throw new Error(`format_id ${t} not recognised`);if("number"!==n.type)throw new Error(`format_id ${t}not a number format`);const r=n.format,i=n.decimal_mark,a=n.thousand_separator,o=Math.trunc(e.n_dec),l=(a?",":"")+"."+Math.max(0,o)+"f",s=e.strip_zeros&&o>0?new RegExp("\\"+i+"?0+$"):null,c=e.strip_separator&&a,u=e.negative_sign,d=function(e){let t=1;return e.transform_labels&&(t="multiply"===e.transform?e.multiply_divide_constant:"divide"===e.transform?1/e.multiply_divide_constant:Math.pow(10,e.exponentiate_constant)),function(e){return e*t}}(e);return function(t){if(null===t)return"";const n=o>=0?d(t):function(e,t){if(!(t=t>0?Math.floor(t):Math.ceil(t)))return Math.round(e);const n=Math.pow(10,Math.abs(t));return t>0?Math.round(e*n)/n:Math.round(e/n)*n}(d(t),o),i=n<0,f=Math.abs(n),p=c&&a&&f>=1e3&&f<1e4;let h=r(f,l);return s&&(h=h.replace(s,"")),p&&(h=h.replace(a,"")),i&&"none"!==u?"-$nk"===u?"-"+e.prefix+h+e.suffix:"$-nk"===u?e.prefix+"-"+h+e.suffix:"($nk)"===u?"("+e.prefix+h+e.suffix+")":e.prefix+"("+h+")"+e.suffix:e.prefix+h+e.suffix}}function Kn(e){for(let t in Jn)void 0===e[t]&&(e[t]=Jn[t]);return function(t){return Qn(e,t)}}function er(e){const t=Xn.getInterpretation(e);if(!t)throw new Error(`format_id ${e} not recognised`);return function(){return t.format(...arguments)}}function tr(){return this.declarations=[],this}function nr(e){return this.selector=e,this.styles=[],this}tr.prototype.select=function(e){if(!e)return this;var t=new nr(e);return t.parent=this,this.addDeclaration(t),t},tr.prototype.addDeclaration=function(e){return this.declarations.push(e),this},tr.prototype.print=function(){var e="";return this.declarations.forEach((function(t){e+=t.selector+" {\n",t.styles.forEach((function(t){e+="\t"+t[0]+": "+t[1]+";\n"})),e+="}\n\n"})),e},tr.prototype.clear=function(){return this.declarations=[],this},nr.prototype.style=function(e,t){var n="function"==typeof value_?t():t;return""!==n&&null!=n&&this.styles.push([e,n]),this},nr.prototype.select=function(e){return this.parent.select(this.selector+" "+e)};var rr=!1;function ir(){if(!rr&&"undefined"!=typeof document){var e,t=((e=new tr).select(".fl-controls-container").style("display","inline-block").style("line-height","1em"),e.select(".fl-controls-title").style("display","inline-block").style("margin-inline-end","0.5rem"),e.select(".fl-controls-container, .fl-controls-container *").style("box-sizing","border-box"),e.select(".slider-holder").style("margin-bottom","20px"),e.select(".fl-controls-slider, .slider-play").style("pointer-events","all").style("display","inline-block").style("vertical-align","middle"),e.select(".slider-play svg").style("height","100%").style("width","100%").style("display","block").style("cursor"," pointer",""),e.select(".fl-controls-slider svg").style("display","block"),e.select(".slider-play:hover").style("opacity","0.6"),e.select(".fl-control-slider").style("width","100%").style("bottom","0").style("align-items","center"),e.select(".fl-control").style("position","relative"),e.select(".fl-control.hidden").style("display","none"),e.select(".fl-control .button").style("display","inline-flex").style("align-items","center").style("background","#eee").style("padding","0 0.5em").style("margin-right","0.25em").style("margin-bottom","0.25em").style("line-height","1em").style("box-sizing","border-box"),e.select(".fl-control.grouped:not(.hidden)").style("display","inline-table").style("table-layout","fixed").select(".button").style("display","table-cell").style("vertical-align","middle").style("margin","0").style("text-align","center"),e.select(".fl-control .button.selected").style("background","#ddd"),e.select(".fl-control-dropdown").style("line-height","1em").style("position","relative"),e.select(".fl-control-dropdown::after").style("display","block").style("content","''").style("width","10px").style("height","10px").style("background","transparent").style("position","absolute").style("right","5px").style("left","auto").style("top","50%").style("pointer-events","none").style("transform","translateY(calc(-50% + 3px))").style("border-left","5px solid transparent").style("border-right","5px solid transparent").style("border-top","5px solid").style("box-sizing","border-box"),e.select(".is-rtl .fl-control-dropdown::after").style("left","5px").style("right","auto"),e.select(".fl-control-dropdown select").style("-webkit-appearance","none").style("width","100%"),e.print()),n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",r.className="flourish-controls",n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t)),rr=!0}}function ar(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function or(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function lr(){}var sr=.7,cr=1/sr,ur="\\s*([+-]?\\d+)\\s*",dr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",fr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pr=/^#([0-9a-f]{3,8})$/,hr=new RegExp("^rgb\\("+[ur,ur,ur]+"\\)$"),_r=new RegExp("^rgb\\("+[fr,fr,fr]+"\\)$"),yr=new RegExp("^rgba\\("+[ur,ur,ur,dr]+"\\)$"),br=new RegExp("^rgba\\("+[fr,fr,fr,dr]+"\\)$"),mr=new RegExp("^hsl\\("+[dr,fr,fr]+"\\)$"),gr=new RegExp("^hsla\\("+[dr,fr,fr,dr]+"\\)$"),vr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function xr(){return this.rgb().formatHex()}function wr(){return this.rgb().formatRgb()}function kr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=pr.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Mr(t):3===n?new Cr(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?zr(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?zr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=hr.exec(e))?new Cr(t[1],t[2],t[3],1):(t=_r.exec(e))?new Cr(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=yr.exec(e))?zr(t[1],t[2],t[3],t[4]):(t=br.exec(e))?zr(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=mr.exec(e))?Lr(t[1],t[2]/100,t[3]/100,1):(t=gr.exec(e))?Lr(t[1],t[2]/100,t[3]/100,t[4]):vr.hasOwnProperty(e)?Mr(vr[e]):"transparent"===e?new Cr(NaN,NaN,NaN,0):null}function Mr(e){return new Cr(e>>16&255,e>>8&255,255&e,1)}function zr(e,t,n,r){return r<=0&&(e=t=n=NaN),new Cr(e,t,n,r)}function Ar(e){return e instanceof lr||(e=kr(e)),e?new Cr((e=e.rgb()).r,e.g,e.b,e.opacity):new Cr}function Er(e,t,n,r){return 1===arguments.length?Ar(e):new Cr(e,t,n,null==r?1:r)}function Cr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Tr(){return"#"+Sr(this.r)+Sr(this.g)+Sr(this.b)}function Nr(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function Sr(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function Lr(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new jr(e,t,n,r)}function Or(e){if(e instanceof jr)return new jr(e.h,e.s,e.l,e.opacity);if(e instanceof lr||(e=kr(e)),!e)return new jr;if(e instanceof jr)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,l=a-i,s=(a+i)/2;return l?(o=t===a?(n-r)/l+6*(n<r):n===a?(r-t)/l+2:(t-n)/l+4,l/=s<.5?a+i:2-a-i,o*=60):l=s>0&&s<1?0:o,new jr(o,l,s,e.opacity)}function Fr(e,t,n,r){return 1===arguments.length?Or(e):new jr(e,t,n,null==r?1:r)}function jr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Pr(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}ar(lr,kr,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:xr,formatHex:xr,formatHsl:function(){return Or(this).formatHsl()},formatRgb:wr,toString:wr}),ar(Cr,Er,or(lr,{brighter:function(e){return e=null==e?cr:Math.pow(cr,e),new Cr(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?sr:Math.pow(sr,e),new Cr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Tr,formatHex:Tr,formatRgb:Nr,toString:Nr})),ar(jr,Fr,or(lr,{brighter:function(e){return e=null==e?cr:Math.pow(cr,e),new jr(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?sr:Math.pow(sr,e),new jr(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Cr(Pr(e>=240?e-240:e+120,i,r),Pr(e,i,r),Pr(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var $r=Math.PI/180,Br=180/Math.PI,Dr=.96422,qr=1,Hr=.82521,Rr=4/29,Yr=6/29,Ur=3*Yr*Yr,Ir=Yr*Yr*Yr;function Wr(e){if(e instanceof Gr)return new Gr(e.l,e.a,e.b,e.opacity);if(e instanceof ei)return ti(e);e instanceof Cr||(e=Ar(e));var t,n,r=Qr(e.r),i=Qr(e.g),a=Qr(e.b),o=Xr((.2225045*r+.7168786*i+.0606169*a)/qr);return r===i&&i===a?t=n=o:(t=Xr((.4360747*r+.3850649*i+.1430804*a)/Dr),n=Xr((.0139322*r+.0971045*i+.7141733*a)/Hr)),new Gr(116*o-16,500*(t-o),200*(o-n),e.opacity)}function Vr(e,t,n,r){return 1===arguments.length?Wr(e):new Gr(e,t,n,null==r?1:r)}function Gr(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function Xr(e){return e>Ir?Math.pow(e,1/3):e/Ur+Rr}function Zr(e){return e>Yr?e*e*e:Ur*(e-Rr)}function Jr(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Qr(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Kr(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof ei)return new ei(e.h,e.c,e.l,e.opacity);if(e instanceof Gr||(e=Wr(e)),0===e.a&&0===e.b)return new ei(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Br;return new ei(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}(e):new ei(e,t,n,null==r?1:r)}function ei(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function ti(e){if(isNaN(e.h))return new Gr(e.l,0,0,e.opacity);var t=e.h*$r;return new Gr(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}ar(Gr,Vr,or(lr,{brighter:function(e){return new Gr(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new Gr(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new Cr(Jr(3.1338561*(t=Dr*Zr(t))-1.6168667*(e=qr*Zr(e))-.4906146*(n=Hr*Zr(n))),Jr(-.9787684*t+1.9161415*e+.033454*n),Jr(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),ar(ei,Kr,or(lr,{brighter:function(e){return new ei(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new ei(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return ti(this).rgb()}}));var ni=-.14861,ri=1.78277,ii=-.29227,ai=-.90649,oi=1.97294,li=oi*ai,si=oi*ri,ci=ri*ii-ai*ni;function ui(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof di)return new di(e.h,e.s,e.l,e.opacity);e instanceof Cr||(e=Ar(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(ci*r+li*t-si*n)/(ci+li-si),a=r-i,o=(oi*(n-i)-ii*a)/ai,l=Math.sqrt(o*o+a*a)/(oi*i*(1-i)),s=l?Math.atan2(o,a)*Br-120:NaN;return new di(s<0?s+360:s,l,i,e.opacity)}(e):new di(e,t,n,null==r?1:r)}function di(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}ar(di,ui,or(lr,{brighter:function(e){return e=null==e?cr:Math.pow(cr,e),new di(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?sr:Math.pow(sr,e),new di(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*$r,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Cr(255*(t+n*(ni*r+ri*i)),255*(t+n*(ii*r+ai*i)),255*(t+n*(oi*r)),this.opacity)}}));var fi="$";function pi(){}function hi(e,t){var n=new pi;if(e instanceof pi)e.each((function(e,t){n.set(t,e)}));else if(Array.isArray(e)){var r,i=-1,a=e.length;if(null==t)for(;++i<a;)n.set(i,e[i]);else for(;++i<a;)n.set(t(r=e[i],i,e),r)}else if(e)for(var o in e)n.set(o,e[o]);return n}function _i(){var e,t,n,r=[],i=[];function a(n,i,o,l){if(i>=r.length)return null!=e&&n.sort(e),null!=t?t(n):n;for(var s,c,u,d=-1,f=n.length,p=r[i++],h=hi(),_=o();++d<f;)(u=h.get(s=p(c=n[d])+""))?u.push(c):h.set(s,[c]);return h.each((function(e,t){l(_,t,a(e,i,o,l))})),_}function o(e,n){if(++n>r.length)return e;var a,l=i[n-1];return null!=t&&n>=r.length?a=e.entries():(a=[],e.each((function(e,t){a.push({key:t,values:o(e,n)})}))),null!=l?a.sort((function(e,t){return l(e.key,t.key)})):a}return n={object:function(e){return a(e,0,yi,bi)},map:function(e){return a(e,0,mi,gi)},entries:function(e){return o(a(e,0,mi,gi),0)},key:function(e){return r.push(e),n},sortKeys:function(e){return i[r.length-1]=e,n},sortValues:function(t){return e=t,n},rollup:function(e){return t=e,n}}}function yi(){return{}}function bi(e,t,n){e[t]=n}function mi(){return hi()}function gi(e,t,n){e.set(t,n)}function vi(){}pi.prototype=hi.prototype={constructor:pi,has:function(e){return fi+e in this},get:function(e){return this[fi+e]},set:function(e,t){return this[fi+e]=t,this},remove:function(e){var t=fi+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===fi&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===fi&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===fi&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===fi&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===fi&&++e;return e},empty:function(){for(var e in this)if(e[0]===fi)return!1;return!0},each:function(e){for(var t in this)t[0]===fi&&e(this[t],t.slice(1),this)}};var xi=hi.prototype;function wi(e,t){var n=new vi;if(e instanceof vi)e.each((function(e){n.add(e)}));else if(e){var r=-1,i=e.length;if(null==t)for(;++r<i;)n.add(e[r]);else for(;++r<i;)n.add(t(e[r],r,e))}return n}vi.prototype=wi.prototype={constructor:vi,has:xi.has,add:function(e){return this[fi+(e+="")]=e,this},remove:xi.remove,clear:xi.clear,values:xi.keys,size:xi.size,empty:xi.empty,each:xi.each};var ki,Mi,zi=(ki=document.createElement("canvas").getContext("2d"),function(e,t){return ki.font=t||"10px sans-serif",ki.measureText(e).width});function Ai(e,t,n){var r,i,a,o,l,s={},c=ue(n).append("div").attr("class","fl-control fl-control-slider").style("flex","1"),u=c.append("div").attr("class","slider-play").attr("role","button").attr("aria-label","play-button").attr("cursor","pointer").attr("tabindex",0),d=c.append("div").attr("class","fl-controls-slider").style("display","none").style("align-items","center"),f=null;const p=d.append("input").attr("type","range").attr("id","slider-range").attr("name","slider-range").attr("value",0),h=d.append("label").attr("class","slider-label").attr("for","slider-range");var _=function(){clearTimeout(f),f=null},y=function(t){var n=a[t];n.options_index!==e.index()&&(e.index(n.options_index),e.trigger("change"))},b=function(){_(),c.classed("playing",!1),u.html(r).attr("aria-label","play-button"),e._isPlaying_(!1),l=!1},m=function(){var n=e.getSortedIndex(),r=o[n],i=e.n_options-1,a=n<i?n+1:0;f=setTimeout((function(){y(a),t.slider_loop||a<i?m():b()}),r)},g=function(){c.classed("playing",!0),u.html(i).attr("aria-label","pause-button"),m(),e._isPlaying_(!0),l=!0};u.on("click",(function(){null===f?g():b()})).on("keyup",(function(){"Space"!==K.code&&"Enter"!==K.code||(K.preventDefault(),null===f?g():b())}));var v=function(e){const n=Math.min(Math.ceil(e),Mi(t.slider_max_label_width))+"px";return h.style("width",n).style("flex-shrink",0),c.style("display","inline-flex"),p.style("width",Mi(t.slider_width)+"px"),r='<svg aria-hidden="true" width="25px" height="30px" viewBox="0 0 25 30"> <polygon stroke="none" points="25 15 0 30 0 0"></polygon> </svg>',i='<svg aria-hidden="true" width="26px" height="30px" viewBox="0 0 26 30"> <g stroke="none" stroke-width="1"quarter><rect x="2" y="2" width="9" height="26"></rect> <rect x="15" y="2" width="9" height="26"></rect> </g> </svg>',u.html(f?i:r),s},x=function(){return b(),c.style("display","none"),s};return s.show=v,s.hide=x,s.update=function(n,r){if(d.style("display","flex"),a=n,!e.n_options||"slider"!==t.control_type)return x(),s;var i=window.getComputedStyle(h.node()).fontSize,u=window.getComputedStyle(h.node()).fontFamily,w=window.getComputedStyle(c.node()).fontWeight;let k=0;const M=w+" "+i+" "+u+", sans-serif";a.forEach((function(e){const t=zi(e.display,M);k=Math.max(k,t)})),r?v(k):x();var z=e.n_options,A=t.slider_loop;o=a.map((function(e,n){return 1e3*(t.slider_step_time+(A&&n===z-1?t.slider_restart_pause:0))}));var E=e.getSortedIndex(),C=a[E],T=a[0].display,N=a[a.length-1].display;return p.attr("min",0).attr("max",z-1).attr("step",1).attr("aria-valuenow",C.display).attr("aria-valuemin",T).attr("aria-valuemax",N).on("input",(function(){var e=null!==f;e&&_(),y(this.value),e&&m()})),p.node().value=E,h.html(C.display),e._isPlaying_()&&!l?g():!e._isPlaying_()&&l&&b(),s},s}var Ei=Object.freeze({alignment:"start",controls_spacing:1});function Ci(e){for(var t in this._state=e,Ei)void 0===this._state[t]&&(this._state[t]=Ei[t]);return this}Ci.prototype.appendTo=function(e){return this._container=ue(e).append("div").node(),this},Ci.prototype.add=function(e){return this._controls=Array.isArray(e)?e:[e],this._controls.forEach((function(e){e&&"function"==typeof e.appendTo?e.appendTo(this._container):console.warn("Please pass valid controls instances to .add()")}),this),this},Ci.prototype.update=function(){this._controls.forEach((function(e){e&&"function"==typeof e.update&&e.update()}));var e=this._state.alignment,t="center"==e?e:"flex-"+e,n=window.template||void 0,r=n?n.state.layout:void 0,i=r&&r.read_direction||ue("body").node().dir||"ltr",a=e;"rtl"===i&&"center"!==e&&(a="start"===e?"end":"start"),ue(this._container).classed("is-rtl","rtl"==i).style("display","flex").style("flex-wrap","wrap").style("justify-content",t);var o,l,s=ue(this._container).selectAll(".fl-controls-container"),c=this._state.controls_spacing;switch(a){case"end":o=c+"em",l=0;break;case"center":o=.5*c+"em",l=.5*c+"em";break;default:o=0,l=c+"em"}return s.style("margin-left",o).style("margin-right",l),this};var Ti=Object.freeze({control_type:"dropdown",control_title:"",dropdown_width_mode:"auto",dropdown_width_fixed:20,button_group:!0,button_group_width_mode:"auto",button_group_width_fixed:20,slider_width:15,slider_max_label_width:20,slider_handle_height:1,slider_track_height:.2,slider_margin:4.5,slider_play_button:!0,slider_step_time:2,slider_loop:!0,slider_restart_pause:0,sort:!1,_index_:null,_is_playing_:!1});function Ni(e){return e}function Si(e){return null==e?"":e.toString()}function Li(e,t){var n={},r=Ni,i=Si,a=[],o=!0,l=[],s=[],c=[],u=document.createElement("div");t&&u.setAttribute("id",t),u.setAttribute("class","fl-controls-container");var d=ue(u).append("div").attr("class","fl-controls-title"),f=function(e,t,n){var r={},i=ue(n).append("div").attr("class","fl-control fl-control-dropdown").style("display","none");const a=i.append("select").on("change",(function(){const t=a.select("option:checked").datum().options_index;e.index(t),e.trigger("change")}));var o=function(e){var r="100%";"auto"==t.dropdown_width_mode?r=Math.min(e+40,Mi(20))+Mi(1)+"px":"fixed"==t.dropdown_width_mode&&(r=Mi(t.dropdown_width_fixed)+"px"),n.style.width="full"==t.dropdown_width_mode?r:"",i.style("width",r).style("display","full"!==t.dropdown_width_mode?"inline-table":null)},l=function(){i.style("display","none")};return r.show=o,r.hide=l,r.update=function(n,i){var s=window.getComputedStyle(a.node()).fontSize;if(!e.n_options||"dropdown"!==t.control_type)return l(),r;const c=a.selectAll("option").data(n,(e=>e.value));c.exit().remove();var u=c.enter().append("option");c.merge(u).text((e=>e.display)).attr("value",(e=>e.value));let d=0;const f=s+" sans-serif";return"auto"===t.dropdown_width_mode&&c.merge(u).each((function(e){const t=zi(e.display,f);d=Math.max(d,t)})),a.node().value=e.value(),i?o(d):l(),r},r}(n,e,u),p=function(e,t,n){var r={},i=ue(n).append("div").attr("class","fl-control fl-control-buttons"),a=function(){i.classed("hidden",!1)},o=function(){i.classed("hidden",!0)};return r.show=a,r.hide=o,r.update=function(n,l){if(!e.n_options||"buttons"!==t.control_type)return o(),r;var s=e.index();i.classed("grouped",t.button_group),i.classed("fixed-width","fixed"==t.button_group_width_mode||"full"==t.button_group_width_mode),i.style("width",t.button_group&&"fixed"==t.button_group_width_mode?Mi(t.button_group_width_fixed)+"px":"full"==t.button_group_width_mode?"100%":null);var c=function(t){var n=t.options_index;n!==e.index()&&(e.index(n),e.trigger("change"))},u=i.selectAll(".button").data(n,(function(e){return e.display})),d=u.enter().append("div").attr("class","button").style("cursor","pointer").attr("role","button").attr("tabindex",0).on("click",(function(e){c(e)})).on("keyup",(function(e){"Space"!==K.code&&"Enter"!==K.code||(K.preventDefault(),c(e))}));d.append("span").text((function(e){return e.display})),u.merge(d).classed("selected",(function(e){return e.options_index===s})).attr("aria-pressed",(function(e){return e.options_index===s})),u.exit().remove(),l?a():o()},r}(n,e,u),h=Ai(n,e,u);for(var _ in Ti)void 0===e[_]&&(e[_]=Ti[_]);var y=e._index_;n.appendTo=function(e){return ir(),ue(e).node().appendChild(u),n};n.remove=function(){return u.parentElement&&u.parentElement.removeChild(u),n},n.options=function(e){if(void 0===e)return l.slice();if(!Array.isArray(e))return n;var t=(l=e.slice()).length,r=b();return t?(null===r||r>=t)&&b(0):b(null),n},Object.defineProperty(n,"n_options",{get:function(){return l.length}});var b=function(t){return void 0===t?(e._is_playing_||(y=e._index_),y):(null===t||function(e){return l.length&&e>=0&&e<l.length}(t)?(y=t,e._is_playing_||(e._index_=y)):console.warn("Invalid index, ignoring update call"),n)};n.index=b,n.getSortedIndex=function(){var t,n=b();return"unsorted"==e.sort?n:(s.some((function(e,r){if(e.options_index===n)return t=r,!0})),t)},n.value=function(e){if(void 0===e)return l[b()];var t=l.indexOf(e);return-1!==t&&b(t),n},n.on=function(e,t){return"change"===e&&c.push(t.bind(n)),n},n.parse=function(e){return void 0===e?r:(r=null===e?Ni:e,n)},n.format=function(e,t){if(void 0===e)return i;if(null===e&&(i=Si),"string"==typeof e)try{i=er(e)}catch(e){i=Si,console.warn(e.message)}else i=e;return t&&Array.isArray(t)&&(a=t),n},n.visible=function(e){return void 0===e?o:(o=null===e||e,n)},n.update=function(){return function(){var e=parseFloat(getComputedStyle(document.documentElement).fontSize)||16;Mi=function(t){return t*e}}(),s=function(e,t,n,r,i){var a=e.map((function(e,t){return{value:e,options_index:t,parsed:n(e),display:i.includes(e)?e:r(e)}}));return t?a.sort((function(e,t){return function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}(e.parsed,t.parsed)})):a}(l,e.sort,r,i,a),function(t){u.style.display=t.length>1?"flex":"none",u.style.width="",u.style.alignItems="center",d.node().innerHTML=e.control_title,d.node().style.display=""===e.control_title?"none":"inline-block",h.update(t,o),f.update(t,o),p.update(t,o)}(s),n},n.trigger=function(e){var t,r;return"change"===e&&(t=b(),r=l[t],c.forEach((function(e){e(r,t)}))),n},n.getNode=function(){return u};return n._isPlaying_=function(t){if(void 0===t)return e._is_playing_;e._is_playing_=!!t,t||b(y)},n}function Oi(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Fi(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ji(){}var Pi=.7,$i=1/Pi,Bi="\\s*([+-]?\\d+)\\s*",Di="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",qi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Hi=/^#([0-9a-f]{3,8})$/,Ri=new RegExp(`^rgb\\(${Bi},${Bi},${Bi}\\)$`),Yi=new RegExp(`^rgb\\(${qi},${qi},${qi}\\)$`),Ui=new RegExp(`^rgba\\(${Bi},${Bi},${Bi},${Di}\\)$`),Ii=new RegExp(`^rgba\\(${qi},${qi},${qi},${Di}\\)$`),Wi=new RegExp(`^hsl\\(${Di},${qi},${qi}\\)$`),Vi=new RegExp(`^hsla\\(${Di},${qi},${qi},${Di}\\)$`),Gi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Xi(){return this.rgb().formatHex()}function Zi(){return this.rgb().formatRgb()}function Ji(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Hi.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Qi(t):3===n?new ta(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Ki(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Ki(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Ri.exec(e))?new ta(t[1],t[2],t[3],1):(t=Yi.exec(e))?new ta(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Ui.exec(e))?Ki(t[1],t[2],t[3],t[4]):(t=Ii.exec(e))?Ki(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Wi.exec(e))?la(t[1],t[2]/100,t[3]/100,1):(t=Vi.exec(e))?la(t[1],t[2]/100,t[3]/100,t[4]):Gi.hasOwnProperty(e)?Qi(Gi[e]):"transparent"===e?new ta(NaN,NaN,NaN,0):null}function Qi(e){return new ta(e>>16&255,e>>8&255,255&e,1)}function Ki(e,t,n,r){return r<=0&&(e=t=n=NaN),new ta(e,t,n,r)}function ea(e,t,n,r){return 1===arguments.length?((i=e)instanceof ji||(i=Ji(i)),i?new ta((i=i.rgb()).r,i.g,i.b,i.opacity):new ta):new ta(e,t,n,null==r?1:r);var i}function ta(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function na(){return`#${oa(this.r)}${oa(this.g)}${oa(this.b)}`}function ra(){const e=ia(this.opacity);return`${1===e?"rgb(":"rgba("}${aa(this.r)}, ${aa(this.g)}, ${aa(this.b)}${1===e?")":`, ${e})`}`}function ia(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function aa(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function oa(e){return((e=aa(e))<16?"0":"")+e.toString(16)}function la(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ca(e,t,n,r)}function sa(e){if(e instanceof ca)return new ca(e.h,e.s,e.l,e.opacity);if(e instanceof ji||(e=Ji(e)),!e)return new ca;if(e instanceof ca)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,l=a-i,s=(a+i)/2;return l?(o=t===a?(n-r)/l+6*(n<r):n===a?(r-t)/l+2:(t-n)/l+4,l/=s<.5?a+i:2-a-i,o*=60):l=s>0&&s<1?0:o,new ca(o,l,s,e.opacity)}function ca(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function ua(e){return(e=(e||0)%360)<0?e+360:e}function da(e){return Math.max(0,Math.min(1,e||0))}function fa(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function pa(e,t){if("string"==typeof e&&(e=document.querySelector(e)),!e)return console.error("No valid target in createScreenshotSVG"),null;const{width:n,height:r,x:i,y:a}=e.getBoundingClientRect(),o=document.createElementNS("http://www.w3.org/2000/svg","svg");return o.id=t,o.classList.add("flourish-screenshot-svg-container"),o.style.left=i+"px",o.style.top=a+"px",o.style.width=n+"px",o.style.height=r+"px",o.style.position="absolute",e.appendChild(o),{addTextElements:function(t){if("string"==typeof t&&(t=e.querySelectorAll(t)),!t)return console.error("No valid els inside addTextElements"),null;for(const e of t){const{x:t,y:n,width:r}=e.getBoundingClientRect(),i=document.createElementNS("http://www.w3.org/2000/svg","text"),{color:a,"font-family":l,"font-size":s,"font-weight":c,"line-height":u,"padding-left":d,"padding-top":f}=window.getComputedStyle(e),p=`${c} ${s} ${l}`,h=va(e.innerText,p,null,Math.ceil(r)),_=isNaN(parseFloat(u))?1.2*parseFloat(s)+"px":u,y=window.getComputedStyle(e.closest("[style*='opacity']")||e).opacity;h.forEach(((e,n)=>{const r=document.createElementNS("http://www.w3.org/2000/svg","tspan");r.innerHTML=e,r.setAttribute("dy",0===n?parseFloat(f):_),r.setAttribute("dx",parseFloat(d)),r.setAttribute("x",t),r.setAttribute("opacity",y),i.appendChild(r)})),i.style.dominantBaseline="text-before-edge",i.setAttribute("x",t+"px"),i.setAttribute("y",n+"px"),i.setAttribute("font-family",l),i.setAttribute("font-size",s),i.setAttribute("font-weight",c),i.setAttribute("fill",a),o.appendChild(i)}return this},addCircleElements:function(t){if("string"==typeof t&&(t=e.querySelectorAll(t)),!t)return console.error("No valid els inside addCircleElements"),null;for(const e of t){const t=document.createElementNS("http://www.w3.org/2000/svg","circle"),{x:n,y:r,width:i}=e.getBoundingClientRect(),a=window.getComputedStyle(e)["background-color"],l=window.getComputedStyle(e.closest("[style*='opacity']")||e).opacity,s=i/2;t.setAttribute("cx",n+s+"px"),t.setAttribute("cy",r+s+"px"),t.setAttribute("r",s+"px"),t.setAttribute("opacity",l),t.setAttribute("fill",a),"rgba(0, 0, 0, 0)"===a&&t.setAttribute("stroke","#CCC"),o.appendChild(t)}return this},addGradient:function(t,n,r){if("string"==typeof t&&(t=e.querySelector(t)),!t)return console.error("No valid els inside addCircleElements"),null;const i=document.createElementNS("http://www.w3.org/2000/svg","g"),{x:a,y:l,width:s,height:c}=t.getBoundingClientRect(),{max:u,min:d}=r,f=u-d;for(let e=0;e<=s;e++){const t=document.createElementNS("http://www.w3.org/2000/svg","line");t.setAttribute("stroke",n(d+e*f/s)),t.setAttribute("x1",e+a),t.setAttribute("y1",l),t.setAttribute("x2",e+a),t.setAttribute("y2",c+l),i.appendChild(t)}return o.appendChild(i),this},remove:function(){o.remove()}}}function ha(e){return"string"==typeof e&&null!=e.match(/^(https?:\/\/|data:)/i)}Oi(ji,Ji,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Xi,formatHex:Xi,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return sa(this).formatHsl()},formatRgb:Zi,toString:Zi}),Oi(ta,ea,Fi(ji,{brighter(e){return e=null==e?$i:Math.pow($i,e),new ta(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?Pi:Math.pow(Pi,e),new ta(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ta(aa(this.r),aa(this.g),aa(this.b),ia(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:na,formatHex:na,formatHex8:function(){return`#${oa(this.r)}${oa(this.g)}${oa(this.b)}${oa(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:ra,toString:ra})),Oi(ca,(function(e,t,n,r){return 1===arguments.length?sa(e):new ca(e,t,n,null==r?1:r)}),Fi(ji,{brighter(e){return e=null==e?$i:Math.pow($i,e),new ca(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?Pi:Math.pow(Pi,e),new ca(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ta(fa(e>=240?e-240:e+120,i,r),fa(e,i,r),fa(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ca(ua(this.h),da(this.s),da(this.l),ia(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ia(this.opacity);return`${1===e?"hsl(":"hsla("}${ua(this.h)}, ${100*da(this.s)}%, ${100*da(this.l)}%${1===e?")":`, ${e})`}`}}));const _a=document.createElement("canvas").getContext("2d");function ya(e){var t,n;return window.innerWidth!==t&&(t=window.innerWidth,n=parseFloat(getComputedStyle(document.documentElement).fontSize)),e*n}function ba(e,t){return function(e,t){_a.font=t||"10px sans-serif";var n=_a.measureText(e);return{width:n.width,height:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent}}(e,t).width}function ma(){return window.getComputedStyle(document.body).direction||"ltr"}function ga(e,t){var n=function(e,t){if("string"!=typeof e)return!1;var n=Ji(e);return n.opacity=void 0!==t?t:1,n}(e,t);return!!n&&n.toString()}function va(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];"string"!=typeof e&&(e=String(e));const a=e=>_a.measureText(e).width>r,o=(e,t)=>{let n=_a.measureText(e).width;if(n<=t)return e;let r=1,i=e;do{i=e.substring(0,e.length-r)+"…",n=_a.measureText(i).width}while(n>t&&++r<e.length);return i.length<1&&(i=e.substring(0,1)+"…"),i};_a.font=t;let l=[];if(Object.defineProperty(l,"widest_line",{value:0,enumerable:!0,writable:!0}),Object.defineProperty(l,"has_truncated",{value:!1,enumerable:!0,writable:!0}),void 0===e||Number.isInteger(n)&&n<=0)return l;if(0===e.length)return l.push(""),l;if(r<=0)return e.length>0&&(l.push(e.slice(0,1)+"…"),l.widest_line=_a.measureText(l[0]).width),l;if(!e||0===e.length||0===n||r<=0)return l;const s=e.split(/\s+/g);if(!a(e))return l.push(e),l.widest_line=_a.measureText(e).width,l.has_truncated=!1,l;let c=new String(s[0]);if(c&&a(c))return i?c=o(c,r):s.length>1&&(c+="…"),l.push(c),l.widest_line=_a.measureText(c).width,l.has_truncated=!0,l;let u="",d=!1;if(s.forEach((e=>{if(!d)if(a(u+(u?" ":"")+e)){if(u){_a.measureText(u).width>r&&(u=o(u,r),d=!0),l.push(u),u=""}u=e}else u+=(u?" ":"")+e})),u&&!d&&l.push(o(u,r)),l.length>n){if(l.length>n&&Number.isInteger(n)){l.splice(n,l.length-n);let e=l[l.length-1];a(e+"…")&&(e=o(e,r-_a.measureText("…").width)),"…"!==e.slice(-1)&&(e+="…"),l[l.length-1]=e,d=!0}}return l.widest_line=Math.max(...l.map((e=>_a.measureText(e).width))),l.has_truncated=d,l}var xa,wa,ka;function Ma(){document.body.querySelector(".font-samples").innerHTML=""}function za(e){ka||(ka=e||["normal","bold"]);var t="";["mobile_big","tablet","desktop","big_screen"].forEach((function(e){var n="@media(min-width: "+lo["breakpoint_"+e]+"px) {\n",r="html { font-size:"+lo["font_size_"+e]+"%; }";t+=n+r+"\n}\n\n"}));var n="html { \n font-size:"+lo.font_size_mobile_small+"%; \n -webkit-font-smoothing: antialiased; \n -moz-osx-font-smoothing: auto; } \n\n\n";xa.innerHTML=n+t;var r=[lo.body_font,lo.title_font,lo.subtitle_font,lo.footer_font];r.forEach((function(e){if(e){for(var t=!1,n=document.head.querySelectorAll("link.layout-font"),r=0;r<n.length;r++){n[r].href==e.url&&(t=!0)}if(!t){var i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("href",e.url),i.className="layout-font",document.head.appendChild(i),function(e){document.body.querySelector(".font-samples")||((wa=document.createElement("div")).className="font-samples",wa.style.visibility="hidden",wa.style.overflow="hidden",wa.style.height=0,document.body.appendChild(wa)),ka.forEach((function(t){var n=document.createElement("div");n.className="font-sample-el",n.innerText=e.name,n.style.fontFamily=e.name,n.style.fontWeight=t,wa.appendChild(n)}))}(e)}}}));for(var i=document.head.querySelectorAll("link.layout-font"),a=0;a<i.length;a++){var o=i[a],l=!1;r.forEach((function(e){e&&e.url==o.href&&(l=!0)})),l||o.parentElement.removeChild(o)}document.body.style.fontFamily=lo.body_font.name}var Aa,Ea,Ca,Ta,Na,Sa,La,Oa,Fa,ja,Pa=Object.freeze({"stack-default":["header","controls","primary","footer"],"stack-2":["primary","header","controls","footer"],"stack-3":["header","primary","controls","footer"],"stack-4":["controls","primary","header","footer"],"grid-1":{wrapper:{display:"grid","grid-template-rows":"min-content min-content minmax(min-content,auto) min-content","grid-template-columns":"1fr 2fr"},header:{"grid-column-start":1},legend:{"grid-column-start":1},controls:{"grid-column-start":1},primary:{"grid-column-start":2,"grid-row":"1 / -1"},footer:{"grid-column-start":"1","grid-row-start":4}}});function $a(e){return window.innerWidth!==Aa&&(Aa=window.innerWidth,Ea=parseFloat(getComputedStyle(document.documentElement).fontSize)),e*Ea}function Ba(e){return"justify"==e?"":"left"==e?"start":"right"==e?"end":"center"==e?"center":void 0}function Da(e){return 0!==e.indexOf("http://")&&0!==e.indexOf("https://")?"http://"+e:e}function qa(){return lo.header_logo_enabled&&lo.header_logo_src}function Ha(){var e="top"==lo.header_border||"top_and_bottom"==lo.header_border,t="bottom"==lo.header_border||"top_and_bottom"==lo.header_border;Ca.style.textAlign=Ba(lo.header_align),Ca.style.margin=0,Ca.style.borderTop=e?lo.header_border_width+"px "+lo.header_border_style+" "+lo.header_border_color:null,Ca.style.borderBottom=t?lo.header_border_width+"px "+lo.header_border_style+" "+lo.header_border_color:null,Ca.style.paddingTop=e?lo.header_border_space+"rem":"",Ca.style.paddingBottom=t?lo.header_border_space+"rem":"",Ta.innerHTML=lo.title?lo.title:"",Ta.setAttribute("id","flourish-header-title"),Ta.style.fontFamily=lo.title_font?lo.title_font.name:"inherit",Ta.style.fontSize=("custom"!=lo.title_size?lo.title_size:lo.title_size_custom)+"rem",Ta.style.lineHeight=lo.title_line_height,Ta.style.fontWeight=lo.title_weight,Ta.style.color=lo.title_color||lo.font_color,Ta.style.margin=0,Ta.style.paddingTop=lo.title?("custom"==lo.title_space_above?lo.title_space_above_custom:lo.title_space_above)+"rem":0,Na.innerHTML=lo.subtitle?lo.subtitle:"",Na.setAttribute("id","flourish-header-subtitle"),Na.style.fontFamily=lo.subtitle_font?lo.subtitle_font.name:"inherit",Na.style.fontSize=("custom"!=lo.subtitle_size?lo.subtitle_size:lo.subtitle_size_custom)+"rem",Na.style.lineHeight=lo.subtitle_line_height,Na.style.fontWeight=lo.subtitle_weight,Na.style.color=lo.subtitle_color||lo.font_color,Na.style.margin=0,Na.style.paddingTop=lo.subtitle?("custom"==lo.subtitle_space_above?lo.subtitle_space_above_custom:lo.subtitle_space_above)+"rem":0,Sa.innerHTML=lo.header_text?lo.header_text:"",Sa.setAttribute("id","flourish-header-text"),Sa.style.fontSize=("custom"!=lo.header_text_size?lo.header_text_size:lo.header_text_size_custom)+"rem",Sa.style.lineHeight=lo.header_text_line_height,Sa.style.fontWeight=lo.header_text_weight,Sa.style.margin=0,Sa.style.color=lo.header_text_color||lo.font_color,Sa.style.paddingTop=lo.header_text?("custom"==lo.header_text_space_above?lo.header_text_space_above_custom:lo.header_text_space_above)+"rem":0,La.style.clear="both",Oa.innerHTML="",qa()&&((Fa=Fa||document.createElement("img")).className="flourish-header-logo",Fa.src=Da(lo.header_logo_src),Fa.alt=lo.header_logo_alt,Fa.style.position="inside"==lo.header_logo_align?"":"fixed",Fa.style.height=lo.header_logo_height+"rem",Fa.style.top="outside"==lo.header_logo_align?0:"",Fa.style.left="outside"==lo.header_logo_align&&"left"==lo.header_logo_position_outside?0:"",Fa.style.right="outside"==lo.header_logo_align&&"right"==lo.header_logo_position_outside?0:"",Fa.style.marginTop=lo.header_logo_margin_top+"rem",Fa.style.marginBottom=lo.header_logo_margin_bottom+"rem",Fa.style.marginLeft=lo.header_logo_margin_left+"rem",Fa.style.marginRight=lo.header_logo_margin_right+"rem",Fa.style.float="top"==lo.header_logo_position_inside||"outside"==lo.header_logo_align?"":lo.header_logo_position_inside,Fa.style.width="auto",lo.header_logo_link_url?((ja=document.createElement("a")).target="_blank",ja.appendChild(Fa),Oa.appendChild(ja),Fa.style.cursor="pointer",ja.href=Da(lo.header_logo_link_url)):Oa.appendChild(Fa))}
/** @preserve
  /////    SAPC APCA - Advanced Perceptual Contrast Algorithm
  /////           Beta 0.1.9 W3 • contrast function only
  /////           DIST: W3 • Revision date: July 3, 2022
  /////    Function to parse color values and determine Lc contrast
  /////    Copyright © 2019-2022 by Andrew Somers. All Rights Reserved.
  /////    LICENSE: W3 LICENSE
  /////    CONTACT: Please use the ISSUES or DISCUSSIONS tab at:
  /////    https://github.com/Myndex/SAPC-APCA/
  /////
  ///////////////////////////////////////////////////////////////////////////////
  /////
  /////    MINIMAL IMPORTS:
  /////      import { APCAcontrast, sRGBtoY, displayP3toY,
  /////               calcAPCA, fontLookupAPCA } from 'apca-w3';
  /////      import { colorParsley } from 'colorparsley';
  /////
  /////    FORWARD CONTRAST USAGE:
  /////      Lc = APCAcontrast( sRGBtoY( TEXTcolor ) , sRGBtoY( BACKGNDcolor ) );
  /////    Where the colors are sent as an rgba array [255,255,255,1]
  /////
  /////    Retrieving an array of font sizes for the contrast:
  /////      fontArray = fontLookupAPCA(Lc);
  /////
  /////    Live Demonstrator at https://www.myndex.com/APCA/
  // */
const Ra={mainTRC:2.4,get mainTRCencode(){return 1/this.mainTRC},sRco:.2126729,sGco:.7151522,sBco:.072175,normBG:.56,normTXT:.57,revTXT:.62,revBG:.65,blkThrs:.022,blkClmp:1.414,scaleBoW:1.14,scaleWoB:1.14,loBoWoffset:.027,loWoBoffset:.027,deltaYmin:5e-4,loClip:.1,mFactor:1.9468554433171,get mFactInv(){return 1/this.mFactor},mOffsetIn:.0387393816571401,mExpAdj:.283343396420869,get mExp(){return this.mExpAdj/this.blkClmp},mOffsetOut:.312865795870758};function Ya(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0];function t(e){return Math.pow(e/255,Ra.mainTRC)}return Ra.sRco*t(e[0])+Ra.sGco*t(e[1])+Ra.sBco*t(e[2])}function Ua(e,t){if("string"!=typeof e)return!1;var n=Ji(e);return n.opacity=void 0!==t?t:1,n}function Ia(e,t){if(!e||!t)return void console.warn("No valid color",e,t);const n=Ya(Object.values(Ua(e))),r=Ya(Object.values(Ua(t)));return Math.abs(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;const r=[0,1.1];if(isNaN(e)||isNaN(t)||Math.min(e,t)<r[0]||Math.max(e,t)>r[1])return 0;let i=0,a=0,o="BoW";return e=e>Ra.blkThrs?e:e+Math.pow(Ra.blkThrs-e,Ra.blkClmp),t=t>Ra.blkThrs?t:t+Math.pow(Ra.blkThrs-t,Ra.blkClmp),Math.abs(t-e)<Ra.deltaYmin?0:(t>e?(i=(Math.pow(t,Ra.normBG)-Math.pow(e,Ra.normTXT))*Ra.scaleBoW,a=i<Ra.loClip?0:i-Ra.loBoWoffset):(o="WoB",i=(Math.pow(t,Ra.revBG)-Math.pow(e,Ra.revTXT))*Ra.scaleWoB,a=i>-Ra.loClip?0:i+Ra.loWoBoffset),n<0?100*a:0==n?Math.round(100*Math.abs(a))+"<sub>"+o+"</sub>":Number.isInteger(n)?(100*a).toFixed(n):0)}(n,r))}function Wa(e){if(!e)return void console.warn("No valid color",e);const t=Ia("#000000",e);return Ia("#ffffff",e)<t}var Va,Ga,Xa,Za,Ja,Qa=!1;function Ka(){var e;return(e=document.createElement("style")).type="text/css",e.innerHTML=".flourish-footer { margin: 0; } .flourish-footer p { margin: 0; display: inline; } .flourish-footer p:empty { height: 0; } .flourish-footer a { color: inherit; }",document.head.appendChild(e),(Va=document.createElement("footer")).className="flourish-footer",(Ga=document.createElement("div")).className="flourish-footer-text",Ga.setAttribute("id","flourish-footer-text"),(Xa=document.createElement("div")).className="flourish-footer-logo-container",Va.appendChild(Ga),Va.appendChild(Xa),Va}function eo(){var e=lo.footer_logo_src?lo.footer_logo_src:"";return lo.footer_logo_src_light&&lo.background_color_enabled&&!Wa(lo.background_color)&&(e=lo.footer_logo_src_light),e}function to(){return lo.footer_logo_enabled&&eo()}function no(){var e=[{name:lo.source_name,url:lo.source_url},{name:lo.multiple_sources?lo.source_name_2:"",url:lo.multiple_sources?lo.source_url_2:""},{name:lo.multiple_sources?lo.source_name_3:"",url:lo.multiple_sources?lo.source_url_3:""}].filter((function(e){return e.name||e.url}));Qa=e.length>0||lo.footer_note||lo.footer_note_secondary||to();var t,n="top"==lo.footer_border||"top_and_bottom"==lo.footer_border,r="bottom"==lo.footer_border||"top_and_bottom"==lo.footer_border;Va.style.display="flex",Va.style.height=Qa?null:0,Va.style.width="100%",Va.style.paddingTop=n?lo.footer_border_space+"rem":"",Va.style.paddingBottom=r?lo.footer_border_space+"rem":"",Va.style.borderTop=n?lo.footer_border_width+"px "+lo.footer_border_style+" "+lo.footer_border_color:"",Va.style.borderBottom=r?lo.footer_border_width+"px "+lo.footer_border_style+" "+lo.footer_border_color:"",Va.style.fontFamily=lo.footer_font?lo.footer_font.name:"inherit",Va.style.fontWeight=lo.footer_text_weight,Va.style.justifyContent="justify"==(t=lo.footer_align)?"space-between":"left"==t?"flex-start":"right"==t?"flex-end":"center"==t?"center":void 0,Va.style.fontSize=lo.footer_text_size+"rem",Va.style.color=lo.footer_text_color||lo.font_color,Va.style.alignItems=lo.footer_align_vertical;var i=document.createElement("span");e.forEach((function(e,t){var n=document.createElement("p");if(t>0&&(n.innerText=", "),e.url){var r=document.createElement("a");r.innerText=e.name||e.url,r.href=Da(e.url),r.target="_blank",n.appendChild(r)}else n.innerText+=e.name||e.url;i.innerHTML+=n.innerHTML})),Ga.style.order="left"==lo.footer_logo_order?2:"",Ga.style.textAlign=Ba(lo.footer_align);var a="<p>";a+=""!==i.innerHTML?lo.source_label+" "+i.innerHTML:"",a+=lo.footer_note?(""!==i.innerHTML?" • ":"")+lo.footer_note:"",a+="</p>",a+=lo.footer_note_secondary?"<br /><p>"+lo.footer_note_secondary+"</p>":"",Ga.innerHTML=a,Xa.innerHTML="",to()&&((Za=Za||document.createElement("img")).className="flourish-footer-logo",Za.src=Da(eo()),Za.alt=lo.footer_logo_alt,Za.style.height=lo.footer_logo_height+"rem",Za.style.marginRight="left"==lo.footer_logo_order?lo.footer_logo_margin+"rem":"",Za.style.marginLeft="right"==lo.footer_logo_order?lo.footer_logo_margin+"rem":"",Za.style.verticalAlign=lo.footer_align_vertical,Za.style.display=to()?"":"none",lo.footer_logo_link_url?((Ja=document.createElement("a")).target="_blank",Ja.appendChild(Za),Xa.appendChild(Ja),Za.style.cursor="pointer",Ja.href=Da(lo.footer_logo_link_url)):Xa.appendChild(Za))}function ro(){za(),Ha(),no(),document.body.style.backgroundColor=lo.background_color_enabled?lo.background_color:"transparent",document.body.style.backgroundImage=lo.background_image_enabled?"url("+lo.background_image_src+")":"",document.body.style.backgroundSize=lo.background_image_size,document.body.style.backgroundRepeat="no-repeat",document.body.style.backgroundPosition=lo.background_image_position;var e=ho.wrapper.style;e.display="flex",e.height="100vh",e.color=lo.font_color,e.maxWidth="wrapper"==lo.max_width_target?lo.max_width+"px":"",e.marginLeft="wrapper"==lo.max_width_target&&"left"!=lo.max_width_align?"auto":"",e.marginRight="wrapper"==lo.max_width_target&&"right"!=lo.max_width_align?"auto":"",e.padding=lo.margin_top+"rem "+lo.margin_right+"rem "+lo.margin_bottom+"rem "+lo.margin_left+"rem",e.borderTop=lo.border.enabled?lo.border.top.width+"px "+lo.border.top.style+" "+lo.border.top.color:"",e.borderRight=lo.border.enabled?lo.border.right.width+"px "+lo.border.right.style+" "+lo.border.right.color:"",e.borderBottom=lo.border.enabled?lo.border.bottom.width+"px "+lo.border.bottom.style+" "+lo.border.bottom.color:"",e.borderLeft=lo.border.enabled?lo.border.left.width+"px "+lo.border.left.style+" "+lo.border.left.color:"";var t=ho.primary.outer.style,n=ho.legend.outer.style,r=parseFloat(t.order)>parseFloat(n.order)?"above":"below",i=io();if("stack"==i.mode)i.elements.forEach((function(e,t){ho[e].outer.style.order=10*t}));else for(var a in i.elements)for(var o in i.elements[a]){var l=ho[a].outer||ho[a];l.style[o]=i.elements[a][o],l.style.order=""}ho.header.outer.style.display="",ho.footer.outer.style.display="",ho.controls.outer.style.display="",t.display="flex",n.display="",t.flex="1 1 auto",t.height=null,Oo(r),ho.primary.outer.style.maxWidth="primary"==lo.max_width_target?lo.max_width+"px":"",ho.primary.outer.style.marginLeft="primary"==lo.max_width_target&&"left"!=lo.max_width_align?"auto":"",ho.primary.outer.style.marginRight="primary"==lo.max_width_target&&"right"!=lo.max_width_align?"auto":"";var s=""!=lo.screenreader_text_primary.trim(),c=document.getElementById("fl-layout-primary-description");ho.primary.outer.setAttribute("aria-label","primary visualisation container"),c.innerText=lo.screenreader_text_primary,s?ho.primary.outer.setAttribute("aria-describedBy","fl-layout-primary-description"):ho.primary.outer.removeAttribute("aria-describedBy"),lo.screenreader_hide_primary?ho.primary.inner.setAttribute("aria-hidden",!0):ho.primary.inner.removeAttribute("aria-hidden"),""!=lo.screenreader_label.trim()?mo().setAttribute("aria-label",lo.screenreader_label):mo().removeAttribute("aria-label"),po.map((function(e){var t=ho[e],n=t.outer.style;return{name:e,height:yo(t.inner),order:parseFloat(n.order),style:n}})).sort((function(e,t){return e.order-t.order})).filter((function(e){if(e.height||"primary"==e.name)return!0;e.style.paddingBottom="",e.style.paddingTop="",e.style.display="none"})).forEach((function(e,t,n){e.style.width="100%",e.style.paddingTop=t?ao("padding"):"",e.style.paddingBottom=t<n.length-1?ao("padding"):""})),ho.wrapper.style.gridColumnGap=ao("gap"),ho.wrapper.style.gridRowGap=ao("gap"),document.body.setAttribute("dir",lo.read_direction),ho.wrapper.setAttribute("dir",lo.read_direction),document.getElementById("fl-layout-wrapper-outer").setAttribute("dir","ltr")}function io(){var e=window.innerWidth<lo.breakpoint_mobile_big,t=lo.layout_order.indexOf("grid")>-1,n={id:lo.layout_order,mode:t?"grid":"stack",elements:Pa[lo.layout_order]};return e&&t&&(n.id="stack-default",n.mode="stack",n.elements=Pa["stack-default"]),n}function ao(e){var t,n=io();return t="custom"==lo.space_between_sections?lo.space_between_sections_custom:lo.space_between_sections,"grid"==n.mode?"gap"==e?t+"rem":"":"gap"==e?"":t/2+"rem"}var oo=Object.freeze({body_font:{name:"Source Sans Pro",url:"https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700"},title_font:null,subtitle_font:null,footer_font:null,read_direction:"ltr",border:{enabled:!1,top:{width:1,color:"#dddddd",style:"solid"},right:{width:1,color:"#dddddd",style:"solid"},bottom:{width:1,color:"#dddddd",style:"solid"},left:{width:1,color:"#dddddd",style:"solid"}},layout_order:"stack-default",margin_top:.75,margin_right:.75,margin_bottom:.75,margin_left:.75,space_between_sections:1,space_between_sections_custom:1,background_color_enabled:!0,background_color:"#ffffff",background_image_enabled:!1,background_image_src:"",background_image_size:"cover",background_image_position:"center center",max_width:600,max_width_target:"none",max_width_align:"center",breakpoint_mobile_small:0,breakpoint_mobile_big:380,breakpoint_tablet:580,breakpoint_desktop:1080,breakpoint_big_screen:1280,font_color:"#333333",font_size_mobile_small:62.5,font_size_mobile_big:75,font_size_tablet:87.5,font_size_desktop:100,font_size_big_screen:120,header_align:"left",header_border:"none",header_border_width:1,header_border_color:"#dddddd",header_border_style:"solid",header_border_space:.5,header_logo_enabled:!1,header_logo_align:"inside",header_logo_src:"",header_logo_alt:"Header logo",header_logo_link_url:"",header_logo_height:3,header_logo_position_inside:"left",header_logo_position_outside:"left",header_logo_margin_top:.25,header_logo_margin_right:.5,header_logo_margin_bottom:0,header_logo_margin_left:0,title:"",title_size:1.6,title_size_custom:1.6,title_line_height:1.2,title_color:null,title_weight:"bold",title_space_above:0,title_space_above_custom:1.5,title_styling:!1,subtitle:"",subtitle_size:1.6,subtitle_size_custom:1.6,subtitle_line_height:1.2,subtitle_color:null,subtitle_weight:"normal",subtitle_space_above:0,subtitle_space_above_custom:1.5,subtitle_styling:!1,header_text:"",header_text_size:1.2,header_text_size_custom:1.2,header_text_line_height:1.2,header_text_color:null,header_text_weight:"normal",header_text_space_above:.5,header_text_space_above_custom:1.5,source_label:"Source: ",source_name:"",source_url:"",source_name_2:"",source_url_2:"",source_name_3:"",source_url_3:"",footer_note:"",footer_note_secondary:"",footer_text_size:1,footer_text_color:null,footer_styling:!1,footer_text_weight:"normal",footer_align:"justify",footer_align_vertical:"center",footer_border:"none",footer_border_width:1,footer_border_color:"#dddddd",footer_border_style:"solid",footer_border_space:.5,footer_logo_enabled:!1,footer_logo_src:"",footer_logo_src_light:"",footer_logo_alt:"Footer logo",footer_logo_link_url:"",footer_logo_height:1.5,footer_logo_margin:.25,footer_logo_order:"right",screenreader_hide_primary:!0,screenreader_text_primary:"",screenreader_label:""});var lo,so="Your web browser does not support the features used by this content. Consider updating to a modern browser.";function co(e,t,n){za(n),e=function(e){return function(){return document.body.classList.add("fl-fonts-loaded"),e.apply(this,arguments)}}(e=e||window.template.update);var r=setTimeout(e,isNaN(t)?500:t),i=[],a=[];document.fonts&&a.push(document.fonts.ready),to()&&a.push(function(){if(to())return new Promise((function(e){var t=Da(eo());function n(){"undefined"!=typeof Flourish&&Flourish.warn&&Flourish.warn("flourish-layout unable to load image: "+t),e()}(Za=Za||document.createElement("img")).onload=function(){e()},Za.onerror=n,Za.oncancel=n,Za.src=t}))}()),qa()&&a.push(function(){if(qa())return new Promise((function(e){var t=Da(lo.header_logo_src);function n(){"undefined"!=typeof Flourish&&Flourish.warn&&Flourish.warn("flourish-layout unable to load image: "+t),e()}(Fa=Fa||document.createElement("img")).onload=function(){e()},Fa.onerror=n,Fa.oncancel=n,Fa.src=t}))}()),a.length&&(document.fonts||a.push(new Promise((function(e){setTimeout(e,500)}))),Promise.all(a).then((function(t){if(document.fonts&&t[0].size){var n=function(e){for(var t=e.next(),n=[];t&&!t.done;)n.push(t.value),t=e.next();return n}(t[0].keys()).map((function(e){return uo(e)}));i=i.concat(n),clearTimeout(r),e(),Ma()}document.fonts.addEventListener("loadingdone",(function(t){var n=!1;t.fontfaces.forEach((function(e){var t=uo(e);i.includes(t)||(i.push(t),n=!0)})),n&&(clearTimeout(r),e(),Ma())}))})))}function uo(e){return[e.family,e.variant,e.weight,e.unicodeRange].join(" ")}var fo,po=["header","controls","legend","primary","footer"],ho={};function _o(e){return e.getBoundingClientRect().width}function yo(e){return e.getBoundingClientRect().height}function bo(e,t){var n="fl-layout-"+e,r=document.createElement("section");r.className="fl-layout-container",r.id=n+"-container",r.style.width="100%",r.style.position="relative",r.style.order=t;var i=document.createElement("div");return i.className="fl-layout-inner",i.id=n,i.style.width="100%",i.style.position="relative","primary"==e&&(r.style.display="flex",function(e){var t=document.createElement("p");t.id="fl-layout-primary-description";var n=t.style;n.border="0",n.height="1px",n.width="1px",n.margin="-1px",n.overflow="hidden",n.padding="0",n.position="absolute",n.clip="rect(0 0 0 0)",e.appendChild(t)}(r)),r.appendChild(i),ho.wrapper.appendChild(r),{outer:r,inner:i}}function mo(){return ho.wrapper}function go(){return ho.sidebar}function vo(e){return-1!==po.indexOf(e)?ho[e].inner:null}function xo(e){return ho[e]||void 0===e?_o("wrapper"==e||void 0===e?ho.wrapper:ho[e].outer):null}function wo(e){return ho[e]||void 0===e?"wrapper"==e||void 0===e?_o(ho.wrapper)-No("horizontal")-So("horizontal"):_o(ho[e].inner):null}function ko(e){return ho[e]||void 0===e?yo("wrapper"==e||void 0===e?ho.wrapper:ho[e].outer):null}function Mo(e){return ho[e]||void 0===e?"wrapper"==e||void 0===e?yo(ho.wrapper)-No("vertical")-So("vertical"):yo(ho[e].inner):null}function zo(){var e="grid"==io().mode?0:Co(ho.primary.outer);return yo(ho.primary.outer)-e}function Ao(){return _o(ho.primary.inner)}function Eo(){return lo.screenreader_hide_primary?"hidden":"readable"}function Co(e){return"grid"==io().mode?parseFloat(getComputedStyle(ho.wrapper).gap)||0:(parseFloat(getComputedStyle(e).paddingTop)||0)+(parseFloat(getComputedStyle(e).paddingBottom)||0)}function To(){var e=function(){if(Flourish.fixed_height)return window.innerHeight;var e=window.innerWidth;return e>999?650:e>599?575:400}()-No("vertical")-So("vertical"),t=function(){var e=io(),t="grid-1"==e.id?[]:["header","controls","legend","footer"];return t.reduce((function(t,n){var r=ko(n);return r>0&&"grid"==e.mode&&(r+=Co()),t+r}),0)}();return e-t-("grid"==io().mode?0:Co(ho.primary.outer))}function No(e){var t;return"left"==e?t=lo.margin_left:"right"==e?t=lo.margin_right:"top"==e?t=lo.margin_top:"bottom"==e?t=lo.margin_bottom:"horizontal"==e?t=lo.margin_left+lo.margin_right:"vertical"==e&&(t=lo.margin_top+lo.margin_bottom),$a(t)}function So(e){return lo.border.enabled?"vertical"==e?lo.border.top.width+lo.border.bottom.width:"horizontal"==e?lo.border.left.width+lo.border.right.width:null:0}function Lo(e){var t=ho.primary;if(Flourish.fixed_height||void 0===Flourish.fixed_height)t.inner.style.height="";else{var n=null===e,r=n?To():e;r+Co(ho.primary.outer)!==parseFloat(t.outer.style.height)&&(ho.wrapper.style.height="",t.outer.style.flex="",t.inner.style.height=r+"px",Flourish.setHeight(n?null:ko()))}}function Oo(e){var t=parseFloat(ho.primary.outer.style.order);ho.legend.outer.style.order=t+1*("below"===e.trim().toLowerCase()?1:-1)}function Fo(e){var t=fo.querySelector(".fl-layout-overlay-message");if(e){fo.style.display="block";var n="string"==typeof e?e:so;t.innerHTML=n}else t.textContent="",fo.style.display="none"}function jo(){return fo}let Po;function $o(){Po&&Bo(),Po=pa(this.getWrapper(),"fl-layout-svg-screenshot-container"),Po.addTextElements("#fl-layout-header-container h2"),Po.addTextElements("#fl-layout-header-container h3"),Po.addTextElements("#fl-layout-header-container p"),Po.addTextElements("#fl-layout-footer .flourish-footer-text")}function Bo(){Po.remove(),Po=null}function Do(e){for(var t in lo=e,oo)void 0===lo[t]&&(lo[t]=oo[t]);return(xa=document.createElement("style")).id="flourish-page-styles",xa.type="text/css",document.head.appendChild(xa),ho.wrapper=function(){var e=document.createElement("div");e.id="fl-layout-wrapper-outer",e.style.display="flex";var t=document.createElement("main");t.id="fl-layout-wrapper",t.style.display="flex",t.style.flexGrow="1",t.style.flexDirection="column",t.style.boxSizing="border-box",t.style.overflow="hidden";var n=document.createElement("aside");return n.id="fl-layout-sidebar",n.style.position="relative",ho.sidebar=n,e.appendChild(t),e.appendChild(n),document.body.appendChild(e),t}(),po.forEach((function(e,t){ho[e]=bo(e,t)})),vo("header").appendChild(function(){(Ca=document.createElement("header")).className="flourish-header";var e=document.createElement("hgroup");return Ta=document.createElement("h2"),Na=document.createElement("h3"),Sa=document.createElement("p"),(La=document.createElement("div")).className="clearfix",(Oa=document.createElement("div")).className="flourish-header-logo-container",Ca.appendChild(Oa),Ca.appendChild(e),e.appendChild(Ta),e.appendChild(Na),Ca.appendChild(Sa),Ca.appendChild(La),Ca}()),vo("footer").appendChild(Ka()),ho.primary.outer.style.overflow="hidden",function(){var e=ho.primary.outer;e.style.position="relative",(fo=document.createElement("div")).id="fl-layout-overlay";var t=fo.style;t.position="absolute",t.display="none",t.width="100%",t.height="100%",t.top=0,t.left=0,t.backgroundColor="rgb(200,200,200)",t.zIndex=999999,t.pointerEvents="none";var n=document.createElement("p");n.className="fl-layout-overlay-message",(t=n.style).color="#333333",t.fontSize="1.5rem",t.paddingLeft="15%",t.paddingRight="15%",t.width="100%",t.boxSizing="border-box",t.position="absolute",t.top="50%",t.transform="translate(0, -50%)",t.margin="0",t.textAlign="center",fo.appendChild(n),e.appendChild(fo)}(),{update:ro,getWrapper:mo,getSidebar:go,getSection:vo,getOuterWidth:xo,getInnerWidth:wo,getOuterHeight:ko,getInnerHeight:Mo,getPrimaryHeight:zo,getPrimaryWidth:Ao,getDefaultPrimaryHeight:To,getPrimaryScreenReadability:Eo,setHeight:Lo,setLegendPosition:Oo,showOverlay:Fo,remToPx:$a,getOverlay:jo,awaitFonts:co,prepareScreenshotSVG:$o,clearScreenshotSVG:Bo}}var qo,Ho,Ro={aggregation_type:"Sum",hierarchy_layout:"treemap",color:{},stroke_color:null,label_color:null,axis_label_color:null,radial_tree_link_color:"#dddddd",legend_mode:"off",legend_container:{},legend_categorical:{title_mode:"custom",max_width:100},legend_position:"above",cellPadding:"low",num_of_visible_levels:2,auto_set_height:!0,treemap_aspect_ratio_narrow:100,treemap_aspect_ratio_normal:66,responsive_narrow_breakpoint:500,label_size:.9,min_label_size:.5,max_label_size:1.5,label_padding:.3,multi_line_labels:!0,label_case:"topUpperCase",label_weight:"topBold",show_value_labels:!1,value_label_relative_size:.75,value_label_bold:!0,sort_by:"value",treemap_type:"treemapBinary",treemap_ratio:2,sunburst_inner_radius:33,sunburst_outer_radius:100,sunburst_show_zoomed_node_in_center:!0,sunburst_depth_fade:.75,sunburst_labelling:"auto",bar_min_bar_thickness:30,bar_max_bar_thickness:50,bar_bar_padding:10,bar_axis_label_size:1,bar_axis_labels_above:!0,bar_max_value:null,bar_axis_label_space:8,bar_value_label_space:6,radial_tree_outer_radius:55,radial_tree_bar_length:20,radial_tree_bar_width:40,radial_tree_rotation:0,popup:{mode:"none"},popup_show_title:!1,popup_separator:">",popup_title:"",popup_hide_value:!1,popup_active_levels:"all_levels",filter:null,size_by:null,controls_container:{},filter_control:{},filter_control_visibility:"always",size_by_control:{},size_by_control_visibility:"always",controls_padding:0,filter_include_all:!0,filter_all_label:"All",controls_style:{},dropdown_style:{},button_style:{},slider_style:{},ascend_button_visibility:"always",animation_duration:1,zoom_out_button_color:"#f3f3f3",zoom_out_arrow_color:"#000000",zoomed_node_id:null,size_by_number_formatter:{},filter_number_formatter:{},layout:{},url_state:{}};function Yo(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var Uo,Io,Wo=(1===(Uo=Yo).length&&(Io=Uo,Uo=function(e,t){return Yo(Io(e),t)}),{left:function(e,t,n,r){for(null==n&&(n=0),null==r&&(r=e.length);n<r;){var i=n+r>>>1;Uo(e[i],t)<0?n=i+1:r=i}return n},right:function(e,t,n,r){for(null==n&&(n=0),null==r&&(r=e.length);n<r;){var i=n+r>>>1;Uo(e[i],t)>0?r=i:n=i+1}return n}}).right;function Vo(e){return null===e?NaN:+e}function Go(e,t){var n,r,i,a=e.length,o=-1;if(null==t){for(;++o<a;)if(null!=(n=e[o])&&n>=n)for(r=i=n;++o<a;)null!=(n=e[o])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++o<a;)if(null!=(n=t(e[o],o,e))&&n>=n)for(r=i=n;++o<a;)null!=(n=t(e[o],o,e))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]}function Xo(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),a=new Array(i);++r<i;)a[r]=e+r*n;return a}var Zo=Math.sqrt(50),Jo=Math.sqrt(10),Qo=Math.sqrt(2);function Ko(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=Zo?10:a>=Jo?5:a>=Qo?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=Zo?10:a>=Jo?5:a>=Qo?2:1)}function el(e,t,n){if(null==n&&(n=Vo),r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e);return o+(+n(e[a+1],a+1,e)-o)*(i-a)}}function tl(e,t){var n,r,i=e.length,a=-1;if(null==t){for(;++a<i;)if(null!=(n=e[a])&&n>=n)for(r=n;++a<i;)null!=(n=e[a])&&n>r&&(r=n)}else for(;++a<i;)if(null!=(n=t(e[a],a,e))&&n>=n)for(r=n;++a<i;)null!=(n=t(e[a],a,e))&&n>r&&(r=n);return r}var nl="0.2em";function rl(e){return e*parseFloat(getComputedStyle(document.documentElement).fontSize)}var il=0,al=Object.freeze({show_legend:!0,title_mode:"auto",title:"",max_width:100,swatch_width:.75,swatch_height:1,swatch_radius:3,swatch_outline:!1,swatch_outline_color:null,legend_items_padding:.5,icon_height:1,icon_color:"#777777",icon_fill_opacity:1,icon_stroke_opacity:1,order_override:"",orientation:"horizontal"});function ol(e){for(var t in this._state=e,al)void 0===this._state[t]&&(this._state[t]=al[t]);return this._colorFunction=void 0,this._formatFunction=void 0,this._legend_items=[],this._filtered_items=[],this._eventListeners=[],this._id="fl-legend-discrete-color-"+il,this._visible=!0,this._auto_title="",this._container=ue(document.createElement("div")).attr("class","fl-legend-container").attr("id",this._id),this._container.append("p").attr("class","fl-legend-title"),il++,this}function ll(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function sl(e,t){switch(arguments.length){case 0:break;case 1:this.interpolator(e);break;default:this.interpolator(t).domain(e)}return this}ol.prototype.appendTo=function(e){if(e.appendChild(this._container.node()),!document.querySelector("#legend-styles")){var t=document.createElement("style"),n=new tr;n.select(".fl-legend-container.interactive .fl-legend-item:hover").style("opacity",.75).style("cursor","pointer"),t.id="legend-styles",t.type="text/css",t.innerHTML=n.print(),document.head.appendChild(t)}return this},ol.prototype.format=function(e){return this._formatFunction=e,this},ol.prototype.getContainer=function(){return this._container},ol.prototype.visible=function(e){return void 0===e?this._visible:(this._visible=e,this)},ol.prototype.autoTitle=function(e){return void 0===e?this._auto_title:(this._auto_title=e,this)},ol.prototype._updateTitle=function(){var e=this,t="auto"==e._state.title_mode?e.autoTitle():e._state.title;this._container.select(".fl-legend-title").text(t).style("display",(function(){return t.trim()?void 0===e._state.orientation||"horizontal"==e._state.orientation?"inline-block":"block":"none"})).style("padding-inline-start",0).style("padding-inline-end",nl)},ol.prototype.data=function(e,t){return this._colorFunction=t,e||t?(t?Array.isArray(e)?this._legend_items=e.slice().map((function(e,n){var r="object"==typeof e?e.label||"":e;return r?{label:r,color:t(r),index:n}:null})).filter((function(e){return null!==e})):this._legend_items=[]:this._legend_items=Array.isArray(e)?e.slice():[],this):this._legend_items.slice()},ol.prototype.filtered=function(e){return e?(this._filtered_items=Array.isArray(e)?e.slice():[],this):this._filtered_items.slice()},ol.prototype.on=function(e,t){return this._container?(t&&this._eventListeners.indexOf(e)<0?this._eventListeners.push(e):t||this._eventListeners.splice(this._eventListeners.indexOf[e],1),this._container.classed("interactive",this._eventListeners.length>0),t?(this._container.on(e,(function(){var e=K.target,n=e.parentNode,r=e.classList.contains("fl-legend-item")?e:n.classList.contains("fl-legend-item")?n:null;if(r){var i=ue(r).datum();t.call(r,i,i.index)}})),"click"==e&&this._container.on("keydown",(function(){if("Enter"==K.key){var e=K.target,n=e.parentNode,r=e.classList.contains("fl-legend-item")?e:n.classList.contains("fl-legend-item")?n:null;if(r){var i=ue(r).datum();t.call(r,i,i.index)}}}))):(this._container.on(e,null),"click"==e&&this._container.on("keydown",null)),this):this},ol.prototype.update=function(){var e=this._state.show_legend&&this._visible&&this._legend_items.length>0;return this._container.style("display",e?"":"none"),e?(this._updateTitle(),this._updateLegend(),this):this},ol.prototype._updateLegend=function(){var e,t=this,n=this._formatFunction;this._container.style("max-width",rl(this._state.max_width)+"px").style("display","inline-flex").style("flex-wrap","wrap").style("align-items","horizontal"==this._state.orientation?"center":"start").style("align-content","horizontal"==this._state.orientation?"center":null).style("flex-direction","horizontal"==this._state.orientation?null:"column").style("max-height",.5*window.innerHeight+"px").style("overflow-y","auto"),e=this._state.order_override.trim()?function(e,t){for(var n={},r=t.split(/\s*\n\s*/),i=0;i<r.length;i++)n[r[i]]=i;for(var a=[],o=0;o<e.length;o++){var l=e[o],s=n[l.label];void 0!==s&&(a[s]=l)}return a.filter((function(e){return void 0!==e}))}(this._legend_items,this._state.order_override):this._legend_items;var r=this._container.selectAll(".fl-legend-item").data(e),i=r.enter().append("div").attr("class","fl-legend-item");i.append("div").attr("class","fl-legend-swatch");let a=i.append("div").attr("class","fl-legend-icon-container");a.append("svg").attr("class","fl-legend-icon fl-ignore-svg-download").append("path"),a.append("img").attr("class","fl-legend-icon"),a.append("div").attr("class","fl-legend-icon"),i.append("p").attr("class","fl-legend-label");var o=r.merge(i),l=this._eventListeners.length>0;o.style("display","horizontal"==this._state.orientation?"inline-flex":"flex").style("flex-direction",(function(e){return e.reverse?"row-reverse":"row"})).style("opacity",(function(e){return t._filtered_items.indexOf(e.label)>-1?.2:""})).style("align-items","center").style("padding-inline-end","horizontal"==this._state.orientation?this._state.legend_items_padding+"rem":0).style("padding-inline-start",0).attr("tabindex",l?"0":null).attr("role",l?"button":null),o.select(".fl-legend-swatch").style("height",this._state.swatch_height+"rem").style("width",this._state.swatch_width+"rem").style("border-radius",this._state.swatch_radius+"px").style("background-color",(function(e){return e.color})).style("border",(()=>this._state.swatch_outline?this._state.swatch_outline_color?`1px solid ${this._state.swatch_outline_color}`:"1px solid":"none")).style("box-sizing",this._state.swatch_outline?"border-box":"content-box").style("display",(function(e){return e.icon?"none":null}));const s=o.filter((e=>e.icon));return s.each((function(e){let n=Math.ceil(rl(t._state.icon_height)),r="auto";if(e.icon.width){let n=e.icon.width,i=e.icon.height,a=e.outline?i*e.stroke_thickness:0;n+=a,i+=a;let o=n/i,l=rl(t._state.icon_height*o);r=Math.ceil(l)}let i=.25*t._state.text_size+"rem";ue(this).selectAll(".fl-legend-icon").attr("height",n).attr("width",r).style("margin-right",i)})),o.select(".fl-legend-icon-container").style("display",(function(e){return e.icon?null:"none"})),s.each((function(e){ue(this).select("svg.fl-legend-icon").style("display",e.icon.path_string?"inline":"none"),ue(this).select("img.fl-legend-icon").style("display",e.icon.url?"inline":"none"),ue(this).select("div.fl-legend-icon").style("display",e.icon.html?"inline-block":"none")})),s.filter((e=>e.icon.url)).select("img.fl-legend-icon").attr("src",(e=>e.icon.url)),s.filter((e=>e.icon.html)).select("div.fl-legend-icon").html((e=>e.icon.html)).style("font-size",`${Math.ceil(rl(this._state.icon_height))}px`).style("color",(function(e){return e.outline?"none":e.fill||e.color||t._state.icon_color})),s.filter((e=>e.icon.path_string)).select("svg.fl-legend-icon path").attr("d",(function(e){return e.icon?e.icon.path_string:null})).attr("transform",(function(e){if(!e.icon)return null;var n=e.icon.height,r=e.outline?n*e.stroke_thickness:0;n+=r;var i="scale("+rl(t._state.icon_height)/n+")";return i+="translate("+.5*r+","+.5*r+")"})).style("fill",(function(e){return e.outline?"none":e.fill||e.color||t._state.icon_color})).style("fill-opacity",(function(e){return e.outline?0:e.fill_opacity||t._state.icon_fill_opacity})).style("stroke",(function(e){return e.outline||e.stroke?e.stroke||e.color||t._state.icon_color:"none"})).style("stroke-width",(function(e){if(!e.outline&&!e.stroke_width)return 0;var t=e.icon.height*e.stroke_thickness;return e.stroke_width||t})).style("stroke-opacity",(function(e){return e.outline||e.stroke_opacity?e.stroke_opacity||t._state.icon_stroke_opacity:0})),o.select(".fl-legend-label").text((function(e){return n?n(e.label):e.label})).style("margin",0).style("user-select","none").style("padding-inline-end",0).style("padding-inline-start",nl),r.exit().remove(),this._legend_item_els=o,this},ol.prototype.prepareScreenshotSVG=function(){this._state.show_legend&&this._visible&&this._legend_items.length&&pa("#fl-layout-wrapper",this._id+"-svg-screenshot-container").addTextElements(".fl-legend-title").addCircleElements(".fl-legend-swatch").addTextElements(".fl-legend-label")},ol.prototype.clearScreenshotSVG=function(){const e=document.getElementById(this._id+"-svg-screenshot-container");e&&e.remove()};var cl=Array.prototype,ul=cl.map,dl=cl.slice;function fl(e){return function(){return e}}function pl(e,t){return function(n){return e+n*t}}function hl(e,t){var n=t-e;return n?pl(e,n>180||n<-180?n-360*Math.round(n/360):n):fl(isNaN(e)?t:e)}function _l(e){return 1==(e=+e)?yl:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):fl(isNaN(t)?n:t)}}function yl(e,t){var n=t-e;return n?pl(e,n):fl(isNaN(e)?t:e)}var bl=function e(t){var n=_l(t);function r(e,t){var r=n((e=Er(e)).r,(t=Er(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),o=yl(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);var ml,gl=(ml=function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1],o=r>0?e[r-1]:2*i-a,l=r<t-1?e[r+2]:2*a-i;return function(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}((n-r/t)*t,o,i,a,l)}},function(e){var t,n,r=e.length,i=new Array(r),a=new Array(r),o=new Array(r);for(t=0;t<r;++t)n=Er(e[t]),i[t]=n.r||0,a[t]=n.g||0,o[t]=n.b||0;return i=ml(i),a=ml(a),o=ml(o),n.opacity=1,function(e){return n.r=i(e),n.g=a(e),n.b=o(e),n+""}});function vl(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(a){for(n=0;n<r;++n)i[n]=e[n]*(1-a)+t[n]*a;return i}}function xl(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=Cl(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<i;++n)o[n]=a[n](e);return o}}function wl(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function kl(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Ml(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=Cl(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var zl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Al=new RegExp(zl.source,"g");function El(e,t){var n,r,i,a=zl.lastIndex=Al.lastIndex=0,o=-1,l=[],s=[];for(e+="",t+="";(n=zl.exec(e))&&(r=Al.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(r=r[0])?l[o]?l[o]+=r:l[++o]=r:(l[++o]=null,s.push({i:o,x:kl(n,r)})),a=Al.lastIndex;return a<t.length&&(i=t.slice(a),l[o]?l[o]+=i:l[++o]=i),l.length<2?s[0]?function(e){return function(t){return e(t)+""}}(s[0].x):function(e){return function(){return e}}(t):(t=s.length,function(e){for(var n,r=0;r<t;++r)l[(n=s[r]).i]=n.x(e);return l.join("")})}function Cl(e,t){var n,r,i=typeof t;return null==t||"boolean"===i?fl(t):("number"===i?kl:"string"===i?(n=kr(t))?(t=n,bl):El:t instanceof kr?bl:t instanceof Date?wl:(r=t,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(t)?xl:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Ml:kl:vl))(e,t)}function Tl(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Nl,Sl,Ll,Ol,Fl=180/Math.PI,jl={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Pl(e,t,n,r,i,a){var o,l,s;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,s/=l),e*r<t*n&&(e=-e,t=-t,s=-s,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*Fl,skewX:Math.atan(s)*Fl,scaleX:o,scaleY:l}}function $l(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(a,o){var l=[],s=[];return a=e(a),o=e(o),function(e,r,i,a,o,l){if(e!==i||r!==a){var s=o.push("translate(",null,t,null,n);l.push({i:s-4,x:kl(e,i)},{i:s-2,x:kl(r,a)})}else(i||a)&&o.push("translate("+i+t+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,l,s),function(e,t,n,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:kl(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(a.rotate,o.rotate,l,s),function(e,t,n,a){e!==t?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:kl(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(a.skewX,o.skewX,l,s),function(e,t,n,r,a,o){if(e!==n||t!==r){var l=a.push(i(a)+"scale(",null,",",null,")");o.push({i:l-4,x:kl(e,n)},{i:l-2,x:kl(t,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,l,s),a=o=null,function(e){for(var t,n=-1,r=s.length;++n<r;)l[(t=s[n]).i]=t.x(e);return l.join("")}}}var Bl=$l((function(e){return"none"===e?jl:(Nl||(Nl=document.createElement("DIV"),Sl=document.documentElement,Ll=document.defaultView),Nl.style.transform=e,e=Ll.getComputedStyle(Sl.appendChild(Nl),null).getPropertyValue("transform"),Sl.removeChild(Nl),Pl(+(e=e.slice(7,-1).split(","))[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}),"px, ","px)","deg)"),Dl=$l((function(e){return null==e?jl:(Ol||(Ol=document.createElementNS("http://www.w3.org/2000/svg","g")),Ol.setAttribute("transform",e),(e=Ol.transform.baseVal.consolidate())?Pl((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):jl)}),", ",")",")");var ql=function(e){return function(t,n){var r=e((t=Fr(t)).h,(n=Fr(n)).h),i=yl(t.s,n.s),a=yl(t.l,n.l),o=yl(t.opacity,n.opacity);return function(e){return t.h=r(e),t.s=i(e),t.l=a(e),t.opacity=o(e),t+""}}}(hl);function Hl(e,t){var n=yl((e=Vr(e)).l,(t=Vr(t)).l),r=yl(e.a,t.a),i=yl(e.b,t.b),a=yl(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=r(t),e.b=i(t),e.opacity=a(t),e+""}}var Rl=function(e){return function(t,n){var r=e((t=Kr(t)).h,(n=Kr(n)).h),i=yl(t.c,n.c),a=yl(t.l,n.l),o=yl(t.opacity,n.opacity);return function(e){return t.h=r(e),t.c=i(e),t.l=a(e),t.opacity=o(e),t+""}}}(hl);function Yl(e){return function t(n){function r(t,r){var i=e((t=ui(t)).h,(r=ui(r)).h),a=yl(t.s,r.s),o=yl(t.l,r.l),l=yl(t.opacity,r.opacity);return function(e){return t.h=i(e),t.s=a(e),t.l=o(Math.pow(e,n)),t.opacity=l(e),t+""}}return n=+n,r.gamma=t,r}(1)}Yl(hl);var Ul=Yl(yl);function Il(e){return+e}var Wl=[0,1];function Vl(e){return e}function Gl(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function Xl(e){var t,n=e[0],r=e[e.length-1];return n>r&&(t=n,n=r,r=t),function(e){return Math.max(n,Math.min(r,e))}}function Zl(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=Gl(i,r),a=n(o,a)):(r=Gl(r,i),a=n(a,o)),function(e){return a(r(e))}}function Jl(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=Gl(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(t){var n=Wo(e,t,1,r)-1;return a[n](i[n](t))}}function Ql(e,t){return function(){var e,t,n,r,i,a,o=Wl,l=Wl,s=Cl,c=Vl;function u(){return r=Math.min(o.length,l.length)>2?Jl:Zl,i=a=null,d}function d(t){return isNaN(t=+t)?n:(i||(i=r(o.map(e),l,s)))(e(c(t)))}return d.invert=function(n){return c(t((a||(a=r(l,o.map(e),kl)))(n)))},d.domain=function(e){return arguments.length?(o=ul.call(e,Il),c===Vl||(c=Xl(o)),u()):o.slice()},d.range=function(e){return arguments.length?(l=dl.call(e),u()):l.slice()},d.rangeRound=function(e){return l=dl.call(e),s=Tl,u()},d.clamp=function(e){return arguments.length?(c=e?Xl(o):Vl,d):c!==Vl},d.interpolate=function(e){return arguments.length?(s=e,u()):s},d.unknown=function(e){return arguments.length?(n=e,d):n},function(n,r){return e=n,t=r,u()}}()(e,t)}function Kl(e,t,n,r){var i,a=function(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=Zo?i*=10:a>=Jo?i*=5:a>=Qo&&(i*=2),t<e?-i:i}(e,t,n);switch((r=xn(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(mn(t)/3)))-mn(Math.abs(e)))}(a,o))||(r.precision=i),Cn(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,mn(t)-mn(e))+1}(a,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(e){return Math.max(0,-mn(Math.abs(e)))}(a))||(r.precision=i-2*("%"===r.type))}return En(r)}function es(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){var r,i,a,o,l=-1;if(n=+n,(e=+e)==(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(o=Ko(e,t,n))||!isFinite(o))return[];if(o>0)for(e=Math.ceil(e/o),t=Math.floor(t/o),a=new Array(i=Math.ceil(t-e+1));++l<i;)a[l]=(e+l)*o;else for(e=Math.floor(e*o),t=Math.ceil(t*o),a=new Array(i=Math.ceil(e-t+1));++l<i;)a[l]=(e-l)/o;return r&&a.reverse(),a}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return Kl(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i=t(),a=0,o=i.length-1,l=i[a],s=i[o];return s<l&&(r=l,l=s,s=r,r=a,a=o,o=r),(r=Ko(l,s,n))>0?r=Ko(l=Math.floor(l/r)*r,s=Math.ceil(s/r)*r,n):r<0&&(r=Ko(l=Math.ceil(l*r)/r,s=Math.floor(s*r)/r,n)),r>0?(i[a]=Math.floor(l/r)*r,i[o]=Math.ceil(s/r)*r,t(i)):r<0&&(i[a]=Math.ceil(l*r)/r,i[o]=Math.floor(s*r)/r,t(i)),e},e}function ts(){var e=Ql(Vl,Vl);return e.copy=function(){return t=e,ts().domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown());var t},ll.apply(e,arguments),es(e)}function ns(){var e,t=[],n=[],r=[];function i(){var e=0,i=Math.max(1,n.length);for(r=new Array(i-1);++e<i;)r[e-1]=el(t,e/i);return a}function a(t){return isNaN(t=+t)?e:n[Wo(r,t)]}return a.invertExtent=function(e){var i=n.indexOf(e);return i<0?[NaN,NaN]:[i>0?r[i-1]:t[0],i<r.length?r[i]:t[t.length-1]]},a.domain=function(e){if(!arguments.length)return t.slice();t=[];for(var n,r=0,a=e.length;r<a;++r)null==(n=e[r])||isNaN(n=+n)||t.push(n);return t.sort(Yo),i()},a.range=function(e){return arguments.length?(n=dl.call(e),i()):n.slice()},a.unknown=function(t){return arguments.length?(e=t,a):e},a.quantiles=function(){return r.slice()},a.copy=function(){return ns().domain(t).range(n).unknown(e)},ll.apply(a,arguments)}function rs(){var e,t=0,n=1,r=1,i=[.5],a=[0,1];function o(t){return t<=t?a[Wo(i,t,0,r)]:e}function l(){var e=-1;for(i=new Array(r);++e<r;)i[e]=((e+1)*n-(e-r)*t)/(r+1);return o}return o.domain=function(e){return arguments.length?(t=+e[0],n=+e[1],l()):[t,n]},o.range=function(e){return arguments.length?(r=(a=dl.call(e)).length-1,l()):a.slice()},o.invertExtent=function(e){var o=a.indexOf(e);return o<0?[NaN,NaN]:o<1?[t,i[0]]:o>=r?[i[r-1],n]:[i[o-1],i[o]]},o.unknown=function(t){return arguments.length?(e=t,o):o},o.thresholds=function(){return i.slice()},o.copy=function(){return rs().domain([t,n]).range(a).unknown(e)},ll.apply(es(o),arguments)}function is(){var e,t=[.5],n=[0,1],r=1;function i(i){return i<=i?n[Wo(t,i,0,r)]:e}return i.domain=function(e){return arguments.length?(t=dl.call(e),r=Math.min(t.length,n.length-1),i):t.slice()},i.range=function(e){return arguments.length?(n=dl.call(e),r=Math.min(t.length,n.length-1),i):n.slice()},i.invertExtent=function(e){var r=n.indexOf(e);return[t[r-1],t[r]]},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return is().domain(t).range(n).unknown(e)},ll.apply(i,arguments)}function as(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function os(){var e=es(function(){var e,t,n,r,i,a=0,o=1,l=Vl,s=!1;function c(t){return isNaN(t=+t)?i:l(0===n?.5:(t=(r(t)-e)*n,s?Math.max(0,Math.min(1,t)):t))}return c.domain=function(i){return arguments.length?(e=r(a=+i[0]),t=r(o=+i[1]),n=e===t?0:1/(t-e),c):[a,o]},c.clamp=function(e){return arguments.length?(s=!!e,c):s},c.interpolator=function(e){return arguments.length?(l=e,c):l},c.unknown=function(e){return arguments.length?(i=e,c):i},function(i){return r=i,e=i(a),t=i(o),n=e===t?0:1/(t-e),c}}()(Vl));return e.copy=function(){return as(e,os())},sl.apply(e,arguments)}function ls(){var e=es(function(){var e,t,n,r,i,a,o,l=0,s=.5,c=1,u=Vl,d=!1;function f(e){return isNaN(e=+e)?o:(e=.5+((e=+a(e))-t)*(e<t?r:i),u(d?Math.max(0,Math.min(1,e)):e))}return f.domain=function(o){return arguments.length?(e=a(l=+o[0]),t=a(s=+o[1]),n=a(c=+o[2]),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),f):[l,s,c]},f.clamp=function(e){return arguments.length?(d=!!e,f):d},f.interpolator=function(e){return arguments.length?(u=e,f):u},f.unknown=function(e){return arguments.length?(o=e,f):o},function(o){return a=o,e=o(l),t=o(s),n=o(c),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),f}}()(Vl));return e.copy=function(){return as(e,ls())},sl.apply(e,arguments)}var ss,cs,us,ds,fs=Object.freeze({alignment:"start",orientation:"horizontal",text_color:null,title_weight:"bold",text_weight:"normal",text_size:1});function ps(e){for(var t in this._state=e,fs)void 0===this._state[t]&&(this._state[t]=fs[t]);return this}function hs(){return this.declarations=[],this}function _s(e){return this.selector=e,this.styles=[],this}ps.prototype.appendTo=function(e){return this._container=ue(e).append("div").node(),this},ps.prototype.add=function(e){this._legends=Array.isArray(e)?e:[e];var t=this;return this._legends.forEach((function(e){e&&"function"==typeof e.appendTo?e.appendTo(t._container):console.warn("Please pass in valid legend instances into .add()")})),this},ps.prototype.update=function(){var e=window.template||void 0,t=e?e.state.layout:void 0;cs=this._state.text_color||e&&t&&t.font_color||"#333333",us=t?t.body_font.name:window.getComputedStyle(document.body).fontFamily,ss=this._state.text_size,ds=this._state.text_weight;var n={family:us,weight:ds,size:ss,color:cs};this._legends.forEach((function(e){e&&"function"==typeof e.update&&e.update(n)}));var r="horizontal"===this._state.orientation,i=this._state.alignment,a="center"==i?i:"flex-"+i;return ue(this._container).style("justify-content",r?a:null).style("align-items",r?null:a).style("display","flex").style("flex-direction",r?"row":"column"),ue(this._container).selectAll(".fl-legend-container").style("padding-inline-end",(function(){return r?"0.5rem":0})).style("padding-bottom",(function(){return r?0:"0.25rem"})).style("justify-content",a),ue(this._container).selectAll(".fl-legend-title").style("color",this._state.text_color).style("font-weight",this._state.title_weight).style("font-size",ss+"rem").style("margin-right",.25*ss+"rem").style("line-height","1.25em").style("margin-top",0).style("margin-bottom",0).style("text-align",i),ue(this._container).selectAll(".fl-legend-item").style("display","inline-flex").style("text-align",i),ue(this._container).selectAll(".fl-legend-label").style("color",this._state.text_color).style("font-weight",this._state.text_weight).style("font-size",ss+"rem"),ue(this._container).selectAll(".label").style("color",this._state.text_color).style("font-weight",this._state.text_weight).style("font-size",ss+"rem"),this},hs.prototype.select=function(e){if(!e)return this;var t=new _s(e);return t.parent=this,this.addDeclaration(t),t},hs.prototype.addDeclaration=function(e){return this.declarations.push(e),this},hs.prototype.print=function(){var e="";return this.declarations.forEach((function(t){e+=t.selector+" {\n",t.styles.forEach((function(t){e+="\t"+t[0]+": "+t[1]+";\n"})),e+="}\n\n"})),e},hs.prototype.clear=function(){return this.declarations=[],this},_s.prototype.style=function(e,t){var n="function"==typeof value_?t():t;return""!==n&&null!=n&&this.styles.push([e,n]),this},_s.prototype.select=function(e){return this.parent.select(this.selector+" "+e)};var ys=Object.freeze({font_size:1,font_weight:"bold",height:2});function bs(e,t,n){for(var r in this._state=e,ys)void 0===this._state[r]&&(this._state[r]=ys[r]);return this._layout=n||{},this._styles=new hs,this._selector=t,this._createStylesheet(),this}bs.prototype._createStylesheet=function(){this._stylesheet=document.createElement("style"),this._stylesheet.className="fl-ui-styles-controls",document.head.appendChild(this._stylesheet)},bs.prototype.update=function(){this._styles.clear(),this._styles.select(this._selector+".hidden").style("display","none"),this._styles.select(this._selector).style("vertical-align","middle").style("position","relative").style("font-size",this._state.font_size+"rem").style("font-weight",this._state.font_weight),this._styles.select(".fl-controls-title").style("font-size",this._state.font_size+"rem").style("font-weight",this._state.font_weight).style("vertical-align","middle"),this._styles.select(this._selector+".fl-control .button").style("height",this._state.height+"rem").style("padding","0 0.5em"),this._styles.select(this._selector+"-dropdown select").style("height",this._state.height+"rem").style("font-size",this._state.font_size+"rem").style("font-weight",this._state.font_weight).style("padding","0 "+.1*this._state.height+"rem"),this._styles.select(this._selector+"-slider .slider-end-labels").style("font-size",this._state.font_size+"rem").style("font-weight",this._state.font_weight),this._styles.select(this._selector+"-slider").style("height",this._state.height+"rem"),this._stylesheet.innerHTML=this._styles.print()};var ms=Object.freeze({background:null,font_color:null,background_selected:"#333333",font_color_selected:"#ffffff",background_hover:null,font_color_hover:null,border_width:1,border_transparency:.25,border_color:null,border_radius:3});function gs(e,t,n){for(var r in this._state=e,ms)void 0===this._state[r]&&(this._state[r]=ms[r]);return this._layout=n||{},this._styles=new hs,this._selector=t,this._createStylesheet(),this}gs.prototype._createStylesheet=function(){this._stylesheet=document.createElement("style"),this._stylesheet.className="fl-ui-styles-button",document.head.appendChild(this._stylesheet)},gs.prototype.update=function(){this._styles.clear();var e=this._state.background||this._layout.background_color_enabled&&this._layout.background_color||"#ffffff",t=this._state.font_color||this._layout.font_color||"#333333",n=ga(this._state.border_color||t,this._state.border_transparency),r=ma();this._styles.select(this._selector+".fl-control.hidden").style("display","none"),this._styles.select(this._selector+".fl-control .button").style("overflow","hidden").style("white-space","nowrap").style("margin","0 2px 0 0 !important").style("background-color",e).style("color",t).style("border",this._state.border_width+"px solid "+n).style("border-radius",this._state.border_radius+"px"),this._styles.select(this._selector+".fl-control .button:hover").style("background-color",this._state.background_hover||e).style("color",this._state.font_color_hover||t),this._styles.select(this._selector+".fl-control .button.selected").style("background-color",this._state.background_selected).style("color",this._state.font_color_selected),this._styles.select(this._selector+".grouped.fl-control .button").style("border-right","none").style("border-radius","0").style("margin","0");var i="rtl"===r,a=i?":last-child":":first-child",o=i?":first-child":":last-child";this._styles.select(this._selector+".grouped.fl-control .button"+a).style("border-radius",this._state.border_radius+"px 0 0 "+this._state.border_radius+"px"),this._styles.select(this._selector+".grouped.fl-control .button"+o).style("border-radius","0 "+this._state.border_radius+"px "+this._state.border_radius+"px 0").style("border-right",this._state.border_width+"px solid "+n),this._styles.select(this._selector+".grouped.fl-control.fixed-width:not(.hidden)").style("width",this._state.grouped_width+"%"),this._stylesheet.innerHTML=this._styles.print()};var vs=Object.freeze({background:null,font_color:null,border_style:"bottom",border_width:1,border_color:null,border_transparency:.25,border_radius:3});function xs(e,t,n){for(var r in this._state=e,vs)void 0===this._state[r]&&(this._state[r]=vs[r]);return this._layout=n||{},this._styles=new hs,this._selector=t,this._createStylesheet(),this}function ws(e){return e*parseFloat(getComputedStyle(document.documentElement).fontSize)}xs.prototype._createStylesheet=function(){this._stylesheet=document.createElement("style"),this._stylesheet.className="fl-ui-styles-dropdown",document.head.appendChild(this._stylesheet)},xs.prototype.update=function(){this._styles.clear();const e=this._state.background||"transparent",t=this._state.font_color||this._layout.font_color,n=t||"inherit";let r;r=this._state.border_color?ga(this._state.border_color,this._state.border_transparency):t?ga(t,this._state.border_transparency):"currentColor",this._styles.select(this._selector+" .heading").style("margin-bottom","0.4em"),this._styles.select(this._selector).style("pointer-events","all"),this._styles.select(this._selector+" select").style("display","inline-block").style("cursor","pointer").style("overflow","hidden").style("white-space","nowrap").style("position","relative").style("font-family","inherit").style("background-color",e).style("color",n).style("border","bottom"==this._state.border_style?this._state.border_width+"px solid transparent":this._state.border_width+"px solid "+r).style("border-bottom","bottom"==this._state.border_style?this._state.border_width+"px solid "+r:null).style("border-radius","bottom"==this._state.border_style?null:this._state.border_radius+"px"),this._styles.select(this._selector+":after").style("right","bottom"==this._state.border_style?null:this._state.border_width+5+"px").style("color",n),this._styles.select(this._selector+" .main .current").style("line-height","1em").style("height","100%").style("max-width","88%").style("display","inline-block").style("overflow","hidden").style("vertical-align","top"),this._styles.select(this._selector+" .list").style("top","2px").style("min-width","100%").style("padding","2px").style("display","none").style("max-height","200px").style("overflow-y","auto").style("box-shadow","0 1px 4px rgba(0, 0, 0, .1)").style("margin-top","2px").select(".list-item").style("line-height","1em").style("cursor","pointer").style("font-weight","normal").style("color",n),this._styles.select(this._selector+".open .list").style("display","block").style("border",this._state.border_width+"px solid "+r).style("background-color",e).style("z-index","1").style("animation","dropdown-out 200ms"),this._styles.select(this._selector+" .list-item:hover").style("opacity","0.6"),this._styles.select(this._selector+" .list-item.selected, "+this._selector+" .list-item.selected:hover").style("opacity","1").style("cursor","default"),"bottom"==this._state.border_style&&this._styles.select(this._selector+" .main").style("padding-left",0).style("padding-right","0.1rem"),this._stylesheet.innerHTML=this._styles.print()};var ks=Object.freeze({play_color:null,handle_color:null,font_color:null,track_color:null,handle_height:1,track_height:.2,margin:4.5,play_button:!0});function Ms(e,t,n){for(var r in this._state=e,ks)void 0===this._state[r]&&(this._state[r]=ks[r]);return this._layout=n||{},this._styles=new hs,this._selector=t,this._createStylesheet(),this}Ms.prototype._createStylesheet=function(){this._stylesheet=document.createElement("style"),this._stylesheet.className="fl-ui-styles-slider",document.head.appendChild(this._stylesheet)},Ms.prototype.update=function(){this._styles.clear();var e=this._state.track_color||"#dddddd",t=this._state.font_color||this._layout.font_color||"currentColor",n=this._state.handle_color||this._layout.font_color||"currentColor",r=this._state.play_color||this._layout.font_color||"currentColor",i=Math.round(ws(this._state.handle_height)),a=ws(this._state.track_height);this._styles.select(this._selector+" .fl-controls-slider").style("height",2*i+"px"),this._styles.select(this._selector+" .slider-play").style("fill",r).style("width",i+"px").style("height",i+"px").style("display",this._state.play_button?null:"none"),this._styles.select(this._selector+" .slider-label").style("padding-inline-start","0.3rem").style("box-sizing","content-box").style("color",t),this._styles.select(this._selector+" input[type=range]").style("-webkit-appearance","none").style("color","currentColor").style("background-color","transparent"),this._styles.select(this._selector+" input[type=range]::-webkit-slider-runnable-track").style("-webkit-appearance","none").style("background",e).style("border-radius","100px").style("height",a+"px"),this._styles.select(this._selector+" input[type=range]::-webkit-slider-thumb").style("-webkit-appearance","none").style("width",i+"px").style("height",i+"px").style("border-radius","100px").style("background",n).style("margin-top",-i/2+a/2+"px"),this._styles.select(this._selector+" input[type=range]::-moz-range-track").style("-webkit-appearance","none").style("background",e).style("border-radius","100px").style("height",a+"px"),this._styles.select(this._selector+" input[type=range]::-moz-range-thumb").style("-webkit-appearance","none").style("width",i+"px").style("height",i+"px").style("border-radius","100px").style("border","none").style("background",n),this._stylesheet.innerHTML=this._styles.print()},"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}return t});var zs,As,Es={},Cs=25,Ts=10,Ns=10,Ss={};function Ls(e,t,n,r,i,a,o){var l=n-e/2-Ns,s=n+e/2+Ns,c=e/2+Math.min(0,l-i.left)+Math.max(0,s-i.right);return{pos:[c,o],shape:c-Ts<5?[-c,-15*a,Math.max(Ts,5-c),-10*a]:c+Ts>e-5?[Math.min(-10,e-c-5),-10*a,Math.min(Ts,e-c),-15*a]:[-10,-10*a,Ts,-10*a]}}function Os(e,t,n,r,i,a,o){var l=r-t/2-Ns,s=r+t/2+Ns,c=t/2+Math.min(0,l-i.top)+Math.max(0,s-i.bottom);return{pos:[o,c],shape:c-Ts<5?[-15*a,-c,-10*a,Math.max(Ts,5-c)]:c+Ts>t-5?[-10*a,Math.min(-10,t-c-5),-15*a,Math.min(Ts,t-c)]:[-10*a,-10,-10*a,Ts]}}function Fs(e,t,n,r,i,a){var o=Ss[e](t,n,r,i,a),l=r-Cs-o.pos[0],s=i-Cs-o.pos[1];return{left:l,top:s,right:l+t+2*Cs,bottom:s+n+2*Cs}}function js(e,t,n){var r,i=document.createElementNS("http://www.w3.org/2000/svg",e);if(t)for(r in t)i.setAttribute(r,t[r]);var a=i.style;if(n)for(r in n)a[r]=n[r];return i}function Ps(){return zs||((zs=document.createElement("div")).id="flourish-popup-constrainer",zs.setAttribute("aria-hidden",!0),(As=zs.style).overflow="hidden",As.pointerEvents="none",As.position="absolute",As.left="0",As.top="0",As.margin="0",As.padding="0",document.body.appendChild(zs),this._resizeConstrainer(),zs)}Ss.bottom=function(e,t){return{shape:[-10,-10,Ts,-10],pos:[e/2,t+Ns]}},Ss.top=function(e,t){return{shape:[-10,Ns,Ts,Ns],pos:[e/2,-10]}},Ss.left=function(e,t){return{shape:[Ns,Ts,Ns,-10],pos:[-10,t/2]}},Ss.right=function(e,t){return{shape:[-10,Ts,-10,-10],pos:[e+Ns,t/2]}},Ss.topLeft=function(e,t){return{shape:[15,Ns,Ns,15],pos:[-10,-10]}},Ss.bottomLeft=function(e,t){return{shape:[15,-10,Ns,-15],pos:[-10,t+Ns]}},Ss.topRight=function(e,t){return{shape:[-15,Ns,-10,15],pos:[e+Ns,-10]}},Ss.bottomRight=function(e,t){return{shape:[-15,-10,-10,-15],pos:[e+Ns,t+Ns]}},Ss.bottomFlexible=function(e,t,n,r,i){return Ls(e,0,n,0,i,1,t+Ns)},Ss.topFlexible=function(e,t,n,r,i){return Ls(e,0,n,0,i,-1,-10)},Ss.rightFlexible=function(e,t,n,r,i){return Os(0,t,0,r,i,1,e+Ns)},Ss.leftFlexible=function(e,t,n,r,i){return Os(0,t,0,r,i,-1,-10)};var $s=1,Bs={container:document.body,maxWidth:"70%",point:null,html:null,directions:["bottom","top","left","right","topLeft","bottomLeft","topRight","bottomRight","bottomFlexible","topFlexible","leftFlexible","rightFlexible"],fallbackFit:"horizontal"};function Ds(){for(var e in this.unique_id=$s++,this.is_visible=!0,Bs)this["_"+e]=Bs[e];this.handlers={click:[]}}function qs(e){Ds.prototype[e]=function(t){return void 0===t?this["_"+e]:(this["_"+e]=t,this)}}for(var Hs in Bs)qs(Hs);function Rs(){return new Ds}Ds.prototype.point=function(e,t){if(void 0===e)return this._point;if(Array.isArray(e))this._point=[e[0],e[1]];else if(void 0!==t)this._point=[e,t];else if(e instanceof HTMLElement||e instanceof SVGElement){var n=e.getBoundingClientRect();this._point=[Math.floor(n.left+n.width/2),Math.floor(n.top+n.height/2)]}else console.error("Popup: could not understand argument");return this},Ds.prototype.directions=function(e){return void 0===e?this._directions:("string"==typeof e&&(e=[e]),this._directions=e.slice(),this)},Ds.prototype.text=function(e){return this._html=e.replace(/[&<>]/g,(function(e){return{"&":"&amp;","<":"&lt;",">":"&gt;"}[e]})),this},Ds.prototype.on=function(e,t){if(!(e in this.handlers))throw new Error("Popup.on: No such event: "+e);return this.handlers[e].push(t),this},Ds.prototype.fire=function(e,t){if(!(e in this.handlers))throw new Error("Popup.fire: No such event: "+e);for(var n=this.handlers[e],r=0;r<n.length;r++)n[r].call(this,t);return this},Ds.prototype._getElement=function(){var e=this,t="flourish-popup-"+e.unique_id,n=document.getElementById(t);if(!n){(n=document.createElement("div")).className="flourish-popup",n.id=t;var r=n.style;r.display="none",r.margin=r.padding=0,r.position="absolute",r.width="80px",r.height="40px",r.boxSizing="border-box",n.addEventListener("click",(function(t){e.fire("click",t)}),!1);var i=js("svg",{class:"flourish-popup-svg"},{position:"absolute",top:0,left:0,bottom:0,right:0}),a=js("filter",{id:"dropshadow-"+e.unique_id,height:"130%"});a.appendChild(js("feGaussianBlur",{in:"SourceAlpha",stdDeviation:5})),a.appendChild(js("feOffset",{dx:0,dy:2,result:"offsetblur"}));var o=js("feComponentTransfer");o.appendChild(js("feFuncA",{type:"linear",slope:.2})),a.appendChild(o);var l=js("feMerge");a.appendChild(l),l.appendChild(js("feMergeNode")),l.appendChild(js("feMergeNode",{in:"SourceGraphic"})),i.appendChild(a);var s=js("g",{filter:"url(#dropshadow-"+e.unique_id+")",fill:"white",stroke:"none"});s.appendChild(js("rect",{x:Cs,y:Cs,rx:5})),s.appendChild(js("path")),i.appendChild(s),n.appendChild(i);var c=document.createElement("div");c.className="flourish-popup-content",(r=c.style).position="absolute",r.top=r.left=Cs+"px",r.padding="10px",n.appendChild(c),e._getConstrainer().appendChild(n)}return e._resizeConstrainer(),n},Ds.prototype._getConstrainer=Ps,Ds.prototype._resizeConstrainer=function(){zs||Ps.call(this);var e=As.display;As.display="none",As.width=document.documentElement.scrollWidth+"px",As.height=document.documentElement.scrollHeight+"px",As.display=e},Ds.prototype.draw=function(){var e=this;if(e.is_visible=!0,e._point){var t=document.documentElement.getBoundingClientRect(),n=e._point[0],r=e._point[1],i=e._container.getBoundingClientRect();n<i.left?n=i.left:n>i.right&&(n=i.right),r<i.top?r=i.top:r>i.bottom&&(r=i.bottom);var a=n-t.left,o=r-t.top,l=e._getElement(),s=l.style,c=l.querySelector(".flourish-popup-svg"),u=c.querySelector("g"),d=u.querySelector("rect"),f=u.querySelector("path"),p=l.querySelector(".flourish-popup-content");s.display="block",p.style.maxWidth=function(t){return e._maxWidth.match(/^\d+(?:\.\d+)?%$/)?t.width*parseFloat(e._maxWidth)/100:e._maxWidth.match(/^\d+(?:\.\d+)?(?:px)?$/)?parseFloat(e._maxWidth):(null!=e._maxWidth&&console.error("Popup: Unknown value for maxWidth: "+e._maxWidth),t.width)}(i)+"px",e._inner_html!=e._html&&(p.innerHTML=e._inner_html=e._html);var h,_,y=p.getBoundingClientRect();do{h=Math.ceil(y.width),_=Math.ceil(y.height),s.width=h+2*Cs+"px",s.height=_+2*Cs+"px",y=p.getBoundingClientRect()}while(h!=Math.ceil(y.width)||_!=Math.ceil(y.height));d.setAttribute("width",h),d.setAttribute("height",_),c.setAttribute("width",h+2*Cs),c.setAttribute("height",_+2*Cs);for(var b,m,g=Cs-Ns,v=null,x=null,w=null,k=1/0,M=1/0,z=0;z<e._directions.length;z++){var A=e._directions[z],E=Fs(A,h,_,n,r,i),C=Math.max(0,Math.floor(i.left)-E.left-g)+Math.max(0,E.right-Math.ceil(i.right)-g),T=Math.max(0,Math.floor(i.top)-E.top-g)+Math.max(0,E.bottom-Math.ceil(i.bottom)-g);if(0==C&&0==T){v=A;break}(C<k||C==k&&T<b)&&(k=C,b=T,x=A),(T<M||T==M&&C<m)&&(M=T,m=C,w=A)}return v?A=v:"horizontal"==e._fallbackFit?A=x:"vertical"==e._fallbackFit?A=w:(console.warn("Popup: failed to point box of size ("+h+", "+_+") at ("+n+", "+r+") within ("+i.left+", "+i.top+", "+i.right+", "+i.bottom+")"),A=e._directions[0]),function(e,t,n,r,i,a,o,l,s,c){var u=Ss[e](r,i,l,s,c);t.left=a-Cs-u.pos[0]+"px",t.top=o-Cs-u.pos[1]+"px",n.setAttribute("d","M0,0L"+u.shape.join(",")+"Z"),n.setAttribute("transform","translate("+(u.pos[0]+Cs)+","+(u.pos[1]+Cs)+")")}(A,s,f,h,_,a,o,n,r,i),e}console.error("Popup: cannot draw popup till point() has been specified")},Ds.prototype.hide=function(){return this.is_visible?(this.is_visible=!1,this._getElement().style.display="none",this):this},Rs.version="2.1.5";var Ys,Us,Is=0,Ws=0,Vs=0,Gs=1e3,Xs=0,Zs=0,Js=0,Qs="object"==typeof performance&&performance.now?performance:Date,Ks="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ec(){return Zs||(Ks(tc),Zs=Qs.now()+Js)}function tc(){Zs=0}function nc(){this._call=this._time=this._next=null}function rc(e,t,n){var r=new nc;return r.restart(e,t,n),r}function ic(){ec(),++Is;for(var e,t=Ys;t;)(e=Zs-t._time)>=0&&t._call.call(null,e),t=t._next;--Is}function ac(){Zs=(Xs=Qs.now())+Js,Is=Ws=0;try{ic()}finally{Is=0,function(){var e,t,n=Ys,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Ys=t);Us=e,lc(r)}(),Zs=0}}function oc(){var e=Qs.now(),t=e-Xs;t>Gs&&(Js-=t,Xs=e)}function lc(e){Is||(Ws&&(Ws=clearTimeout(Ws)),e-Zs>24?(e<1/0&&(Ws=setTimeout(ac,e-Qs.now()-Js)),Vs&&(Vs=clearInterval(Vs))):(Vs||(Xs=Qs.now(),Vs=setInterval(oc,Gs)),Is=1,Ks(ac)))}function sc(e,t,n){var r=new nc;return t=null==t?0:+t,r.restart((function(n){r.stop(),e(n+t)}),t,n),r}nc.prototype=rc.prototype={constructor:nc,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?ec():+n)+(null==t?0:+t),this._next||Us===this||(Us?Us._next=this:Ys=this,Us=this),this._call=e,this._time=n,lc()},stop:function(){this._call&&(this._call=null,this._time=1/0,lc())}};var cc={value:function(){}};function uc(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new dc(r)}function dc(e){this._=e}function fc(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function pc(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=cc,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}dc.prototype=uc.prototype={constructor:dc,on:function(e,t){var n,r,i=this._,a=(r=i,(e+"").trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),o=-1,l=a.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<l;)if(n=(e=a[o]).type)i[n]=pc(i[n],e.name,t);else if(null==t)for(n in i)i[n]=pc(i[n],e.name,null);return this}for(;++o<l;)if((n=(e=a[o]).type)&&(n=fc(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new dc(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,n=(r=this._[e]).length;a<n;++a)r[a].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};var hc=uc("start","end","cancel","interrupt"),_c=[],yc=0,bc=1,mc=2,gc=3,vc=4,xc=5,wc=6;function kc(e,t,n,r,i,a){var o=e.__transition;if(o){if(n in o)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function a(e){n.state=bc,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)}function o(a){var c,u,d,f;if(n.state!==bc)return s();for(c in i)if((f=i[c]).name===n.name){if(f.state===gc)return sc(o);f.state===vc?(f.state=wc,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete i[c]):+c<t&&(f.state=wc,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete i[c])}if(sc((function(){n.state===gc&&(n.state=vc,n.timer.restart(l,n.delay,n.time),l(a))})),n.state=mc,n.on.call("start",e,e.__data__,n.index,n.group),n.state===mc){for(n.state=gc,r=new Array(d=n.tween.length),c=0,u=-1;c<d;++c)(f=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++u]=f);r.length=u+1}}function l(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(s),n.state=xc,1),a=-1,o=r.length;++a<o;)r[a].call(e,i);n.state===xc&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){for(var r in n.state=wc,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=rc(a,0,n.time)}(e,n,{name:t,index:r,group:i,on:hc,tween:_c,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:yc})}function Mc(e,t){var n=Ac(e,t);if(n.state>yc)throw new Error("too late; already scheduled");return n}function zc(e,t){var n=Ac(e,t);if(n.state>gc)throw new Error("too late; already running");return n}function Ac(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Ec(e,t){var n,r;return function(){var i=zc(this,e),a=i.tween;if(a!==n)for(var o=0,l=(r=n=a).length;o<l;++o)if(r[o].name===t){(r=r.slice()).splice(o,1);break}i.tween=r}}function Cc(e,t,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var a=zc(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var l={name:t,value:n},s=0,c=i.length;s<c;++s)if(i[s].name===t){i[s]=l;break}s===c&&i.push(l)}a.tween=i}}function Tc(e,t,n){var r=e._id;return e.each((function(){var e=zc(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return Ac(e,r).value[t]}}function Nc(e,t){var n;return("number"==typeof t?kl:t instanceof kr?bl:(n=kr(t))?(t=n,bl):El)(e,t)}function Sc(e){return function(){this.removeAttribute(e)}}function Lc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Oc(e,t,n){var r,i,a=n+"";return function(){var o=this.getAttribute(e);return o===a?null:o===r?i:i=t(r=o,n)}}function Fc(e,t,n){var r,i,a=n+"";return function(){var o=this.getAttributeNS(e.space,e.local);return o===a?null:o===r?i:i=t(r=o,n)}}function jc(e,t,n){var r,i,a;return function(){var o,l,s=n(this);if(null!=s)return(o=this.getAttribute(e))===(l=s+"")?null:o===r&&l===i?a:(i=l,a=t(r=o,s));this.removeAttribute(e)}}function Pc(e,t,n){var r,i,a;return function(){var o,l,s=n(this);if(null!=s)return(o=this.getAttributeNS(e.space,e.local))===(l=s+"")?null:o===r&&l===i?a:(i=l,a=t(r=o,s));this.removeAttributeNS(e.space,e.local)}}function $c(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,i)),n}return i._value=t,i}function Bc(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,i)),n}return i._value=t,i}function Dc(e,t){return function(){Mc(this,e).delay=+t.apply(this,arguments)}}function qc(e,t){return t=+t,function(){Mc(this,e).delay=t}}function Hc(e,t){return function(){zc(this,e).duration=+t.apply(this,arguments)}}function Rc(e,t){return t=+t,function(){zc(this,e).duration=t}}var Yc=ce.prototype.constructor;function Uc(e){return function(){this.style.removeProperty(e)}}var Ic=0;function Wc(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Vc(){return++Ic}var Gc=ce.prototype;Wc.prototype={constructor:Wc,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=s(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var l,c,u=r[o],d=u.length,f=a[o]=new Array(d),p=0;p<d;++p)(l=u[p])&&(c=e.call(l,l.__data__,p,u))&&("__data__"in l&&(c.__data__=l.__data__),f[p]=c,kc(f[p],t,n,p,f,Ac(l,n)));return new Wc(a,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=u(e));for(var r=this._groups,i=r.length,a=[],o=[],l=0;l<i;++l)for(var s,c=r[l],d=c.length,f=0;f<d;++f)if(s=c[f]){for(var p,h=e.call(s,s.__data__,f,c),_=Ac(s,n),y=0,b=h.length;y<b;++y)(p=h[y])&&kc(p,t,n,y,h,_);a.push(h),o.push(s)}return new Wc(a,o,t,n)},filter:function(e){"function"!=typeof e&&(e=d(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o=t[i],l=o.length,s=r[i]=[],c=0;c<l;++c)(a=o[c])&&e.call(a,a.__data__,c,o)&&s.push(a);return new Wc(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),l=0;l<a;++l)for(var s,c=t[l],u=n[l],d=c.length,f=o[l]=new Array(d),p=0;p<d;++p)(s=c[p]||u[p])&&(f[p]=s);for(;l<r;++l)o[l]=t[l];return new Wc(o,this._parents,this._name,this._id)},selection:function(){return new Yc(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=Vc(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o,l=r[a],s=l.length,c=0;c<s;++c)if(o=l[c]){var u=Ac(o,t);kc(o,e,n,c,l,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Wc(r,this._parents,e,n)},call:Gc.call,nodes:Gc.nodes,node:Gc.node,size:Gc.size,empty:Gc.empty,each:Gc.each,on:function(e,t){var n=this._id;return arguments.length<2?Ac(this.node(),n).on.on(e):this.each(function(e,t,n){var r,i,a=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?Mc:zc;return function(){var o=a(this,e),l=o.on;l!==r&&(i=(r=l).copy()).on(t,n),o.on=i}}(n,e,t))},attr:function(e,t){var n=r(e),i="transform"===n?Dl:Nc;return this.attrTween(e,"function"==typeof t?(n.local?Pc:jc)(n,i,Tc(this,"attr."+e,t)):null==t?(n.local?Lc:Sc)(n):(n.local?Fc:Oc)(n,i,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var i=r(e);return this.tween(n,(i.local?$c:Bc)(i,t))},style:function(e,t,n){var r="transform"==(e+="")?Bl:Nc;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var a=C(this,e),o=(this.style.removeProperty(e),C(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}(e,r)).on("end.style."+e,Uc(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,i,a;return function(){var o=C(this,e),l=n(this),s=l+"";return null==l&&(this.style.removeProperty(e),s=l=C(this,e)),o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,l))}}(e,r,Tc(this,"style."+e,t))).each(function(e,t){var n,r,i,a,o="style."+t,l="end."+o;return function(){var s=zc(this,e),c=s.on,u=null==s.value[o]?a||(a=Uc(t)):void 0;c===n&&i===u||(r=(n=c).copy()).on(l,i=u),s.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,a=n+"";return function(){var o=C(this,e);return o===a?null:o===r?i:i=t(r=o,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,i;function a(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&function(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}(e,a,n)),r}return a._value=t,a}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(Tc(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){return function(t){this.textContent=e.call(this,t)}}(r)),t}return r._value=e,r}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=Ac(this.node(),n).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===e)return r.value;return null}return this.each((null==t?Ec:Cc)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Dc:qc)(t,e)):Ac(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Hc:Rc)(t,e)):Ac(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){zc(this,e).ease=t}}(t,e)):Ac(this.node(),t).ease},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise((function(a,o){var l={value:o},s={value:function(){0==--i&&a()}};n.each((function(){var n=zc(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(l),t._.interrupt.push(l),t._.end.push(s)),n.on=t}))}))}};var Xc={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Zc(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))return Xc.time=ec(),Xc;return n}ce.prototype.interrupt=function(e){return this.each((function(){!function(e,t){var n,r,i,a=e.__transition,o=!0;if(a){for(i in t=null==t?null:t+"",a)(n=a[i]).name===t?(r=n.state>mc&&n.state<xc,n.state=wc,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete a[i]):o=!1;o&&delete e.__transition}}(this,e)}))},ce.prototype.transition=function(e){var t,n;e instanceof Wc?(t=e._id,e=e._name):(t=Vc(),(n=Xc).time=ec(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,l=r[a],s=l.length,c=0;c<s;++c)(o=l[c])&&kc(o,e,t,c,l,n||Zc(o,t));return new Wc(r,this._parents,e,t)};var Jc=1,Qc={container:document.body,point:[window.innerWidth/2,window.innerHeight/2],html:"",open_duration:250,close_duration:250,popup_custom_template:"",position:"overlay",shadow:!0,underlay_color:"rgba(255, 255, 255, 0.75)",width_side:35,height_side:35,width_overlay:80,height_overlay:80,vertical_position:"click",max_width:null,max_height:null,closeable:!0};function Kc(){var e=this;for(var t in e.unique_id=Jc++,e._is_open=!1,e._onclose=null,Qc)e["_"+t]=Qc[t]}function eu(e){Kc.prototype[e]=function(t){return void 0===t?this["_"+e]:(this["_"+e]=t,this)}}for(var tu in Qc)eu(tu);Kc.prototype.point=function(e,t){if(void 0===e)return this._point;if(Array.isArray(e))this._point=[e[0],e[1]];else if(void 0!==t)this._point=[e,t];else if(e instanceof HTMLElement||e instanceof SVGElement){var n=e.getBoundingClientRect();this._point=[Math.floor(n.left+n.width/2),Math.floor(n.top+n.height/2)]}else console.error("Panel: could not understand argument");return this},Kc.prototype.container=function(e){return e&&(this._container=e),this},Kc.prototype.hide=function(){if(this._is_open)return function(e){e._getElement().style.pointerEvents="none",e._is_open=!1;var t=e._close_duration;ue(e._getElement()).transition().duration(t).style("background","rgba(255, 255, 255, 0)").on("interrupt",(function(){ue(this).style("display",e._is_open?"block":"none")})).on("end",(function(){ue(this).style("display","none"),ue(e._content).html("")})).select(".flourish-panel-close").style("opacity","0"),ue(e._inner).transition().duration(t).style("opacity",0),ue(e._content).transition().duration(t/2).style("opacity",0)}(this),this},Kc.prototype.close=Kc.prototype.hide,Kc.prototype.draw=function(){var e=this;return e._content.innerHTML=e._html,function(e){var t=e._is_open||e._html==e._default?0:e._open_duration,n=window.innerWidth,r=window.innerHeight,i="overlay"==e._position,a="top"==e._position||"bottom"==e._position,o="left"==e._position||"right"==e._position,l=100*(e._max_width||1/0)/n,s=100*(e._max_height||1/0)/r,c=100*e._point[1]/r,u="click"==e._vertical_position&&!Flourish.fixed_height,d=i?Math.min(e._width_overlay,l):a?100:Math.min(e._width_side,l),f=i?Math.min(e._height_overlay,s):o?100:Math.min(e._height_side,s),p=i?(100-d)/2:"right"==e._position?100-d:0,h=u?Math.max(1,Math.min(c-f/2,99-f)):(100-f)/2,_=i?h:"bottom"==e._position?100-f:0,y=i?0:d,b=i?0:f,m=i?100*e._point[0]/n:"right"==e._position?100:"left"==e._position?-d:0,g=i?c:"bottom"==e._position?100:"top"==e._position?-f:0;ue(e._getElement()).style("display","block").transition().duration(t).delay(.25*t).style("background",i?e._underlay_color:"rgba(255, 255, 255, 0)").style("pointer-events",i?null:"none"),ue(e._inner).style("opacity",1).style("display","block").style("pointer-events","none").style("width",y+"%").style("height",b+"%").style("left",m+"%").style("top",g+"%").transition().duration(t).style("width",d+"%").style("height",f+"%").style("left",p+"%").style("top",_+"%").on("end",(function(){ue(e._inner).style("pointer-events","all").style("width",d+"%").style("height",f+"%").style("left",p+"%").style("top",_+"%")})).on("interrupt",(function(){ue(e._inner).style("pointer-events","all").style("width",d+"%").style("height",f+"%").style("left",p+"%").style("top",_+"%")}));var v=o&&u;ue(e._content).transition().duration(t/4).delay(t).style("opacity",1).on("interrupt",(function(){ue(this).style("opacity",1)})),ue(e._content).select(".flourish-panel-content-inner").style("position",v?"absolute":null).style("top",v?c+"%":null).style("transform",v?"translateY(-50%)":null),ue(e._inner).select(".flourish-panel-close").style("opacity",0).transition().duration(t/4).delay(t).style("opacity",e._closeable?1:0).attr("tabindex","0"),e._is_open=!0,ic()}(e),this},Kc.prototype.on=function(e,t){return"close"==e?t&&(this._onclose=t):console.error("Panel .on() method only supports 'close' events"),this},Kc.prototype.margins=function(){var e={top:0,right:0,bottom:0,left:0};if(this._is_open&&"overlay"!=this._position){var t=this._getElement().getBoundingClientRect();"top"==this._position&&(e.top=t.top+t.height),"right"==this._position&&(e.right=t.left),"bottom"==this._position&&(e.bottom=t.top),"left"==this._position&&(e.left=t.left+t.width)}return e.css=e.top+"px "+e.right+"px "+e.bottom+"px "+e.left+"px",e},Kc.prototype._getElement=function(){var e=this,t="flourish-panel-"+e.unique_id,n=document.getElementById(t);if(!n){(n=document.createElement("div")).className="flourish-panel",n.id=t,n.addEventListener("click",(function(e){e.stopPropagation(),l()})),window.addEventListener("keydown",(function(t){e._is_open&&"Escape"===t.key&&(t.stopPropagation(),t.preventDefault(),l())}),!1);var r=n.style;r.position="absolute",r.zIndex="999999",r.pointerEvents="none",r.width="100%",r.height="100%",r.top="0",r.left="0",r.background="rgba(255, 255, 255, 0)";var i=document.createElement("div");i.className="flourish-panel-inner",n.appendChild(i),e._inner=i,(r=i.style).width="0",r.height="0",r.position="absolute",r.boxSizing="border-box";var a=document.createElement("div");a.className="flourish-panel-shadow",i.appendChild(a);var o=document.createElement("div");o.className="flourish-panel-content",i.appendChild(o),e._content=o,(r=o.style).opacity="0",r.overflowY="auto",r.height="100%",function(e){ue(e._inner).append("svg").attr("class","flourish-panel-close fl-ignore-svg-download").attr("viewBox","0 0 40 40").style("width","1.25rem").style("height","1.25rem").style("position","absolute").style("right","1rem").style("top","1rem").style("cursor","pointer").style("opacity",0).attr("tabindex","-1").on("mouseover",(function(){e._closeable&&(this.style.opacity=.66)})).on("mouseout",(function(){e._closeable&&(this.style.opacity=1)})).on("click",(function(){K.stopPropagation(),e.hide(),e._onclose&&e._onclose()})).on("touch",(function(){K.stopPropagation(),e.hide(),e._onclose&&e._onclose()})).on("keydown",(function(){"Enter"==K.key&&(K.stopPropagation(),K.preventDefault(),e.hide(),e._onclose&&e._onclose())})).append("path").attr("stroke","#333333").attr("stroke-width","0.5rem").attr("stroke-linecap","round").attr("d","M 10,10 L 30,30 M 30,10 L 10,30")}(e),e._container.appendChild(n)}function l(){e.hide(),e._onclose&&e._onclose()}return n};var nu={mode:"popup",locked_id:null,popup_is_custom:!1,popup_custom_header:"Popup header",popup_custom_main:"Popup main content. Write your column names in between double curly brackets to display dynamic content.",popup_custom_accessible:"",popup_teaser_default:"Click to see more",popup_text_color:"#333333",popup_align:"start",popup_font_size:1,popup_width:18,popup_background:"#ffffff",popup_background_opacity:1,popup_padding:.5,popup_radius:.2,popup_shadow:!0,popup_pointer:!0,popup_header_background:"#333333",popup_header_text_color:"#ffffff",popup_header_type:"block",popup_list_type:"table",popup_list_label_weight:"normal",popup_list_separator:": ",panel_is_custom:!1,panel_custom_header:"Custom panel header",panel_custom_main:"Custom panel main content",panel_side_default_content:"<h3>Tap or click to explore</h3>",panel_side_fixed:!1,panel_position:"overlay",panel_width_overlay:80,panel_height_overlay:80,panel_vertical_position:"center",panel_width_side:35,panel_height_side:35,panel_max_width:null,panel_max_height:null,panel_text_color:"#333333",panel_align:"start",panel_font_size:1.25,panel_background:"#ffffff",panel_background_opacity:.9,panel_padding:1.2,panel_radius:.2,panel_shadow:!0,panel_open_duration:250,panel_close_duration:250,panel_list_type:"table",panel_list_label_weight:"normal",panel_list_separator:": "};const ru=/\{\{((?:[^}]|\}[^}])*)\}\}/g;function iu(e){return!(""!==e&&!Number.isNaN(e)&&null!=e)}function au(e,t){let n={title:null,subtitle:null,main:{}};var r={};const i=t[e._title_key],a=t[e._subtitle_key];if(i){n.title=i;const t=e._column_names[e._title_key];r[t]=!0}if(a){n.subtitle=a;const t=e._column_names[e._subtitle_key];r[t]=!0}const o=Object.keys(e._column_names);o.includes("metadata")&&o.push(o.splice(o.indexOf("metadata"),1)[0]);for(let i=0;i<o.length;i++){const a=o[i];if(e._column_names_hidden.indexOf(a)>-1)continue;if(a==e._title_key)continue;if(a==e._subtitle_key)continue;const l=e._column_names[a];if(Array.isArray(l))l.forEach((function(e,i){r[e]||iu(t[a])||(r[e]=!0,n.main[e]=t[a][i])}));else{if(r[l]||iu(t[a]))continue;r[l]=!0,n.main[l]=t[a]}}return n}function ou(e,t,n){var r="<div class='flourish-panel-content-inner'>",i=e["_"+n+"_default_template"],a=e._state[n+"_list_type"],o=e._state[n+"_list_separator"],l="<br />"===o,s=l?"":o,c=l?o:"";if(i)r+=i.replace(ru,(function(n,r){var i,a=e._column_names[r];if(Array.isArray(a)){if(0==a.length)return"";i="<ul>",a.forEach((function(e,n){i+="<li>"+e+o+t[r][n]+"</li>"})),i+="</ul>"}else i=t[r];return void 0!==i?i:""}));else{let n=au(e,t);if((n.title||n.subtitle)&&(r+="<header>",n.title&&(r+=`<h3>${n.title}</h3>`),n.subtitle&&(r+=`<h4>${n.subtitle}</h4>`),r+="</header>"),Object.keys(n.main).length){let e="";for(var u in n.main){const t=n.main[u];"table"==a?(e+="<tr><td class='table-col-label'><span class='data-heading'>",e+=u+"</span></td><td class='table-col-value'>",e+=t+"</td></tr>"):"ul"==a&&(e+="<li><span class='data-heading'>"+u+s,e+=" </span> "+c+t+"</li>")}r+="<div class='main-content'><"+a+">",r+=e,r+="</"+a+"></div></div>"}}return r}function lu(e,t,n){var r;return Object.keys(e._column_names).some((function(i){if(Array.isArray(e._column_names[i])){var a=e._column_names[i].indexOf(t);if(a>=0)return r=n[i][a],!0}else if(e._column_names[i]==t)return r=n[i],!0})),void 0!==r?r:""}function su(e,t,n){var r="";const i="popup"===n?e._state.popup_custom_header:e._state.panel_custom_header,a="popup"===n?e._state.popup_custom_main:e._state.panel_custom_main;var o=cu(i,e,t),l=cu(a,e,t);return o&&(r+="<header>"+o+"</header>"),l&&(r+="<div class='main-content'>"+l+"</div>"),r}function cu(e,t,n){return e.replace(/\{\{#if ((?:[^}]|\}[^}])*)\}\}([\s\S]*?)\{\{\/if\}\}/g,(function(e,r,i){return""==lu(t,r,n)?"":i})).replace(/\{\{(visualisation|story)\/(.*)\}\}/g,(function(e,t,n){var r=n.split("/");if(r.length<1||!["visualisation","story"].includes(t))return e;var i,a={id:r[0],w:r[1]||"100%",h:r[2]||"400px%"},l="https://flo.uri.sh/"+t+"/"+a.id+"/embed?";return(i="iframe",ue(o(i).call(document.documentElement))).attr("src",l).attr("title","Interactive or visual content").attr("class","flourish-embed-iframe").attr("frameborder","0").attr("scrolling","no").attr("sandbox","allow-same-origin allow-forms allow-scripts allow-downloads allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation").style("width",a.width).style("height",a.height).node().outerHTML})).replace(ru,(function(e,r){return lu(t,r,n)})).trim()}function uu(e,t){var n=e._formatters,r={};for(var i in t)if(n&&n[i])if(Array.isArray(n[i])){for(var a=[],o=0;o<n[i].length;o++){let e;e=iu(t[i][o])?"":n[i][o](t[i][o]),a.push(e)}r[i]=a}else{if(iu(t[i]))continue;r[i]=iu(t[i])?"":n[i](t[i])}else r[i]=iu(t[i])?"":t[i];return r}function du(e,t,n){var r="",i=uu(e,t);return n&&!e._state.popup_is_custom?r+="<div class='main-content'>"+e._state.popup_teaser_default+"</div>":n||e._state.popup_is_custom?r+=su(e,i,"popup"):r+=ou(e,i,"popup"),r}function fu(e,t){var n="",r=uu(e,t);return e._state.panel_is_custom?n+=su(e,r,"panel"):n+=ou(e,r,"panel"),n}function pu(e){var t=e.popup._getElement(),n=t.querySelector(".flourish-popup-content");n.style.padding="0",n.style.textAlign=e._state.popup_align,n.style.color=e._state.popup_text_color,n.style.fontSize=e._state.popup_font_size+"rem",n.style.borderRadius=e._state.popup_radius+"rem",n.addEventListener("click",(function(){event.stopPropagation()}));var r=e.panel._getElement(),i=r.querySelector(".flourish-panel-inner"),a=r.querySelector(".flourish-panel-content"),o=Ji(e._state.panel_background);i.style.background="rgba("+o.r+","+o.g+","+o.b+","+e._state.panel_background_opacity+")",i.style.borderRadius=e._state.popup_radius+"rem",i.style.boxShadow="overlay"==e._state.panel_position&&e._state.panel_shadow?"0 0 1.5rem rgba(0,0,0,0.2)":"",i.addEventListener("click",(function(){event.stopPropagation()})),a.style.padding=e._state.panel_padding+"rem",a.style.textAlign=e._state.panel_align,a.style.color=e._state.panel_text_color,a.style.fontSize=e._state.panel_font_size+"rem",a.style.boxSizing="border-box";var l=t.querySelector(".flourish-popup-svg g");l.style.fill=e._state.popup_background,l.style.opacity=e._state.popup_background_opacity;var s=r.querySelector(".flourish-panel-close path");s&&(s.style.stroke=e._state.panel_text_color),0==e._state.popup_shadow?l.removeAttribute("filter"):l.setAttribute("filter","url(#dropshadow-"+e.popup.unique_id+")"),l.querySelector("rect").setAttribute("rx",e._state.popup_radius+"rem"),l.querySelector("path").style.display=e._state.popup_pointer?"block":"none",function(e){if(!document.querySelector("#popup-styles")){var t=document.createElement("style");t.id="popup-styles",document.head.appendChild(t)}var n=new tr,r="block"==e._state.popup_header_type,i=Ji(e._state.popup_header_background||"transparent");i.opacity=e._state.popup_header_background?e._state.popup_background_opacity:0;var a=e._state.panel_position;n.select(".flourish-panel .flourish-panel-shadow").style("pointer-events","none").style("position","absolute").style("display","overlay"!=a&&e._state.panel_shadow?"block":"none").style("top","bottom"==a?"-3rem":"top"==a?"auto":0).style("right","left"==a?"-3rem":"right"==a?"auto":0).style("bottom","top"==a?"-3rem":"bottom"==a?"auto":0).style("left","right"==a?"-3rem":"left"==a?"auto":0).style("width","left"==a||"right"==a?"3rem":"100%").style("height","top"==a||"bottom"==a?"3rem":"100%").style("z-index","-1").style("overflow","hidden"),n.select(".flourish-panel .flourish-panel-shadow:before").style("content","''").style("display","block").style("position","absolute").style("width","left"==a||"right"==a?"1.5rem":"100%").style("height","top"==a||"bottom"==a?"1.5rem":"100%").style("border-radius","50%").style("background","rgba(0,0,0,0.3)").style("bottom","bottom"==a?"-50%":"top"==a?"auto":0).style("left","left"==a?"-50%":"right"==a?"auto":0).style("top","top"==a?"-50%":"bottom"==a?"auto":0).style("right","right"==a?"-50%":"left"==a?"auto":0).style("filter","blur(15px)"),n.select(".flourish-popup").style("pointer-events","none").select(".flourish-popup-content").style("pointer-events","auto").style("max-width",null==e._state.popup_width?null:e._state.popup_width+"rem !important"),n.select(".flourish-popup header, .flourish-panel header").style("margin","0"),n.select(".flourish-popup header").style("font-weight","bold").style("color",r?e._state.popup_header_text_color:null).style("background",r?i.rgb():null).style("padding",e._state.popup_padding+"rem").style("border-radius",e._state.popup_radius+"rem "+e._state.popup_radius+"rem 0 0"),n.select(".flourish-popup header:not(:last-child)").style("padding-bottom",r?null:"0"),n.select(".flourish-popup header:not(:last-child)").style("padding-bottom",r?null:"0"),n.select(".flourish-panel .flourish-panel-content-inner").style("overflow","auto"),n.select(".flourish-panel header").style("font-weight","bold").style("margin-bottom","0.5em").style("padding-right","1rem"),n.select(".flourish-popup .main-content").style("padding",e._state.popup_padding+"rem"),n.select(".flourish-popup header + .main-content").style("padding",e._state.popup_padding+"rem").style("padding-top",r?null:"0"),n.select(".flourish-popup h3, .flourish-panel h3").style("font-size","1em").style("margin","0"),n.select(".flourish-popup h3, .flourish-popup h4, .flourish-popup ul li").style("text-align",e._state.popup_align),n.select(".flourish-panel h3, .flourish-panel h4, .flourish-panel ul li").style("text-align",e._state.panel_align),n.select(".flourish-popup h4, .flourish-panel h4").style("font-size","1em").style("margin",r?"0":"0 0 0.25em").style("opacity","0.6").style("font-weight","normal"),n.select(".flourish-popup h4:empty, .flourish-panel h4:empty, .flourish-popup h3:empty, .flourish-panel h3:empty, .flourish-popup p:empty, .flourish-panel p:empty").style("display","none"),n.select(".flourish-popup p, .flourish-panel p").style("margin","0").style("font-size","inherit").style("font-weight","normal"),n.select(".flourish-popup table, .flourish-panel table").style("margin","0").style("width","100%").style("border-collapse","collapse").style("table-layout","auto"),n.select(".flourish-popup table tr, .flourish-panel table tr").style("border-top","1px solid #eee"),n.select(".flourish-popup table tr:first-child, .flourish-panel table tr:first-child").style("border-top","none"),n.select(".flourish-popup table tr td, .flourish-panel table tr td").style("padding","0.25em 0 0.25em 0").style("padding-inline-end","0.25em").style("vertical-align","top").style("font-size","inherit").style("text-align","start").style("font-weight","normal").style("overflow","hidden").style("text-overflow","ellipsis"),n.select(".flourish-popup table tr:last-child td, .flourish-panel table tr:last-child td").style("padding-bottom","0"),n.select(".flourish-popup .data-heading").style("font-weight",e._state.popup_list_label_weight).style("display","inline-block"),n.select(".flourish-panel .data-heading").style("font-weight",e._state.panel_list_label_weight).style("display","inline-block"),n.select(".flourish-popup table tr td.table-col-value, .flourish-panel table tr td.table-col-value").style("text-align","end").style("padding","0.25em 0 0.25em 0").style("padding-inline-end","0.25em"),n.select(".flourish-popup table tr:last-child td.table-col-value, .flourish-panel table tr:last-child td.table-col-value").style("padding-bottom","0"),n.select(".flourish-popup ul, .flourish-panel ul").style("padding","0").style("margin","0"),n.select(".flourish-popup ul li, .flourish-panel ul li").style("font-size","inherit").style("list-style-type","none"),e._state.popup_is_custom&&(console.log("is custom",e._state.popup_is_custom),n.select(".flourish-popup ul, .flourish-panel ul, .flourish-popup ol").style("padding-inline-start","1.5em").style("padding-inline-end","0.5em"),n.select(".flourish-popup ul li, .flourish-panel ul li").style("list-style-type","disc"),n.select(".flourish-popup ul li, .flourish-panel ul li").style("font-size","inherit").style("list-style-position","outside"),n.select(".flourish-popup ol li").style("padding-inline-start","0.5em")),document.head.querySelector("#popup-styles").innerHTML=n.print()}(e)}function hu(e,t,n){var r=this;for(var i in this._state=e,this._popup_default_template=null,this._panel_default_template=null,this._title_key="name",this._subtitle_key=null,this._first_load=!0,this._on_panel_close=null,this._show_default_content_timer=null,this._panel_container=t||document.body,this._popup_container=n||document.body,this._popup_directions=["top","bottom","left","right"],this._column_names=[],this._column_names_hidden=[],this._formatters=null,this._getLockedPosition=function(){return null},nu)null==e[i]&&(e[i]=nu[i]);this.panel=(new Kc).container(this._panel_container).on("close",(function(){r._state.locked_id=null,r.popup.hide(),"function"==typeof r._on_panel_close&&r._on_panel_close()})),this.popup=Rs().container(this._popup_container).point(0,0).draw().hide()}function _u(e){e.popup._getElement().querySelector(".flourish-popup-content").style.pointerEvents="none"}function yu(e){e.popup._getElement().querySelector(".flourish-popup-content").style.pointerEvents="auto"}function bu(e){return e||0===e}hu.prototype.getLockedPosition=function(e){return"function"!=typeof e?console.error("Invalid function passed to @flourish/info-popup getLockedPosition"):this._getLockedPosition=e,this},hu.prototype.update=function(e){if(null!==this._state.locked_id&&"none"!=this._state.mode){var t=this._getLockedPosition(this._state.locked_id);t?this.click(t[0],t[1],this._state.locked_id,e):console.warn("@flourish/info-popup: failed to return value from getLockedPosition function")}else this.clickout()},hu.prototype.click=function(e,t,n,r){if("none"!=this._state.mode){var i="popup"==this._state.mode?"popup":"panel";this._checkIfPopupIsEmpty(t,i)?"panel"===i?this.hidePanel():this.hidePopup():(this._point(e),null!=n?(this._state.locked_id=n,yu(this)):this._state.locked_id=null,"panel"==i?(clearTimeout(this._show_default_content_timer),this.popup.hide(),this._drawPanel(t,r)):"popup"==i&&(this.panel.hide(),this._drawPopup(t,r)))}},hu.prototype.clickout=function(){this._state.locked_id=null,"both"!=this._state.mode&&"panel"!=this._state.mode||(this.popup.draw(),this.popup.hide(),"overlay"!=this._state.panel_position&&this._state.panel_side_fixed?this._showDefaultPanelContent():this.panel.hide()),"popup"==this._state.mode&&(this.panel.hide(),this.popup.draw(),this.popup.hide()),"none"==this._state.mode&&(this.panel.hide(),this.popup.draw(),this.popup.hide())},hu.prototype.touch=function(e,t,n,r){this.mouseover(e,t,r,!0,n)},hu.prototype.mouseover=function(e,t,n,r,i){var a="panel"==this._state.mode?"panel":"popup";if(this._checkIfPopupIsEmpty(t,a,"both"==this._state.mode))"panel"===a?this.hidePanel():this.hidePopup();else{var o=this;if("both"==this._state.mode)if(this._point(e),this._drawPopup(t,n,!0),r?yu(this):_u(this),r)o.popup._getElement().querySelector(".flourish-popup-content").onclick=function(){o.click(e,t,i,n)};if("popup"==this._state.mode){if(null!==this._state.locked_id)return;_u(this),this._point(e),this._drawPopup(t,n)}if("panel"==this._state.mode){if(null!==this._state.locked_id||"overlay"==this._state.panel_position)return;if(!this._state.panel_side_fixed)return;clearTimeout(this._show_default_content_timer),this._point(e),this._drawPanel(t,n)}}},hu.prototype.mouseout=function(){if("both"==this._state.mode&&this.popup.hide(),"popup"==this._state.mode){if(null!==this._state.locked_id)return;this.popup.hide()}if("panel"==this._state.mode){if(null!==this._state.locked_id)return;if("overlay"==this._state.panel_position||!this._state.panel_side_fixed)return;this._showDefaultPanelContent()}},hu.prototype.locked=function(){return this._state.locked_id},hu.prototype.mode=function(){return this._state.mode},hu.prototype.setColumnNames=function(e){return this._column_names=e,this},hu.prototype.hideColumnNames=function(e){return this._column_names_hidden=e,this},hu.prototype.setFormatters=function(e){var t={};for(var n in e)if("function"==typeof e[n])t[n]=e[n];else if(Array.isArray(e[n])){for(var r=[],i=0;i<e[n].length;i++){var a;a="function"==typeof e[n][i]?e[n][i]:er(e[n][i].output_format_id),r.push(a)}t[n]=r}else t[n]=er(e[n].output_format_id);return this._formatters=t,this},hu.prototype._showDefaultPanelContent=function(){var e=this;clearTimeout(this._show_default_content_timer),this._show_default_content_timer=setTimeout((function(){e.panel.html(e._state.panel_side_default_content),e._drawPanel()}),100),e._drawPanel()},hu.prototype._checkIfPopupIsEmpty=function(e,t,n){if(this._state.popup_is_custom)return""===("panel"===t?fu(this,e):du(this,e,n)).trim();if(bu(e[this._title_key]))return!1;for(var r=Object.keys(this._column_names),i=0;i<r.length;i++){var a=r[i];if(!this._column_names_hidden.includes(a)){var o=e[a];if(Array.isArray(o)){for(let e=0;e<o.length;e++)if(bu(o[e]))return!1}else if(bu(o))return!1}}return!0},hu.prototype.getAccessiblePopupContent=function(e){return function(e,t){let n="";var r=e._popup_default_template;const i=uu(e,t);if(e._state.popup_is_custom&&e._state.popup_custom_accessible){const t=e._state.popup_custom_accessible;n=cu(t,e,i)}else if(r){var a={};r.match(ru).forEach((t=>{t.replace(ru,(function(t,r){var o;const l=e._column_names[r];if(Array.isArray(l)){if(0==l.length)return;l.forEach((function(e,t){if(a[e])return;a[e]=!0;const n=i[r][t];ha(n)||iu(n)||(o=`${e}: ${n}, `)}))}else{const e=i[r];if(ha(e)||iu(e))return;if(a[l])return;a[l]=!0,o=`${l}: ${e}, `}void 0!==o&&(n+=o)}))}))}else{let t=au(e,i);for(var o in t.title&&(n+=`${t.title}, `),t.subtitle&&(n+=`${t.subtitle}, `),t.main){const e=t.main[o];iu(e)||(n+=`${o}: ${e}, `)}}return n=n.replace(/, $/,""),n}(this,e)},hu.prototype.onPanelClose=function(e){return this._on_panel_close=e,this},hu.prototype._drawPopup=function(e,t,n){return e&&this.popup.html(du(this,e,n)),pu(this),this.popup.draw(),t&&t(this.popup._getElement(),e),this},hu.prototype._drawPanel=function(e,t){return pu(this),this.panel.open_duration(this._state.panel_open_duration).close_duration(this._state.panel_close_duration).width_overlay(this._state.panel_width_overlay).height_overlay(this._state.panel_height_overlay).vertical_position(this._state.panel_vertical_position).width_side(this._state.panel_width_side).height_side(this._state.panel_height_side).position(this._state.panel_position).max_width(this._state.panel_max_width).max_height(this._state.panel_max_height).closeable("overlay"==this._state.panel_position||!this._state.panel_side_fixed),void 0===e?this.panel.draw():this.panel.html(fu(this,e)).draw(),t&&t(this.panel._getElement(),e),this},hu.prototype.hidePanel=function(){return this.panel.hide(),this},hu.prototype.hidePopup=function(){return this.popup.hide(),this},hu.prototype.popupDirections=function(e){return e?(this._popup_directions=e,this):this._popup_directions.slice()},hu.prototype.margins=function(){return this.panel.margins()},hu.prototype._getBiggestGap=function(e){var t,n,r=this._popup_container.getBoundingClientRect(),i=0,a={right:(r.width+r.left-(e.width+e.left))/r.width,bottom:(r.height+r.top-(e.height+e.top))/r.height,left:(e.left-r.left)/r.width,top:(e.top-r.top)/r.height},o={right:["left","leftFlexible","topLeft","bottomLeft","bottomFlexible","bottom","topFlexible","top","bottomRight","topRight","rightFlexible","right"],left:["right","rightFlexible","topRight","bottomRight","top","topFlexible","bottom","bottomFlexible","bottomLeft","topLeft","leftFlexible","left"],top:["bottom","bottomFlexible","bottomRight","bottomLeft","rightFlexible","leftFlexible","right","left","topRight","topLeft","topFlexible","top"],bottom:["top","topFlexible","topLeft","topRight","left","right","leftFlexible","rightFlexible","bottomLeft","bottomRight","bottomFlexible","bottom"]};for(var l in a)this._popup_directions.indexOf(l)<0||a[l]>i&&(i=a[l],t=l,n=o[l]);var s=e.left,c=e.top;return"left"==t||"right"==t?c+=.5*e.height:"bottom"==t&&(c+=e.height),"top"==t||"bottom"==t?s+=.5*e.width:"right"==t&&(s+=e.width),{side:t,arrow_directions:n,x:s,y:c}},hu.prototype._point=function(e){var t,n,r=this._popup_directions;if(Array.isArray(e))t=e[0],n=e[1];else{if(!e||!e.getBoundingClientRect)return console.warn("@flourish/info-popup: Invalid positional value passed in point function, should be a coordinates array, or a node. Current value is",e),this;var i=e.getBoundingClientRect(),a=this._getBiggestGap(i);t=a.x,n=a.y,r=a.arrow_directions}return this.panel.point(e),this.popup.directions(r).point(t,n),this},hu.prototype.popupDefaultTemplate=function(e){return null!=e?(this._popup_default_template=e,this):this._popup_default_template},hu.prototype.panelDefaultTemplate=function(e){return null!=e?(this._panel_default_template=e,this):this._panel_default_template},hu.prototype.titleKey=function(e){return null!=e?(this._title_key=e,this):this._title_key},hu.prototype.subtitleKey=function(e){return null!=e?(this._subtitle_key=e,this):this._subtitle_key};var mu={root:null},gu="object"==typeof global&&global&&global.Object===Object&&global,vu="object"==typeof self&&self&&self.Object===Object&&self,xu=gu||vu||Function("return this")(),wu=xu.Symbol,ku=Object.prototype,Mu=ku.hasOwnProperty,zu=ku.toString,Au=wu?wu.toStringTag:void 0;var Eu=Object.prototype.toString;var Cu="[object Null]",Tu="[object Undefined]",Nu=wu?wu.toStringTag:void 0;function Su(e){return null==e?void 0===e?Tu:Cu:Nu&&Nu in Object(e)?function(e){var t=Mu.call(e,Au),n=e[Au];try{e[Au]=void 0;var r=!0}catch(e){}var i=zu.call(e);return r&&(t?e[Au]=n:delete e[Au]),i}(e):function(e){return Eu.call(e)}(e)}function Lu(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var Ou="[object AsyncFunction]",Fu="[object Function]",ju="[object GeneratorFunction]",Pu="[object Proxy]";function $u(e){if(!Lu(e))return!1;var t=Su(e);return t==Fu||t==ju||t==Ou||t==Pu}var Bu,Du=xu["__core-js_shared__"],qu=(Bu=/[^.]+$/.exec(Du&&Du.keys&&Du.keys.IE_PROTO||""))?"Symbol(src)_1."+Bu:"";var Hu=Function.prototype.toString;function Ru(e){if(null!=e){try{return Hu.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var Yu=/^\[object .+?Constructor\]$/,Uu=Function.prototype,Iu=Object.prototype,Wu=Uu.toString,Vu=Iu.hasOwnProperty,Gu=RegExp("^"+Wu.call(Vu).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Xu(e){return!(!Lu(e)||(t=e,qu&&qu in t))&&($u(e)?Gu:Yu).test(Ru(e));var t}function Zu(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Xu(n)?n:void 0}var Ju=Zu(Object,"create");var Qu=Object.prototype.hasOwnProperty;var Ku=Object.prototype.hasOwnProperty;function ed(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function td(e,t){return e===t||e!=e&&t!=t}function nd(e,t){for(var n=e.length;n--;)if(td(e[n][0],t))return n;return-1}ed.prototype.clear=function(){this.__data__=Ju?Ju(null):{},this.size=0},ed.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ed.prototype.get=function(e){var t=this.__data__;if(Ju){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Qu.call(t,e)?t[e]:void 0},ed.prototype.has=function(e){var t=this.__data__;return Ju?void 0!==t[e]:Ku.call(t,e)},ed.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Ju&&void 0===t?"__lodash_hash_undefined__":t,this};var rd=Array.prototype.splice;function id(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}id.prototype.clear=function(){this.__data__=[],this.size=0},id.prototype.delete=function(e){var t=this.__data__,n=nd(t,e);return!(n<0)&&(n==t.length-1?t.pop():rd.call(t,n,1),--this.size,!0)},id.prototype.get=function(e){var t=this.__data__,n=nd(t,e);return n<0?void 0:t[n][1]},id.prototype.has=function(e){return nd(this.__data__,e)>-1},id.prototype.set=function(e,t){var n=this.__data__,r=nd(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var ad=Zu(xu,"Map");function od(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function ld(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ld.prototype.clear=function(){this.size=0,this.__data__={hash:new ed,map:new(ad||id),string:new ed}},ld.prototype.delete=function(e){var t=od(this,e).delete(e);return this.size-=t?1:0,t},ld.prototype.get=function(e){return od(this,e).get(e)},ld.prototype.has=function(e){return od(this,e).has(e)},ld.prototype.set=function(e,t){var n=od(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function sd(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ld;++t<n;)this.add(e[t])}function cd(e){return e!=e}function ud(e,t){return!!(null==e?0:e.length)&&function(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):function(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}(e,cd,n)}(e,t,0)>-1}function dd(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function fd(e,t){return e.has(t)}sd.prototype.add=sd.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},sd.prototype.has=function(e){return this.__data__.has(e)};var pd=Zu(xu,"Set");function hd(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var _d=pd&&1/hd(new pd([,-0]))[1]==1/0?function(e){return new pd(e)}:function(){},yd=200;function bd(e,t,n){var r=-1,i=ud,a=e.length,o=!0,l=[],s=l;if(n)o=!1,i=dd;else if(a>=yd){var c=t?null:_d(e);if(c)return hd(c);o=!1,i=fd,s=new sd}else s=t?[]:l;e:for(;++r<a;){var u=e[r],d=t?t(u):u;if(u=n||0!==u?u:0,o&&d==d){for(var f=s.length;f--;)if(s[f]===d)continue e;t&&s.push(d),l.push(u)}else i(s,d,n)||(s!==l&&s.push(d),l.push(u))}return l}function md(e){return e&&e.length?bd(e):[]}function gd(e){var t=this.__data__=new id(e);this.size=t.size}function vd(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}gd.prototype.clear=function(){this.__data__=new id,this.size=0},gd.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},gd.prototype.get=function(e){return this.__data__.get(e)},gd.prototype.has=function(e){return this.__data__.has(e)},gd.prototype.set=function(e,t){var n=this.__data__;if(n instanceof id){var r=n.__data__;if(!ad||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ld(r)}return n.set(e,t),this.size=n.size,this};var xd=1,wd=2;function kd(e,t,n,r,i,a){var o=n&xd,l=e.length,s=t.length;if(l!=s&&!(o&&s>l))return!1;var c=a.get(e),u=a.get(t);if(c&&u)return c==t&&u==e;var d=-1,f=!0,p=n&wd?new sd:void 0;for(a.set(e,t),a.set(t,e);++d<l;){var h=e[d],_=t[d];if(r)var y=o?r(_,h,d,t,e,a):r(h,_,d,e,t,a);if(void 0!==y){if(y)continue;f=!1;break}if(p){if(!vd(t,(function(e,t){if(!fd(p,t)&&(h===e||i(h,e,n,r,a)))return p.push(t)}))){f=!1;break}}else if(h!==_&&!i(h,_,n,r,a)){f=!1;break}}return a.delete(e),a.delete(t),f}var Md=xu.Uint8Array;function zd(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}var Ad=1,Ed=2,Cd="[object Boolean]",Td="[object Date]",Nd="[object Error]",Sd="[object Map]",Ld="[object Number]",Od="[object RegExp]",Fd="[object Set]",jd="[object String]",Pd="[object Symbol]",$d="[object ArrayBuffer]",Bd="[object DataView]",Dd=wu?wu.prototype:void 0,qd=Dd?Dd.valueOf:void 0;var Hd=Array.isArray;var Rd=Object.prototype.propertyIsEnumerable,Yd=Object.getOwnPropertySymbols,Ud=Yd?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}(Yd(e),(function(t){return Rd.call(e,t)})))}:function(){return[]},Id=Ud;function Wd(e){return null!=e&&"object"==typeof e}function Vd(e){return Wd(e)&&"[object Arguments]"==Su(e)}var Gd=Object.prototype,Xd=Gd.hasOwnProperty,Zd=Gd.propertyIsEnumerable,Jd=Vd(function(){return arguments}())?Vd:function(e){return Wd(e)&&Xd.call(e,"callee")&&!Zd.call(e,"callee")},Qd=Jd;var Kd="object"==typeof e&&e&&!e.nodeType&&e,ef=Kd&&"object"==typeof module&&module&&!module.nodeType&&module,tf=ef&&ef.exports===Kd?xu.Buffer:void 0,nf=(tf?tf.isBuffer:void 0)||function(){return!1},rf=9007199254740991,af=/^(?:0|[1-9]\d*)$/;function of(e,t){var n=typeof e;return!!(t=null==t?rf:t)&&("number"==n||"symbol"!=n&&af.test(e))&&e>-1&&e%1==0&&e<t}var lf=9007199254740991;function sf(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=lf}var cf={};cf["[object Float32Array]"]=cf["[object Float64Array]"]=cf["[object Int8Array]"]=cf["[object Int16Array]"]=cf["[object Int32Array]"]=cf["[object Uint8Array]"]=cf["[object Uint8ClampedArray]"]=cf["[object Uint16Array]"]=cf["[object Uint32Array]"]=!0,cf["[object Arguments]"]=cf["[object Array]"]=cf["[object ArrayBuffer]"]=cf["[object Boolean]"]=cf["[object DataView]"]=cf["[object Date]"]=cf["[object Error]"]=cf["[object Function]"]=cf["[object Map]"]=cf["[object Number]"]=cf["[object Object]"]=cf["[object RegExp]"]=cf["[object Set]"]=cf["[object String]"]=cf["[object WeakMap]"]=!1;var uf,df="object"==typeof e&&e&&!e.nodeType&&e,ff=df&&"object"==typeof module&&module&&!module.nodeType&&module,pf=ff&&ff.exports===df&&gu.process,hf=function(){try{var e=ff&&ff.require&&ff.require("util").types;return e||pf&&pf.binding&&pf.binding("util")}catch(e){}}(),_f=hf&&hf.isTypedArray,yf=_f?(uf=_f,function(e){return uf(e)}):function(e){return Wd(e)&&sf(e.length)&&!!cf[Su(e)]},bf=Object.prototype.hasOwnProperty;function mf(e,t){var n=Hd(e),r=!n&&Qd(e),i=!n&&!r&&nf(e),a=!n&&!r&&!i&&yf(e),o=n||r||i||a,l=o?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],s=l.length;for(var c in e)!t&&!bf.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||of(c,s))||l.push(c);return l}var gf=Object.prototype;var vf=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),xf=vf,wf=Object.prototype.hasOwnProperty;function kf(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||gf))return xf(e);var t,n,r=[];for(var i in Object(e))wf.call(e,i)&&"constructor"!=i&&r.push(i);return r}function Mf(e){return null!=(t=e)&&sf(t.length)&&!$u(t)?mf(e):kf(e);var t}function zf(e){return function(e,t,n){var r=t(e);return Hd(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,Mf,Id)}var Af=1,Ef=Object.prototype.hasOwnProperty;var Cf=Zu(xu,"DataView"),Tf=Zu(xu,"Promise"),Nf=Zu(xu,"WeakMap"),Sf="[object Map]",Lf="[object Promise]",Of="[object Set]",Ff="[object WeakMap]",jf="[object DataView]",Pf=Ru(Cf),$f=Ru(ad),Bf=Ru(Tf),Df=Ru(pd),qf=Ru(Nf),Hf=Su;(Cf&&Hf(new Cf(new ArrayBuffer(1)))!=jf||ad&&Hf(new ad)!=Sf||Tf&&Hf(Tf.resolve())!=Lf||pd&&Hf(new pd)!=Of||Nf&&Hf(new Nf)!=Ff)&&(Hf=function(e){var t=Su(e),n="[object Object]"==t?e.constructor:void 0,r=n?Ru(n):"";if(r)switch(r){case Pf:return jf;case $f:return Sf;case Bf:return Lf;case Df:return Of;case qf:return Ff}return t});var Rf=Hf,Yf=1,Uf="[object Arguments]",If="[object Array]",Wf="[object Object]",Vf=Object.prototype.hasOwnProperty;function Gf(e,t,n,r,i,a){var o=Hd(e),l=Hd(t),s=o?If:Rf(e),c=l?If:Rf(t),u=(s=s==Uf?Wf:s)==Wf,d=(c=c==Uf?Wf:c)==Wf,f=s==c;if(f&&nf(e)){if(!nf(t))return!1;o=!0,u=!1}if(f&&!u)return a||(a=new gd),o||yf(e)?kd(e,t,n,r,i,a):function(e,t,n,r,i,a,o){switch(n){case Bd:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case $d:return!(e.byteLength!=t.byteLength||!a(new Md(e),new Md(t)));case Cd:case Td:case Ld:return td(+e,+t);case Nd:return e.name==t.name&&e.message==t.message;case Od:case jd:return e==t+"";case Sd:var l=zd;case Fd:var s=r&Ad;if(l||(l=hd),e.size!=t.size&&!s)return!1;var c=o.get(e);if(c)return c==t;r|=Ed,o.set(e,t);var u=kd(l(e),l(t),r,i,a,o);return o.delete(e),u;case Pd:if(qd)return qd.call(e)==qd.call(t)}return!1}(e,t,s,n,r,i,a);if(!(n&Yf)){var p=u&&Vf.call(e,"__wrapped__"),h=d&&Vf.call(t,"__wrapped__");if(p||h){var _=p?e.value():e,y=h?t.value():t;return a||(a=new gd),i(_,y,n,r,a)}}return!!f&&(a||(a=new gd),function(e,t,n,r,i,a){var o=n&Af,l=zf(e),s=l.length;if(s!=zf(t).length&&!o)return!1;for(var c=s;c--;){var u=l[c];if(!(o?u in t:Ef.call(t,u)))return!1}var d=a.get(e),f=a.get(t);if(d&&f)return d==t&&f==e;var p=!0;a.set(e,t),a.set(t,e);for(var h=o;++c<s;){var _=e[u=l[c]],y=t[u];if(r)var b=o?r(y,_,u,t,e,a):r(_,y,u,e,t,a);if(!(void 0===b?_===y||i(_,y,n,r,a):b)){p=!1;break}h||(h="constructor"==u)}if(p&&!h){var m=e.constructor,g=t.constructor;m==g||!("constructor"in e)||!("constructor"in t)||"function"==typeof m&&m instanceof m&&"function"==typeof g&&g instanceof g||(p=!1)}return a.delete(e),a.delete(t),p}(e,t,n,r,i,a))}function Xf(e,t,n,r,i){return e===t||(null==e||null==t||!Wd(e)&&!Wd(t)?e!=e&&t!=t:Gf(e,t,n,r,Xf,i))}var Zf=1,Jf=2;function Qf(e){return e==e&&!Lu(e)}function Kf(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function ep(e){var t=function(e){for(var t=Mf(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Qf(i)]}return t}(e);return 1==t.length&&t[0][2]?Kf(t[0][0],t[0][1]):function(n){return n===e||function(e,t,n,r){var i=n.length,a=i,o=!r;if(null==e)return!a;for(e=Object(e);i--;){var l=n[i];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<a;){var s=(l=n[i])[0],c=e[s],u=l[1];if(o&&l[2]){if(void 0===c&&!(s in e))return!1}else{var d=new gd;if(r)var f=r(c,u,s,e,t,d);if(!(void 0===f?Xf(u,c,Zf|Jf,r,d):f))return!1}}return!0}(n,e,t)}}var tp="[object Symbol]";function np(e){return"symbol"==typeof e||Wd(e)&&Su(e)==tp}var rp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ip=/^\w*$/;function ap(e,t){if(Hd(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!np(e))||(ip.test(e)||!rp.test(e)||null!=t&&e in Object(t))}var op="Expected a function";function lp(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(op);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(lp.Cache||ld),n}lp.Cache=ld;var sp=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,cp=/\\(\\)?/g,up=function(e){var t=lp(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(sp,(function(e,n,r,i){t.push(r?i.replace(cp,"$1"):n||e)})),t})),dp=up;var fp=1/0,pp=wu?wu.prototype:void 0,hp=pp?pp.toString:void 0;function _p(e){if("string"==typeof e)return e;if(Hd(e))return function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}(e,_p)+"";if(np(e))return hp?hp.call(e):"";var t=e+"";return"0"==t&&1/e==-fp?"-0":t}function yp(e,t){return Hd(e)?e:ap(e,t)?[e]:dp(function(e){return null==e?"":_p(e)}(e))}var bp=1/0;function mp(e){if("string"==typeof e||np(e))return e;var t=e+"";return"0"==t&&1/e==-bp?"-0":t}function gp(e,t){for(var n=0,r=(t=yp(t,e)).length;null!=e&&n<r;)e=e[mp(t[n++])];return n&&n==r?e:void 0}function vp(e,t){return null!=e&&t in Object(e)}function xp(e,t){return null!=e&&function(e,t,n){for(var r=-1,i=(t=yp(t,e)).length,a=!1;++r<i;){var o=mp(t[r]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&sf(i)&&of(o,i)&&(Hd(e)||Qd(e))}(e,t,vp)}var wp=1,kp=2;function Mp(e,t){return ap(e)&&Qf(t)?Kf(mp(e),t):function(n){var r=function(e,t,n){var r=null==e?void 0:gp(e,t);return void 0===r?n:r}(n,e);return void 0===r&&r===t?xp(n,e):Xf(t,r,wp|kp)}}function zp(e){return e}function Ap(e){return ap(e)?(t=mp(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return gp(t,e)}}(e);var t}function Ep(e,t){return e&&e.length?bd(e,"function"==typeof(n=t)?n:null==n?zp:"object"==typeof n?Hd(n)?Mp(n[0],n[1]):ep(n):Ap(n)):[];var n}function Cp(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function Tp(e,t){e instanceof Map?(e=[void 0,e],void 0===t&&(t=Sp)):void 0===t&&(t=Np);for(var n,r,i,a,o,l=new Fp(e),s=[l];n=s.pop();)if((i=t(n.data))&&(o=(i=Array.from(i)).length))for(n.children=i,a=o-1;a>=0;--a)s.push(r=i[a]=new Fp(i[a])),r.parent=n,r.depth=n.depth+1;return l.eachBefore(Op)}function Np(e){return e.children}function Sp(e){return Array.isArray(e)?e[1]:null}function Lp(e){void 0!==e.data.value&&(e.value=e.data.value),e.data=e.data.data}function Op(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function Fp(e){this.data=e,this.depth=this.height=0,this.parent=null}function jp(e){for(var t,n,r=0,i=(e=function(e){for(var t,n,r=e.length;r;)n=Math.random()*r--|0,t=e[r],e[r]=e[n],e[n]=t;return e}(Array.from(e))).length,a=[];r<i;)t=e[r],n&&Bp(n,t)?++r:(n=qp(a=Pp(a,t)),r=0);return n}function Pp(e,t){var n,r;if(Dp(t,e))return[t];for(n=0;n<e.length;++n)if($p(t,e[n])&&Dp(Hp(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if($p(Hp(e[n],e[r]),t)&&$p(Hp(e[n],t),e[r])&&$p(Hp(e[r],t),e[n])&&Dp(Rp(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function $p(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function Bp(e,t){var n=e.r-t.r+1e-9*Math.max(e.r,t.r,1),r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Dp(e,t){for(var n=0;n<t.length;++n)if(!Bp(e,t[n]))return!1;return!0}function qp(e){switch(e.length){case 1:return{x:(t=e[0]).x,y:t.y,r:t.r};case 2:return Hp(e[0],e[1]);case 3:return Rp(e[0],e[1],e[2])}var t}function Hp(e,t){var n=e.x,r=e.y,i=e.r,a=t.x,o=t.y,l=t.r,s=a-n,c=o-r,u=l-i,d=Math.sqrt(s*s+c*c);return{x:(n+a+s/d*u)/2,y:(r+o+c/d*u)/2,r:(d+i+l)/2}}function Rp(e,t,n){var r=e.x,i=e.y,a=e.r,o=t.x,l=t.y,s=t.r,c=n.x,u=n.y,d=n.r,f=r-o,p=r-c,h=i-l,_=i-u,y=s-a,b=d-a,m=r*r+i*i-a*a,g=m-o*o-l*l+s*s,v=m-c*c-u*u+d*d,x=p*h-f*_,w=(h*v-_*g)/(2*x)-r,k=(_*y-h*b)/x,M=(p*g-f*v)/(2*x)-i,z=(f*b-p*y)/x,A=k*k+z*z-1,E=2*(a+w*k+M*z),C=w*w+M*M-a*a,T=-(A?(E+Math.sqrt(E*E-4*A*C))/(2*A):C/E);return{x:r+w+k*T,y:i+M+z*T,r:T}}function Yp(e,t,n){var r,i,a,o,l=e.x-t.x,s=e.y-t.y,c=l*l+s*s;c?(i=t.r+n.r,i*=i,o=e.r+n.r,i>(o*=o)?(r=(c+o-i)/(2*c),a=Math.sqrt(Math.max(0,o/c-r*r)),n.x=e.x-r*l-a*s,n.y=e.y-r*s+a*l):(r=(c+i-o)/(2*c),a=Math.sqrt(Math.max(0,i/c-r*r)),n.x=t.x+r*l-a*s,n.y=t.y+r*s+a*l)):(n.x=t.x+n.r,n.y=t.y)}function Up(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Ip(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,a=(t.y*n.r+n.y*t.r)/r;return i*i+a*a}function Wp(e){this._=e,this.next=null,this.previous=null}function Vp(e){if(!(a=(t=e,e="object"==typeof t&&"length"in t?t:Array.from(t)).length))return 0;var t,n,r,i,a,o,l,s,c,u,d,f;if((n=e[0]).x=0,n.y=0,!(a>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(a>2))return n.r+r.r;Yp(r,n,i=e[2]),n=new Wp(n),r=new Wp(r),i=new Wp(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(s=3;s<a;++s){Yp(n._,r._,i=e[s]),i=new Wp(i),c=r.next,u=n.previous,d=r._.r,f=n._.r;do{if(d<=f){if(Up(c._,i._)){r=c,n.next=r,r.previous=n,--s;continue e}d+=c._.r,c=c.next}else{if(Up(u._,i._)){(n=u).next=r,r.previous=n,--s;continue e}f+=u._.r,u=u.previous}}while(c!==u.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=Ip(n);(i=i.next)!==r;)(l=Ip(i))<o&&(n=i,o=l);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=jp(n),s=0;s<a;++s)(n=e[s]).x-=i.x,n.y-=i.y;return i.r}function Gp(e){if("function"!=typeof e)throw new Error;return e}function Xp(){return 0}function Zp(e){return function(){return e}}function Jp(e){return Math.sqrt(e.value)}function Qp(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function Kp(e,t){return function(n){if(r=n.children){var r,i,a,o=r.length,l=e(n)*t||0;if(l)for(i=0;i<o;++i)r[i].r+=l;if(a=Vp(r),l)for(i=0;i<o;++i)r[i].r-=l;n.r=a+l}}}function eh(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function th(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function nh(e,t,n,r,i){for(var a,o=e.children,l=-1,s=o.length,c=e.value&&(r-t)/e.value;++l<s;)(a=o[l]).y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*c}function rh(e,t){return e.parent===t.parent?1:2}function ih(e){var t=e.children;return t?t[0]:e.t}function ah(e){var t=e.children;return t?t[t.length-1]:e.t}function oh(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function lh(e,t,n){return e.a.parent===t.parent?e.a:n}function sh(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function ch(e,t,n,r,i){for(var a,o=e.children,l=-1,s=o.length,c=e.value&&(i-n)/e.value;++l<s;)(a=o[l]).x0=t,a.x1=r,a.y0=n,a.y1=n+=a.value*c}Fp.prototype=Tp.prototype={constructor:Fp,count:function(){return this.eachAfter(Cp)},each:function(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this},eachAfter:function(e,t){for(var n,r,i,a=this,o=[a],l=[],s=-1;a=o.pop();)if(l.push(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r]);for(;a=l.pop();)e.call(t,a,++s,this);return this},eachBefore:function(e,t){for(var n,r,i=this,a=[i],o=-1;i=a.pop();)if(e.call(t,i,++o,this),n=i.children)for(r=n.length-1;r>=0;--r)a.push(n[r]);return this},find:function(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r},sum:function(e){return this.eachAfter((function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n}))},sort:function(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;e=n.pop(),t=r.pop();for(;e===t;)i=e,e=n.pop(),t=r.pop();return i}(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){return Array.from(this)},leaves:function(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e},links:function(){var e=this,t=[];return e.each((function(n){n!==e&&t.push({source:n.parent,target:n})})),t},copy:function(){return Tp(this).eachBefore(Lp)},[Symbol.iterator]:function*(){var e,t,n,r,i=this,a=[i];do{for(e=a.reverse(),a=[];i=e.pop();)if(yield i,t=i.children)for(n=0,r=t.length;n<r;++n)a.push(t[n])}while(a.length)}},sh.prototype=Object.create(Fp.prototype);var uh=(1+Math.sqrt(5))/2;function dh(e,t,n,r,i,a){for(var o,l,s,c,u,d,f,p,h,_,y,b=[],m=t.children,g=0,v=0,x=m.length,w=t.value;g<x;){s=i-n,c=a-r;do{u=m[v++].value}while(!u&&v<x);for(d=f=u,y=u*u*(_=Math.max(c/s,s/c)/(w*e)),h=Math.max(f/y,y/d);v<x;++v){if(u+=l=m[v].value,l<d&&(d=l),l>f&&(f=l),y=u*u*_,(p=Math.max(f/y,y/d))>h){u-=l;break}h=p}b.push(o={value:u,dice:s<c,children:m.slice(g,v)}),o.dice?nh(o,n,r,i,w?r+=c*u/w:a):ch(o,n,r,w?n+=s*u/w:i,a),w-=u,g=v}return b}var fh=function e(t){function n(e,n,r,i,a){dh(t,e,n,r,i,a)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(uh);var ph=function e(t){function n(e,n,r,i,a){if((o=e._squarify)&&o.ratio===t)for(var o,l,s,c,u,d=-1,f=o.length,p=e.value;++d<f;){for(s=(l=o[d]).children,c=l.value=0,u=s.length;c<u;++c)l.value+=s[c].value;l.dice?nh(l,n,r,i,p?r+=(a-r)*l.value/p:a):ch(l,n,r,p?n+=(i-n)*l.value/p:i,a),p-=l.value}else e._squarify=o=dh(t,e,n,r,i,a),o.ratio=t}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(uh);let hh={Count:e=>e.reduce(((e,t)=>e+1),0),Sum:e=>e.reduce(((e,t)=>e+(isNaN(t.value)?0:t.value)),0)};function _h(e,t){if(0===e.length||0===Es.data.column_names.nest_columns.length)return[];let n=function(e){let t=Es.data.column_names.nest_columns,n=Es.data.column_names.size_columns.indexOf(Ro.size_by);return e.map((e=>{let r={};for(let n=0;n<t.length;n++)r[t[n]]=e.nest_columns[n];return r.value=n>-1?e.size_columns[n]:0,r.original_data=e,r}))}(e);t&&(n=function(e){var t=e.filter((e=>e.value>=0));return t.length,e.length,t}(n));Es.data.column_names.size_columns.length>0&&0===n.filter((e=>0!==e.value&&null!==e.value)).length&&(n=[]);let r=_i(),i=Es.data.column_names.size_columns.length>0?Ro.aggregation_type:"Count";return Es.data.column_names.nest_columns.forEach((e=>{r=r.key((t=>t[e]))})),r=r.rollup((e=>({values:e,rollup_value:hh[i](e)}))),r=r.entries(n),r}function yh(e){let t=e.ancestors().slice(0,-1).map((e=>e.data.key)).reverse();e.id=0===e.depth?"root":e.depth+"-"+t.join("-"),e.children&&e.children.forEach((e=>{yh(e)}))}function bh(e){e.children&&(e.children.sort(((e,t)=>e.value>t.value?-1:e.value<t.value?1:0)),e.children.forEach(bh))}function mh(e){e.children&&(e.children.sort(((e,t)=>e.data.key>t.data.key?1:e.data.key<t.data.key?-1:0)),e.children.forEach(mh))}function gh(e){void 0!==e&&e.forEach((e=>{e.level1_key=e.ancestors()[e.depth-1].data.key,gh(e.children)}))}function vh(e){let t;return 0===e.length?(t=Tp({}),t.id="root",t.value=0,t.data.key="",t.data.value=0,t):(t=Tp({values:e},(e=>e.values)),t.descendants().forEach((e=>{e.data.column_name=Es.data.column_names.nest_columns[e.depth-1]})),t.leaves().forEach((e=>{let t=e.data.value.values;1===t.length&&(e.data.unique_row=t[0].original_data),e.data.value=e.data.value.rollup_value})),t.sum((e=>e.value)),yh(t),"value"===Ro.sort_by?bh(t):"name"===Ro.sort_by&&mh(t),gh(t.children),t)}function xh(e,t){if(!t)return null;let n=e.descendants();for(let e=0;e<n.length;e++){let r=n[e];if(r.id===t)return r}return null}function wh(e){if(!e)return null;let t=e.ancestors().slice(0,-1);return t=t.map((e=>e.data.key)),t.reverse(),t}function kh(e,t){let n=e.ancestors(),r=!1;for(let e=0;e<n.length;e++)n[e].id===t.id&&(r=!0);return r}var Mh=Object.freeze({categorical_type:"palette",categorical_palette:["#4328E7","#9654E5","#FF6283","#FF8800","#FFC502","#007D8E","#1AA7EE","#29DAE4","#88E99A","#019C00","#C11F1F","#730000"],categorical_extend:!0,categorical_custom_palette:"",numeric_type:"sequential",sequential_palette:"Blues",sequential_custom_min:"#F7F7F7",sequential_custom_max:"#FF6283",sequential_color_space:"rgb",sequential_reverse:!1,sequential_custom_domain:!1,sequential_domain_min:0,sequential_domain_max:1,diverging_palette:"RdBu",diverging_custom_min:"#1AA7EE",diverging_custom_mid:"#F7F7F7",diverging_custom_max:"#FF6283",diverging_color_space:"rgb",diverging_reverse:!1,diverging_custom_domain:!1,diverging_domain_min:0,diverging_domain_mid:.5,diverging_domain_max:1,binning:!1,bin_count:4,bin_mode:"fixed",bin_thresholds:""}),zh=360/((1+Math.sqrt(5))/2),Ah="#FF0000";function Eh(e,t,n){return function(r,i){Array.isArray(r)||(r=r?[r]:[Ah]),i=void 0!==i?i:zh;var a=r.map((function(t){return e(t)})).filter((function(e){return!isNaN(e[t])&&!isNaN(e[n])}));a.length||(a=[e(Ah)]);var o,l=a.length,s=a.reduce((function(e,n){return e+n[t]}),0)/l,c=a.reduce((function(e,t){return e+t[n]}),0)/l,u=l;do{o=a[--u].h}while(isNaN(o)&&u>0);var d=0;return function(){var t=++d*i;return kr(e((o+t)%360,s,c)).hex()}}}var Ch={hcl:Eh(Kr,"c","l"),hsl:Eh(Fr,"s","l")};function Th(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function Nh(e){return gl(e[e.length-1])}var Sh=Nh(new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Th)),Lh=Nh(new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Th)),Oh=Nh(new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Th)),Fh=Nh(new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Th)),jh=Nh(new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Th)),Ph=Nh(new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Th)),$h=Nh(new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Th)),Bh=Nh(new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Th)),Dh=Nh(new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Th)),qh=Nh(new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Th)),Hh=Nh(new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Th)),Rh=Nh(new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Th)),Yh=Nh(new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Th)),Uh=Nh(new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Th)),Ih=Nh(new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Th)),Wh=Nh(new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Th)),Vh=Nh(new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Th)),Gh=Nh(new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Th)),Xh=Nh(new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Th)),Zh=Nh(new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Th)),Jh=Nh(new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Th)),Qh=Nh(new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Th)),Kh=Nh(new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Th)),e_=Nh(new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Th)),t_=Nh(new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Th)),n_=Nh(new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Th)),r_=Nh(new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Th)),i_=Ul(ui(300,.5,0),ui(-240,.5,1)),a_=Ul(ui(-100,.75,.35),ui(80,1.5,.8)),o_=Ul(ui(260,.75,.35),ui(80,1.5,.8));function l_(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}ui();var s_=l_(Th("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),c_=l_(Th("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),u_=l_(Th("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),d_=l_(Th("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function f_(e,t){return e-t}function p_(e,t){var n=t[0],r=t[t.length-1],i=rs().domain([n,r]),a=Math.floor(e.bin_count);return i.range(Xo(a)),i.thresholds()}function h_(e,t,n){var r;return r="fixed"==e.bin_mode?p_(e,t):"quantile"==e.bin_mode?function(e,t,n){var r=ns().domain(n),i=Math.floor(e.bin_count);return r.range(Xo(i)),r.quantiles()}(e,0,n):function(e){return e.bin_thresholds.split(";").map(parseFloat).filter((function(e){return!isNaN(e)&&null!==e})).sort(f_)}(e),r}function __(e,t,n,r,i){for(var a=1+t;a<=e+t;a++)i.push(r(n(a)))}function y_(e,t,n){var r=t.length,i=ts(),a=[];if(1===r)a.push(n(.5));else if(2===e.length)i.domain([1,r]).range([0,1]),__(r,0,i,n,a);else if(2===r)a.push(n(0)),a.push(n(1));else{var o,l,s=e[1],c=function(e,t){var n;return e.forEach((function(e,r){Math.abs(e-t)<.001&&(n=r)})),n}(t,s);c?(o=c,l=r-c-1,i.domain([1,o+1]).range([0,.5]),__(o,0,i,n,a),a.push(n(.5)),i.domain([1,l+1]).range([.5,1]),__(l,1,i,n,a)):(o=function(e,t){var n=0;return e.forEach((function(e){e<t&&n++})),n}(t,s),l=r-o,i.domain([1,o+1]).range([0,.5]),__(o,0,i,n,a),i.domain([1,l+1]).range([.5,1]),__(l,1,i,n,a))}return a}function b_(e,t,n,r){var i,a=h_(e,t,n),o=function(e,t,n){var r=[];if(0===t.length)return[.5*(e+n)];r.push(.5*(e+t[0]));for(var i=0;i<t.length-1;i++)r.push(.5*(t[i]+t[i+1]));return r.push(.5*(n+t[t.length-1])),r}(t[0],a,t[t.length-1]),l=y_(t,o,r);(i="quantile"==e.bin_mode?ns().domain(n):is().domain(a)).range(l);var s=function(e){return isNaN(e)||null===e?null:i(e)};return s.domain=Object.freeze(t),s.thresholds=Object.freeze(a),s.centers=Object.freeze(o),s}function m_(e){return Array.isArray(e)?Go(e):[0,1]}var g_=Object.freeze(["#efeca4","#e9e28f","#dccf64","#e3b23c","#e49547","#e37746","#dc5b36","#cb4144","#bb2244","#972545","#6a2c4f"]),v_=Object.freeze({Blues:Qh,BuGn:qh,BuPu:Hh,Carrots:gl(g_),Cool:o_,CubehelixDefault:i_,GnBu:Rh,Greens:Kh,Greys:e_,Inferno:u_,Magma:c_,Oranges:r_,OrRd:Yh,Plasma:d_,PuBu:Ih,PuBuGn:Uh,PuRd:Wh,Purples:t_,RdPu:Vh,Reds:n_,Viridis:s_,Warm:a_,YlGn:Xh,YlGnBu:Gh,YlOrBr:Zh,YlOrRd:Jh}),x_={hcl:Rl,hsl:ql,lab:Hl,rgb:bl};function w_(e,t){var n=e.sequential_custom_domain?[e.sequential_domain_min,e.sequential_domain_max]:m_(t),r=function(t){var n=v_[e.sequential_palette]||function(e){var t=e.sequential_color_space,n=e.sequential_custom_min,r=e.sequential_custom_max;return x_[t](n,r)}(e);return e.sequential_reverse?n(1-t):n(t)};if(e.binning)return b_(e,n,t,r);var i=os(r).domain(n),a=function(e){return isNaN(e)||null===e?null:i(e)};return a.domain=Object.freeze(n),a}var k_=Object.freeze({BrBG:Sh,PiYG:Oh,PRGn:Lh,PuOr:Fh,RdBu:jh,RdGy:Ph,RdYlBu:$h,RdYlGn:Bh,Spectral:Dh}),M_={hcl:Rl,hsl:ql,lab:Hl,rgb:bl};function z_(e){var t=e.diverging_color_space,n=e.diverging_custom_min,r=e.diverging_custom_mid,i=e.diverging_custom_max;return function(e,t){for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return a[t](e-t)}}(M_[t],[n,r,i])}var A_=function(e){var t=null;for(var n in Mh)void 0===e[n]&&(e[n]=Mh[n]);var r=null,i=function(e){return t&&t(e)||r};return{getColor:i,updateColorScale:function(n){return"number"!=typeof n[0]?t=function(e,t){var n={},r=wi(t).values(),i=e.categorical_palette,a=i.length;if(e.categorical_extend){var o=Mh.rotation_angle,l=Ch.hcl(i,o);r.forEach((function(e,t){n[e]=t<a?i[t]:l()}))}else r.forEach((function(e,t){n[e]=i[t%a]}));e.categorical_custom_palette.split("\n").filter((function(e){return e})).forEach((function(e){var t=e.lastIndexOf(":");if(-1!==t){var r=e.slice(0,t).trim(),i=e.slice(t+1).trim();r&&i&&(n[r]=i)}}));var s=function(e){return n[e]};return s.domain=r.slice(),s.colors=r.map((function(e){return n[e]})),s.items=r.map((function(e){return{label:e,color:n[e]}})),s}(e,n):"sequential"===e.numeric_type?t=w_(e,n):"diverging"===e.numeric_type&&(t=function(e,t){var n=m_(t),r=n[0]<0&&n[1]>0?0:(n[0]+n[1])/2,i=[n[0],r,n[1]];e.diverging_custom_domain&&(i=[e.diverging_domain_min,e.diverging_domain_mid,e.diverging_domain_max]);var a=function(t){var n=k_[e.diverging_palette]||z_(e);return e.diverging_reverse?n(1-t):n(t)};if(e.binning)return b_(e,i,t,a);var o=ls(a).domain(i),l=function(e){return isNaN(e)||null===e?null:o(e)};return l.domain=Object.freeze(i),l.midpoint=e.diverging_custom_domain?e.diverging_domain_mid:r,l}(e,n)),i.thresholds=t.thresholds,i.centers=t.centers,i.midpoint=t.midpoint,i.domain=t.domain,i.colors=t.colors,i.items=t.items,this},fallback:function(e){return void 0===e?r:(r="default"===e?null:e,this)}}}(Ro.color),E_=[];function C_(e){return 180*e/Math.PI}function T_(e){return e*Math.PI/180}function N_(e){return e&&e.getTime?e.getTime():null}function S_(){let e=Ro.color.categorical_custom_palette,t=[];return e.split("\n").filter((function(e){return e})).forEach((function(e){var n=e.lastIndexOf(":");if(-1!==n){var r=e.slice(0,n).trim();r&&t.push(r)}})),t}function L_(e){return S_().indexOf(e)>-1}function O_(e){return e.depth>1&&L_(e.data.key)}function F_(e,t){return 0===e.depth?"none":1===e.depth||L_(e.data.key)?A_.getColor(e.data.key):t?"white":A_.getColor(e.level1_key)}function j_(e){return F_(e,!0)}function P_(e){return F_(e,!1)}function $_(){return{low:16,medium:24,high:32}[Ro.cellPadding]}function B_(e){return"allUpperCase"===Ro.label_case||(!(!e||"bottomUpperCase"!==Ro.label_case)||!e&&"topUpperCase"===Ro.label_case)}function D_(e){return"allBold"===Ro.label_weight||e&&"bottomBold"===Ro.label_weight?"bold":e||"topBold"!==Ro.label_weight?"normal":"bold"}function q_(e,t,n){let r=ba(e+"...",n||"");if(t-r-8>0)return e;let i=Math.floor(e.length*t/r);return i=Math.max(0,i-3),(e=e.slice(0,i)).length>0&&(e+="…"),e}function H_(){return mu.root.leaves()[0].depth+1}function R_(){return xh(mu.root,Ro.zoomed_node_id)||mu.root}function Y_(e){if(0===e.depth)return!1;if(!e.display.visible)return!1;if(null===Ro.zoomed_node_id)return!0;if(!e.parent)return!1;const t=e.ancestors();for(let e=0;e<t.length;e++)if(t[e].id===Ro.zoomed_node_id)return!0;return!1}function U_(e,t,n,r,i,a){let o=10*(t-2*r)/ba(e,"10px "+i+(a?" bold":"")),l=Math.max(0,n-2*r);return Math.min(o,l)}function I_(e,t,n,r,i,a){let o=function(e){const t=e.split(/\s+/g);return t[t.length-1]||t.pop(),t[0]||t.shift(),t}(e),l=t&&""!==t;l&&o.push(t);let s=[],c={text:""},u=r+"px "+a;for(let e=0;e<o.length;e++){if(s.length*r>i)return[];let t=o[e];if(ba(t,u)>n)return[];if(l&&e===o.length-1)c={text:t},s.push(c);else if(""===c.text)c.text=t,s.push(c);else{let e=c.text+" "+t;ba(e,u)<=n?c.text=e:(c={text:t},s.push(c))}}return s=s.map((function(e){return e.text})),s}function W_(e,t,n,r,i,a){let o=I_(e,t,n,r,i,a).length;return o>0?o*r:1/0}function V_(e,t,n,r,i,a,o,l,s){let c=.5*(n+r),u=W_(e,t,i,Math.pow(2,c),a,s);return u<=a&&c>o&&(o=c),0===l?o:u<a?V_(e,t,c,r,i,a,o,l-1,s):V_(e,t,n,c,i,a,o,l-1,s)}function G_(e,t,n,r,i,a,o,l,s){let c=Math.max(0,n-2*i),u=Math.max(0,r-2*i);if(W_(e,t,c,o,u,s)<=u){return{lines:I_(e,t,c,o,u,s),size:o}}if(a>u)return{lines:[],size:a};if(W_(e,"",c,a,u,s)>u){if(l){let t=function(e,t,n,r,i){let a=I_(e,null,t,n,1/0,i);if(0===a.length)return[];let o=Math.floor(r/n);if(0===o)return[];let l=a.slice(0,o),s=l.slice(-1)[0].slice(0,-3)+"…";return l[l.length-1]=s,l}(e,c,a,u,s);if(0===t.length)t=[q_(e,c,a+"px "+s)];return{lines:t,size:a}}return{lines:[],size:0}}let d=W_(e,t,c,a,u,s)<=u?t:"",f=Math.log(a)/Math.log(2),p=V_(e,d,f,Math.log(o)/Math.log(2),c,u,f,2,s),h=Math.pow(2,p);return{lines:I_(e,d,c,h,u,s),size:h}}function X_(){return Ro.bar_axis_labels_above?ya(Ro.bar_axis_label_size):0}function Z_(e,t){let n=e/t-Ro.bar_bar_padding-X_();return n=Math.min(n,Ro.bar_max_bar_thickness),n=Math.max(n,Ro.bar_min_bar_thickness),n}function J_(e){return"never"!==e&&("editor"!==e||"editor"===Flourish.environment||"story_editor"===Flourish.environment)}const Q_=Kn(Ro.size_by_number_formatter),K_=Kn(Ro.filter_number_formatter);let ey,ty,ny,ry,iy=e=>e,ay=e=>e;function oy(){!function(){let e=Es.data.column_names.size_columns.indexOf(Ro.size_by);if(-1===e)return;let t=Es.data.metadata.size_columns;iy=Q_(t[e].output_format_id)}(),function(){let e=Es.data.metadata.filter;if(void 0===e)return;let t=e.output_format_id;switch(e.type){case"datetime":ay=er(t);break;case"number":ay=K_(t);break;default:ay=e=>e}}()}function ly(){let e=Es.data.metadata.filter;return void 0===e?[]:Ep(Es.data.map((function(e){return e.filter})),"datetime"===e.type?N_:e=>e)}function sy(e){return Ro.filter_include_all?[Ro.filter_all_label].concat(e):e}function cy(){ny="filter"in Es.data.column_names;let e=ny&&J_(Ro.filter_control_visibility);if(Qm.visible(e),ey&&!ny&&(Qm.remove(),ey=!1,Ro.filter=null),!ny)return;ey||(og.add([Qm]),Qm.on("change",(function(e){Ro.filter=e,jm()})),ey=!0);let t=ly(),n=sy(t);var r;Qm.options(n).format(ay,Ro.filter_include_all?[Ro.filter_all_label]:[]).value(Ro.filter),Qm.update(),function(e){let t=e.map(ay);return e.length===md(t).length}(t)||(r="Two or more filter values result in the same formatted value.",Flourish.warn?Flourish.warn(r):console.warn(r))}function uy(){ry=Es.data.column_names.size_columns.length>1;let e=ry&&J_(Ro.size_by_control_visibility);if(Km.visible(e),ty&&!ry&&(Km.remove(),ty=!1),!ry)return;let t=Es.data.column_names.size_columns.map((e=>e));ty||(og.add([Km]),Km.on("change",(function(e){Ro.size_by=e,jm()})),ty=!0),Km.options(t).value(Ro.size_by).update()}const dy={x:10,y:10},fy={x:10,y:10},py=40,hy=.2,_y="#ffffff",yy="#333333",by=10;var my,gy,vy,xy,wy,ky,My,zy,Ay,Ey;const Cy=Ty("(prefers-reduced-motion: reduce)");function Ty(e){if("function"!=typeof window.matchMedia)return()=>!1;const t=window.matchMedia(e);let n=t.matches;return t.addEventListener("change",(e=>{n=e.matches}),!1),function(){return n}}function Ny(e){let t=e.id||e.data.id;e.display&&!1===e.display.visible||xm||"root"===t||(!function(e,t){let n=xh(mu.root,t.id);if(!Jm(n))return;let r=Vm(n),i=Ym(n);Dm.locked()||Dm.setColumnNames(r.column_names).setFormatters(r.formatters);Dm.mouseover(i,r.datum)}(0,e),"popup"!==Ro.popup.mode&&"both"!==Ro.popup.mode||Rm(e.id),Dm.locked()||Bm("updateHighlightedNode",t))}function Sy(e){var t;e.display&&!1===e.display.visible||xm||(t=K.relatedTarget,qm.contains(t)||(Dm.mouseout(),Dm.locked()||(Rm(null),Bm("updateHighlightedNode",null))))}function Ly(e){e.display&&!1===e.display.visible||xm||(K.stopPropagation(),0!==e.height&&Bm("zoomToNode",e))}function Oy(e){e.display&&!1===e.display.visible||xm||("Enter"===K.key?Ly(e):"Escape"===K.key&&Sy(e))}function Fy(){ue(this).on("mouseover",Ny).on("mouseout",Sy).on("click",Ly).on("keydown",Oy)}Ty("(prefers-color-scheme: dark)");var jy={treemapBinary:function(e,t,n,r,i){var a,o,l=e.children,s=l.length,c=new Array(s+1);for(c[0]=o=a=0;a<s;++a)c[a+1]=o+=l[a].value;!function e(t,n,r,i,a,o,s){if(t>=n-1){var u=l[t];return u.x0=i,u.y0=a,u.x1=o,void(u.y1=s)}var d=c[t],f=r/2+d,p=t+1,h=n-1;for(;p<h;){var _=p+h>>>1;c[_]<f?p=_+1:h=_}f-c[p-1]<c[p]-f&&t+1<p&&--p;var y=c[p]-d,b=r-y;if(o-i>s-a){var m=r?(i*b+o*y)/r:o;e(t,p,y,i,a,m,s),e(p,n,b,m,a,o,s)}else{var g=r?(a*b+s*y)/r:s;e(t,p,y,i,a,o,g),e(p,n,b,i,g,o,s)}}(0,s,e.value,t,n,r,i)},treemapResquarify:ph,treemapSlice:ch,treemapDice:nh,treemapSliceDice:function(e,t,n,r,i){(1&e.depth?ch:nh)(e,t,n,r,i)}},Py=function(){var e=fh,t=!1,n=1,r=1,i=[0],a=Xp,o=Xp,l=Xp,s=Xp,c=Xp;function u(e){return e.x0=e.y0=0,e.x1=n,e.y1=r,e.eachBefore(d),i=[0],t&&e.eachBefore(th),e}function d(t){var n=i[t.depth],r=t.x0+n,u=t.y0+n,d=t.x1-n,f=t.y1-n;d<r&&(r=d=(r+d)/2),f<u&&(u=f=(u+f)/2),t.x0=r,t.y0=u,t.x1=d,t.y1=f,t.children&&(n=i[t.depth+1]=a(t)/2,r+=c(t)-n,u+=o(t)-n,(d-=l(t)-n)<r&&(r=d=(r+d)/2),(f-=s(t)-n)<u&&(u=f=(u+f)/2),e(t,r,u,d,f))}return u.round=function(e){return arguments.length?(t=!!e,u):t},u.size=function(e){return arguments.length?(n=+e[0],r=+e[1],u):[n,r]},u.tile=function(t){return arguments.length?(e=Gp(t),u):e},u.padding=function(e){return arguments.length?u.paddingInner(e).paddingOuter(e):u.paddingInner()},u.paddingInner=function(e){return arguments.length?(a="function"==typeof e?e:Zp(+e),u):a},u.paddingOuter=function(e){return arguments.length?u.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):u.paddingTop()},u.paddingTop=function(e){return arguments.length?(o="function"==typeof e?e:Zp(+e),u):o},u.paddingRight=function(e){return arguments.length?(l="function"==typeof e?e:Zp(+e),u):l},u.paddingBottom=function(e){return arguments.length?(s="function"==typeof e?e:Zp(+e),u):s},u.paddingLeft=function(e){return arguments.length?(c="function"==typeof e?e:Zp(+e),u):c},u}();function $y(e,t,n){e.display.x0=t(e.x0),e.display.x1=t(e.x1),e.display.y0=n(e.y0),e.display.y1=n(e.y1),void 0!==e.children&&e.children.forEach((e=>{$y(e,t,n)}))}function By(e,t,n){e.children.forEach((e=>{e.display.x0=t(e.display.x0),e.display.x1=t(e.display.x1),e.display.y0=n(e.display.y0),e.display.y1=n(e.display.y1),e.display.x1<e.display.x0&&(e.display.x1=e.display.x0),e.display.y1<e.display.y0&&(e.display.y1=e.display.y0),e.children&&By(e,t,n)}))}function Dy(e,t){if(!e.children)return;By(e,ts().domain([e.display.x0,e.display.x1]).range([e.display.x0+t,e.display.x1-t]),ts().domain([e.display.y0,e.display.y1]).range([e.display.y0+t,e.display.y1-t])),e.children.forEach((e=>{Dy(e,t)}))}function qy(e,t){if(e.display.top_label="",!1===e.display.visible_leaf&&0!==e.depth){let r=$_(),i=e.display.x1-e.display.x0-2*r,a=e.data.key,o="'"+Ro.layout.body_font.name+"'";if(Ro.zoomed_node_id&&Ro.zoomed_node_id===e.id){var n=wh(e);a=n?n.join(" | "):""}B_(!1)&&(a=a.toUpperCase()),e.display.top_label=q_(a,i,"10px "+o),e.display.top_label_font_size=11;let l=.5*(r-16),s=e.display.x1-e.display.x0,c=4+l;e.display.top_label_x=Ho?s-c:c,e.display.top_label_y=12+l,e.display.top_label_opacity=e.depth<t.depth?0:1}e.display.top_label_weight=D_(!1),e.children&&e.children.forEach((e=>{qy(e,t)}))}function Hy(e){let t=e.display.x1-e.display.x0,n=e.display.y1-e.display.y0,r=ya(Ro.min_label_size),i=ya(Ro.max_label_size),a=e.data.key,o="'"+Ro.layout.body_font.name+"'";if(e.display.multi_line_label=!1,e.display.multi_line_center_label_lines=[],e.display.visible&&e.display.visible_leaf){B_(!0)&&(a=a.toUpperCase());let l=Ro.show_value_labels?iy(e.value):"";if(Ro.multi_line_labels||0===Ro.size_by_number_formatter.prefix.indexOf(":")||(l=" "+l),Ro.multi_line_labels){e.display.multi_line_label=!0;let s=G_(a,l,t,n,ya(Ro.label_padding),r,i,!0,o),c=-.5*s.lines.length*s.size;e.display.multi_line_center_label_lines=s.lines.map(((e,t)=>{let n=s.size,r=D_(!0),i=c+(t+.8)*n;if(Ro.show_value_labels&&t===s.lines.length-1){n*=Ro.value_label_relative_size,r=Ro.value_label_bold?"bold":"normal";let e=3;i-=.8*(s.size-n)-e}return{text:e,size:n,weight:r,line_offset:i}}))}else if(r>n)e.display.center_label_text="",e.display.value_text="",e.display.center_label_font_size=0;else{let i=!0,s=U_(a+l,t,n,ya(Ro.label_padding),o);s=Math.min(ya(Ro.max_label_size),s),s<r&&(i=!1,s=U_(a,t,n,ya(Ro.label_padding),o),s=Math.min(ya(Ro.max_label_size),s),s<r&&(a=q_(a,t,r+"px "+o))),e.display.center_label_text=a,e.display.center_value_text=i?l:null,e.display.center_label_font_size=s,e.display.center_label_weight=D_(!0)}}e.display.center_label_x=.5*t,e.display.center_label_y=.5*n,e.children&&e.children.forEach((e=>{Hy(e)}))}function Ry(e,t,n){let r=[Math.max(t-2,0),Math.max(n-2,0)],i=$_(),a=Math.min(r[0],r[1]);i=Math.min(i,.5*a);var o=jy[Ro.treemap_type];"treemapResquarify"==Ro.treemap_type&&(o=o.ratio(Ro.treemap_ratio)),Py.size(r).tile(o),Py(e);let l=ts(),s=ts();l.domain([0,r[0]]).range([0,r[0]]),s.domain([0,r[1]]).range([0,r[1]]);var c=R_();if("root"!==c.id){if(!c)return Bm("zoomOut");l.domain([c.x0,c.x1]),s.domain([c.y0,c.y1])}else l.domain([i,r[0]-i]),s.domain([i,r[1]-i]);$y(e,l,s),Dy(c||e,i),qy(e,c),Hy(e)}let Yy=null;function Uy(e){Yy=e}function Iy(e){if(null!=Ro.label_color)return Ro.label_color;var t=P_(e),n="sunburst"===Ro.hierarchy_layout?1-Ro.sunburst_depth_fade:hy,r=Math.min(Ro.num_of_visible_levels,e.depth+e.height)-1,i=bl("white",t)(Math.pow(1-n,r));return"none"===t||Wa(i)?yy:_y}function Wy(e,t){ue(this).style("fill",j_).style("stroke",Ro.stroke_color||Ro.layout.background_color).style("display",e.display.visible?"inline":"none").style("cursor",e.children&&Ro.zoomed_node_id!==e.id?"pointer":"default").transition().duration(t).attr("width",e.display.x1-e.display.x0).attr("height",e.display.y1-e.display.y0).attr("tabindex",(e=>Y_(e)?"0":null)).attr("aria-label",Gm)}function Vy(e,t){e.display.visible&&!0===e.display.visible_leaf&&(ue(this).attr("dy","0.33em").text(e.display.center_label_text).style("font-weight",e.display.center_label_weight).transition("font-size").duration(t).style("font-size",e.display.center_label_font_size+"px"),ue(this).append("tspan").style("font-weight",Ro.value_label_bold?"bold":"normal").style("font-size",Ro.value_label_relative_size+"em").text(e.display.center_value_text)),ue(this).transition().duration(t).style("opacity",!0!==e.display.visible||!0!==e.display.visible_leaf||e.display.multi_line_label?0:1).attr("x",e.display.center_label_x).attr("y",e.display.center_label_y)}function Gy(e,t){let n=e.display.multi_line_center_label_lines;if(ue(this).transition("label-center").duration(t).attr("transform","translate("+e.display.center_label_x+","+e.display.center_label_y+")"),JSON.stringify(this.__current_multi_lines)===JSON.stringify(n.map((e=>e.text))))return ue(this).transition("center-label").duration(t).style("opacity",!0===e.display.visible&&!0===e.display.visible_leaf&&e.display.multi_line_label?1:0),void ue(this).selectAll("tspan").data(n).transition("center-label").duration(t).style("font-weight",(e=>e.weight)).style("font-size",(e=>e.size+"px")).attr("y",(e=>e.line_offset));ue(this).transition("center-label").duration(.5*t).style("opacity",0).on("end",(function(){ue(this).transition("center-label").duration(.5*t).style("opacity",!0===e.display.visible&&!0===e.display.visible_leaf&&e.display.multi_line_label?1:0);var r=ue(this).selectAll("tspan").data(n);r.enter().append("tspan").merge(r).text((function(e){return e.text})).transition("center-label").duration(0).style("font-size",(e=>e.size+"px")).style("font-weight",(e=>e.weight)).attr("x",0).attr("y",(e=>e.line_offset)),r.exit().remove(),this.__current_multi_lines=n.map((e=>e.text))}))}function Xy(e,t){0!==e.depth&&(ue(this).style("display",!0===e.display.visible&&!1===e.display.visible_leaf?"inline":"none").style("fill",Iy).style("font-weight",e.display.top_label_weight).transition().duration(t).style("opacity",e.display.top_label_opacity),!1===e.display.visible_leaf&&ue(this).attr("x",e.display.top_label_x).attr("y",e.display.top_label_y).style("font-size",e.display.top_label_font_size+"px").text(e.display.top_label))}function Zy(){wy.selectAll("g").select("rect").style("opacity",(e=>{if(!1===e.display.visible)return 0;var t=O_(e);let n=t||1==e.depth?1:hy,r=1==e.depth||t?.8:2;return n*(e.id===Yy?r:1)}))}function Jy(e,t,n){let r=!1===e||Cy()?0:1e3*Ro.animation_duration;if(wy.transition().duration(r).style("opacity","treemap"===Ro.hierarchy_layout?1:0).on("end",(function(){"treemap"!==Ro.hierarchy_layout&&wy.selectAll("g").remove()})),"treemap"!==Ro.hierarchy_layout)return;Ry(mu.root,t,n);let i=wy.selectAll("g").data(mu.root.descendants(),(e=>e.id)),a=i.enter().append("g").attr("class",(e=>window.Flourish.cypress?e.id:null)).classed("node",!0).attr("transform",(e=>"translate("+[e.display.x0,e.display.y0]+")"));a.append("rect").attr("width",(e=>e.display.x1-e.display.x0)).attr("height",(e=>e.display.y1-e.display.y0)).style("stroke-width",1),a.append("text").classed("text-center",!0).attr("x",(e=>e.display.center_label_x)).attr("y",(e=>e.display.center_label_y)).style("pointer-events","none").style("font-size","0px").style("font-weight","normal").style("text-anchor","middle"),a.append("text").classed("text-center-multiline",!0).attr("transform",(e=>"translate("+e.display.center_label_x+","+e.display.center_label_y+")")).style("pointer-events","none").style("font-weight","normal").style("text-anchor","middle"),a.append("text").classed("text-top",!0).style("pointer-events","none").style("font-size","11px"),a.merge(i).transition().duration(r).attr("transform",(function(e){return"translate("+[e.display.x0,e.display.y0]+")"})),a.each(Fy),a.merge(i).style("pointer-events",(function(e){return e.display.visible?"all":"none"})).select("rect").each((function(e){Wy.call(this,e,r)})),a.merge(i).select("text.text-center").style("fill",Iy).each((function(e){Vy.call(this,e,r)})),a.merge(i).select("text.text-center-multiline").style("fill",Iy).each((function(e){Gy.call(this,e,r)})),a.merge(i).select("text.text-top").each((function(e){Xy.call(this,e,r)})),i.exit().remove(),Zy()}function Qy(){ue(this).on("mouseover",Ny).on("mouseout",Sy).on("keydown",Oy).on("click",(e=>{if(e.display.visible&&!xm){if(K.stopPropagation(),0===e.height){let t=R_(),n=e.path(t);if(!(n.length>2))return;Bm("zoomToNode",n[n.length-2])}Bm("zoomToNode",e)}}))}var Ky=function(){var e=null,t=1,n=1,r=Xp;function i(i){return i.x=t/2,i.y=n/2,e?i.eachBefore(Qp(e)).eachAfter(Kp(r,.5)).eachBefore(eh(1)):i.eachBefore(Qp(Jp)).eachAfter(Kp(Xp,1)).eachAfter(Kp(r,i.r/Math.min(t,n))).eachBefore(eh(Math.min(t,n)/(2*i.r))),i}return i.radius=function(t){return arguments.length?(e=function(e){return null==e?null:Gp(e)}(t),i):e},i.size=function(e){return arguments.length?(t=+e[0],n=+e[1],i):[t,n]},i.padding=function(e){return arguments.length?(r="function"==typeof e?e:Zp(+e),i):r},i}();function eb(e,t,n,r){e.display.x=t(e.x),e.display.y=n(e.y),e.display.r=r(e.r),void 0!==e.children&&e.children.forEach((e=>{eb(e,t,n,r)}))}function tb(e){let t,n=Math.max(e.display.r-by,0);if(e.children)if(e.display.visible_leaf||!e.display.visible)t=!1;else if(e.display.r<30)t=!1;else if(1===e.children.length){t=e.display.r-e.children[0].display.r>10,t&&(n=.5*(e.display.r+e.children[0].display.r)-3),e.children[0].display.visible_leaf&&(t=!0)}else{let n=tl(e.children.map((e=>e.display.r)));e.display.max_child_r=n,t=e.display.r-n>10}else t=!1;e.display.enough_space_for_top_label=t,e.display.top_label_path_r=n,e.children&&e.children.forEach((e=>{tb(e)}))}function nb(e){let t;if(e.display.top_label_visible=e.display.visible,0===e.depth)t="";else if(0===e.height)t="";else if(e.display.visible_leaf)t="";else if(e.display.visible)if(Ro.zoomed_node_id&&e.depth<R_().depth)t="";else if(e.display.enough_space_for_top_label)if(Ro.zoomed_node_id===e.id){t=wh(e).join(" > ")}else{let n=function(e){let t=e.ancestors().slice(1,-1),n=[];for(let e=0;e<t.length;e++){let r=t[e];if(r.display.enough_space_for_top_label)break;n.push(r)}return n}(e);if(n.reverse(),n.length>0){t=n.map((e=>e.data.key)).join(" > ")+" > "+e.data.key}else t=e.data.key}else t="";else t="";let n=q_(t,Math.PI*e.display.r);B_(!1)&&(n=n.toUpperCase()),e.display.top_label_text=n,""===n&&(e.display.top_label_visible=!1),e.display.top_label_weight=D_(!1),e.children&&e.children.forEach((e=>{nb(e)}))}function rb(e){let t=e.display.r,n=2.2*Math.sqrt(t*t/2),r="'"+Ro.layout.body_font.name+"'",i=ya(Ro.min_label_size),a=ya(Ro.max_label_size),o=e.data.key;if(e.display.multi_line_label=!1,e.display.multi_line_center_label_lines=[],e.display.visible&&e.display.visible_leaf){B_(!0)&&(o=o.toUpperCase());let l=Ro.show_value_labels?iy(e.value):"";if(Ro.multi_line_labels||0===Ro.size_by_number_formatter.prefix.indexOf(":")||(l=" "+l),Ro.multi_line_labels){e.display.multi_line_label=!0;let t=G_(o,l,n,n,ya(Ro.label_padding),i,a,!0,r),s=-.5*t.lines.length*t.size;e.display.multi_line_center_label_lines=t.lines.map(((e,n)=>{let r=t.size,i=D_(!0),a=s+(n+.8)*r;if(Ro.show_value_labels&&n===t.lines.length-1){r*=Ro.value_label_relative_size,i=Ro.value_label_bold?"bold":"normal";let e=3;a-=.8*(t.size-r)-e}return{text:e,size:r,weight:i,line_offset:a}}))}else if(i>2*t)e.display.center_label_text="",e.display.value_text="",e.display.center_label_font_size=0;else{let n=!0,a=U_(o+l,2*t,2*t,ya(Ro.label_padding),r);a=Math.min(ya(Ro.max_label_size),a),a<i&&(n=!1,a=U_(o,2*t,2*t,ya(Ro.label_padding),r),a=Math.min(ya(Ro.max_label_size),a),a<i&&(o=q_(o,2*t,i+"px "+r))),e.display.center_label_text=o,e.display.center_value_text=n?l:null,e.display.center_label_font_size=a,e.display.center_label_weight=D_(!0)}}e.children&&e.children.forEach((e=>{rb(e)}))}function ib(e,t,n){let r=t-2*dy.x,i=n-2*dy.y;r=Math.max(0,r),i=Math.max(0,i);let a=Math.min(4,Math.min(r,i));Ky.size([r,i]).padding(a),Ky(e),"root"===e.id&&0===e.height&&(e.r=0);let o=ts(),l=ts(),s=ts();o.domain([0,r]).range([0,r]),l.domain([0,i]).range([0,i]);var c=R_();if("root"!==c.id){if(!c)return Bm("zoomOut");let e,t;r>i?(t=2*c.r,e=t*(r/i),s.range([0,i/t])):(e=2*c.r,t=e*(i/r),s.range([0,r/e]));let n=c.x-.5*e,a=c.x+.5*e,u=c.y-.5*t,d=c.y+.5*t;o.domain([n,a]),l.domain([u,d])}eb(e,o,l,s),tb(e),nb(e),rb(e)}function ab(e,t){ue(this).style("fill",j_).style("display",e.display.visible?"inline":"none").style("cursor",e.children&&Ro.zoomed_node_id!==e.id?"pointer":"default").transition().duration(t).attr("r",e.display.r).attr("tabindex",(e=>Y_(e)?"0":null)).attr("aria-label",Gm)}function ob(e,t){e.display.visible&&!0===e.display.visible_leaf&&(ue(this).attr("dy","0.33em").text(e.display.center_label_text).style("fill",Iy).style("font-weight",e.display.center_label_weight).transition("font-size").duration(t).style("font-size",e.display.center_label_font_size+"px"),ue(this).append("tspan").style("font-weight",Ro.value_label_bold?"bold":"normal").style("font-size",Ro.value_label_relative_size+"em").text(e.display.center_value_text)),ue(this).transition().duration(t).style("opacity",!0===e.display.visible&&!0===e.display.visible_leaf?1:0)}function lb(e,t){let n=e.display.multi_line_center_label_lines;if(JSON.stringify(this.__current_multi_lines)===JSON.stringify(n.map((e=>e.text))))return ue(this).transition("center-label").duration(t).style("opacity",!0===e.display.visible&&!0===e.display.visible_leaf&&e.display.multi_line_label?1:0),void ue(this).selectAll("tspan").data(n).transition("center-label").duration(t).style("font-weight",(e=>e.weight)).style("font-size",(e=>e.size+"px")).attr("y",(e=>e.line_offset));ue(this).transition("center-label").duration(.5*t).style("opacity",0).on("end",(function(){ue(this).transition("center-label").duration(.5*t).style("opacity",!0===e.display.visible&&!0===e.display.visible_leaf&&e.display.multi_line_label?1:0);var r=ue(this).selectAll("tspan").data(n);r.enter().append("tspan").merge(r).text((function(e){return e.text})).transition("center-label").duration(0).style("font-size",(e=>e.size+"px")).style("font-weight",(e=>e.weight)).attr("x",0).attr("y",(e=>e.line_offset)),r.exit().remove(),this.__current_multi_lines=n.map((e=>e.text))}))}function sb(e,t){if(0===e.depth)return;let n=e.display.top_label_path_r;ue(this).transition().duration(t).attr("d",`M-0.5,${n} A${n},${n} 0 1,1 0.5,${n}`)}const cb=ts().domain([30,60]).range([-.1,0]).clamp(!0);function ub(e,t){0!==e.depth&&(ue(this).transition().duration(t).style("opacity",!0===e.display.top_label_visible?1:0),!1===e.display.visible_leaf&&ue(this).select("textPath").style("fill",Iy).style("font-weight",(e=>e.display.top_label_weight)).style("letter-spacing",(e=>cb(e.display.r)+"em")).text(e.display.top_label_text))}function db(){ky.selectAll("g").select("circle").style("opacity",(e=>{if(!1===e.display.visible)return 0;var t=O_(e);let n=t||1==e.depth?1:.2,r=1==e.depth||t?.8:2;return n*(e.id===Yy?r:1)}))}function fb(e,t,n){let r=!1===e||Cy()?0:1e3*Ro.animation_duration;if(ky.transition().duration(r).style("opacity","circlePacking"===Ro.hierarchy_layout?1:0).on("end",(function(){"circlePacking"!==Ro.hierarchy_layout&&ky.selectAll("g").remove()})),"circlePacking"!==Ro.hierarchy_layout)return;ib(mu.root,t,n);let i=ky.selectAll("g").data(mu.root.descendants(),(e=>e.id)),a=i.enter().append("g").attr("transform",(function(e){return"translate("+[e.display.x,e.display.y]+")"})).classed("node",!0);a.append("circle"),a.append("text").classed("text-center",!0).style("font-weight","normal").style("text-anchor","middle").style("font-size","0px").style("pointer-events","none"),a.append("text").classed("text-center-multiline",!0).style("pointer-events","none").style("font-weight","normal").style("text-anchor","middle"),a.append("path").classed("label-path",!0).attr("id",(e=>"pack-label-path-"+e.id)).attr("d",(()=>{let e=-by;return`M-0.5,${e} A${e},${e} 0 1,1 0.5,${e}`})).style("fill","none"),a.append("text").classed("text-top",!0).style("opacity",0).append("textPath").attr("href",(e=>"#pack-label-path-"+e.id)).attr("startOffset","50%").style("text-anchor","middle").style("pointer-events","none").style("font-weight","bold").style("font-size","11px"),a.merge(i).transition().duration(r).attr("transform",(function(e){return"translate("+[e.display.x,e.display.y]+")"})),a.each(Qy),a.merge(i).select("circle").each((function(e){ab.call(this,e,r)})),a.merge(i).select("text.text-center").each((function(e){ob.call(this,e,r)})),a.merge(i).select("text.text-center-multiline").style("fill",Iy).each((function(e){lb.call(this,e,r)})),a.merge(i).select("path.label-path").each((function(e){sb.call(this,e,r)})),a.merge(i).select("text.text-top").each((function(e){ub.call(this,e,r)})),i.exit().remove(),db()}function pb(){ue(this).on("mouseover",Ny).on("mouseout",Sy).on("click",Ly).on("keydown",Oy)}var hb=function(){var e=1,t=1,n=0,r=!1;function i(i){var a=i.height+1;return i.x0=i.y0=n,i.x1=e,i.y1=t/a,i.eachBefore(function(e,t){return function(r){r.children&&nh(r,r.x0,e*(r.depth+1)/t,r.x1,e*(r.depth+2)/t);var i=r.x0,a=r.y0,o=r.x1-n,l=r.y1-n;o<i&&(i=o=(i+o)/2),l<a&&(a=l=(a+l)/2),r.x0=i,r.y0=a,r.x1=o,r.y1=l}}(t,a)),r&&i.eachBefore(th),i}return i.round=function(e){return arguments.length?(r=!!e,i):r},i.size=function(n){return arguments.length?(e=+n[0],t=+n[1],i):[e,t]},i.padding=function(e){return arguments.length?(n=+e,i):n},i}();function _b(e,t){e.display=e.display||{},e.display.visible=!0,e.display.isTopVisibleLevel=e.depth===t,e.display.opacity=Math.pow(Ro.sunburst_depth_fade,e.depth-1),void 0!==e.children&&e.children.forEach((e=>{_b(e,t)}))}function yb(e,t){t&&t.id===e.id||0===e.height?e.display.cursorType="default":e.display.cursorType="pointer",void 0!==e.children&&e.children.forEach((e=>{yb(e,t)}))}function bb(e,t,n){e.display=e.display||{},e.display.a0=n(e.x0),e.display.a1=n(e.x1),e.display.r0=t(e.y0),e.display.r1=t(e.y1),e.display.rMid=.5*(e.display.r0+e.display.r1),void 0!==e.children&&e.children.forEach((e=>{bb(e,t,n)}))}function mb(e){let t=e.display.r1-e.display.r0;t*=.9,t=Math.max(t,0);let n=.5*(e.display.r0+e.display.r1)*(e.display.a1-e.display.a0);n*=.9,n=Math.max(n,0);let r=0===e.display.r0&&0===e.display.a0&&e.display.a1===2*Math.PI,i="radial"===Ro.sunburst_labelling||"circular"!==Ro.sunburst_labelling&&t>n,a=r?"center":i?"radial":"circular",o="'"+Ro.layout.body_font.name+"'",l=ya(Ro.min_label_size),s=ya(Ro.max_label_size);e.display.radialLabel="",e.display.circularLabel="",e.display.centerLabel="";let c=e.data.key,u=Ro.show_value_labels?iy(e.value):"";0!==Ro.size_by_number_formatter.prefix.indexOf(":")&&(u=" "+u),e.display.radialLabelOpacity=0,e.display.circularLabelOpacity=0,e.display.centerLabelOpacity=0,e.display.fontSize=0;let d=0,f=e.display.isTopVisibleLevel;if(e.depth>0)switch(B_(!f)&&(c=c.toUpperCase()),a){case"radial":e.display.radialLabel=c,e.display.radialValueLabel=u,e.display.radialLabelOpacity=1,d=U_(c+u,t,n,4,o,Ro.sunburst_bold_labels);break;case"circular":e.display.circularLabel=c,e.display.circularValueLabel=u,e.display.circularLabelOpacity=1,d=U_(c+u,n,t,4,o,Ro.sunburst_bold_labels);break;case"center":e.display.centerLabel=c,e.display.centerValueLabel=u,e.display.centerLabelOpacity=1,d=U_(c+u,2*t,.5*t,ya(Ro.label_padding),o,Ro.sunburst_bold_labels)}d=Math.min(s,d),d<l&&(e.display.circularLabel="",e.display.circularValueLabel="",e.display.radialLabel="",e.display.radialValueLabel="",e.display.centerLabel="",e.display.centerValueLabel=""),e.display.fontSize=d,e.display.fontWeight=D_(!f),void 0!==e.children&&e.children.forEach((e=>{mb(e)}))}function gb(e,t,n){let r=.5*Math.min(t-2*fy.x,n-2*fy.y),i=H_();hb.size([2*Math.PI,i]),hb(e);let a=Ro.sunburst_show_zoomed_node_in_center?0:r*Ro.sunburst_inner_radius/100,o=ts().range([a,r*Ro.sunburst_outer_radius/100]).clamp(!0),l=ts().range([0,2*Math.PI]).clamp(!0),s=Ro.zoomed_node_id?xh(e,Ro.zoomed_node_id):e,c=s.depth,u=Ro.sunburst_show_zoomed_node_in_center?c:Math.max(c,1),d=Math.min(c+Ro.num_of_visible_levels+1,i);if(c>0&&!s)return Bm("zoomOut");o.domain([u,d]),l.domain([s.x0,s.x1]),bb(e,o,l),_b(e,c),yb(e,s),mb(e)}var vb=Math.PI,xb=2*vb,wb=1e-6,kb=xb-wb;function Mb(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function zb(){return new Mb}function Ab(e){return function(){return e}}Mb.prototype=zb.prototype={constructor:Mb,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,l=n-e,s=r-t,c=a-e,u=o-t,d=c*c+u*u;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(d>wb)if(Math.abs(u*l-s*c)>wb&&i){var f=n-a,p=r-o,h=l*l+s*s,_=f*f+p*p,y=Math.sqrt(h),b=Math.sqrt(d),m=i*Math.tan((vb-Math.acos((h+d-_)/(2*y*b)))/2),g=m/b,v=m/y;Math.abs(g-1)>wb&&(this._+="L"+(e+g*c)+","+(t+g*u)),this._+="A"+i+","+i+",0,0,"+ +(u*f>c*p)+","+(this._x1=e+v*l)+","+(this._y1=t+v*s)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,r,i,a){e=+e,t=+t,a=!!a;var o=(n=+n)*Math.cos(r),l=n*Math.sin(r),s=e+o,c=t+l,u=1^a,d=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+s+","+c:(Math.abs(this._x1-s)>wb||Math.abs(this._y1-c)>wb)&&(this._+="L"+s+","+c),n&&(d<0&&(d=d%xb+xb),d>kb?this._+="A"+n+","+n+",0,1,"+u+","+(e-o)+","+(t-l)+"A"+n+","+n+",0,1,"+u+","+(this._x1=s)+","+(this._y1=c):d>wb&&(this._+="A"+n+","+n+",0,"+ +(d>=vb)+","+u+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var Eb=Math.abs,Cb=Math.atan2,Tb=Math.cos,Nb=Math.max,Sb=Math.min,Lb=Math.sin,Ob=Math.sqrt,Fb=1e-12,jb=Math.PI,Pb=jb/2,$b=2*jb;function Bb(e){return e>=1?Pb:e<=-1?-Pb:Math.asin(e)}function Db(e){return e.innerRadius}function qb(e){return e.outerRadius}function Hb(e){return e.startAngle}function Rb(e){return e.endAngle}function Yb(e){return e&&e.padAngle}function Ub(e,t,n,r,i,a,o){var l=e-n,s=t-r,c=(o?a:-a)/Ob(l*l+s*s),u=c*s,d=-c*l,f=e+u,p=t+d,h=n+u,_=r+d,y=(f+h)/2,b=(p+_)/2,m=h-f,g=_-p,v=m*m+g*g,x=i-a,w=f*_-h*p,k=(g<0?-1:1)*Ob(Nb(0,x*x*v-w*w)),M=(w*g-m*k)/v,z=(-w*m-g*k)/v,A=(w*g+m*k)/v,E=(-w*m+g*k)/v,C=M-y,T=z-b,N=A-y,S=E-b;return C*C+T*T>N*N+S*S&&(M=A,z=E),{cx:M,cy:z,x01:-u,y01:-d,x11:M*(i/x-1),y11:z*(i/x-1)}}var Ib=function(){var e=Db,t=qb,n=Ab(0),r=null,i=Hb,a=Rb,o=Yb,l=null;function s(){var s,c,u,d=+e.apply(this,arguments),f=+t.apply(this,arguments),p=i.apply(this,arguments)-Pb,h=a.apply(this,arguments)-Pb,_=Eb(h-p),y=h>p;if(l||(l=s=zb()),f<d&&(c=f,f=d,d=c),f>Fb)if(_>$b-Fb)l.moveTo(f*Tb(p),f*Lb(p)),l.arc(0,0,f,p,h,!y),d>Fb&&(l.moveTo(d*Tb(h),d*Lb(h)),l.arc(0,0,d,h,p,y));else{var b,m,g=p,v=h,x=p,w=h,k=_,M=_,z=o.apply(this,arguments)/2,A=z>Fb&&(r?+r.apply(this,arguments):Ob(d*d+f*f)),E=Sb(Eb(f-d)/2,+n.apply(this,arguments)),C=E,T=E;if(A>Fb){var N=Bb(A/d*Lb(z)),S=Bb(A/f*Lb(z));(k-=2*N)>Fb?(x+=N*=y?1:-1,w-=N):(k=0,x=w=(p+h)/2),(M-=2*S)>Fb?(g+=S*=y?1:-1,v-=S):(M=0,g=v=(p+h)/2)}var L=f*Tb(g),O=f*Lb(g),F=d*Tb(w),j=d*Lb(w);if(E>Fb){var P,$=f*Tb(v),B=f*Lb(v),D=d*Tb(x),q=d*Lb(x);if(_<jb&&(P=function(e,t,n,r,i,a,o,l){var s=n-e,c=r-t,u=o-i,d=l-a,f=d*s-u*c;if(!(f*f<Fb))return[e+(f=(u*(t-a)-d*(e-i))/f)*s,t+f*c]}(L,O,D,q,$,B,F,j))){var H=L-P[0],R=O-P[1],Y=$-P[0],U=B-P[1],I=1/Lb(((u=(H*Y+R*U)/(Ob(H*H+R*R)*Ob(Y*Y+U*U)))>1?0:u<-1?jb:Math.acos(u))/2),W=Ob(P[0]*P[0]+P[1]*P[1]);C=Sb(E,(d-W)/(I-1)),T=Sb(E,(f-W)/(I+1))}}M>Fb?T>Fb?(b=Ub(D,q,L,O,f,T,y),m=Ub($,B,F,j,f,T,y),l.moveTo(b.cx+b.x01,b.cy+b.y01),T<E?l.arc(b.cx,b.cy,T,Cb(b.y01,b.x01),Cb(m.y01,m.x01),!y):(l.arc(b.cx,b.cy,T,Cb(b.y01,b.x01),Cb(b.y11,b.x11),!y),l.arc(0,0,f,Cb(b.cy+b.y11,b.cx+b.x11),Cb(m.cy+m.y11,m.cx+m.x11),!y),l.arc(m.cx,m.cy,T,Cb(m.y11,m.x11),Cb(m.y01,m.x01),!y))):(l.moveTo(L,O),l.arc(0,0,f,g,v,!y)):l.moveTo(L,O),d>Fb&&k>Fb?C>Fb?(b=Ub(F,j,$,B,d,-C,y),m=Ub(L,O,D,q,d,-C,y),l.lineTo(b.cx+b.x01,b.cy+b.y01),C<E?l.arc(b.cx,b.cy,C,Cb(b.y01,b.x01),Cb(m.y01,m.x01),!y):(l.arc(b.cx,b.cy,C,Cb(b.y01,b.x01),Cb(b.y11,b.x11),!y),l.arc(0,0,d,Cb(b.cy+b.y11,b.cx+b.x11),Cb(m.cy+m.y11,m.cx+m.x11),y),l.arc(m.cx,m.cy,C,Cb(m.y11,m.x11),Cb(m.y01,m.x01),!y))):l.arc(0,0,d,w,x,y):l.lineTo(F,j)}else l.moveTo(0,0);if(l.closePath(),s)return l=null,s+""||null}return s.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-jb/2;return[Tb(r)*n,Lb(r)*n]},s.innerRadius=function(t){return arguments.length?(e="function"==typeof t?t:Ab(+t),s):e},s.outerRadius=function(e){return arguments.length?(t="function"==typeof e?e:Ab(+e),s):t},s.cornerRadius=function(e){return arguments.length?(n="function"==typeof e?e:Ab(+e),s):n},s.padRadius=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:Ab(+e),s):r},s.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:Ab(+e),s):i},s.endAngle=function(e){return arguments.length?(a="function"==typeof e?e:Ab(+e),s):a},s.padAngle=function(e){return arguments.length?(o="function"==typeof e?e:Ab(+e),s):o},s.context=function(e){return arguments.length?(l=null==e?null:e,s):l},s}();function Wb(e,t){0!==e.depth&&(ue(this).style("cursor",e.display.cursorType).select("path").style("fill",P_).style("stroke",Ro.stroke_color||Ro.layout.background_color).style("stroke-width","0.5").style("display",e.display.visible?"inline":"none").attr("tabindex",(e=>Y_(e)?"0":null)).attr("aria-label",Gm),ue(this).select("text.radial-label").style("font-weight",e.display.fontWeight).text(e.display.radialLabel).append("tspan").style("font-weight",Ro.value_label_bold?"bold":null).style("font-size",Ro.value_label_relative_size+"em").text(e.display.radialValueLabel),ue(this).attr("dy","0.33em").select("text.circular-label textPath").style("font-weight",e.display.fontWeight).text(e.display.circularLabel).append("tspan").style("font-weight",Ro.value_label_bold?"bold":null).style("font-size",Ro.value_label_relative_size+"em").text(e.display.circularValueLabel),ue(this).select("text.center-label").style("font-weight",e.display.fontWeight).text(e.display.centerLabel).append("tspan").style("font-weight",Ro.value_label_bold?"bold":null).style("font-size",Ro.value_label_relative_size+"em").text(e.display.centerValueLabel),ue(this).transition().duration(t).tween("sunburst",(function(e){let t=this,n=ue(t).select("path.segment"),r=ue(t).select("text.radial-label"),i=ue(t).select("text.circular-label"),a=ue(t).select("path.label-path"),o=ue(t).select("text.center-label");t.__curTweenState=t.__curTweenState||{a0:e.display.a0,a1:e.display.a1,r0:e.display.r0,r1:e.display.r1,radialLabelOpacity:e.display.radialLabelOpacity,circularLabelOpacity:e.display.circularLabelOpacity,centerLabelOpacity:e.display.centerLabelOpacity,fontSize:e.display.fontSize};let l=t.__curTweenState,s=Cl(l.a0,e.display.a0),c=Cl(l.a1,e.display.a1),u=Cl(l.r0,e.display.r0),d=Cl(l.r1,e.display.r1),f=Cl(l.radialLabelOpacity,e.display.radialLabelOpacity),p=Cl(l.circularLabelOpacity,e.display.circularLabelOpacity),h=Cl(l.centerLabelOpacity,e.display.centerLabelOpacity),_=Cl(l.fontSize,e.display.fontSize);return function(e){t.__curTweenState.a0=s(e),t.__curTweenState.a1=c(e),t.__curTweenState.r0=u(e),t.__curTweenState.r1=d(e),t.__curTweenState.radialLabelOpacity=f(e),t.__curTweenState.circularLabelOpacity=p(e),t.__curTweenState.centerLabelOpacity=h(e),t.__curTweenState.fontSize=_(e);let l=s(e),y=c(e),b=u(e),m=d(e);n.attr("d",Ib({startAngle:l,endAngle:y,innerRadius:b,outerRadius:m})).style("stroke-width",y-l==0?0:.5);let g=C_(.5*(s(e)+c(e)))-90,v=.5*(b+m);r.style("opacity",f(e)).style("font-size",Math.floor(_(e))+"px").attr("transform",g>90?`rotate(${g-180})translate(${-v}, 0)`:`rotate(${g})translate(${v}, 0)`),i.style("font-size",Math.floor(_(e))+"px").style("opacity",p(e)),o.style("opacity",h(e)).style("font-size",Math.floor(_(e))+"px");let x=v*Math.sin(s(e))+1e-4,w=-v*Math.cos(s(e)),k=v*Math.sin(c(e))-1e-4,M=-v*Math.cos(c(e)),z=c(e)-s(e)>=Math.PI?1:0,A=.5*(s(e)+c(e)),E=A>.5*Math.PI&&A<1.5*Math.PI?`M${k},${M} A${v},${v} 0 ${z},0 ${x},${w}`:`M${x},${w} A${v},${v} 0 ${z},1 ${k},${M}`;a.attr("d",E)}})).on("end",(function(){ue(this).select("text.radial-label").text((e=>e.display.radialLabel)).append("tspan").style("font-weight",Ro.value_label_bold?"bold":"normal").style("font-size",Ro.value_label_relative_size+"em").text((e=>e.display.radialValueLabel)),ue(this).select("text.circular-label textPath").text((e=>e.display.circularLabel)).append("tspan").style("font-weight",Ro.value_label_bold?"bold":"normal").style("font-size",Ro.value_label_relative_size+"em").text(e.display.circularValueLabel),ue(this).select("text.center-label").text((e=>e.display.centerLabel)).append("tspan").style("font-weight",Ro.value_label_bold?"bold":"normal").style("font-size",Ro.value_label_relative_size+"em").text(e.display.centerValueLabel)})))}function Vb(){My.selectAll("g").select("path").style("opacity",(e=>{if(!1===e.display.visible)return 0;return(O_(e)||1==e.depth?1:e.display.opacity)*(e.id===Yy?.8:1)}))}function Gb(e,t,n){let r=!1===e||Cy()?0:1e3*Ro.animation_duration;if(My.transition().duration(r).style("opacity","sunburst"===Ro.hierarchy_layout?1:0).on("end",(function(){"sunburst"!==Ro.hierarchy_layout&&My.selectAll("g").remove()})),"sunburst"!==Ro.hierarchy_layout)return;gb(mu.root,t,n),My.attr("transform",`translate(${.5*t}, ${.5*n})`);let i=My.selectAll("g").data(mu.root.descendants(),(e=>e.id)),a=i.enter().append("g").classed("node",!0);a.append("path").classed("segment",!0),a.append("text").classed("radial-label",!0).style("text-anchor","middle").attr("dy","0.33em").style("pointer-events","none"),a.append("path").classed("label-path",!0).style("fill","none").attr("id",(e=>"sunburst-label-path-"+e.id)),a.append("text").classed("circular-label",!0).attr("dy","0.33em").append("textPath").attr("xlink:xlink:href",(e=>"#sunburst-label-path-"+e.id)).attr("startOffset","50%").style("text-anchor","middle").style("pointer-events","none"),a.append("text").classed("center-label",!0).style("text-anchor","middle").attr("dy","0.33em").style("pointer-events","none"),a.each(pb),a.merge(i).each((function(e){Wb.call(this,e,r)})),a.merge(i).select(".radial-label").style("fill",Iy),a.merge(i).select(".circular-label").style("fill",Iy),a.merge(i).select(".center-label").style("fill",Iy),i.exit().remove(),Vb()}function Xb(){ue(this).select("rect").on("mouseover",Ny).on("mouseout",Sy).on("click",Ly).on("keydown",Oy),ue(this).select(".axis-label").on("click",(e=>{xm||(K.stopPropagation(),Bm("zoomToNode",e))}))}function Zb(){return.7*Ro.bar_axis_label_space*ya(Ro.bar_axis_label_size)}function Jb(e){let t="'"+Ro.layout.body_font.name+"'",n=e.data.key;n&&B_(!0)&&(n=n.toUpperCase());let r=.2*e.display.thickness;e.display.fontSize=Math.min(ya(Ro.label_size),e.display.thickness-2*r),e.display.fontWeight=D_(!0),e.display.barLabelText=q_(n,.9*e.display.l,e.display.fontSize+"px "+t),e.display.barLabelX=e.display.x+.5*e.display.l,e.display.barLabelY=e.display.y+.5*e.display.thickness,e.display.axisLabelY=Ro.bar_axis_labels_above?e.display.y:e.display.barLabelY,e.display.axisLabelDy=Ro.bar_axis_labels_above?"-0.2em":"0.33em",e.display.axisLabelDx=Ro.bar_axis_labels_above?"0em":"-0.3em",e.display.axisLabelSize=ya(Ro.bar_axis_label_size),e.display.valueLabelX=e.display.x+e.display.l+ya(.5),e.display.valueLabelY=e.display.barLabelY,e.display.valueLabelText=iy(e.value)}function Qb(e,t,n,r){e.display=e.display||{};let i="",a=H_(),o=Math.min(a-1-t.depth,Ro.num_of_visible_levels);if(e.display.visible=kh(e,t)&&e.depth-t.depth===o,e.depth>0){i=e.data.key,B_(!1)&&(i=i.toUpperCase());let t=Ro.bar_axis_labels_above?n:Zb(),r="'"+Ro.layout.body_font.name+"'";i=q_(i,t,e.display.axisLabelSize+"px "+r)}e.display.axisLabelText=i,e.display.axisLabelVisible=kh(e,t)&&t.depth===e.depth-1,e.display.axisFontWeight=D_(!1),e.display.valueLabelVisible=Ro.show_value_labels&&kh(e,t)&&t.depth===e.depth-1,e.display.fill=P_(e),e.children&&(!function(e,t){let n=t.ancestors(),r=!1;for(let t=0;t<n.length;t++)n[t].id===e.id&&(r=!0);return r}(e,t)?function(e){let t=ts().domain([0,e.value]).range([0,e.display.l]),n=e.display.x;e.children.forEach((r=>{r.display=r.display||{},r.display.x=n,r.display.l=t(r.value),r.display.y=e.display.y,r.display.thickness=e.display.thickness,Jb(r),r.display.barLabelVisible=!0,n+=t(r.value)}))}(e):function(e,t,n){let r,i,a=[0,Math.max(t-5,0)],o=tl(e.children,(e=>e.value)),l=ts().domain([0,o]).range(a);Ro.bar_max_value&&l.domain([0,Ro.bar_max_value]);let s=X_();if(Ro.auto_set_height&&!1===Flourish.fixed_height)r=Ro.bar_min_bar_thickness;else{let t=n-py,i=e.children.length;r=Z_(t,i)}i=r+Ro.bar_bar_padding+s,e.children.forEach(((e,t)=>{e.display=e.display||{},e.display.x=0,e.display.l=l(e.value),e.display.y=t*i+s,e.display.thickness=r,Jb(e),e.display.barLabelVisible=!1}))}(e,n,r),e.children.forEach((e=>{Qb(e,t,n,r)})))}function Kb(e,t){ue(this).select("rect").transition().duration(t).attr("x",e.display.x).attr("y",e.display.y).attr("width",e.display.l).attr("height",e.display.thickness).style("fill",e.display.fill).style("opacity",e.display.visible?1:0).style("pointer-events",e.display.visible?"all":"none").style("stroke",Ro.stroke_color||Ro.layout.background_color).attr("tabindex",(e=>Y_(e)?"0":null)).attr("aria-label",Gm),ue(this).select("text.bar-label").transition().duration(t).attr("x",e.display.barLabelX).attr("y",e.display.barLabelY).style("font-size",e.display.fontSize+"px").style("font-weight",e.display.fontWeight).style("opacity",e.display.visible&&e.display.barLabelVisible?1:0).text(e.display.barLabelText),ue(this).select("text.axis-label").transition().duration(t).attr("y",e.display.axisLabelY).attr("dx",e.display.axisLabelDx).attr("dy",e.display.axisLabelDy).style("opacity",e.display.axisLabelVisible?1:0).style("font-size",e.display.axisLabelSize+"px").style("font-weight",e.display.axisFontWeight).style("pointer-events",e.display.axisLabelVisible?"all":"none").style("fill",Ro.axis_label_color||Ro.layout.font_color).style("text-anchor",Ro.bar_axis_labels_above!==Ho?"start":"end").text(e.display.axisLabelText),ue(this).select("text.value-label").transition().duration(t).attr("x",e.display.valueLabelX).attr("y",e.display.valueLabelY).text((e=>e.display.valueLabelText)).style("font-size",e.display.fontSize+"px").style("font-weight",Ro.value_label_bold?"bold":"normal").style("opacity",e.display.valueLabelVisible?1:0).style("fill",Ro.axis_label_color||Ro.layout.font_color).style("text-anchor",Ho?"end":"start")}function em(e,t,n){let r=!1===e||Cy()?0:1e3*Ro.animation_duration;if(zy.transition().duration(r).style("opacity","bar"===Ro.hierarchy_layout?1:0).on("end",(function(){"bar"!==Ro.hierarchy_layout&&zy.select(".bars").selectAll("*").remove()})),"bar"!==Ro.hierarchy_layout)return;let i=Ro.bar_axis_labels_above?0:Zb(),a=t-i-(Ro.show_value_labels?ya(Ro.bar_value_label_space):0),o=R_();!function(e,t,n,r){Qb(e,t,n,r)}(mu.root,o,a,n);let l=mu.root.descendants().slice(1);l.reverse();let s=zy.select(".bars").selectAll("g.node").data(l,(e=>e.id));zy.select(".bars").transition().duration(r).attr("transform",`translate(${i}, ${py})`);let c=s.enter().append("g").classed("node",!0);c.append("rect").attr("x",(e=>e.display.x)).attr("y",(e=>e.display.y)).attr("width",(e=>e.display.l)).attr("height",(e=>e.display.thickness)).style("fill",(e=>e.display.fill)),c.append("text").classed("bar-label",!0).attr("x",(e=>e.display.barLabelX)).attr("y",(e=>e.display.barLabelY)).attr("dy","0.33em").style("text-anchor","middle").style("opacity",0).style("pointer-events","none"),c.append("text").classed("axis-label",!0).attr("y",(e=>e.display.axisLabelY)).style("opacity",0).style("text-anchor","end"),c.append("text").classed("value-label",!0).attr("x",(e=>e.display.valueLabelX)).attr("y",(e=>e.display.valueLabelY)).attr("dy","0.33em").style("opacity",0).style("pointer-events","none"),c.each(Xb),c.merge(s).style("cursor",(e=>e.children?"pointer":"default")).each((function(e){Kb.call(this,e,r)})),c.merge(s).select(".bar-label").style("fill",Iy),s.exit().remove(),function(e,t,n){let r=e.ancestors().slice(0,-1).reverse(),i=Ro.bar_axis_labels_above?0:Zb();t.select(".breadcrumb").transition().duration(n).attr("transform",`translate(${i}, 30)`);let a=t.select(".breadcrumb").style("font-weight","allBold"===Ro.label_weight||"topBold"===Ro.label_weight?"bold":"normal").select("text").selectAll("tspan.item").data(r),o=a.enter().append("tspan").style("opacity",0).style("fill",Ro.axis_label_color||Ro.layout.font_color).classed("item",!0);o.append("tspan").classed("separator",!0).text(" > "),o.append("tspan").classed("label",!0).on("click",(e=>{xm||(K.stopPropagation(),Bm("zoomToNode",e))})),o.merge(a).transition().duration(n).style("fill",Ro.axis_label_color||Ro.layout.font_color).style("opacity",1),a.select("tspan.label").text((e=>"allUpperCase"===Ro.label_case||"topUpperCase"===Ro.label_case?e.data.key.toUpperCase():e.data.key)),a.exit().transition().duration(n).style("opacity",0).remove()}(o,zy,r)}function tm(){zy.select(".bars").selectAll("g").select("rect").style("opacity",(e=>{let t=e.id===Yy;return e.display.visible?t?.7:1:0}))}function nm(e,t){return{x:t*Math.cos(e),y:t*Math.sin(e)}}function rm(e,t,n,r,i,a,o,l,s,c){e.each((function(e){var u,d=C_(l(e.data.x)),f=s(e.data.y),p=e.data.value,h=e.data.value<0,_=0===e.height||e.depth===t.depth+Ro.num_of_visible_levels,y=0===e.depth;e.data.display.rotate=d,e.data.display.translate=f,e.data.display.parent_rotate=C_(l(e.data.parent_x)),e.data.display.parent_translate=s(e.data.parent_y),e.data.display.cp2_translate=e.depth===t.depth+1?0:(e.data.display.translate+e.data.display.parent_translate)/2,e.data.display.bar_width=i,e.data.display.bar_length=_?Math.abs(c(p)):0,e.data.display.bar_translate=_?p>0?0:-e.data.display.bar_length:0,e.data.display.circle_opacity=_||y?0:1,e.data.display.bar_opacity=_?1:0,function(e,t,n,r,i,a,o,l,s,c){let u={},d=e.data.key;d&&B_(!0)&&(d=d.toUpperCase()),u.normal=n?"translate(4, 0)":"translate(8, 0)",i||(u.normal+="translate("+e.data.display.bar_length+", 0)"),u.reversed=n?"rotate(180)translate(-4, 0)":"rotate(180)translate(-8, 0)",i||(u.reversed+="translate("+-e.data.display.bar_length+", 0)");var f=a>-90&&a<90?"normal":"reversed";e.data.display.name_label_orientation=f,e.data.id===r.data.id&&(e.data.display.name_label_orientation="normal",u.normal="rotate("+-a+")translate(8, 0)",d&&B_(!1)&&(d=d.toUpperCase())),e.data.display.name_label_transform=u;let p="'"+Ro.layout.body_font.name+"'",h=l>20?.2*l:.05*l,_=D_(e.data.id!==r.data.id),y=Math.min(ya(Ro.label_size),Math.floor(l-2*h)),b=y+"px "+p,m="bold "+b,g=_+" "+b,v={text:"",y:null,dy:null,x:null},x=[];const w=1.2*y;let k=n?Math.max(Math.floor(.9*l/w),1):3,M=!1;if(n){let t=c-4-e.data.display.bar_length,n=!1;if(Ro.show_value_labels){k>1&&(M=!0,k-=1),v.text=iy(o);let e=ba(v.text+" ",m);e>=t&&(v.text=q_(v.text,t,m),n=!0),n||M||(t-=e)}n&&!M||(x=va(d,g,k,t))}else t||(x=va(d,g,k,.9*s));const z=x.length+(M?1:0),A=z>1;if(d){const e=z-1,t=.33*y-.5*e*w;x=x.map(((e,n)=>({text:e,y:A?t:null,dy:A?n*w:null,x:A?0:null}))),v.x=A?0:null,v.y=A?t:null,v.dy=A?e*w:null}e.data.display.label_size=y,e.data.display.font_weight=_,e.data.display.name_label=x,e.data.display.value_label=v}(e,y,_,t,h,d,p,i,a,o),e.data.display.color=P_(e),Ro.radial_tree_colored_links?(u=ea(e.data.display.color)).opacity=.25:u=Ro.radial_tree_link_color,e.data.display.link_color=u;var b=nm(T_(d),f+(_?e.data.display.bar_length:0));e.data.display.popup={x:.5*n+b.x,y:.5*r+b.y}}))}function im(){ue(this).on("mouseover",Ny).on("mouseout",Sy).on("keydown",Oy).on("click",(e=>{Ly(xh(mu.root,e.data.id))}))}function am(e,t,n){var r=e.append("g").classed("label-"+n,!0).style("opacity",0).style("fill",(function(e){return e.data.display.color})).style("font-size",(function(e){return e.data.display.label_size+"px"})).style("font-weight",t.data.display.font_weight);!function(e){e.append("tspan").classed("name-label",!0),e.append("tspan").classed("value-label",!0).style("font-weight","bold")}(r.append("text").classed("label-text",!0).attr("dy","0.33em").style("stroke-width","0.5em").style("stroke-linejoin","round").attr("paint-order","stroke"))}function om(e,t){var n=ue(this);this._tween={rotate:e.data.display.prev_rotate,translate:e.data.display.prev_translate},n.classed("node",!0).style("opacity",0).transition().duration(.5*t).delay(.5*t).style("opacity",1).attr("tabindex",0).attr("aria-label",Gm),n.classed("node",!0).attr("transform",(function(e){return"rotate("+e.data.display.prev_rotate+")"})),(n=n.append("g")).classed("translate-layer",!0).attr("transform",(function(e){return"translate("+e.data.display.prev_translate+")"})),n.append("circle").attr("r",4).style("opacity",0).style("fill",(function(e){return e.data.display.color})),am(n,e,"normal"),am(n,e,"reversed"),n.append("rect").style("opacity",0).style("fill",(function(e){return e.data.display.color}))}function lm(e){var t=this,n=this._tween.rotate,r=this._tween.translate,i=Cl(n,e.data.display.rotate),a=Cl(r,e.data.display.translate);return function(e){ue(t).attr("transform","rotate("+i(e)+")").select(".translate-layer").attr("transform","translate("+a(e)+")"),t._tween.rotate=i(e),t._tween.translate=a(e)}}function sm(e){ue(this).transition().duration(.5*e).style("opacity",0),ue(this).transition("nodes").duration(e).tween("node",lm).on("end",(function(){ue(this).remove()}))}function cm(e,t){Ay.select(".nodes").selectAll("g.node").data(mu.root.descendants(),(function(e){return e.data.id}));var n=Ay.select(".nodes").selectAll("g.node").data(e.descendants(),(function(e){return e.data.id}));n.enter().append("g").each((function(e){om.call(this,e,t)})).each(im).merge(n).transition("nodes").duration(t).tween("node",lm),n.exit().each((function(){sm.call(this,t)})),Ay.select(".nodes").selectAll("g.node").transition().delay(t).duration(.1*t).style("opacity",1),Ay.select(".nodes").selectAll("g.node").select("circle").transition("nodes").duration(t).style("fill",(function(e){return e.data.display.color})).style("opacity",(function(e){return e.data.display.circle_opacity})),Ay.select(".nodes").selectAll("g.node").select("rect").transition("nodes").duration(t).style("fill",(function(e){return e.data.display.color})).style("opacity",(function(e){return e.data.display.bar_opacity})).attr("y",(function(e){return-.5*e.data.display.bar_width})).attr("x",(function(e){return e.data.display.bar_translate})).attr("width",(function(e){return e.data.display.bar_length})).attr("height",(function(e){return e.data.display.bar_width})),Ay.select(".nodes").selectAll("g.node").select("g.label-normal").each((function(e){ue(this).select(".label-text").style("stroke",Ro.layout.background_color),ue(this).select("tspan.value-label").text(Ro.show_value_labels?(Ho?" ":"")+e.data.display.value_label.text:"").attr("x",e.data.display.value_label.x).attr("y",e.data.display.value_label.y).attr("dy",e.data.display.value_label.dy).style("font-weight",Ro.value_label_bold?"bold":"normal");var t=ue(this).select("tspan.name-label").text(Ho?"":" ");t.selectAll("tspan.name-label-line").data(e.data.display.name_label).join("tspan").classed("name-label-line",!0).text((e=>e.text)).attr("x",(e=>e.x)).attr("y",(e=>e.y)).attr("dy",(e=>e.dy)).style("font-weight",e.data.display.font_weight),Ho?t.lower():t.raise()})).style("text-anchor",Ho?"end":"start").transition().duration(t).style("fill",(function(e){return e.data.display.color})).style("font-size",(function(e){return e.data.display.label_size+"px"})).style("font-weight",(function(e){return e.data.display.font_weight})).attr("transform",(function(e){return e.data.display.name_label_transform.normal})).style("opacity",(function(e){return"normal"===e.data.display.name_label_orientation?1:0})),Ay.select(".nodes").selectAll("g.node").select("g.label-reversed").each((function(e){ue(this).select(".label-text").attr("x","0").style("stroke",Ro.layout.background_color),ue(this).select("tspan.name-label").text(Ho?"":" ").selectAll("tspan.name-label-line").data(e.data.display.name_label).join("tspan").classed("name-label-line",!0).text((e=>e.text)).attr("x",(e=>e.x)).attr("y",(e=>e.y)).attr("dy",(e=>e.dy)).style("font-weight",e.data.display.font_weight);var t=ue(this).select("tspan.value-label").text(Ro.show_value_labels?e.data.display.value_label.text+(Ho?" ":""):"").attr("x",e.data.display.value_label.x).attr("y",e.data.display.value_label.y).attr("dy",e.data.display.value_label.dy).style("font-weight",Ro.value_label_bold?"bold":"normal");Ho?t.lower():t.raise()})).style("text-anchor",Ho?"start":"end").transition().duration(t).style("fill",(function(e){return e.data.display.color})).style("font-size",(function(e){return e.data.display.label_size+"px"})).attr("transform",(function(e){return e.data.display.name_label_transform.reversed})).style("opacity",(function(e){return"normal"===e.data.display.name_label_orientation?0:1}))}function um(e,t){var n=ue(this);this._tween={rotate:e.data.display.prev_rotate,translate:e.data.display.prev_translate,parent_rotate:e.data.display.prev_parent_rotate,parent_translate:e.data.display.prev_parent_translate,cp2_translate:e.data.display.cp2_translate},n.classed("link",!0).style("opacity",0).transition().duration(.5*t).delay(.5*t).style("opacity",1)}function dm(e){var t=this;this._tween=this._tween||{};var n=this._tween.rotate||0,r=this._tween.translate||0,i=this._tween.parent_rotate||0,a=this._tween.parent_translate||0,o=this._tween.cp2_translate||0,l=Cl(n,e.data.display.rotate),s=Cl(r,e.data.display.translate),c=Cl(i,e.data.display.parent_rotate),u=Cl(a,e.data.display.parent_translate),d=Cl(o,e.data.display.cp2_translate);return function(e){var n=l(e),r=s(e),i=c(e),a=u(e),o=d(e),f=function(e,t,n,r,i){var a=nm(T_(e),t),o=nm(T_(e),(t+r)/2),l=nm(T_(n),i),s=nm(T_(n),r);return"M"+a.x+","+a.y+"C"+o.x+","+o.y+" "+l.x+","+l.y+" "+s.x+","+s.y}(n,r,i,a,o);ue(t).attr("d",f),t._tween.rotate=n,t._tween.translate=r,t._tween.parent_rotate=i,t._tween.parent_translate=a,t._tween.cp2_translate=o}}function fm(e){ue(this).transition().duration(.5*e).style("opacity",0),ue(this).transition("links").duration(e).tween("link",dm).on("end",(function(){ue(this).remove()}))}function pm(e,t){Ay.select(".links").selectAll("path").data(mu.root.descendants().slice(1),(function(e){return e.data.id}));var n=Ay.select(".links").selectAll("path").data(e.descendants().slice(1),(function(e){return e.data.id}));n.enter().append("path").each((function(e){um.call(this,e,t)})).merge(n).transition("links").duration(t).style("stroke",(function(e){return e.data.display.link_color})).style("fill","none").tween("link",dm),n.exit().each((function(){fm.call(this,t)})),Ay.select(".links").selectAll("path").transition().delay(t).duration(.1*t).style("opacity",1)}var hm,_m,ym,bm,mm,gm,vm,xm,wm=2*Math.PI,km={},Mm=function(){var e=rh,t=1,n=1,r=null;function i(i){var s=function(e){for(var t,n,r,i,a,o=new sh(e,0),l=[o];t=l.pop();)if(r=t._.children)for(t.children=new Array(a=r.length),i=a-1;i>=0;--i)l.push(n=t.children[i]=new sh(r[i],i)),n.parent=t;return(o.parent=new sh(null,0)).children=[o],o}(i);if(s.eachAfter(a),s.parent.m=-s.z,s.eachBefore(o),r)i.eachBefore(l);else{var c=i,u=i,d=i;i.eachBefore((function(e){e.x<c.x&&(c=e),e.x>u.x&&(u=e),e.depth>d.depth&&(d=e)}));var f=c===u?1:e(c,u)/2,p=f-c.x,h=t/(u.x+f+p),_=n/(d.depth||1);i.eachBefore((function(e){e.x=(e.x+p)*h,e.y=e.depth*_}))}return i}function a(t){var n=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(n){!function(e){for(var t,n=0,r=0,i=e.children,a=i.length;--a>=0;)(t=i[a]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(t);var a=(n[0].z+n[n.length-1].z)/2;i?(t.z=i.z+e(t._,i._),t.m=t.z-a):t.z=a}else i&&(t.z=i.z+e(t._,i._));t.parent.A=function(t,n,r){if(n){for(var i,a=t,o=t,l=n,s=a.parent.children[0],c=a.m,u=o.m,d=l.m,f=s.m;l=ah(l),a=ih(a),l&&a;)s=ih(s),(o=ah(o)).a=t,(i=l.z+d-a.z-c+e(l._,a._))>0&&(oh(lh(l,t,r),t,i),c+=i,u+=i),d+=l.m,c+=a.m,f+=s.m,u+=o.m;l&&!ah(o)&&(o.t=l,o.m+=d-u),a&&!ih(s)&&(s.t=a,s.m+=c-f,r=t)}return r}(t,i,t.parent.A||r[0])}function o(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function l(e){e.x*=t,e.y=e.depth*n}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i}().separation((function(){return 1})),zm=ts(),Am=ts(),Em=ts();function Cm(e){var t=Am(e),n=2*Math.PI;return t<-n&&(t=-n),t>n&&(t=n),t+=T_(Ro.radial_tree_rotation)}function Tm(e,t){var n=e.copy();return n.eachBefore((function(e){e.depth===t&&delete e.children})),n.each((function(e){e.isTruncated=!0,e.id=e.data.id})),n}function Nm(e,t,n){let r=!1===e||Cy()?0:1e3*Ro.animation_duration;if(function(e){Ay.transition().duration(e).style("opacity","radialTree"===Ro.hierarchy_layout?1:0).on("end",(function(){"radialTree"!==Ro.hierarchy_layout&&(Ay.select(".nodes").selectAll("*").remove(),Ay.select(".links").selectAll("*").remove())}))}(r),"radialTree"===Ro.hierarchy_layout){var i=R_();mu.root.each((function(e){e.data.id=e.id,e.data.value=e.value})),function(e){e.each((function(e){if(void 0!==km[e.id]){var t=km[e.id];e.data.display={prev_rotate:t.rotate,prev_translate:t.translate,prev_parent_rotate:t.parent_rotate,prev_parent_translate:t.parent_translate,cp2_translate:t.cp2_translate}}else e.data.display={prev_rotate:0,prev_translate:0,prev_parent_rotate:0,prev_parent_translate:0,cp2_translate:0}}))}(mu.root),function(e,t){var n=Tm(e,t);Mm(e),Mm(n);var r,i=(r={},n.each((function(e){r[e.data.id]=e})),r);e.eachBefore((function(e){var t=i[e.data.id];if(e.data.y=e.y,void 0!==t)e.data.x=t.x,e.data.x_delta=t.x-e.x;else{var n=e.parent.data.x_delta;e.data.x=e.x+n,e.data.x_delta=n}0===e.depth?(e.data.parent_x=e.data.x,e.data.parent_y=e.data.y):(e.data.parent_x=e.parent.data.x,e.data.parent_y=e.parent.data.y)}))}(mu.root,i.depth+Ro.num_of_visible_levels);var a=Tm(i,Ro.num_of_visible_levels);!function(e,t,n,r){var i=Math.min(e,t),a=Ro.num_of_visible_levels;n+Ro.num_of_visible_levels>r&&(a=r-n),hm=.5*Ro.radial_tree_outer_radius*i/100,_m=.5*Ro.radial_tree_bar_length*i/100,ym=hm/a,bm=.5*i-hm,mm=Ro.radial_tree_bar_width}(t,n,i.depth,mu.root.height),function(e){var t=e.leaves().length,n=hm>0?t*mm/hm:0;n>=wm?(gm=hm*wm/t-1,vm=wm):(vm=n,gm=mm-2),gm=Math.max(gm,0),vm-=(gm+1)/hm,vm=Math.max(vm,0)}(a),function(e,t){var n=e.leaves(),r=Go(n,(function(e){return e.data.x}));Am.domain(r).range([-.5*vm,.5*vm]),1===n.length&&Am.range([0,0]);var i=[t.data.y,n[0].data.y];Em.domain(i).range([0,hm]),zm.domain([0,tl(n,(function(e){return Math.abs(e.data.value)}))]).range([0,_m])}(a,i),rm(mu.root,i,t,n,gm,ym,bm,Cm,Em,zm),Ay.attr("transform",`translate(${.5*t}, ${.5*n})`),cm(a,r),pm(a,r),function(e){e.each((function(e){km[e.id]=e.data.display}))}(mu.root)}}function Sm(){xm||Ay.select(".nodes").selectAll(".node").style("opacity",(function(e){return e.data&&e.data.id===Yy?.7:1}))}function Lm(e,t){let n=Ro.num_of_visible_levels;e.display={},e.display.visible=e.depth<t+n+1,e.display.leaf=!e.children,e.display.visible_leaf=e.depth===t+n||e.display.leaf&&e.depth<t+n,e.children&&e.children.forEach((e=>{Lm(e,t)}))}function Om(){let e=R_(),t=e?e.depth:0;Lm(mu.root,t)}function Fm(){var e=S_(),t=R_(),n=function(){let e=S_(),t=R_(),n=[];return t.each((function(r){e.includes(r.data.key)&&r.depth-t.depth<=Ro.num_of_visible_levels&&n.push(r.data.key)})),md(n)}(),r="off"===Ro.legend_mode,i=[];i=Ro.filter&&Ro.filter!==Ro.filter_all_label?md([Ro.filter].concat(n)):Ro.legend_only_show_custom_overrides?e:md(E_.concat(e));var a=t.depth>0?i.filter((function(e){return n.includes(e)||t.level1_key===e&&!n.includes(t.data.key)})):i.filter((function(t){return!e.includes(t)||n.includes(t)})),o=i.filter((function(e){return!a.includes(e)}));ig.data(r?[]:i,A_.getColor).filtered(o),ag.update(),qo.setLegendPosition(Ro.legend_position)}function jm(e){let t;!function(){let e=Es.data.column_names.size_columns.map((e=>e));0===e.length?Ro.size_by=null:-1===e.indexOf(Ro.size_by)&&(Ro.size_by=e[0]);let t=sy(ly());0===t.length?Ro.filter=null:-1===t.indexOf(Ro.filter)&&Ro.filter!==Ro.filter_all_label&&(Ro.filter=t[0])}(),oy(),cy(),uy(),(ry||ny)&&og.update(),t=ny?Es.data.filter((function(e){return Ro.filter===Ro.filter_all_label||("datetime"===Es.data.metadata.filter.type?N_(e.filter)===N_(Ro.filter):e.filter===Ro.filter)})):Es.data;let n=!0;"radialTree"===Ro.hierarchy_layout&&(n=!1);let r=_h(t,n);mu.root=vh(r),E_=md(Es.data.map((e=>e.nest_columns[0]))),A_.updateColorScale(E_),Fm(),qo.update(),Ho="rtl"===ma(),function(){let e=Ro.hierarchy_layout,t=Math.max(0,qo.getPrimaryWidth()),n=Math.max(0,qo.getPrimaryHeight()),r=n,i=R_(),a=i.children?i.children.length:0;var o=!1;if(Ro.auto_set_height&&!1===Flourish.fixed_height)if("treemap"===e){let e=t<Ro.responsive_narrow_breakpoint?.01*t*Ro.treemap_aspect_ratio_narrow:.01*t*Ro.treemap_aspect_ratio_normal;qo.setHeight(e),r=e}else if("circlePacking"===e||"sunburst"===e||"radialTree"===e)qo.setHeight(t),r=t;else if("bar"===e){let e=X_(),t=Ro.bar_min_bar_thickness+Ro.bar_bar_padding+e,n=py+a*t;qo.setHeight(n),r=n}else qo.setHeight(null);else if(qo.setHeight(null),"bar"===e){let e=Z_(n-py,a),t=X_(),i=a*(e+Ro.bar_bar_padding+t)+py;i>n&&(r=i,o=!0)}vy.attr("width",t).attr("height",r),xy.attr("width",t).attr("height",r),my.select("#fl-layout-primary-container").style("overflow-y",o?"auto":"hidden")}();let i=Math.max(0,qo.getPrimaryWidth()),a=Math.max(0,qo.getPrimaryHeight());mu.w=i,mu.h=a,function(){let e=Dm.locked();if(e){let t=xh(mu.root,e);if(!t||!Jm(t))return void Dm.clickout();{let e=Vm(t);Dm.setColumnNames(e.column_names).setFormatters(e.formatters)}}Dm.update(),ue(".flourish-popup").classed("all-events","popup"===Ro.popup.mode||"both"===Ro.popup.mode)}(),Om(),Jy(e,i,a),fb(e,i,a),Gb(e,i,a),em(e,i,a),Nm(e,i,a),function(){let e=Ro.zoomed_node_id&&J_(Ro.ascend_button_visibility);Ey.style("display",e?"block":"none").style("background",Ro.zoom_out_button_color).classed("top-left","right"===Ro.popup.panel_position).classed("bottom-right","top"===Ro.popup.panel_position).on("touchstart",(()=>{K.stopPropagation(),Bm("zoomOut")})).on("click",(()=>{K.stopPropagation(),Bm("zoomOut")})).select("svg path").style("fill",Ro.zoom_out_arrow_color)}(),eg.update(),tg.update(),ng.update(),rg.update(),qo.showOverlay(void 0===mu.root.children?"No data to display":null)}function Pm(){jm()}function $m(){Zy(),db(),Vb(),tm(),Sm()}function Bm(e,t){switch(e){case"updateHighlightedNode":Uy(t),$m();break;case"zoomToNode":xm=!0,t.children&&(Ro.zoomed_node_id=t.id),Uy(null),Pm(),Dm.clickout();var n=Cy()?0:1e3*Ro.animation_duration+100;setTimeout((function(){xm=!1}),n);break;case"zoomOut":if(null===Ro.zoomed_node_id)return;xm=!0;let e=xh(mu.root,Ro.zoomed_node_id),r=e?e.ancestors():null;Ro.zoomed_node_id=r&&2!==r.length?r[1].id:null,Uy(null),Pm(),Dm.clickout(),setTimeout((function(){xm=!1}),1e3*Ro.animation_duration+100);break;case"hidePopup":Dm.clickout(),Uy(null),Pm()}}let Dm,qm,Hm=null;function Rm(e){Hm=e}function Ym(e){if(!e)return;let t,n,r=vy.node().getBoundingClientRect().left,i=vy.node().getBoundingClientRect().top;switch(Ro.hierarchy_layout){case"treemap":t=.5*(e.display.x1+e.display.x0),n=e.display.visible_leaf?.5*(e.display.y1+e.display.y0)+15:e.display.y0+10;break;case"circlePacking":t=e.display.x+dy.x,n=e.display.visible_leaf?e.display.y+dy.y+15:e.display.y-e.display.r+dy.y+15;break;case"sunburst":let r=.5*(e.display.a0+e.display.a1),i=r>.5*Math.PI&&r<1.5*Math.PI?.4:.6,a=i*e.display.r0+(1-i)*e.display.r1;t=.5*mu.w+a*Math.sin(r),n=.5*mu.h-a*Math.cos(r);break;case"bar":t=e.display.x+.5*e.display.l+(Ro.bar_axis_labels_above?0:Zb()),n=e.display.y+.5*e.display.thickness+py+10;break;case"radialTree":t=e.data.display.popup.x,n=e.data.display.popup.y+15;break;default:console.log("Missing handler for "+Ro.hierarchy_layout+" in popup")}return t+=r,n+=i,[t,n]}function Um(e){let t=xh(mu.root,e),n=Vm(t);return[Ym(t),n.datum]}function Im(e,t,n,r){t.__value="VALUE",r.__value=e.value,n.__value=iy,t.__size_by="SIZEBY",r.__size_by="Sum"===Ro.aggregation_type?Ro.size_by:"Count",t.__name="NAME",r.__name=e.data.key}function Wm(e,t,n,r){Es.data.metadata.popup_metadata&&(t.meta=Es.data.column_names.popup_metadata,r.meta=Es.data.metadata.popup_metadata.map(((t,n)=>e.popup_metadata[n])),n.meta=Es.data.metadata.popup_metadata.map((e=>"datetime"===e.type||"number"===e.type?er(e.output_format_id):e=>e)))}function Vm(e){let t={},n={},r={},i="popup"===Ro.popup.mode&&Ro.popup.popup_is_custom||"both"===Ro.popup.mode&&(Ro.popup.popup_is_custom||Ro.popup.panel_is_custom),a=e.ancestors().slice(0,-1),o=e.data.unique_row;return e.height>0||0===e.height&&!o?i?(n.ancestors=a.map((e=>e.data.column_name)),t.ancestors=a.map((e=>e.data.key)),n.value=Ro.size_by,t.value=e.value,r.value=iy,Im(e,n,r,t)):(t.__title=e.data.key,n.ancestors=a.map((e=>e.data.column_name)).slice(1),t.ancestors=a.map((e=>e.data.key)).slice(1),n.value=Ro.size_by,t.value=e.value,r.value=iy):i?(n.ancestors=a.map((e=>e.data.column_name)),t.ancestors=a.map((e=>e.data.key)),n.value=Ro.size_by,t.value=e.value,r.value=iy,Wm(o,n,r,t),Im(e,n,r,t)):(t.__title=e.data.key,n.ancestors=a.map((e=>e.data.column_name)).slice(1),t.ancestors=a.map((e=>e.data.key)).slice(1),n.value=Ro.size_by,t.value=e.value,r.value=iy,Wm(o,n,r,t)),{datum:t,column_names:n,formatters:r}}function Gm(e){const t=Vm(xh(mu.root,e.id));return Dm.setColumnNames(t.column_names).setFormatters(t.formatters),Dm.getAccessiblePopupContent(t.datum)}function Xm(){Bm("updateHighlightedNode",null)}function Zm(){if(Dm.locked()&&("popup"===Ro.popup.mode||"both"===Ro.popup.mode))return void Dm.clickout();let e=Hm,t=xh(mu.root,e),n=Vm(t),r=Ym(t);Dm.setColumnNames(n.column_names).setFormatters(n.formatters).click(r,n.datum,e),Bm("updateHighlightedNode",e)}function Jm(e){let t=R_(),n=e.depth>=t.depth&&e.depth<=t.depth+Ro.num_of_visible_levels,r=!Ro.popup_active_levels||"all_levels"===Ro.popup_active_levels||"top_level"===Ro.popup_active_levels&&1===e.depth||"below_top_level"===Ro.popup_active_levels&&e.depth>1||"above_bottom_level"===Ro.popup_active_levels&&e.height>0||"bottom_level"===Ro.popup_active_levels&&0===e.height;return n&&r}qo=Do(Ro.layout);var Qm=Li(Ro.filter_control),Km=Li(Ro.size_by_control),eg=function(e,t,n){return new bs(e,t,n)}(Ro.controls_style,".fl-control",Ro.layout),tg=function(e,t,n){return new xs(e,t,n)}(Ro.dropdown_style,".fl-control-dropdown",Ro.layout),ng=function(e,t,n){return new gs(e,t,n)}(Ro.button_style,".fl-control-buttons",Ro.layout),rg=function(e,t,n){return new Ms(e,t,n)}(Ro.slider_style,".fl-control-slider",Ro.layout);const ig=function(e){return new ol(e)}(Ro.legend_categorical);Dm=function(e,t,n){return new hu(e,t,n)}(Ro.popup),Dm.titleKey("__title").subtitleKey("__subtitle").getLockedPosition(Um).onPanelClose(Xm),qm=ue(".flourish-popup").node(),ue(".flourish-popup-content").on("click",Zm),ue(".flourish-popup").on("mouseleave",(()=>Dm.mouseout()));var ag=function(e){return new ps(e)}(Ro.legend_container).appendTo(qo.getSection("legend")).add(ig),og=function(e){return new Ci(e)}(Ro.controls_container).appendTo(qo.getSection("controls")),lg=function(){return xu.Date.now()},sg=/\s/;var cg=/^\s+/;function ug(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&sg.test(e.charAt(t)););return t}(e)+1).replace(cg,""):e}var dg=NaN,fg=/^[-+]0x[0-9a-f]+$/i,pg=/^0b[01]+$/i,hg=/^0o[0-7]+$/i,_g=parseInt;function yg(e){if("number"==typeof e)return e;if(np(e))return dg;if(Lu(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Lu(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=ug(e);var n=pg.test(e);return n||hg.test(e)?_g(e.slice(2),n?2:8):fg.test(e)?dg:+e}var bg="Expected a function",mg=Math.max,gg=Math.min;function vg(e,t,n){var r,i,a,o,l,s,c=0,u=!1,d=!1,f=!0;if("function"!=typeof e)throw new TypeError(bg);function p(t){var n=r,a=i;return r=i=void 0,c=t,o=e.apply(a,n)}function h(e){var n=e-s;return void 0===s||n>=t||n<0||d&&e-c>=a}function _(){var e=lg();if(h(e))return y(e);l=setTimeout(_,function(e){var n=t-(e-s);return d?gg(n,a-(e-c)):n}(e))}function y(e){return l=void 0,f&&r?p(e):(r=i=void 0,o)}function b(){var e=lg(),n=h(e);if(r=arguments,i=this,s=e,n){if(void 0===l)return function(e){return c=e,l=setTimeout(_,t),u?p(e):o}(s);if(d)return clearTimeout(l),l=setTimeout(_,t),p(s)}return void 0===l&&(l=setTimeout(_,t)),o}return t=yg(t)||0,Lu(n)&&(u=!!n.leading,a=(d="maxWait"in n)?mg(yg(n.maxWait)||0,t):a,f="trailing"in n?!!n.trailing:f),b.cancel=function(){void 0!==l&&clearTimeout(l),c=0,r=s=i=l=void 0},b.flush=function(){return void 0===l?o:y(lg())},b}var xg;function wg(e,t,n){for(var r in t){var i=t[r];if("object"!=typeof i||null===i||Array.isArray(i))n.indexOf(r)>-1?e[r]=i:Flourish.warn("State property `"+r+"` not whitelisted for use in URL");else{var a=r.length,o=n.filter((function(e){return e.substring(0,a)==r})).map((function(e){return e.substring(a+1)}));wg(e[r],i,o)}}}function kg(e,t){var n=location.hash.substring(1);if(""!=n){var r;try{r=JSON.parse(decodeURIComponent(n))}catch(e){Flourish.warn({message:"Invalid JSON passed to template URL hash",explanation:e})}r&&wg(e,r,t)}}var Mg=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Lu(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),vg(e,t,{leading:r,maxWait:t,trailing:i})}((function(){jm(xg==window.innerWidth),xg=window.innerWidth}),500);return e.data=Es,e.draw=function(){var e,t,n,r;e=Ro.url_state,t=Ro,n=jm,r=(e.enabled,e.whitelist||"").split(/\n/),kg(t,r),window.addEventListener("hashchange",(function(){kg(t,r),n&&n()})),my=ue(document.body),gy=ue(qo.getSection("primary")),vy=gy.append("svg").classed("noselect",!0),xy=vy.append("rect").classed("background",!0).style("fill","none").style("pointer-events","visible"),wy=vy.append("g").classed("g-treemap",!0),ky=vy.append("g").classed("g-circle-packing",!0).attr("transform",`translate(${dy.x},${dy.y})`),My=vy.append("g").classed("g-sunburst",!0),(zy=vy.append("g").classed("g-bar",!0)).append("g").classed("breadcrumb",!0).append("text"),zy.append("g").classed("bars",!0),(Ay=vy.append("g").classed("g-radial-tree",!0)).append("g").classed("links",!0),Ay.append("g").classed("nodes",!0),(Ey=gy.append("div").classed("zoomout-button",!0).attr("title","Go up a level").attr("tabindex","0").on("click",(()=>{Bm("zoomOut")})).on("keydown",(()=>{"Enter"===K.key&&Bm("zoomOut")}))).append("svg").append("path").attr("d","M7.285,16.01l4.12,4.119l5.137,-5.137l0,21.201l5.825,0l0,-21.201l5.138,5.137l4.119,-4.119l-12.169,-12.169l-12.17,12.169Z"),xy.on("click",(()=>{Bm("zoomOut")})),ue(qo.getWrapper()).on("click",(()=>{event.target.closest&&event.target.closest(".fl-control")||Bm("hidePopup")})),xg=window.innerWidth,window.addEventListener("resize",(function(){Mg()})),qo.awaitFonts((()=>jm(!1)))},e.state=Ro,e.update=Pm,e}({});
//# sourceMappingURL=template.js.map
</script><script src="embedded.js"></script><script>
			function _Flourish_unflattenInto(dest, src) {
				dest = dest || {};
				for (var k in src) {
					var t = dest;
					for (var i = k.indexOf("."), p = 0; i >= 0; i = k.indexOf(".", p = i+1)) {
						var s = k.substring(p, i);
						if (!(s in t)) t[s] = {};
						t = t[s];
					}
					t[k.substring(p)] = src[k];
				}
				return dest;
			}
			var _Flourish_settings = {"color.categorical_palette":["#ef6590","#0f5499","#70dce6","#9dbf57","#208fce","#7f062e","#ce3140","#c2b7af"],"filter_number_formatter.n_dec":1,"hierarchy_layout":"treemap","layout.footer_note":"Data up to Dec 2024","layout.source_name":"Kiel Institute for the World Economy: Ukraine Support Tracker","layout.subtitle":"Total value of cumulative commitments (€bn)","layout.subtitle_space_above":"0.5","layout.title":"The US is not providing disproportionately large amounts to Ukraine","layout.title_space_above":"0.5","popup.mode":"popup","popup.popup_custom_header":"{{Country}}","popup.popup_custom_main":"€{{Total}}bn","popup.popup_header_type":"inline","popup.popup_is_custom":true,"popup.show_popup_styles":true,"size_by_number_formatter.n_dec":1,"layout.font_size_mobile_small":100,"layout.font_size_mobile_big":100,"layout.font_size_tablet":100,"layout.font_size_desktop":100,"layout.font_size_big_screen":120,"layout.body_font":{"name":"Metric Web","url":"https://mississippi.river.to/right/f/fonts/stylesheet.css"},"layout.margin_top":0,"layout.margin_right":0,"layout.margin_bottom":0,"layout.margin_left":0,"layout.space_between_sections":"custom","layout.space_between_sections_custom":1.75,"layout.background_color":"transparent","layout.header_logo_enabled":true,"layout.header_logo_src":"https://mississippi.river.to/right/f/uploads/1c064a3c-9c0f-4043-8de0-379265d5d2c9.svg","layout.header_logo_height":0.25,"layout.header_logo_margin_top":0,"layout.header_logo_margin_right":0,"layout.title_size":"custom","layout.title_size_custom":1.5,"layout.title_line_height":1.25,"layout.title_weight":"normal","layout.title_space_above_custom":0.75,"layout.title_styling":true,"layout.subtitle_size":"custom","layout.subtitle_size_custom":1.125,"layout.subtitle_line_height":1.25,"layout.subtitle_color":"#4d4845","layout.subtitle_space_above_custom":1.25,"layout.subtitle_styling":true,"layout.header_text_size":"custom","layout.header_text_size_custom":1,"layout.header_text_line_height":1.25,"layout.header_text_color":"#4d4845","layout.footer_text_size":0.875,"layout.footer_text_color":"#4d4845","layout.footer_logo_enabled":true,"layout.footer_logo_src":"https://mississippi.river.to/right/f/uploads/43d2c31d-7939-4110-a079-53f54ba93ac6.svg","layout.footer_logo_height":0.75,"layout.footer_logo_margin":1,"layout.footer_logo_order":"left","layout.header_text_styling":false,"line_labels.text_color":"#4d4845","color.categorical_custom_palette":"Conservative:#149ADB\nLabour:#CF4D3C\nLib Dems:#F09000\nSNP:#FFDF00\nGreens (UK):#8DEB9D\nPlaid Cymru:#5BA373\nUkip:#7200AB\nReform:#80CFD6\nAlba:#305EB8\nAll for Unity:#F6011E\nAbolish:#990900\nOthers:#E0D9D5\nCDU/CSU:#000000\nGreens (Germany):#36AA5B\nSPD:#B80D00\nFDP:#F5BB00\nAfD:#52C0FF\nLeft:#73008A\nNo:#F25E2A\nYes:#3DA4AA\nDemocrat:#2E56B6\nDemocrat Lean:#67B4E2\nRepublican:#ED4748\nRepublican Lean:#F7ACA4","color.categorical_extend":false,"controls.control_type":"buttons","controls.button_group_width_mode":"auto","controls.control_styles":true,"controls_style.padding":0.7,"button_style.font_color":"#006b74","button_style.background_selected":"#006b74","button_style.background_hover":"#e3e0d6","button_style.border_transparency":1,"button_style.border_color":"#006b74","button_style.border_radius":0,"button_style.button_styles_advanced":true,"dropdown_style.border_styles_advanced":false,"x.line_and_tick_color":"#999189","x.line_and_tick_width":0.063,"x.tick_label_size":1,"x.tick_label_color":"#4d4845","x.tick_label_angle":"0","x.gridline_color":"#ccc1b7","x.gridline_width":0.063,"x.title_mode":"custom","x.title_color":"#66605C","x.title_styling":false,"x.tick_label_styling":true,"x.gridline_styling":false,"y.line_visible":false,"y.line_and_tick_color":"#999189","y.line_and_tick_width":0,"y.tick_mode":"number","y.tick_number":4,"y.tick_label_size":1,"y.tick_label_color":"#4d4845","y.gridline_color":"#ccc1b7","y.gridline_width":0.063,"y.title_mode":"custom","y.title_color":"#66605C","y.title_styling":false,"y.tick_label_styling":true,"y.gridlines_styling":true,"y2.line_visible":false,"y2.line_and_tick_color":"#999189","y2.line_and_tick_width":0,"y2.tick_label_size":1,"y2.tick_label_color":"#4d4845","y2.gridline_color":"#ccc1b7","y2.gridline_width":0.063,"y2.title_mode":"custom","y2.title_color":"#66605C","y2.title_styling":false,"y2.tick_label_styling":true,"y2.gridlines_styling":true,"legend_categorical.swatch_width":1.25,"legend_categorical.swatch_height":0.625,"legend_categorical.swatch_radius":0,"colors.categorical_palette":["#1e558c","#94d2e6","#1e8fcc","#b3325d","#ff75a3","#aecc70","#f34d5b","#d9ccc3"],"color.palette":["#1e558c","#94d2e6","#1e8fcc","#b3325d","#ff75a3","#aecc70","#f34d5b","#d9ccc3"],"colors.palette":["#1e558c","#94d2e6","#1e8fcc","#b3325d","#ff75a3","#aecc70","#f34d5b","#d9ccc3"],"map_categorical_colors.palette":["#1e558c","#94d2e6","#1e8fcc","#b3325d","#ff75a3","#aecc70","#f34d5b","#d9ccc3"],"point_categorical_colors.palette":["#1e558c","#94d2e6","#1e8fcc","#b3325d","#ff75a3","#aecc70","#f34d5b","#d9ccc3"],"point_colors.categorical_palette":["#1e558c","#94d2e6","#1e8fcc","#b3325d","#ff75a3","#aecc70","#f34d5b","#d9ccc3"],"map_colors.categorical_palette":["#1e558c","#94d2e6","#1e8fcc","#b3325d","#ff75a3","#aecc70","#f34d5b","#d9ccc3"],"legend_categorical_points.swatch_width":1.25,"legend_categorical_map.swatch_width":1.25,"legend_categorical_points.swatch_height":0.625,"legend_categorical_map.swatch_height":0.625,"legend_categorical_points.swatch_radius":0,"legend_categorical_map.swatch_radius":0,"url_state.enabled":true};
			_Flourish_unflattenInto(window.template.state, _Flourish_settings);

			var _Flourish_data_column_names = {"data":{"nest_columns":["","Country"],"popup_metadata":[],"size_columns":["Total"]}},
				_Flourish_data_metadata = {"data":{"nest_columns":[{"type":"string","type_id":"string$arbitrary_string","output_format_id":"string$arbitrary_string"},{"type":"string","type_id":"string$arbitrary_string","output_format_id":"string$arbitrary_string"}],"popup_metadata":[],"size_columns":[{"type":"number","type_id":"number$comma_point","output_format_id":"number$comma_point"}]}},
				_Flourish_data_timestamps = {"data":{"last_updated":new Date(1740154749411)}},
				_Flourish_data = {"data":[{"nest_columns":["US","US"],"popup_metadata":[],"size_columns":[118.99]},{"nest_columns":["EU","EU institutions"],"popup_metadata":[],"size_columns":[115.7]},{"nest_columns":["UK","UK"],"popup_metadata":[],"size_columns":[27.18]},{"nest_columns":["EU","Germany"],"popup_metadata":[],"size_columns":[25.53]},{"nest_columns":["Japan","Japan"],"popup_metadata":[],"size_columns":[16.78]},{"nest_columns":["Norway","Norway"],"popup_metadata":[],"size_columns":[14.99]},{"nest_columns":["Canada","Canada"],"popup_metadata":[],"size_columns":[12.38]},{"nest_columns":["EU","Netherlands"],"popup_metadata":[],"size_columns":[10.89]},{"nest_columns":["EU","Sweden"],"popup_metadata":[],"size_columns":[10.1]},{"nest_columns":["EU","Denmark"],"popup_metadata":[],"size_columns":[9.47]},{"nest_columns":["EU","France"],"popup_metadata":[],"size_columns":[7.48]},{"nest_columns":["EU","Poland"],"popup_metadata":[],"size_columns":[5.03]},{"nest_columns":["South Korea","South Korea"],"popup_metadata":[],"size_columns":[3.05]},{"nest_columns":["EU","Finland"],"popup_metadata":[],"size_columns":[2.85]},{"nest_columns":["EU","Switzerland"],"popup_metadata":[],"size_columns":[2.56]},{"nest_columns":["EU","Spain"],"popup_metadata":[],"size_columns":[2.33]},{"nest_columns":["EU","Italy"],"popup_metadata":[],"size_columns":[2.26]},{"nest_columns":["EU","Belgium"],"popup_metadata":[],"size_columns":[2.22]},{"nest_columns":["EU","Czech Republic"],"popup_metadata":[],"size_columns":[1.32]},{"nest_columns":["EU","Estonia"],"popup_metadata":[],"size_columns":[1.13]},{"nest_columns":["EU","Romania"],"popup_metadata":[],"size_columns":[1.12]},{"nest_columns":["EU","Lithuania"],"popup_metadata":[],"size_columns":[1.07]},{"nest_columns":["Australia","Australia"],"popup_metadata":[],"size_columns":[1.01]},{"nest_columns":["EU","Austria"],"popup_metadata":[],"size_columns":[0.86]},{"nest_columns":["EU","Slovakia"],"popup_metadata":[],"size_columns":[0.71]},{"nest_columns":["EU","Latvia"],"popup_metadata":[],"size_columns":[0.56]},{"nest_columns":["EU","Portugal"],"popup_metadata":[],"size_columns":[0.52]},{"nest_columns":["EU","Luxembourg"],"popup_metadata":[],"size_columns":[0.37]},{"nest_columns":["EU","Croatia"],"popup_metadata":[],"size_columns":[0.34]},{"nest_columns":["EU","Bulgaria"],"popup_metadata":[],"size_columns":[0.24]},{"nest_columns":["EU","Ireland"],"popup_metadata":[],"size_columns":[0.2]},{"nest_columns":["EU","Greece"],"popup_metadata":[],"size_columns":[0.15]},{"nest_columns":["Taiwan","Taiwan"],"popup_metadata":[],"size_columns":[0.08]},{"nest_columns":["EU","Slovenia"],"popup_metadata":[],"size_columns":[0.08]},{"nest_columns":["EU","Turkey"],"popup_metadata":[],"size_columns":[0.07]},{"nest_columns":["New Zealand","New Zealand"],"popup_metadata":[],"size_columns":[0.06]},{"nest_columns":["EU","Hungary"],"popup_metadata":[],"size_columns":[0.05]},{"nest_columns":["EU","Iceland"],"popup_metadata":[],"size_columns":[0.05]},{"nest_columns":["EU","Cyprus"],"popup_metadata":[],"size_columns":[0]},{"nest_columns":["India","India"],"popup_metadata":[],"size_columns":[0]},{"nest_columns":["China","China"],"popup_metadata":[],"size_columns":[0]},{"nest_columns":["EU","Malta"],"popup_metadata":[],"size_columns":[0]}]},
				_Flourish_visualisation_id = 21749804,
				_Flourish_visualisation_version_number = 18,
				_Flourish_template_id = 21892;
			for (var _Flourish_dataset in _Flourish_data) {
					window.template.data[_Flourish_dataset] = _Flourish_data[_Flourish_dataset];
					window.template.data[_Flourish_dataset].column_names = _Flourish_data_column_names[_Flourish_dataset];
					window.template.data[_Flourish_dataset].metadata = _Flourish_data_metadata[_Flourish_dataset];
					window.template.data[_Flourish_dataset].timestamps = _Flourish_data_timestamps[_Flourish_dataset];
			}

			if (Flourish.enableCustomerAnalytics) { Flourish.enableCustomerAnalytics(); }
			window.template.draw();
		</script></body></html>