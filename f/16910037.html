
<!DOCTYPE html><html><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="choices.min.css">
    <link rel="stylesheet" type="text/css" href="bundle.css">
	<title>Military satellites</title></head>
	<body style="transform: translateZ(0);">

<script>window.Flourish = {"environment":"live","is_read_only":true};</script><script>var template=function(e){"use strict";var t="http://www.w3.org/1999/xhtml",n={svg:"http://www.w3.org/2000/svg",xhtml:t,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function r(e){var t=e+="",r=t.indexOf(":");return r>=0&&"xmlns"!==(t=e.slice(0,r))&&(e=e.slice(r+1)),n.hasOwnProperty(t)?{space:n[t],local:e}:e}function i(e){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===t&&n.documentElement.namespaceURI===t?n.createElement(e):n.createElementNS(r,e)}}function a(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function o(e){var t=r(e);return(t.local?a:i)(t)}function l(){}function s(e){return null==e?l:function(){return this.querySelector(e)}}function c(){return[]}function u(e){return null==e?c:function(){return this.querySelectorAll(e)}}function d(e){return function(){return this.matches(e)}}function f(e){return new Array(e.length)}function p(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}p.prototype={constructor:p,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var h="$";function _(e,t,n,r,i,a){for(var o,l=0,s=t.length,c=a.length;l<c;++l)(o=t[l])?(o.__data__=a[l],r[l]=o):n[l]=new p(e,a[l]);for(;l<s;++l)(o=t[l])&&(i[l]=o)}function y(e,t,n,r,i,a,o){var l,s,c,u={},d=t.length,f=a.length,_=new Array(d);for(l=0;l<d;++l)(s=t[l])&&(_[l]=c=h+o.call(s,s.__data__,l,t),c in u?i[l]=s:u[c]=s);for(l=0;l<f;++l)(s=u[c=h+o.call(e,a[l],l,a)])?(r[l]=s,s.__data__=a[l],u[c]=null):n[l]=new p(e,a[l]);for(l=0;l<d;++l)(s=t[l])&&u[_[l]]===s&&(i[l]=s)}function b(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function m(e){return function(){this.removeAttribute(e)}}function g(e){return function(){this.removeAttributeNS(e.space,e.local)}}function v(e,t){return function(){this.setAttribute(e,t)}}function x(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function w(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function k(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function M(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function z(e){return function(){this.style.removeProperty(e)}}function A(e,t,n){return function(){this.style.setProperty(e,t,n)}}function E(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function C(e,t){return e.style.getPropertyValue(t)||M(e).getComputedStyle(e,null).getPropertyValue(t)}function T(e){return function(){delete this[e]}}function S(e,t){return function(){this[e]=t}}function N(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function L(e){return e.trim().split(/^|\s+/)}function F(e){return e.classList||new O(e)}function O(e){this._node=e,this._names=L(e.getAttribute("class")||"")}function P(e,t){for(var n=F(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function D(e,t){for(var n=F(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function j(e){return function(){P(this,e)}}function B(e){return function(){D(this,e)}}function q(e,t){return function(){(t.apply(this,arguments)?P:D)(this,e)}}function Y(){this.textContent=""}function H(e){return function(){this.textContent=e}}function I(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function R(){this.innerHTML=""}function U(e){return function(){this.innerHTML=e}}function $(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function W(){this.nextSibling&&this.parentNode.appendChild(this)}function V(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function G(){return null}function X(){var e=this.parentNode;e&&e.removeChild(this)}function Z(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function J(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}O.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Q={},K=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(Q={mouseenter:"mouseover",mouseleave:"mouseout"}));function ee(e,t,n){return e=te(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function te(e,t,n){return function(r){var i=K;K=r;try{e.call(this,this.__data__,t,n)}finally{K=i}}}function ne(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,a=t.length;r<a;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?t.length=i:delete this.__on}}}function re(e,t,n){var r=Q.hasOwnProperty(e.type)?ee:te;return function(i,a,o){var l,s=this.__on,c=r(t,a,o);if(s)for(var u=0,d=s.length;u<d;++u)if((l=s[u]).type===e.type&&l.name===e.name)return this.removeEventListener(l.type,l.listener,l.capture),this.addEventListener(l.type,l.listener=c,l.capture=n),void(l.value=t);this.addEventListener(e.type,c,n),l={type:e.type,name:e.name,value:t,listener:c,capture:n},s?s.push(l):this.__on=[l]}}function ie(e,t,n){var r=M(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function ae(e,t){return function(){return ie(this,e,t)}}function oe(e,t){return function(){return ie(this,e,t.apply(this,arguments))}}var le=[null];function se(e,t){this._groups=e,this._parents=t}function ce(){return new se([[document.documentElement]],le)}function ue(e){return"string"==typeof e?new se([[document.querySelector(e)]],[document.documentElement]):new se([[e]],le)}se.prototype=ce.prototype={constructor:se,select:function(e){"function"!=typeof e&&(e=s(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o,l=t[i],c=l.length,u=r[i]=new Array(c),d=0;d<c;++d)(a=l[d])&&(o=e.call(a,a.__data__,d,l))&&("__data__"in a&&(o.__data__=a.__data__),u[d]=o);return new se(r,this._parents)},selectAll:function(e){"function"!=typeof e&&(e=u(e));for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o,l=t[a],s=l.length,c=0;c<s;++c)(o=l[c])&&(r.push(e.call(o,o.__data__,c,l)),i.push(o));return new se(r,i)},filter:function(e){"function"!=typeof e&&(e=d(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o=t[i],l=o.length,s=r[i]=[],c=0;c<l;++c)(a=o[c])&&e.call(a,a.__data__,c,o)&&s.push(a);return new se(r,this._parents)},data:function(e,t){if(!e)return h=new Array(this.size()),u=-1,this.each((function(e){h[++u]=e})),h;var n,r=t?y:_,i=this._parents,a=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var o=a.length,l=new Array(o),s=new Array(o),c=new Array(o),u=0;u<o;++u){var d=i[u],f=a[u],p=f.length,h=e.call(d,d&&d.__data__,u,i),b=h.length,m=s[u]=new Array(b),g=l[u]=new Array(b);r(d,f,m,g,c[u]=new Array(p),h,t);for(var v,x,w=0,k=0;w<b;++w)if(v=m[w]){for(w>=k&&(k=w+1);!(x=g[k])&&++k<b;);v._next=x||null}}return(l=new se(l,i))._enter=s,l._exit=c,l},enter:function(){return new se(this._enter||this._groups.map(f),this._parents)},exit:function(){return new se(this._exit||this._groups.map(f),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,a=this.exit();return r="function"==typeof e?e(r):r.append(e+""),null!=t&&(i=t(i)),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(e){for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),l=0;l<a;++l)for(var s,c=t[l],u=n[l],d=c.length,f=o[l]=new Array(d),p=0;p<d;++p)(s=c[p]||u[p])&&(f[p]=s);for(;l<r;++l)o[l]=t[l];return new se(o,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=b);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,l=n[a],s=l.length,c=i[a]=new Array(s),u=0;u<s;++u)(o=l[u])&&(c[u]=o);c.sort(t)}return new se(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each((function(){e[++t]=this})),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){var e=0;return this.each((function(){++e})),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,a=t[n],o=0,l=a.length;o<l;++o)(i=a[o])&&e.call(i,i.__data__,o,a);return this},attr:function(e,t){var n=r(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==t?n.local?g:m:"function"==typeof t?n.local?k:w:n.local?x:v)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?z:"function"==typeof t?E:A)(e,t,null==n?"":n)):C(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?T:"function"==typeof t?N:S)(e,t)):this.node()[e]},classed:function(e,t){var n=L(e+"");if(arguments.length<2){for(var r=F(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?q:t?j:B)(n,t))},text:function(e){return arguments.length?this.each(null==e?Y:("function"==typeof e?I:H)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?R:("function"==typeof e?$:U)(e)):this.node().innerHTML},raise:function(){return this.each(W)},lower:function(){return this.each(V)},append:function(e){var t="function"==typeof e?e:o(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:o(e),r=null==t?G:"function"==typeof t?t:s(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(X)},clone:function(e){return this.select(e?J:Z)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,a=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),o=a.length;if(!(arguments.length<2)){for(l=t?re:ne,null==n&&(n=!1),r=0;r<o;++r)this.each(l(a[r],t,n));return this}var l=this.node().__on;if(l)for(var s,c=0,u=l.length;c<u;++c)for(r=0,s=l[c];r<o;++r)if((i=a[r]).type===s.type&&i.name===s.name)return s.value},dispatch:function(e,t){return this.each(("function"==typeof t?oe:ae)(e,t))}};var de=new Date,fe=new Date;function pe(e,t,n,r){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=function(t){return e(t=new Date(+t)),t},i.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},i.round=function(e){var t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},i.range=function(n,r,a){var o,l=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&a>0))return l;do{l.push(o=new Date(+n)),t(n,a),e(n)}while(o<n&&n<r);return l},i.filter=function(n){return pe((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(i.count=function(t,r){return de.setTime(+t),fe.setTime(+r),e(de),e(fe),Math.floor(n(de,fe))},i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?function(t){return r(t)%e==0}:function(t){return i.count(0,t)%e==0}):i:null}),i}var he=864e5,_e=6048e5,ye=pe((function(e){e.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/he}),(function(e){return e.getDate()-1})),be=ye;function me(e){return pe((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/_e}))}ye.range;var ge=me(0),ve=me(1),xe=me(2),we=me(3),ke=me(4),Me=me(5),ze=me(6);ge.range,ve.range,xe.range,we.range,ke.range,Me.range,ze.range;var Ae=pe((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));Ae.every=function(e){return isFinite(e=Math.floor(e))&&e>0?pe((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};var Ee=Ae;Ae.range;var Ce=pe((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/he}),(function(e){return e.getUTCDate()-1})),Te=Ce;function Se(e){return pe((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/_e}))}Ce.range;var Ne=Se(0),Le=Se(1),Fe=Se(2),Oe=Se(3),Pe=Se(4),De=Se(5),je=Se(6);Ne.range,Le.range,Fe.range,Oe.range,Pe.range,De.range,je.range;var Be=pe((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));Be.every=function(e){return isFinite(e=Math.floor(e))&&e>0?pe((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};var qe=Be;function Ye(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function He(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ie(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}Be.range;var Re,Ue,$e,We,Ve,Ge={"-":"",_:" ",0:"0"},Xe=/^\s*\d+/,Ze=/^%/,Je=/[\\^$*+?|[\]().{}]/g;function Qe(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function Ke(e){return e.replace(Je,"\\$&")}function et(e){return new RegExp("^(?:"+e.map(Ke).join("|")+")","i")}function tt(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function nt(e,t,n){var r=Xe.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function rt(e,t,n){var r=Xe.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function it(e,t,n){var r=Xe.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function at(e,t,n){var r=Xe.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function ot(e,t,n){var r=Xe.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function lt(e,t,n){var r=Xe.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function st(e,t,n){var r=Xe.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function ct(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function ut(e,t,n){var r=Xe.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function dt(e,t,n){var r=Xe.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function ft(e,t,n){var r=Xe.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function pt(e,t,n){var r=Xe.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function ht(e,t,n){var r=Xe.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function _t(e,t,n){var r=Xe.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function yt(e,t,n){var r=Xe.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function bt(e,t,n){var r=Xe.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function mt(e,t,n){var r=Xe.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function gt(e,t,n){var r=Ze.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function vt(e,t,n){var r=Xe.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function xt(e,t,n){var r=Xe.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function wt(e,t){return Qe(e.getDate(),t,2)}function kt(e,t){return Qe(e.getHours(),t,2)}function Mt(e,t){return Qe(e.getHours()%12||12,t,2)}function zt(e,t){return Qe(1+be.count(Ee(e),e),t,3)}function At(e,t){return Qe(e.getMilliseconds(),t,3)}function Et(e,t){return At(e,t)+"000"}function Ct(e,t){return Qe(e.getMonth()+1,t,2)}function Tt(e,t){return Qe(e.getMinutes(),t,2)}function St(e,t){return Qe(e.getSeconds(),t,2)}function Nt(e){var t=e.getDay();return 0===t?7:t}function Lt(e,t){return Qe(ge.count(Ee(e)-1,e),t,2)}function Ft(e){var t=e.getDay();return t>=4||0===t?ke(e):ke.ceil(e)}function Ot(e,t){return e=Ft(e),Qe(ke.count(Ee(e),e)+(4===Ee(e).getDay()),t,2)}function Pt(e){return e.getDay()}function Dt(e,t){return Qe(ve.count(Ee(e)-1,e),t,2)}function jt(e,t){return Qe(e.getFullYear()%100,t,2)}function Bt(e,t){return Qe((e=Ft(e)).getFullYear()%100,t,2)}function qt(e,t){return Qe(e.getFullYear()%1e4,t,4)}function Yt(e,t){var n=e.getDay();return Qe((e=n>=4||0===n?ke(e):ke.ceil(e)).getFullYear()%1e4,t,4)}function Ht(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Qe(t/60|0,"0",2)+Qe(t%60,"0",2)}function It(e,t){return Qe(e.getUTCDate(),t,2)}function Rt(e,t){return Qe(e.getUTCHours(),t,2)}function Ut(e,t){return Qe(e.getUTCHours()%12||12,t,2)}function $t(e,t){return Qe(1+Te.count(qe(e),e),t,3)}function Wt(e,t){return Qe(e.getUTCMilliseconds(),t,3)}function Vt(e,t){return Wt(e,t)+"000"}function Gt(e,t){return Qe(e.getUTCMonth()+1,t,2)}function Xt(e,t){return Qe(e.getUTCMinutes(),t,2)}function Zt(e,t){return Qe(e.getUTCSeconds(),t,2)}function Jt(e){var t=e.getUTCDay();return 0===t?7:t}function Qt(e,t){return Qe(Ne.count(qe(e)-1,e),t,2)}function Kt(e){var t=e.getUTCDay();return t>=4||0===t?Pe(e):Pe.ceil(e)}function en(e,t){return e=Kt(e),Qe(Pe.count(qe(e),e)+(4===qe(e).getUTCDay()),t,2)}function tn(e){return e.getUTCDay()}function nn(e,t){return Qe(Le.count(qe(e)-1,e),t,2)}function rn(e,t){return Qe(e.getUTCFullYear()%100,t,2)}function an(e,t){return Qe((e=Kt(e)).getUTCFullYear()%100,t,2)}function on(e,t){return Qe(e.getUTCFullYear()%1e4,t,4)}function ln(e,t){var n=e.getUTCDay();return Qe((e=n>=4||0===n?Pe(e):Pe.ceil(e)).getUTCFullYear()%1e4,t,4)}function sn(){return"+0000"}function cn(){return"%"}function un(e){return+e}function dn(e){return Math.floor(+e/1e3)}function fn(e){throw new TypeError("Expected a value of type string but got a value of type "+typeof e)}function pn(e){return function(t){return"string"!=typeof t&&fn(t),(t=t.trim())?e(t):null}}Re=function(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,l=e.months,s=e.shortMonths,c=et(i),u=tt(i),d=et(a),f=tt(a),p=et(o),h=tt(o),_=et(l),y=tt(l),b=et(s),m=tt(s),g={a:function(e){return o[e.getDay()]},A:function(e){return a[e.getDay()]},b:function(e){return s[e.getMonth()]},B:function(e){return l[e.getMonth()]},c:null,d:wt,e:wt,f:Et,g:Bt,G:Yt,H:kt,I:Mt,j:zt,L:At,m:Ct,M:Tt,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:un,s:dn,S:St,u:Nt,U:Lt,V:Ot,w:Pt,W:Dt,x:null,X:null,y:jt,Y:qt,Z:Ht,"%":cn},v={a:function(e){return o[e.getUTCDay()]},A:function(e){return a[e.getUTCDay()]},b:function(e){return s[e.getUTCMonth()]},B:function(e){return l[e.getUTCMonth()]},c:null,d:It,e:It,f:Vt,g:an,G:ln,H:Rt,I:Ut,j:$t,L:Wt,m:Gt,M:Xt,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:un,s:dn,S:Zt,u:Jt,U:Qt,V:en,w:tn,W:nn,x:null,X:null,y:rn,Y:on,Z:sn,"%":cn},x={a:function(e,t,n){var r=p.exec(t.slice(n));return r?(e.w=h[r[0].toLowerCase()],n+r[0].length):-1},A:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.w=f[r[0].toLowerCase()],n+r[0].length):-1},b:function(e,t,n){var r=b.exec(t.slice(n));return r?(e.m=m[r[0].toLowerCase()],n+r[0].length):-1},B:function(e,t,n){var r=_.exec(t.slice(n));return r?(e.m=y[r[0].toLowerCase()],n+r[0].length):-1},c:function(e,n,r){return M(e,t,n,r)},d:ft,e:ft,f:mt,g:st,G:lt,H:ht,I:ht,j:pt,L:bt,m:dt,M:_t,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=u[r[0].toLowerCase()],n+r[0].length):-1},q:ut,Q:vt,s:xt,S:yt,u:rt,U:it,V:at,w:nt,W:ot,x:function(e,t,r){return M(e,n,t,r)},X:function(e,t,n){return M(e,r,t,n)},y:st,Y:lt,Z:ct,"%":gt};function w(e,t){return function(n){var r,i,a,o=[],l=-1,s=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++l<c;)37===e.charCodeAt(l)&&(o.push(e.slice(s,l)),null!=(i=Ge[r=e.charAt(++l)])?r=e.charAt(++l):i="e"===r?" ":"0",(a=t[r])&&(r=a(n,i)),o.push(r),s=l+1);return o.push(e.slice(s,l)),o.join("")}}function k(e,t){return function(n){var r,i,a=Ie(1900,void 0,1);if(M(a,e,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(t&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=He(Ie(a.y,0,1))).getUTCDay(),r=i>4||0===i?Le.ceil(r):Le(r),r=Te.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=Ye(Ie(a.y,0,1))).getDay(),r=i>4||0===i?ve.ceil(r):ve(r),r=be.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?He(Ie(a.y,0,1)).getUTCDay():Ye(Ie(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,He(a)):Ye(a)}}function M(e,t,n,r){for(var i,a,o=0,l=t.length,s=n.length;o<l;){if(r>=s)return-1;if(37===(i=t.charCodeAt(o++))){if(i=t.charAt(o++),!(a=x[i in Ge?t.charAt(o++):i])||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return g.x=w(n,g),g.X=w(r,g),g.c=w(t,g),v.x=w(n,v),v.X=w(r,v),v.c=w(t,v),{format:function(e){var t=w(e+="",g);return t.toString=function(){return e},t},parse:function(e){var t=k(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=w(e+="",v);return t.toString=function(){return e},t},utcParse:function(e){var t=k(e+="",!0);return t.toString=function(){return e},t}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Ue=Re.format,$e=Re.parse,We=Re.utcFormat,Ve=Re.utcParse;var hn=new Date(1972,3,27,19,45,5),_n={"%b %d":[{regex:/^june\s(30|[12][0-9]|0?[1-9])$/i,toDate:function(e){return new Date(null,5,e.split(/\s/)[1])}},{regex:/^july\s(3[01]|[12][0-9]|0?[1-9])$/i,toDate:function(e){return new Date(null,6,e.split(/\s/)[1])}},{regex:/^sept\s(30|[12][0-9]|0?[1-9])$/i,toDate:function(e){return new Date(null,8,e.split(/\s/)[1])}}],"%d %b":[{regex:/^(0?[1-9]|[1-9][0-9])\sjune$/i,toDate:function(e){return new Date(null,5,e.split(/\s/)[0])}},{regex:/^(0?[1-9]|[1-9][0-9])\sjuly$/i,toDate:function(e){return new Date(null,6,e.split(/\s/)[0])}},{regex:/^(0?[1-9]|[1-9][0-9])\ssept$/i,toDate:function(e){return new Date(null,8,e.split(/\s/)[0])}}]};function yn(e){return function(t){var n=null;return e.forEach((function(e){t.match(e.regex)&&(n=e.toDate(t))})),n}}function bn(e,t){var n,r=$e(e),i=Ue(e);return n=pn("function"==typeof t?function(e){return t(e,null!==r(e))}:function(e){return null!==r(e)}),Object.freeze({test:n,parse:pn((function(t){return r(t)||(_n[e]?yn(_n[e])(t):null)})),format:function(e){return i(e)},type:"datetime",description:e,id:"datetime$"+e,example:i(hn)})}var mn=Object.freeze([bn("%Y-%m-%dT%H:%M:%S.%LZ"),bn("%d/%m/%Y",(function(e,t){if(!t)return!1;var n=e.split("/").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&n[2]>=1e3})),bn("%d/%m/%y",(function(e,t){if(!t)return!1;var n=e.split("/").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&!isNaN(n[2])})),bn("%m/%d/%Y",(function(e,t){if(!t)return!1;var n=e.split("/").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&n[2]>=1e3})),bn("%m/%d/%y",(function(e,t){if(!t)return!1;var n=e.split("/").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&!isNaN(n[2])})),bn("%Y/%m/%d",(function(e,t){if(!t)return!1;var n=e.split("/").map(parseFloat);return n[0]>=1e3&&n[1]>0&&n[1]<=12&&n[2]>0&&n[2]<=31})),bn("%d-%m-%Y",(function(e,t){if(!t)return!1;var n=e.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&n[2]>=1e3})),bn("%d-%m-%y",(function(e,t){if(!t)return!1;var n=e.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&!isNaN(n[2])})),bn("%m-%d-%Y",(function(e,t){if(!t)return!1;var n=e.split("-").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&n[2]>=1e3})),bn("%m-%d-%y",(function(e,t){if(!t)return!1;var n=e.split("-").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&!isNaN(n[2])})),bn("%Y-%m-%d",(function(e,t){if(!t)return!1;var n=e.split("-").map(parseFloat);return n[0]>=1e3&&n[1]>0&&n[1]<=12&&n[2]>0&&n[2]<=31})),bn("%d %b %Y",(function(e,t){if(!t)return!1;var n=e.split(" ").map(parseFloat);return n[0]>0&&n[0]<=31&&n[2]>=1e3})),bn("%d %B %Y",(function(e,t){if(!t)return!1;var n=e.split(" ").map(parseFloat);return n[0]>0&&n[0]<=31&&n[2]>=1e3})),bn("%d %b %y"),bn("%d %B %y"),bn("%d-%b-%Y",(function(e,t){if(!t)return!1;var n=e.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[2]>=1e3})),bn("%d-%B-%Y",(function(e,t){if(!t)return!1;var n=e.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[2]>=1e3})),bn("%d-%b-%y"),bn("%d-%B-%y"),bn("%m/%Y",(function(e,t){if(!t)return!1;var n=e.split("/").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>=1e3})),bn("%m/%y"),bn("%b %Y",(function(e,t){return!!t&&e.split(" ").map(parseFloat)[1]>=1e3})),bn("%B %Y",(function(e,t){return!!t&&e.split(" ").map(parseFloat)[1]>=1e3})),bn("%b %y"),bn("%B %y"),bn("%d %b",(function(e,t){return!!t||!!yn(_n["%d %b"])(e)})),bn("%d %B"),bn("%b %d",(function(e,t){return!!t||!!yn(_n["%b %d"])(e)})),bn("%B %d"),bn("%d-%m",(function(e,t){if(!t)return!1;var n=e.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12})),bn("%m-%d"),bn("%d/%m"),bn("%m/%d"),bn("%Y",(function(e,t){if(!t)return!1;var n=parseFloat(e);return n>1499&&n<2200})),bn("%B"),bn("%b"),bn("%X"),bn("%I:%M %p"),bn("%H:%M"),bn("%H:%M:%S"),bn("%-I%p"),bn("Q%q %Y",(function(e,t){return!!t&&6===e.replace(/\s/g,"").length})),bn("%Y Q%q",(function(e,t){return!!t&&6===e.replace(/\s/g,"").length}))]);function gn(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function vn(e){return(e=gn(Math.abs(e)))?e[1]:NaN}var xn,wn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function kn(e){if(!(t=wn.exec(e)))throw new Error("invalid format: "+e);var t;return new Mn({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function Mn(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function zn(e,t){var n=gn(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}kn.prototype=Mn.prototype,Mn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var An={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return zn(100*e,t)},r:zn,s:function(e,t){var n=gn(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(xn=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+gn(e,Math.max(0,t+a-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function En(e){return e}var Cn,Tn,Sn,Nn=Array.prototype.map,Ln=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Fn(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?En:(t=Nn.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,a=[],o=0,l=t[0],s=0;i>0&&l>0&&(s+l+1>r&&(l=Math.max(1,r-s)),a.push(e.substring(i-=l,i+l)),!((s+=l+1)>r));)l=t[o=(o+1)%t.length];return a.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",a=void 0===e.currency?"":e.currency[1]+"",o=void 0===e.decimal?".":e.decimal+"",l=void 0===e.numerals?En:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(Nn.call(e.numerals,String)),s=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"-":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=kn(e)).fill,n=e.align,d=e.sign,f=e.symbol,p=e.zero,h=e.width,_=e.comma,y=e.precision,b=e.trim,m=e.type;"n"===m?(_=!0,m="g"):An[m]||(void 0===y&&(y=12),b=!0,m="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var g="$"===f?i:"#"===f&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",v="$"===f?a:/[%p]/.test(m)?s:"",x=An[m],w=/[defgprs%]/.test(m);function k(e){var i,a,s,f=g,k=v;if("c"===m)k=x(e)+k,e="";else{var M=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:x(Math.abs(e),y),b&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),M&&0==+e&&"+"!==d&&(M=!1),f=(M?"("===d?d:c:"-"===d||"("===d?"":d)+f,k=("s"===m?Ln[8+xn/3]:"")+k+(M&&"("===d?")":""),w)for(i=-1,a=e.length;++i<a;)if(48>(s=e.charCodeAt(i))||s>57){k=(46===s?o+e.slice(i+1):e.slice(i))+k,e=e.slice(0,i);break}}_&&!p&&(e=r(e,1/0));var z=f.length+e.length+k.length,A=z<h?new Array(h-z+1).join(t):"";switch(_&&p&&(e=r(A+e,A.length?h-k.length:1/0),A=""),n){case"<":e=f+e+k+A;break;case"=":e=f+A+e+k;break;case"^":e=A.slice(0,z=A.length>>1)+f+e+k+A.slice(z);break;default:e=A+f+e+k}return l(e)}return y=void 0===y?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),k.toString=function(){return e+""},k}return{format:d,formatPrefix:function(e,t){var n=d(((e=kn(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(vn(t)/3))),i=Math.pow(10,-r),a=Ln[8+r/3];return function(e){return n(i*e)+a}}}}!function(e){Cn=Fn(e),Tn=Cn.format,Sn=Cn.formatPrefix}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});var On={test:pn((function(e){return/^(\+|-)?\d{1,3}(,\d{3})*(\.\d+)?((e|E)(\+|-)?\d+)?$/.test(e.trim())})),parse:pn((function(e){return parseFloat(e.replace(/,/g,""))})),description:"Comma thousand separator, point decimal mark",thousand_separator:",",decimal_mark:".",id:"number$comma_point",example:"12,235.56"},Pn={test:pn((function(e){return/^(\+|-)?\d{1,3}(\s\d{3})*(\.\d+)?((e|E)(\+|-)?\d+)?$/.test(e.trim())})),parse:pn((function(e){return parseFloat(e.replace(/\s/g,""))})),description:"Space thousand separator, point decimal mark",thousand_separator:" ",decimal_mark:".",id:"number$space_point",example:"12 235.56"},Dn={test:pn((function(e){return/^(\+|-)?\d+(\.\d+)?((e|E)(\+|-)?\d+)?$/.test(e.trim())})),parse:pn((function(e){return parseFloat(e)})),description:"No thousand separator, point decimal mark",thousand_separator:"",decimal_mark:".",id:"number$none_point",example:"12235.56"},jn={test:pn((function(e){return/^(\+|-)?\d{1,3}(\.\d{3})*(,\d+)?((e|E)(\+|-)?\d+)?$/.test(e.trim())})),parse:pn((function(e){return parseFloat(e.replace(/\./g,"").replace(/,/,"."))})),description:"Point thousand separator, comma decimal mark",thousand_separator:".",decimal_mark:",",id:"number$point_comma",example:"12.235,56"},Bn={test:pn((function(e){return/^(\+|-)?\d{1,3}(\s\d{3})*(,\d+)?((e|E)(\+|-)?\d+)?$/.test(e.trim())})),parse:pn((function(e){return parseFloat(e.replace(/\s/g,"").replace(/,/,"."))})),description:"Space thousand separator, comma decimal mark",thousand_separator:" ",decimal_mark:",",id:"number$space_comma",example:"12 235,56"},qn={test:pn((function(e){return/^(\+|-)?\d+(,\d+)?((e|E)(\+|-)?\d+)?$/.test(e.trim())})),parse:pn((function(e){return parseFloat(e.replace(/,/,"."))})),description:"No thousand separator, comma decimal mark",thousand_separator:"",decimal_mark:",",id:"number$none_comma",example:"12235,56"},Yn=Object.freeze([On,Pn,jn,Bn,Dn,qn]);Yn.forEach((function(e){e.type="number",e.format=function(e){var t,n,r=Fn({decimal:e.decimal_mark,thousands:e.thousand_separator,grouping:[3],currency:["",""]});return function(e,i){return i||(i=",.2f"),i!==n&&(n=i,t=r.format(n)),t(e)}}(e),Object.freeze(e)}));var Hn,In=Object.freeze({test:function(e){return"string"==typeof e||fn(e)},parse:function(e){return"string"==typeof e?e:fn(e)},format:function(e){if("string"==typeof e)return e},type:"string",description:"Arbitrary string",id:"string$arbitrary_string"}),Rn=Object.freeze({datetime:mn,number:Yn}),Un=Object.freeze(["datetime","number","string"]),$n=Object.freeze({n_max:250,n_failing_values:0,failure_fraction:.05,sort:!0}),Wn=Object.freeze(Object.keys($n));function Vn(e,t){return e.index-t.index}function Gn(e,t){return t.n_success-e.n_success||Vn(e,t)}function Xn(e){return(""+e).trim()}function Zn(e){return void 0===e?function(e){return Xn(e)}:"function"==typeof e?function(t,n){return Xn(e(t,n))}:function(t){return Xn(t[""+e])}}function Jn(e){e?Array.isArray(e)||(e=[e]):e=Un;var t=e.reduce((function(e,t){var n=Rn[t];return n&&Array.prototype.push.apply(e,n),e}),[]),n=-1!==e.indexOf("string"),r=Wn.reduce((function(e,t){return e[t]=$n[t],e}),{}),i=function(e,i){i=Zn(i);var a=e.map(i).filter((function(e){return e}));if(!a.length)return n?[In]:[];var o=Math.min(r.n_max,a.length),l=Math.floor(o*r.failure_fraction),s=r.n_failing_values,c=r.sort?Gn:Vn,u=t.slice().reduce((function(e,t,n){for(var r=u=0,i=[],c=!1,u=0;u<o;u++){var d=a[u];if(!t.test(d)&&(++r>l?c=!0:-1===i.indexOf(d)&&(i.push(d),i.length>s&&(c=!0)),c))break}return c||e.push({interp:t,n_success:o-r,index:n}),e}),[]).sort(c).map((function(e){return e.interp}));return n&&u.push(In),u};return Wn.forEach((function(e){var t;i[(t=e,t.replace(/_(\w)/g,(function(e,t){return t.toUpperCase()})))]=function(t){return void 0===t?r[e]:(r[e]=t,i)}})),i}function Qn(){return this.declarations=[],this}function Kn(e){return this.selector=e,this.styles=[],this}Jn.DATETIME_IDS=Object.freeze(mn.map((function(e){return e.id}))),Jn.NUMBER_IDS=Object.freeze(Yn.map((function(e){return e.id}))),Jn.STRING_IDS=Object.freeze([In.id]),Jn.getInterpretation=(Hn=mn.concat(Yn,In).reduce((function(e,t){return e[t.id]=t,e}),{}),function(e){return Hn[e]}),Jn._createAccessorFunction=Zn,Jn.getInterpretation,Object.freeze({transform_labels:!1,transform:"multiply",multiply_divide_constant:1,exponentiate_constant:0,multiplier:1,prefix:"",n_dec:2,suffix:"",strip_zeros:!0,strip_separator:!0,negative_sign:"-$nk"}),Qn.prototype.select=function(e){if(!e)return this;var t=new Kn(e);return t.parent=this,this.addDeclaration(t),t},Qn.prototype.addDeclaration=function(e){return this.declarations.push(e),this},Qn.prototype.print=function(){var e="";return this.declarations.forEach((function(t){e+=t.selector+" {\n",t.styles.forEach((function(t){e+="\t"+t[0]+": "+t[1]+";\n"})),e+="}\n\n"})),e},Qn.prototype.clear=function(){return this.declarations=[],this},Kn.prototype.style=function(e,t){var n="function"==typeof value_?t():t;return""!==n&&null!=n&&this.styles.push([e,n]),this},Kn.prototype.select=function(e){return this.parent.select(this.selector+" "+e)};var er=!1;function tr(){if(!er&&"undefined"!=typeof document){var e,t=((e=new Qn).select(".fl-controls-container").style("display","inline-block").style("line-height","1em"),e.select(".fl-controls-title").style("display","inline-block").style("margin-inline-end","0.5rem"),e.select(".fl-controls-container, .fl-controls-container *").style("box-sizing","border-box"),e.select(".slider-holder").style("margin-bottom","20px"),e.select(".fl-controls-slider, .slider-play").style("pointer-events","all").style("display","inline-block").style("vertical-align","middle"),e.select(".slider-play svg").style("height","100%").style("width","100%").style("display","block").style("cursor"," pointer",""),e.select(".fl-controls-slider svg").style("display","block"),e.select(".slider-play:hover").style("opacity","0.6"),e.select(".fl-control-slider").style("width","100%").style("bottom","0").style("align-items","center"),e.select(".fl-control").style("position","relative"),e.select(".fl-control.hidden").style("display","none"),e.select(".fl-control .button").style("display","inline-flex").style("align-items","center").style("background","#eee").style("padding","0 0.5em").style("margin-right","0.25em").style("margin-bottom","0.25em").style("line-height","1em").style("box-sizing","border-box"),e.select(".fl-control.grouped:not(.hidden)").style("display","inline-table").style("table-layout","fixed").select(".button").style("display","table-cell").style("vertical-align","middle").style("margin","0").style("text-align","center"),e.select(".fl-control .button.selected").style("background","#ddd"),e.select(".fl-control-dropdown").style("line-height","1em").style("position","relative"),e.select(".fl-control-dropdown::after").style("display","block").style("content","''").style("width","10px").style("height","10px").style("background","transparent").style("position","absolute").style("right","5px").style("left","auto").style("top","50%").style("pointer-events","none").style("transform","translateY(calc(-50% + 3px))").style("border-left","5px solid transparent").style("border-right","5px solid transparent").style("border-top","5px solid").style("box-sizing","border-box"),e.select(".is-rtl .fl-control-dropdown::after").style("left","5px").style("right","auto"),e.select(".fl-control-dropdown select").style("-webkit-appearance","none").style("width","100%"),e.print()),n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",r.className="flourish-controls",n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t)),er=!0}}function nr(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function rr(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function ir(){}var ar=.7,or=1/ar,lr="\\s*([+-]?\\d+)\\s*",sr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",cr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ur=/^#([0-9a-f]{3,8})$/,dr=new RegExp("^rgb\\("+[lr,lr,lr]+"\\)$"),fr=new RegExp("^rgb\\("+[cr,cr,cr]+"\\)$"),pr=new RegExp("^rgba\\("+[lr,lr,lr,sr]+"\\)$"),hr=new RegExp("^rgba\\("+[cr,cr,cr,sr]+"\\)$"),_r=new RegExp("^hsl\\("+[sr,cr,cr]+"\\)$"),yr=new RegExp("^hsla\\("+[sr,cr,cr,sr]+"\\)$"),br={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function mr(){return this.rgb().formatHex()}function gr(){return this.rgb().formatRgb()}function vr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ur.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?xr(t):3===n?new zr(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?wr(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?wr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=dr.exec(e))?new zr(t[1],t[2],t[3],1):(t=fr.exec(e))?new zr(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=pr.exec(e))?wr(t[1],t[2],t[3],t[4]):(t=hr.exec(e))?wr(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=_r.exec(e))?Tr(t[1],t[2]/100,t[3]/100,1):(t=yr.exec(e))?Tr(t[1],t[2]/100,t[3]/100,t[4]):br.hasOwnProperty(e)?xr(br[e]):"transparent"===e?new zr(NaN,NaN,NaN,0):null}function xr(e){return new zr(e>>16&255,e>>8&255,255&e,1)}function wr(e,t,n,r){return r<=0&&(e=t=n=NaN),new zr(e,t,n,r)}function kr(e){return e instanceof ir||(e=vr(e)),e?new zr((e=e.rgb()).r,e.g,e.b,e.opacity):new zr}function Mr(e,t,n,r){return 1===arguments.length?kr(e):new zr(e,t,n,null==r?1:r)}function zr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Ar(){return"#"+Cr(this.r)+Cr(this.g)+Cr(this.b)}function Er(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function Cr(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function Tr(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Lr(e,t,n,r)}function Sr(e){if(e instanceof Lr)return new Lr(e.h,e.s,e.l,e.opacity);if(e instanceof ir||(e=vr(e)),!e)return new Lr;if(e instanceof Lr)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,l=a-i,s=(a+i)/2;return l?(o=t===a?(n-r)/l+6*(n<r):n===a?(r-t)/l+2:(t-n)/l+4,l/=s<.5?a+i:2-a-i,o*=60):l=s>0&&s<1?0:o,new Lr(o,l,s,e.opacity)}function Nr(e,t,n,r){return 1===arguments.length?Sr(e):new Lr(e,t,n,null==r?1:r)}function Lr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Fr(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}nr(ir,vr,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:mr,formatHex:mr,formatHsl:function(){return Sr(this).formatHsl()},formatRgb:gr,toString:gr}),nr(zr,Mr,rr(ir,{brighter:function(e){return e=null==e?or:Math.pow(or,e),new zr(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?ar:Math.pow(ar,e),new zr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ar,formatHex:Ar,formatRgb:Er,toString:Er})),nr(Lr,Nr,rr(ir,{brighter:function(e){return e=null==e?or:Math.pow(or,e),new Lr(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?ar:Math.pow(ar,e),new Lr(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new zr(Fr(e>=240?e-240:e+120,i,r),Fr(e,i,r),Fr(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var Or=Math.PI/180,Pr=180/Math.PI,Dr=.96422,jr=1,Br=.82521,qr=4/29,Yr=6/29,Hr=3*Yr*Yr,Ir=Yr*Yr*Yr;function Rr(e){if(e instanceof $r)return new $r(e.l,e.a,e.b,e.opacity);if(e instanceof Jr)return Qr(e);e instanceof zr||(e=kr(e));var t,n,r=Xr(e.r),i=Xr(e.g),a=Xr(e.b),o=Wr((.2225045*r+.7168786*i+.0606169*a)/jr);return r===i&&i===a?t=n=o:(t=Wr((.4360747*r+.3850649*i+.1430804*a)/Dr),n=Wr((.0139322*r+.0971045*i+.7141733*a)/Br)),new $r(116*o-16,500*(t-o),200*(o-n),e.opacity)}function Ur(e,t,n,r){return 1===arguments.length?Rr(e):new $r(e,t,n,null==r?1:r)}function $r(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function Wr(e){return e>Ir?Math.pow(e,1/3):e/Hr+qr}function Vr(e){return e>Yr?e*e*e:Hr*(e-qr)}function Gr(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Xr(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Zr(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof Jr)return new Jr(e.h,e.c,e.l,e.opacity);if(e instanceof $r||(e=Rr(e)),0===e.a&&0===e.b)return new Jr(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Pr;return new Jr(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}(e):new Jr(e,t,n,null==r?1:r)}function Jr(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Qr(e){if(isNaN(e.h))return new $r(e.l,0,0,e.opacity);var t=e.h*Or;return new $r(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}nr($r,Ur,rr(ir,{brighter:function(e){return new $r(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new $r(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new zr(Gr(3.1338561*(t=Dr*Vr(t))-1.6168667*(e=jr*Vr(e))-.4906146*(n=Br*Vr(n))),Gr(-.9787684*t+1.9161415*e+.033454*n),Gr(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),nr(Jr,Zr,rr(ir,{brighter:function(e){return new Jr(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new Jr(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return Qr(this).rgb()}}));var Kr=-.14861,ei=1.78277,ti=-.29227,ni=-.90649,ri=1.97294,ii=ri*ni,ai=ri*ei,oi=ei*ti-ni*Kr;function li(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof si)return new si(e.h,e.s,e.l,e.opacity);e instanceof zr||(e=kr(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(oi*r+ii*t-ai*n)/(oi+ii-ai),a=r-i,o=(ri*(n-i)-ti*a)/ni,l=Math.sqrt(o*o+a*a)/(ri*i*(1-i)),s=l?Math.atan2(o,a)*Pr-120:NaN;return new si(s<0?s+360:s,l,i,e.opacity)}(e):new si(e,t,n,null==r?1:r)}function si(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}nr(si,li,rr(ir,{brighter:function(e){return e=null==e?or:Math.pow(or,e),new si(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?ar:Math.pow(ar,e),new si(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*Or,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new zr(255*(t+n*(Kr*r+ei*i)),255*(t+n*(ti*r+ni*i)),255*(t+n*(ri*r)),this.opacity)}}));var ci="$";function ui(){}function di(e,t){var n=new ui;if(e instanceof ui)e.each((function(e,t){n.set(t,e)}));else if(Array.isArray(e)){var r,i=-1,a=e.length;if(null==t)for(;++i<a;)n.set(i,e[i]);else for(;++i<a;)n.set(t(r=e[i],i,e),r)}else if(e)for(var o in e)n.set(o,e[o]);return n}function fi(){var e,t,n,r=[],i=[];function a(n,i,o,l){if(i>=r.length)return null!=e&&n.sort(e),null!=t?t(n):n;for(var s,c,u,d=-1,f=n.length,p=r[i++],h=di(),_=o();++d<f;)(u=h.get(s=p(c=n[d])+""))?u.push(c):h.set(s,[c]);return h.each((function(e,t){l(_,t,a(e,i,o,l))})),_}function o(e,n){if(++n>r.length)return e;var a,l=i[n-1];return null!=t&&n>=r.length?a=e.entries():(a=[],e.each((function(e,t){a.push({key:t,values:o(e,n)})}))),null!=l?a.sort((function(e,t){return l(e.key,t.key)})):a}return n={object:function(e){return a(e,0,pi,hi)},map:function(e){return a(e,0,_i,yi)},entries:function(e){return o(a(e,0,_i,yi),0)},key:function(e){return r.push(e),n},sortKeys:function(e){return i[r.length-1]=e,n},sortValues:function(t){return e=t,n},rollup:function(e){return t=e,n}}}function pi(){return{}}function hi(e,t,n){e[t]=n}function _i(){return di()}function yi(e,t,n){e.set(t,n)}function bi(){}ui.prototype=di.prototype={constructor:ui,has:function(e){return ci+e in this},get:function(e){return this[ci+e]},set:function(e,t){return this[ci+e]=t,this},remove:function(e){var t=ci+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===ci&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===ci&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===ci&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===ci&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===ci&&++e;return e},empty:function(){for(var e in this)if(e[0]===ci)return!1;return!0},each:function(e){for(var t in this)t[0]===ci&&e(this[t],t.slice(1),this)}};var mi=di.prototype;function gi(e,t){var n=new bi;if(e instanceof bi)e.each((function(e){n.add(e)}));else if(e){var r=-1,i=e.length;if(null==t)for(;++r<i;)n.add(e[r]);else for(;++r<i;)n.add(t(e[r],r,e))}return n}bi.prototype=gi.prototype={constructor:bi,has:mi.has,add:function(e){return this[ci+(e+="")]=e,this},remove:mi.remove,clear:mi.clear,values:mi.keys,size:mi.size,empty:mi.empty,each:mi.each};var vi,xi,wi=(vi=document.createElement("canvas").getContext("2d"),function(e,t){return vi.font=t||"10px sans-serif",vi.measureText(e).width});function ki(e,t,n){var r,i,a,o,l,s={},c=ue(n).append("div").attr("class","fl-control fl-control-slider").style("flex","1"),u=c.append("div").attr("class","slider-play").attr("role","button").attr("aria-label","play-button").attr("cursor","pointer").attr("tabindex",0),d=c.append("div").attr("class","fl-controls-slider").style("display","none").style("align-items","center"),f=null;const p=d.append("input").attr("type","range").attr("id","slider-range").attr("name","slider-range").attr("value",0),h=d.append("label").attr("class","slider-label").attr("for","slider-range");var _=function(){clearTimeout(f),f=null},y=function(t){var n=a[t];n.options_index!==e.index()&&(e.index(n.options_index),e.trigger("change"))},b=function(){_(),c.classed("playing",!1),u.html(r).attr("aria-label","play-button"),e._isPlaying_(!1),l=!1},m=function(){var n=e.getSortedIndex(),r=o[n],i=e.n_options-1,a=n<i?n+1:0;f=setTimeout((function(){y(a),t.slider_loop||a<i?m():b()}),r)},g=function(){c.classed("playing",!0),u.html(i).attr("aria-label","pause-button"),m(),e._isPlaying_(!0),l=!0};u.on("click",(function(){null===f?g():b()})).on("keyup",(function(){"Space"!==K.code&&"Enter"!==K.code||(K.preventDefault(),null===f?g():b())}));var v=function(e){const n=Math.min(Math.ceil(e),xi(t.slider_max_label_width))+"px";return h.style("width",n).style("flex-shrink",0),c.style("display","inline-flex"),p.style("width",xi(t.slider_width)+"px"),r='<svg aria-hidden="true" width="25px" height="30px" viewBox="0 0 25 30"> <polygon stroke="none" points="25 15 0 30 0 0"></polygon> </svg>',i='<svg aria-hidden="true" width="26px" height="30px" viewBox="0 0 26 30"> <g stroke="none" stroke-width="1"quarter><rect x="2" y="2" width="9" height="26"></rect> <rect x="15" y="2" width="9" height="26"></rect> </g> </svg>',u.html(f?i:r),s},x=function(){return b(),c.style("display","none"),s};return s.show=v,s.hide=x,s.update=function(n,r){if(d.style("display","flex"),a=n,!e.n_options||"slider"!==t.control_type)return x(),s;var i=window.getComputedStyle(h.node()).fontSize;let c=0;const u=i+" sans-serif";a.forEach((function(e){const t=wi(e.display,u);c=Math.max(c,t)})),r?v(c):x();var w=e.n_options,k=t.slider_loop;o=a.map((function(e,n){return 1e3*(t.slider_step_time+(k&&n===w-1?t.slider_restart_pause:0))}));var M=e.getSortedIndex(),z=a[M],A=a[0].display,E=a[a.length-1].display;return p.attr("min",0).attr("max",w-1).attr("step",1).attr("aria-valuenow",z.display).attr("aria-valuemin",A).attr("aria-valuemax",E).on("input",(function(){var e=null!==f;e&&_(),y(this.value),e&&m()})),p.node().value=M,h.html(z.display),e._isPlaying_()&&!l?g():!e._isPlaying_()&&l&&b(),s},s}var Mi=Object.freeze({alignment:"start",controls_spacing:1});function zi(e){for(var t in this._state=e,Mi)void 0===this._state[t]&&(this._state[t]=Mi[t]);return this}zi.prototype.appendTo=function(e){return this._container=ue(e).append("div").node(),this},zi.prototype.add=function(e){return this._controls=Array.isArray(e)?e:[e],this._controls.forEach((function(e){e&&"function"==typeof e.appendTo?e.appendTo(this._container):console.warn("Please pass valid controls instances to .add()")}),this),this},zi.prototype.update=function(){this._controls.forEach((function(e){e&&"function"==typeof e.update&&e.update()}));var e=this._state.alignment,t="center"==e?e:"flex-"+e,n=window.template||void 0,r=n?n.state.layout:void 0,i=r&&r.read_direction||ue("body").node().dir||"ltr",a=e;"rtl"===i&&"center"!==e&&(a="start"===e?"end":"start"),ue(this._container).classed("is-rtl","rtl"==i).style("display","flex").style("flex-wrap","wrap").style("justify-content",t);var o,l,s=ue(this._container).selectAll(".fl-controls-container"),c=this._state.controls_spacing;switch(a){case"end":o=c+"em",l=0;break;case"center":o=.5*c+"em",l=.5*c+"em";break;default:o=0,l=c+"em"}return s.style("margin-left",o).style("margin-right",l),this};var Ai=Object.freeze({control_type:"dropdown",control_title:"",dropdown_width_mode:"auto",dropdown_width_fixed:20,button_group:!0,button_group_width_mode:"auto",button_group_width_fixed:20,slider_width:15,slider_max_label_width:20,slider_handle_height:1,slider_track_height:.2,slider_margin:4.5,slider_play_button:!0,slider_step_time:2,slider_loop:!0,slider_restart_pause:0,sort:!1,_index_:null,_is_playing_:!1});function Ei(e){return e}function Ci(e){return null==e?"":e.toString()}function Ti(e){var t={},n=Ei,r=Ci,i=[],a=!0,o=[],l=[],s=[],c=document.createElement("div");c.setAttribute("class","fl-controls-container");var u=ue(c).append("div").attr("class","fl-controls-title"),d=function(e,t,n){var r={},i=ue(n).append("div").attr("class","fl-control fl-control-dropdown").style("display","none");const a=i.append("select").on("change",(function(){const t=a.select("option:checked").datum().options_index;e.index(t),e.trigger("change")}));var o=function(e){var r="100%";"auto"==t.dropdown_width_mode?r=Math.min(e+40,xi(20))+xi(1)+"px":"fixed"==t.dropdown_width_mode&&(r=xi(t.dropdown_width_fixed)+"px"),n.style.width="full"==t.dropdown_width_mode?r:"",i.style("width",r).style("display","full"!==t.dropdown_width_mode?"inline-table":null)},l=function(){i.style("display","none")};return r.show=o,r.hide=l,r.update=function(n,i){var s=window.getComputedStyle(a.node()).fontSize;if(!e.n_options||"dropdown"!==t.control_type)return l(),r;const c=a.selectAll("option").data(n,(e=>e.value));c.exit().remove();var u=c.enter().append("option").text((e=>e.display)).attr("value",(e=>e.value));let d=0;const f=s+" sans-serif";return"auto"===t.dropdown_width_mode&&c.merge(u).each((function(e){const t=wi(e.display,f);d=Math.max(d,t)})),a.node().value=e.value(),i?o(d):l(),r},r}(t,e,c),f=function(e,t,n){var r={},i=ue(n).append("div").attr("class","fl-control fl-control-buttons"),a=function(){i.classed("hidden",!1)},o=function(){i.classed("hidden",!0)};return r.show=a,r.hide=o,r.update=function(n,l){if(!e.n_options||"buttons"!==t.control_type)return o(),r;var s=e.index();i.classed("grouped",t.button_group),i.classed("fixed-width","fixed"==t.button_group_width_mode||"full"==t.button_group_width_mode),i.style("width",t.button_group&&"fixed"==t.button_group_width_mode?xi(t.button_group_width_fixed)+"px":"full"==t.button_group_width_mode?"100%":null);var c=function(t){var n=t.options_index;n!==e.index()&&(e.index(n),e.trigger("change"))},u=i.selectAll(".button").data(n,(function(e){return e.display})),d=u.enter().append("div").attr("class","button").style("cursor","pointer").attr("role","button").attr("tabindex",0).on("click",(function(e){c(e)})).on("keyup",(function(e){"Space"!==K.code&&"Enter"!==K.code||(K.preventDefault(),c(e))}));d.append("span").text((function(e){return e.display})),u.merge(d).classed("selected",(function(e){return e.options_index===s})).attr("aria-pressed",(function(e){return e.options_index===s})),u.exit().remove(),l?a():o()},r}(t,e,c),p=ki(t,e,c);for(var h in Ai)void 0===e[h]&&(e[h]=Ai[h]);var _=e._index_;t.appendTo=function(e){return tr(),ue(e).node().appendChild(c),t};t.remove=function(){return c.parentElement&&c.parentElement.removeChild(c),t},t.options=function(e){if(void 0===e)return o.slice();if(!Array.isArray(e))return t;var n=(o=e.slice()).length,r=y();return n?(null===r||r>=n)&&y(0):y(null),t},Object.defineProperty(t,"n_options",{get:function(){return o.length}});var y=function(n){return void 0===n?(e._is_playing_||(_=e._index_),_):(null===n||function(e){return o.length&&e>=0&&e<o.length}(n)?(_=n,e._is_playing_||(e._index_=_)):console.warn("Invalid index, ignoring update call"),t)};t.index=y,t.getSortedIndex=function(){var t,n=y();return"unsorted"==e.sort?n:(l.some((function(e,r){if(e.options_index===n)return t=r,!0})),t)},t.value=function(e){if(void 0===e)return o[y()];var n=o.indexOf(e);return-1!==n&&y(n),t},t.on=function(e,n){return"change"===e&&s.push(n.bind(t)),t},t.parse=function(e){return void 0===e?n:(n=null===e?Ei:e,t)},t.format=function(e,n){if(void 0===e)return r;if(null===e&&(r=Ci),"string"==typeof e)try{r=function(e){const t=Jn.getInterpretation(e);if(!t)throw new Error("format_id ".concat(e," not recognised"));return function(){return t.format(...arguments)}}(e)}catch(e){r=Ci,console.warn(e.message)}else r=e;return n&&Array.isArray(n)&&(i=n),t},t.visible=function(e){return void 0===e?a:(a=null===e||e,t)},t.update=function(){return function(){var e=parseFloat(getComputedStyle(document.documentElement).fontSize)||16;xi=function(t){return t*e}}(),l=function(e,t,n,r,i){var a=e.map((function(e,t){return{value:e,options_index:t,parsed:n(e),display:i.includes(e)?e:r(e)}}));return t?a.sort((function(e,t){return function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}(e.parsed,t.parsed)})):a}(o,e.sort,n,r,i),function(t){c.style.display=t.length>1?"flex":"none",c.style.width="",c.style.alignItems="center",u.node().innerHTML=e.control_title,u.node().style.display=""===e.control_title?"none":"inline-block",p.update(t,a),d.update(t,a),f.update(t,a)}(l),t},t.trigger=function(e){var n,r;return"change"===e&&(n=y(),r=o[n],s.forEach((function(e){e(r,n)}))),t},t.getNode=function(){return c};return t._isPlaying_=function(t){if(void 0===t)return e._is_playing_;e._is_playing_=!!t,t||y(_)},t}function Si(e,t){if("string"==typeof e&&(e=document.querySelector(e)),!e)return console.error("No valid target in createScreenshotSVG"),null;const{width:n,height:r,x:i,y:a}=e.getBoundingClientRect(),o=document.createElementNS("http://www.w3.org/2000/svg","svg");return o.id=t,o.classList.add("flourish-screenshot-svg-container"),o.style.left=i+"px",o.style.top=a+"px",o.style.width=n+"px",o.style.height=r+"px",o.style.position="absolute",e.appendChild(o),{addTextElements:function(t){if("string"==typeof t&&(t=e.querySelectorAll(t)),!t)return console.error("No valid els inside addTextElements"),null;for(const e of t){const{x:t,y:n,width:r}=e.getBoundingClientRect(),i=document.createElementNS("http://www.w3.org/2000/svg","text"),{color:a,"font-family":l,"font-size":s,"font-weight":c,"line-height":u,"padding-left":d,"padding-top":f}=window.getComputedStyle(e),p="".concat(c," ").concat(s," ").concat(l),h=Hi(e.innerText,p,null,Math.ceil(r)),_=isNaN(parseFloat(u))?1.2*parseFloat(s)+"px":u,y=window.getComputedStyle(e.closest("[style*='opacity']")||e).opacity;h.forEach(((e,n)=>{const r=document.createElementNS("http://www.w3.org/2000/svg","tspan");r.innerHTML=e,r.setAttribute("dy",0===n?parseFloat(f):_),r.setAttribute("dx",parseFloat(d)),r.setAttribute("x",t),r.setAttribute("opacity",y),i.appendChild(r)})),i.style.dominantBaseline="text-before-edge",i.setAttribute("x",t+"px"),i.setAttribute("y",n+"px"),i.setAttribute("font-family",l),i.setAttribute("font-size",s),i.setAttribute("font-weight",c),i.setAttribute("fill",a),o.appendChild(i)}return this},addCircleElements:function(t){if("string"==typeof t&&(t=e.querySelectorAll(t)),!t)return console.error("No valid els inside addCircleElements"),null;for(const e of t){const t=document.createElementNS("http://www.w3.org/2000/svg","circle"),{x:n,y:r,width:i}=e.getBoundingClientRect(),a=window.getComputedStyle(e)["background-color"],l=window.getComputedStyle(e.closest("[style*='opacity']")||e).opacity,s=i/2;t.setAttribute("cx",n+s+"px"),t.setAttribute("cy",r+s+"px"),t.setAttribute("r",s+"px"),t.setAttribute("opacity",l),t.setAttribute("fill",a),"rgba(0, 0, 0, 0)"===a&&t.setAttribute("stroke","#CCC"),o.appendChild(t)}return this},addGradient:function(t,n,r){if("string"==typeof t&&(t=e.querySelector(t)),!t)return console.error("No valid els inside addCircleElements"),null;const i=document.createElementNS("http://www.w3.org/2000/svg","g"),{x:a,y:l,width:s,height:c}=t.getBoundingClientRect(),{max:u,min:d}=r,f=u-d;for(let e=0;e<=s;e++){const t=document.createElementNS("http://www.w3.org/2000/svg","line");t.setAttribute("stroke",n(d+e*f/s)),t.setAttribute("x1",e+a),t.setAttribute("y1",l),t.setAttribute("x2",e+a),t.setAttribute("y2",c+l),i.appendChild(t)}return o.appendChild(i),this},remove:function(){o.remove()}}}var Ni,Li,Fi,Oi=document.createElement("canvas").getContext("2d");function Pi(e){var t,n;return window.innerWidth!==t&&(t=window.innerWidth,n=parseFloat(getComputedStyle(document.documentElement).fontSize)),e*n}function Di(e,t){return function(e,t){Oi.font=t||"10px sans-serif";var n=Oi.measureText(e);return{width:n.width,height:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent}}(e,t).width}function ji(){return window.getComputedStyle(document.body).direction||"ltr"}function Bi(e,t){if("string"!=typeof e)return!1;var n=vr(e);return n.opacity=void 0!==t?t:1,n}function qi(e,t){var n=Bi(e,t);return!!n&&n.toString()}function Yi(e){return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Hi(e,t,n,r){var i=[],a=0;if(null!==n&&n<=0)return i.widest_line=a,i;Oi.font=t;var o=Oi.measureText(e).width;if(o<=r)i.push(e),a=o;else{for(var l=e.trim().split(/\s+/g),s="",c=0;c<l.length;c++){var u=l[c],d=s+(s?" ":"")+u,f=Oi.measureText(d).width;if(!(f<=r)){if(!(i.length+1==n)&&s){i.push(s);var p=Oi.measureText(u).width;if(p<=r){s=u,a=Math.max(a,p);continue}}var h=1,_=s;do{_=s.substring(0,d.length-h)+"…",f=Oi.measureText(_).width}while(f>r&&++h<d.length);a=Math.max(a,f),s=_;break}s=d,a=Math.max(a,f)}i.push(s)}return i.widest_line=a,i}function Ii(){document.body.querySelector(".font-samples").innerHTML=""}function Ri(e){Fi||(Fi=e||["normal","bold"]);var t="";["mobile_big","tablet","desktop","big_screen"].forEach((function(e){var n="@media(min-width: "+ma["breakpoint_"+e]+"px) {\n",r="html { font-size:"+ma["font_size_"+e]+"%; }";t+=n+r+"\n}\n\n"}));var n="html { \n font-size:"+ma.font_size_mobile_small+"%; \n -webkit-font-smoothing: antialiased; \n -moz-osx-font-smoothing: auto; } \n\n\n";Ni.innerHTML=n+t;var r=[ma.body_font,ma.title_font,ma.subtitle_font,ma.footer_font];r.forEach((function(e){if(e){for(var t=!1,n=document.head.querySelectorAll("link.layout-font"),r=0;r<n.length;r++){n[r].href==e.url&&(t=!0)}if(!t){var i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("href",e.url),i.className="layout-font",document.head.appendChild(i),function(e){document.body.querySelector(".font-samples")||((Li=document.createElement("div")).className="font-samples",Li.style.visibility="hidden",Li.style.overflow="hidden",Li.style.height=0,document.body.appendChild(Li)),Fi.forEach((function(t){var n=document.createElement("div");n.className="font-sample-el",n.innerText=e.name,n.style.fontFamily=e.name,n.style.fontWeight=t,Li.appendChild(n)}))}(e)}}}));for(var i=document.head.querySelectorAll("link.layout-font"),a=0;a<i.length;a++){var o=i[a],l=!1;r.forEach((function(e){e&&e.url==o.href&&(l=!0)})),l||o.parentElement.removeChild(o)}document.body.style.fontFamily=ma.body_font.name}var Ui,$i,Wi,Vi,Gi,Xi,Zi,Ji,Qi,Ki,ea,ta,na,ra,ia,aa=Object.freeze({"stack-default":["header","controls","primary","footer"],"stack-2":["primary","header","controls","footer"],"stack-3":["header","primary","controls","footer"],"stack-4":["controls","primary","header","footer"]});function oa(e){return window.innerWidth!==Ui&&(Ui=window.innerWidth,$i=parseFloat(getComputedStyle(document.documentElement).fontSize)),e*$i}function la(e){return"justify"==e?"":"left"==e?"start":"right"==e?"end":"center"==e?"center":void 0}function sa(e){return 0!==e.indexOf("http://")&&0!==e.indexOf("https://")?"http://"+e:e}function ca(){var e="top"==ma.header_border||"top_and_bottom"==ma.header_border,t="bottom"==ma.header_border||"top_and_bottom"==ma.header_border;Wi.style.textAlign=la(ma.header_align),Wi.style.margin=0,Wi.style.borderTop=e?ma.header_border_width+"px "+ma.header_border_style+" "+ma.header_border_color:null,Wi.style.borderBottom=t?ma.header_border_width+"px "+ma.header_border_style+" "+ma.header_border_color:null,Wi.style.paddingTop=e?ma.header_border_space+"rem":"",Wi.style.paddingBottom=t?ma.header_border_space+"rem":"",Vi.innerHTML=ma.title?ma.title:"",Vi.setAttribute("id","flourish-header-title"),Vi.style.fontFamily=ma.title_font?ma.title_font.name:"inherit",Vi.style.fontSize=("custom"!=ma.title_size?ma.title_size:ma.title_size_custom)+"rem",Vi.style.lineHeight=ma.title_line_height,Vi.style.fontWeight=ma.title_weight,Vi.style.color=ma.title_color||ma.font_color,Vi.style.margin=0,Vi.style.paddingTop=ma.title?("custom"==ma.title_space_above?ma.title_space_above_custom:ma.title_space_above)+"rem":0,Gi.innerHTML=ma.subtitle?ma.subtitle:"",Gi.setAttribute("id","flourish-header-subtitle"),Gi.style.fontFamily=ma.subtitle_font?ma.subtitle_font.name:"inherit",Gi.style.fontSize=("custom"!=ma.subtitle_size?ma.subtitle_size:ma.subtitle_size_custom)+"rem",Gi.style.lineHeight=ma.subtitle_line_height,Gi.style.fontWeight=ma.subtitle_weight,Gi.style.color=ma.subtitle_color||ma.font_color,Gi.style.margin=0,Gi.style.paddingTop=ma.subtitle?("custom"==ma.subtitle_space_above?ma.subtitle_space_above_custom:ma.subtitle_space_above)+"rem":0,Xi.innerHTML=ma.header_text?ma.header_text:"",Xi.setAttribute("id","flourish-header-text"),Xi.style.fontSize=("custom"!=ma.header_text_size?ma.header_text_size:ma.header_text_size_custom)+"rem",Xi.style.lineHeight=ma.header_text_line_height,Xi.style.fontWeight=ma.header_text_weight,Xi.style.margin=0,Xi.style.color=ma.header_text_color||ma.font_color,Xi.style.paddingTop=ma.header_text?("custom"==ma.header_text_space_above?ma.header_text_space_above_custom:ma.header_text_space_above)+"rem":0,Zi.style.clear="both",Ji.innerHTML="",ma.header_logo_enabled&&ma.header_logo_src&&((Qi=document.createElement("img")).className="flourish-header-logo",Qi.src=sa(ma.header_logo_src),Qi.alt=ma.header_logo_alt,Qi.style.position="inside"==ma.header_logo_align?"":"fixed",Qi.style.height=ma.header_logo_height+"rem",Qi.style.top="outside"==ma.header_logo_align?0:"",Qi.style.left="outside"==ma.header_logo_align&&"left"==ma.header_logo_position_outside?0:"",Qi.style.right="outside"==ma.header_logo_align&&"right"==ma.header_logo_position_outside?0:"",Qi.style.marginTop=ma.header_logo_margin_top+"rem",Qi.style.marginBottom=ma.header_logo_margin_bottom+"rem",Qi.style.marginLeft=ma.header_logo_margin_left+"rem",Qi.style.marginRight=ma.header_logo_margin_right+"rem",Qi.style.float="top"==ma.header_logo_position_inside||"outside"==ma.header_logo_align?"":ma.header_logo_position_inside,Qi.style.width="auto",ma.header_logo_link_url?((Ki=document.createElement("a")).target="_blank",Ki.appendChild(Qi),Ji.appendChild(Ki),Qi.style.cursor="pointer",Ki.href=sa(ma.header_logo_link_url)):Ji.appendChild(Qi))}var ua=!1;function da(){var e;return(e=document.createElement("style")).type="text/css",e.innerHTML=".flourish-footer { margin: 0; } .flourish-footer p { margin: 0; display: inline; } .flourish-footer p:empty { height: 0; } .flourish-footer a { color: inherit; }",document.head.appendChild(e),(ea=document.createElement("footer")).className="flourish-footer",(ta=document.createElement("div")).className="flourish-footer-text",ta.setAttribute("id","flourish-footer-text"),(na=document.createElement("div")).className="flourish-footer-logo-container",ea.appendChild(ta),ea.appendChild(na),ea}function fa(){return ma.background_color_enabled&&!function(e){if(e){var t=vr(e);return Math.round(299*t.r+587*t.g+114*t.b)/1e3>195}console.warn("No valid color",e)}(ma.background_color)}function pa(){var e=ma.footer_logo_src?ma.footer_logo_src:"";return ma.footer_logo_src_light&&fa()&&(e=ma.footer_logo_src_light),e}function ha(){return ma.footer_logo_enabled&&pa()}function _a(){var e=[{name:ma.source_name,url:ma.source_url},{name:ma.multiple_sources?ma.source_name_2:"",url:ma.multiple_sources?ma.source_url_2:""},{name:ma.multiple_sources?ma.source_name_3:"",url:ma.multiple_sources?ma.source_url_3:""}].filter((function(e){return e.name||e.url}));ua=e.length>0||ma.footer_note||ma.footer_note_secondary||ha();var t,n="top"==ma.footer_border||"top_and_bottom"==ma.footer_border,r="bottom"==ma.footer_border||"top_and_bottom"==ma.footer_border;ea.style.display="flex",ea.style.height=ua?null:0,ea.style.width="100%",ea.style.paddingTop=n?ma.footer_border_space+"rem":"",ea.style.paddingBottom=r?ma.footer_border_space+"rem":"",ea.style.borderTop=n?ma.footer_border_width+"px "+ma.footer_border_style+" "+ma.footer_border_color:"",ea.style.borderBottom=r?ma.footer_border_width+"px "+ma.footer_border_style+" "+ma.footer_border_color:"",ea.style.fontFamily=ma.footer_font?ma.footer_font.name:"inherit",ea.style.fontWeight=ma.footer_text_weight,ea.style.justifyContent="justify"==(t=ma.footer_align)?"space-between":"left"==t?"flex-start":"right"==t?"flex-end":"center"==t?"center":void 0,ea.style.fontSize=ma.footer_text_size+"rem",ea.style.color=ma.footer_text_color||ma.font_color,ea.style.alignItems=ma.footer_align_vertical;var i=document.createElement("span");e.forEach((function(e,t){var n=document.createElement("p");if(t>0&&(n.innerText=", "),e.url){var r=document.createElement("a");r.innerText=e.name||e.url,r.href=sa(e.url),r.target="_blank",n.appendChild(r)}else n.innerText+=e.name||e.url;i.innerHTML+=n.innerHTML})),ta.style.order="left"==ma.footer_logo_order?2:"",ta.style.textAlign=la(ma.footer_align);var a="<p>";a+=""!==i.innerHTML?ma.source_label+" "+i.innerHTML:"",a+=ma.footer_note?(""!==i.innerHTML?" • ":"")+ma.footer_note:"",a+="</p>",a+=ma.footer_note_secondary?"<br /><p>"+ma.footer_note_secondary+"</p>":"",ta.innerHTML=a,na.innerHTML="",ha()&&((ra=document.createElement("img")).className="flourish-footer-logo",ra.src=sa(pa()),ra.alt=ma.footer_logo_alt,ra.style.height=ma.footer_logo_height+"rem",ra.style.marginRight="left"==ma.footer_logo_order?ma.footer_logo_margin+"rem":"",ra.style.marginLeft="right"==ma.footer_logo_order?ma.footer_logo_margin+"rem":"",ra.style.verticalAlign=ma.footer_align_vertical,ra.style.display=ha()?"":"none",ma.footer_logo_link_url?((ia=document.createElement("a")).target="_blank",ia.appendChild(ra),na.appendChild(ia),ra.style.cursor="pointer",ia.href=sa(ma.footer_logo_link_url)):na.appendChild(ra))}function ya(){Ri(),ca(),_a(),document.body.style.backgroundColor=ma.background_color_enabled?ma.background_color:"transparent",document.body.style.backgroundImage=ma.background_image_enabled?"url("+ma.background_image_src+")":"",document.body.style.backgroundSize=ma.background_image_size,document.body.style.backgroundRepeat="no-repeat",document.body.style.backgroundPosition=ma.background_image_position;var e=Ma.wrapper.style;e.height="100vh",e.color=ma.font_color,e.maxWidth="wrapper"==ma.max_width_target?ma.max_width+"px":"",e.marginLeft="wrapper"==ma.max_width_target&&"left"!=ma.max_width_align?"auto":"",e.marginRight="wrapper"==ma.max_width_target&&"right"!=ma.max_width_align?"auto":"",e.padding=ma.margin_top+"rem "+ma.margin_right+"rem "+ma.margin_bottom+"rem "+ma.margin_left+"rem",e.borderTop=ma.border.enabled?ma.border.top.width+"px "+ma.border.top.style+" "+ma.border.top.color:"",e.borderRight=ma.border.enabled?ma.border.right.width+"px "+ma.border.right.style+" "+ma.border.right.color:"",e.borderBottom=ma.border.enabled?ma.border.bottom.width+"px "+ma.border.bottom.style+" "+ma.border.bottom.color:"",e.borderLeft=ma.border.enabled?ma.border.left.width+"px "+ma.border.left.style+" "+ma.border.left.color:"";var t=Ma.primary.outer.style,n=Ma.legend.outer.style,r=parseFloat(t.order)>parseFloat(n.order)?"above":"below";aa[ma.layout_order].forEach((function(e,t){Ma[e].outer.style.order=10*t})),t.flex="1 1 auto",t.height=null,Ia(r),Ma.primary.outer.style.maxWidth="primary"==ma.max_width_target?ma.max_width+"px":"",Ma.primary.outer.style.marginLeft="primary"==ma.max_width_target&&"left"!=ma.max_width_align?"auto":"",Ma.primary.outer.style.marginRight="primary"==ma.max_width_target&&"right"!=ma.max_width_align?"auto":"";var i=ma.screenreader_hide_primary&&""!=ma.screenreader_text_primary;document.getElementById("fl-layout-primary-description").innerText=ma.screenreader_hide_primary?ma.screenreader_text_primary:"",i?Ma.primary.outer.setAttribute("aria-describedBy","fl-layout-primary-description"):Ma.primary.outer.removeAttribute("aria-describedBy"),ma.screenreader_hide_primary?Ma.primary.inner.setAttribute("aria-hidden",!0):Ma.primary.inner.removeAttribute("aria-hidden"),ma.screenreader_label?Ca().setAttribute("aria-label",ma.screenreader_label):Ca().removeAttribute("aria-label");var a=("custom"==ma.space_between_sections?ma.space_between_sections_custom:ma.space_between_sections)/2+"rem";ka.map((function(e){var t=Ma[e],n=t.outer.style;return{name:e,height:Aa(t.inner),order:parseFloat(n.order),style:n}})).sort((function(e,t){return e.order-t.order})).filter((function(e){if(e.height)return!0;e.style.paddingBottom="",e.style.paddingTop=""})).forEach((function(e,t,n){e.style.paddingTop=t?a:"",e.style.paddingBottom=t<n.length-1?a:""})),document.body.setAttribute("dir",ma.read_direction),Ma.wrapper.setAttribute("dir",ma.read_direction),document.getElementById("fl-layout-wrapper-outer").setAttribute("dir","ltr")}var ba=Object.freeze({body_font:{name:"Source Sans Pro",url:"https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700"},title_font:null,subtitle_font:null,footer_font:null,read_direction:"ltr",border:{enabled:!1,top:{width:1,color:"#dddddd",style:"solid"},right:{width:1,color:"#dddddd",style:"solid"},bottom:{width:1,color:"#dddddd",style:"solid"},left:{width:1,color:"#dddddd",style:"solid"}},layout_order:"stack-default",margin_top:.75,margin_right:.75,margin_bottom:.75,margin_left:.75,space_between_sections:1,space_between_sections_custom:1,background_color_enabled:!0,background_color:"#ffffff",background_image_enabled:!1,background_image_src:"",background_image_size:"cover",background_image_position:"center center",max_width:600,max_width_target:"none",max_width_align:"center",breakpoint_mobile_small:0,breakpoint_mobile_big:380,breakpoint_tablet:580,breakpoint_desktop:1080,breakpoint_big_screen:1280,font_color:"#333333",font_size_mobile_small:62.5,font_size_mobile_big:75,font_size_tablet:87.5,font_size_desktop:100,font_size_big_screen:120,header_align:"left",header_border:"none",header_border_width:1,header_border_color:"#dddddd",header_border_style:"solid",header_border_space:.5,header_logo_enabled:!1,header_logo_align:"inside",header_logo_src:"",header_logo_alt:"Header logo",header_logo_link_url:"",header_logo_height:3,header_logo_position_inside:"left",header_logo_position_outside:"left",header_logo_margin_top:.25,header_logo_margin_right:.5,header_logo_margin_bottom:0,header_logo_margin_left:0,title:"",title_size:1.6,title_size_custom:1.6,title_line_height:1.2,title_color:null,title_weight:"bold",title_space_above:0,title_space_above_custom:1.5,title_styling:!1,subtitle:"",subtitle_size:1.6,subtitle_size_custom:1.6,subtitle_line_height:1.2,subtitle_color:null,subtitle_weight:"normal",subtitle_space_above:0,subtitle_space_above_custom:1.5,subtitle_styling:!1,header_text:"",header_text_size:1.2,header_text_size_custom:1.2,header_text_line_height:1.2,header_text_color:null,header_text_weight:"normal",header_text_space_above:.5,header_text_space_above_custom:1.5,source_label:"Source: ",source_name:"",source_url:"",source_name_2:"",source_url_2:"",source_name_3:"",source_url_3:"",footer_note:"",footer_note_secondary:"",footer_text_size:1,footer_text_color:null,footer_styling:!1,footer_text_weight:"normal",footer_align:"justify",footer_align_vertical:"center",footer_border:"none",footer_border_width:1,footer_border_color:"#dddddd",footer_border_style:"solid",footer_border_space:.5,footer_logo_enabled:!1,footer_logo_src:"",footer_logo_src_light:"",footer_logo_alt:"Footer logo",footer_logo_link_url:"",footer_logo_height:1.5,footer_logo_margin:.25,footer_logo_order:"right",screenreader_hide_primary:!0,screenreader_text_primary:"",screenreader_label:""});var ma,ga="Your web browser does not support the features used by this content. Consider updating to a modern browser.";function va(e,t,n){Ri(n),e=function(e){return function(){return document.body.classList.add("fl-fonts-loaded"),e.apply(this,arguments)}}(e=e||window.template.update);var r=setTimeout(e,isNaN(t)?500:t),i=[];document.fonts&&document.fonts.ready.then((function(t){if(t.size){var n=Array.from(t.keys()).map((function(e){return xa(e)}));i=i.concat(n),clearTimeout(r),e(),Ii()}document.fonts.addEventListener("loadingdone",(function(t){var n=!1;t.fontfaces.forEach((function(e){var t=xa(e);i.includes(t)||(i.push(t),n=!0)})),n&&(clearTimeout(r),e(),Ii())}))}))}function xa(e){return[e.family,e.variant,e.weight,e.unicodeRange].join(" ")}var wa,ka=["header","controls","legend","primary","footer"],Ma={};function za(e){return e.getBoundingClientRect().width}function Aa(e){return e.getBoundingClientRect().height}function Ea(e,t){var n="fl-layout-"+e,r=document.createElement("section");r.className="fl-layout-container",r.id=n+"-container",r.style.width="100%",r.style.position="relative",r.style.order=t;var i=document.createElement("div");return i.className="fl-layout-inner",i.id=n,i.style.width="100%",i.style.position="relative","primary"==e&&(r.style.display="flex",function(e){var t=document.createElement("p");t.id="fl-layout-primary-description";var n=t.style;n.border="0",n.height="1px",n.width="1px",n.margin="-1px",n.overflow="hidden",n.padding="0",n.position="absolute",n.clip="rect(0 0 0 0)",e.appendChild(t)}(r)),"controls"!=e&&"legend"!=e||i.setAttribute("aria-hidden",!0),r.appendChild(i),Ma.wrapper.appendChild(r),{outer:r,inner:i}}function Ca(){return Ma.wrapper}function Ta(){return Ma.sidebar}function Sa(e){return-1!==ka.indexOf(e)?Ma[e].inner:null}function Na(e){return Ma[e]||void 0===e?za("wrapper"==e||void 0===e?Ma.wrapper:Ma[e].outer):null}function La(e){return Ma[e]||void 0===e?"wrapper"==e||void 0===e?za(Ma.wrapper)-qa("horizontal")-Ya("horizontal"):za(Ma[e].inner):null}function Fa(e){return Ma[e]||void 0===e?Aa("wrapper"==e||void 0===e?Ma.wrapper:Ma[e].outer):null}function Oa(e){return Ma[e]||void 0===e?"wrapper"==e||void 0===e?Aa(Ma.wrapper)-qa("vertical")-Ya("vertical"):Aa(Ma[e].inner):null}function Pa(){return Aa(Ma.primary.outer)-ja(Ma.primary.outer)}function Da(){return za(Ma.primary.inner)}function ja(e){return(parseFloat(getComputedStyle(e).paddingTop)||0)+(parseFloat(getComputedStyle(e).paddingBottom)||0)}function Ba(){return function(){if(Flourish.fixed_height)return window.innerHeight;var e=window.innerWidth;return e>999?650:e>599?575:400}()-qa("vertical")-Ya("vertical")-["header","controls","legend","footer"].reduce((function(e,t){return e+Fa(t)}),0)-ja(Ma.primary.outer)}function qa(e){var t;return"left"==e?t=ma.margin_left:"right"==e?t=ma.margin_right:"top"==e?t=ma.margin_top:"bottom"==e?t=ma.margin_bottom:"horizontal"==e?t=ma.margin_left+ma.margin_right:"vertical"==e&&(t=ma.margin_top+ma.margin_bottom),oa(t)}function Ya(e){return ma.border.enabled?"vertical"==e?ma.border.top.width+ma.border.bottom.width:"horizontal"==e?ma.border.left.width+ma.border.right.width:null:0}function Ha(e){var t=Ma.primary;if(Flourish.fixed_height||void 0===Flourish.fixed_height)t.inner.style.height="";else{var n=null===e,r=n?Ba():e;r+ja(Ma.primary.outer)!==parseFloat(t.outer.style.height)&&(Ma.wrapper.style.height="",t.outer.style.flex="",t.inner.style.height=r+"px",Flourish.setHeight(n?null:Fa()))}}function Ia(e){var t=parseFloat(Ma.primary.outer.style.order);Ma.legend.outer.style.order=t+1*("below"===e.trim().toLowerCase()?1:-1)}function Ra(e){var t=wa.querySelector(".fl-layout-overlay-message");if(e){wa.style.display="block";var n="string"==typeof e?e:ga;t.innerHTML=n}else t.textContent="",wa.style.display="none"}function Ua(){return wa}let $a;function Wa(){$a&&Va(),$a=Si(this.getWrapper(),"fl-layout-svg-screenshot-container"),$a.addTextElements("#fl-layout-header-container h1"),$a.addTextElements("#fl-layout-header-container h2"),$a.addTextElements("#fl-layout-header-container p"),$a.addTextElements("#fl-layout-footer .flourish-footer-text")}function Va(){$a.remove(),$a=null}function Ga(e){for(var t in ma=e,ba)void 0===ma[t]&&(ma[t]=ba[t]);return(Ni=document.createElement("style")).id="flourish-page-styles",Ni.type="text/css",document.head.appendChild(Ni),Ma.wrapper=function(){var e=document.createElement("div");e.id="fl-layout-wrapper-outer",e.style.display="flex";var t=document.createElement("main");t.id="fl-layout-wrapper",t.style.display="flex",t.style.flexGrow="1",t.style.flexDirection="column",t.style.boxSizing="border-box",t.style.overflow="hidden";var n=document.createElement("aside");return n.id="fl-layout-sidebar",n.style.position="relative",Ma.sidebar=n,e.appendChild(t),e.appendChild(n),document.body.appendChild(e),t}(),ka.forEach((function(e,t){Ma[e]=Ea(e,t)})),Sa("header").appendChild(function(){(Wi=document.createElement("header")).className="flourish-header";var e=document.createElement("hgroup");return Vi=document.createElement("h1"),Gi=document.createElement("h2"),Xi=document.createElement("p"),(Zi=document.createElement("div")).className="clearfix",(Ji=document.createElement("div")).className="flourish-header-logo-container",Wi.appendChild(Ji),Wi.appendChild(e),e.appendChild(Vi),e.appendChild(Gi),Wi.appendChild(Xi),Wi.appendChild(Zi),Wi}()),Sa("footer").appendChild(da()),Ma.primary.outer.style.overflow="hidden",function(){var e=Ma.primary.outer;e.style.position="relative",(wa=document.createElement("div")).id="fl-layout-overlay";var t=wa.style;t.position="absolute",t.display="none",t.width="100%",t.height="100%",t.top=0,t.left=0,t.backgroundColor="rgb(200,200,200)",t.zIndex=999999,t.pointerEvents="none";var n=document.createElement("p");n.className="fl-layout-overlay-message",(t=n.style).color="#333333",t.fontSize="1.5rem",t.paddingLeft="15%",t.paddingRight="15%",t.width="100%",t.boxSizing="border-box",t.position="absolute",t.top="50%",t.transform="translate(0, -50%)",t.margin="0",t.textAlign="center",wa.appendChild(n),e.appendChild(wa)}(),{update:ya,getWrapper:Ca,getSidebar:Ta,getSection:Sa,getOuterWidth:Na,getInnerWidth:La,getOuterHeight:Fa,getInnerHeight:Oa,getPrimaryHeight:Pa,getPrimaryWidth:Da,getDefaultPrimaryHeight:Ba,setHeight:Ha,setLegendPosition:Ia,showOverlay:Ra,remToPx:oa,getOverlay:Ua,awaitFonts:va,prepareScreenshotSVG:Wa,clearScreenshotSVG:Va}}var Xa,Za,Ja={aggregation_type:"Sum",hierarchy_layout:"treemap",color:{},stroke_color:null,label_color:null,axis_label_color:null,radial_tree_link_color:"#dddddd",legend_mode:"off",legend_container:{},legend_categorical:{title_mode:"custom",max_width:100},legend_position:"above",cellPadding:"low",num_of_visible_levels:2,auto_set_height:!0,treemap_aspect_ratio_narrow:100,treemap_aspect_ratio_normal:66,responsive_narrow_breakpoint:500,label_size:1,min_label_size:.5,max_label_size:1.5,label_padding:.3,multi_line_labels:!0,label_case:"topUpperCase",label_weight:"topBold",show_value_labels:!1,value_label_relative_size:.75,value_label_bold:!0,sort_by:"value",treemap_type:"treemapBinary",treemap_ratio:2,sunburst_inner_radius:33,sunburst_outer_radius:100,sunburst_show_zoomed_node_in_center:!0,sunburst_depth_fade:.75,sunburst_labelling:"auto",bar_min_bar_thickness:30,bar_max_bar_thickness:50,bar_bar_padding:10,bar_axis_label_size:1,bar_axis_labels_above:!0,bar_max_value:null,bar_axis_label_space:8,bar_value_label_space:6,radial_tree_outer_radius:60,radial_tree_bar_length:20,radial_tree_bar_width:40,radial_tree_rotation:0,radial_tree_show_values:!0,popup:{},popup_show_title:!1,popup_separator:">",popup_title:"",popup_hide_value:!1,popup_active_levels:"all_levels",filter:null,size_by:null,controls_container:{},filter_control:{},filter_control_visibility:"always",size_by_control:{},size_by_control_visibility:"always",controls_padding:0,filter_include_all:!0,filter_all_label:"All",controls_style:{},dropdown_style:{},button_style:{},slider_style:{},ascend_button_visibility:"always",animation_duration:1,zoom_out_button_color:"#f3f3f3",zoom_out_arrow_color:"#000000",zoomed_node_id:null,localization:{},number_formatter:{},layout:{},url_state:{}};function Qa(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var Ka,eo,to=(1===(Ka=Qa).length&&(eo=Ka,Ka=function(e,t){return Qa(eo(e),t)}),{left:function(e,t,n,r){for(null==n&&(n=0),null==r&&(r=e.length);n<r;){var i=n+r>>>1;Ka(e[i],t)<0?n=i+1:r=i}return n},right:function(e,t,n,r){for(null==n&&(n=0),null==r&&(r=e.length);n<r;){var i=n+r>>>1;Ka(e[i],t)>0?r=i:n=i+1}return n}}).right;function no(e){return null===e?NaN:+e}function ro(e,t){var n,r,i,a=e.length,o=-1;if(null==t){for(;++o<a;)if(null!=(n=e[o])&&n>=n)for(r=i=n;++o<a;)null!=(n=e[o])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++o<a;)if(null!=(n=t(e[o],o,e))&&n>=n)for(r=i=n;++o<a;)null!=(n=t(e[o],o,e))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]}function io(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),a=new Array(i);++r<i;)a[r]=e+r*n;return a}var ao=Math.sqrt(50),oo=Math.sqrt(10),lo=Math.sqrt(2);function so(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=ao?10:a>=oo?5:a>=lo?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=ao?10:a>=oo?5:a>=lo?2:1)}function co(e,t,n){if(null==n&&(n=no),r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e);return o+(+n(e[a+1],a+1,e)-o)*(i-a)}}function uo(e,t){var n,r,i=e.length,a=-1;if(null==t){for(;++a<i;)if(null!=(n=e[a])&&n>=n)for(r=n;++a<i;)null!=(n=e[a])&&n>r&&(r=n)}else for(;++a<i;)if(null!=(n=t(e[a],a,e))&&n>=n)for(r=n;++a<i;)null!=(n=t(e[a],a,e))&&n>r&&(r=n);return r}var fo="0.2em";function po(e){return e*parseFloat(getComputedStyle(document.documentElement).fontSize)}var ho=0,_o=Object.freeze({show_legend:!0,title_mode:"auto",title:"",max_width:25,swatch_width:.75,swatch_height:1,swatch_radius:3,legend_items_padding:.5,icon_height:1,icon_color:"#777777",icon_fill_opacity:1,icon_stroke_opacity:1,order_override:"",orientation:"horizontal"});function yo(e){for(var t in this._state=e,_o)void 0===this._state[t]&&(this._state[t]=_o[t]);return this._colorFunction=void 0,this._formatFunction=void 0,this._legend_items=[],this._filtered_items=[],this._eventListeners=[],this._id="fl-legend-discrete-color-"+ho,this._visible=!0,this._auto_title="",this._container=ue(document.createElement("div")).attr("class","fl-legend-container").attr("id",this._id),this._container.append("p").attr("class","fl-legend-title"),ho++,this}function bo(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function mo(e,t){switch(arguments.length){case 0:break;case 1:this.interpolator(e);break;default:this.interpolator(t).domain(e)}return this}yo.prototype.appendTo=function(e){if(e.appendChild(this._container.node()),!document.querySelector("#legend-styles")){var t=document.createElement("style"),n=new Qn;n.select(".fl-legend-container.interactive .fl-legend-item:hover").style("opacity",.75).style("cursor","pointer"),t.id="legend-styles",t.type="text/css",t.innerHTML=n.print(),document.head.appendChild(t)}return this},yo.prototype.format=function(e){return this._formatFunction=e,this},yo.prototype.getContainer=function(){return this._container},yo.prototype.visible=function(e){return void 0===e?this._visible:(this._visible=e,this)},yo.prototype.autoTitle=function(e){return void 0===e?this._auto_title:(this._auto_title=e,this)},yo.prototype._updateTitle=function(){var e=this,t="auto"==e._state.title_mode?e.autoTitle():e._state.title;this._container.select(".fl-legend-title").text(t).style("display",(function(){return t.trim()?void 0===e._state.orientation||"horizontal"==e._state.orientation?"inline-block":"block":"none"})).style("padding-inline-start",0).style("padding-inline-end",fo)},yo.prototype.data=function(e,t){return this._colorFunction=t,e||t?(t?Array.isArray(e)?this._legend_items=e.slice().map((function(e,n){var r="object"==typeof e?e.label||"":e;return r?{label:r,color:t(r),index:n}:null})).filter((function(e){return null!==e})):this._legend_items=[]:this._legend_items=Array.isArray(e)?e.slice():[],this):this._legend_items.slice()},yo.prototype.filtered=function(e){return e?(this._filtered_items=Array.isArray(e)?e.slice():[],this):this._filtered_items.slice()},yo.prototype.on=function(e,t){return this._container?(t&&this._eventListeners.indexOf(e)<0?this._eventListeners.push(e):t||this._eventListeners.splice(this._eventListeners.indexOf[e],1),this._container.classed("interactive",this._eventListeners.length>0),t?this._container.on(e,(function(){var e=K.target,n=e.parentNode,r=e.classList.contains("fl-legend-item")?e:n.classList.contains("fl-legend-item")?n:null;if(r){var i=ue(r).datum();t.call(r,i,i.index)}})):this._container.on(e,null),this):this},yo.prototype.update=function(){var e=this._state.show_legend&&this._visible&&this._legend_items.length>0;return this._container.style("display",e?"":"none"),e?(this._updateTitle(),this._updateLegend(),this):this},yo.prototype._updateLegend=function(){var e,t=this,n=this._formatFunction;this._container.style("max-width",po(this._state.max_width)+"px").style("display","inline-flex").style("flex-wrap","wrap").style("align-items","horizontal"==this._state.orientation?"center":"start").style("align-content","horizontal"==this._state.orientation?"center":null).style("flex-direction","horizontal"==this._state.orientation?null:"column"),e=this._state.order_override.trim()?function(e,t){for(var n={},r=t.split(/\s*\n\s*/),i=0;i<r.length;i++)n[r[i]]=i;for(var a=[],o=0;o<e.length;o++){var l=e[o],s=n[l.label];void 0!==s&&(a[s]=l)}return a.filter((function(e){return void 0!==e}))}(this._legend_items,this._state.order_override):this._legend_items;var r=this._container.selectAll(".fl-legend-item").data(e),i=r.enter().append("div").attr("class","fl-legend-item");i.append("div").attr("class","fl-legend-swatch"),i.append("svg").attr("class","fl-legend-icon fl-ignore-svg-download").append("path"),i.append("p").attr("class","fl-legend-label");var a=r.merge(i);return a.style("display","horizontal"==this._state.orientation?"inline-flex":"flex").style("flex-direction",(function(e){return e.reverse?"row-reverse":"row"})).style("opacity",(function(e){return t._filtered_items.indexOf(e.label)>-1?.2:""})).style("align-items","center").style("padding-inline-end","horizontal"==this._state.orientation?this._state.legend_items_padding+"rem":0).style("padding-inline-start",0),a.select(".fl-legend-swatch").style("height",this._state.swatch_height+"rem").style("width",this._state.swatch_width+"rem").style("border-radius",this._state.swatch_radius+"px").style("background-color",(function(e){return e.color})).style("display",(function(e){return e.icon?"none":null})),a.select(".fl-legend-icon").attr("height",Math.ceil(po(this._state.icon_height))).attr("width",(function(e){if(!e.icon)return 0;var n=e.icon.width,r=e.icon.height,i=e.outline?r*e.stroke_thickness:0,a=(n+=i)/(r+=i),o=po(t._state.icon_height*a);return Math.ceil(o)})).style("margin-right",.25*this._state.text_size+"rem").style("display",(function(e){return e.icon?"inline-block":"none"})).select("path").attr("d",(function(e){return e.icon?e.icon.path_string:null})).attr("transform",(function(e){if(!e.icon)return null;var n=e.icon.height,r=e.outline?n*e.stroke_thickness:0;n+=r;var i="scale("+po(t._state.icon_height)/n+")";return i+="translate("+.5*r+","+.5*r+")"})).style("fill",(function(e){return e.outline?"none":e.fill||e.color||t._state.icon_color})).style("fill-opacity",(function(e){return e.outline?0:e.fill_opacity||t._state.icon_fill_opacity})).style("stroke",(function(e){return e.outline||e.stroke?e.stroke||e.color||t._state.icon_color:"none"})).style("stroke-width",(function(e){if(!e.outline&&!e.stroke_width)return 0;var t=e.icon.height*e.stroke_thickness;return e.stroke_width||t})).style("stroke-opacity",(function(e){return e.outline||e.stroke_opacity?e.stroke_opacity||t.state.icon_stroke_opacity:0})),a.select(".fl-legend-label").text((function(e){return n?n(e.label):e.label})).style("margin",0).style("user-select","none").style("padding-inline-end",0).style("padding-inline-start",fo),r.exit().remove(),this._legend_item_els=a,this},yo.prototype.prepareScreenshotSVG=function(){this._state.show_legend&&this._visible&&this._legend_items.length&&Si("#fl-layout-wrapper",this._id+"-svg-screenshot-container").addTextElements(".fl-legend-title").addCircleElements(".fl-legend-swatch").addTextElements(".fl-legend-label")},yo.prototype.clearScreenshotSVG=function(){const e=document.getElementById(this._id+"-svg-screenshot-container");e&&e.remove()};var go=Array.prototype,vo=go.map,xo=go.slice;function wo(e){return function(){return e}}function ko(e,t){return function(n){return e+n*t}}function Mo(e,t){var n=t-e;return n?ko(e,n>180||n<-180?n-360*Math.round(n/360):n):wo(isNaN(e)?t:e)}function zo(e){return 1==(e=+e)?Ao:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):wo(isNaN(t)?n:t)}}function Ao(e,t){var n=t-e;return n?ko(e,n):wo(isNaN(e)?t:e)}var Eo=function e(t){var n=zo(t);function r(e,t){var r=n((e=Mr(e)).r,(t=Mr(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),o=Ao(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);var Co,To=(Co=function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1],o=r>0?e[r-1]:2*i-a,l=r<t-1?e[r+2]:2*a-i;return function(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}((n-r/t)*t,o,i,a,l)}},function(e){var t,n,r=e.length,i=new Array(r),a=new Array(r),o=new Array(r);for(t=0;t<r;++t)n=Mr(e[t]),i[t]=n.r||0,a[t]=n.g||0,o[t]=n.b||0;return i=Co(i),a=Co(a),o=Co(o),n.opacity=1,function(e){return n.r=i(e),n.g=a(e),n.b=o(e),n+""}});function So(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(a){for(n=0;n<r;++n)i[n]=e[n]*(1-a)+t[n]*a;return i}}function No(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=Bo(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<i;++n)o[n]=a[n](e);return o}}function Lo(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Fo(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Oo(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=Bo(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var Po=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Do=new RegExp(Po.source,"g");function jo(e,t){var n,r,i,a=Po.lastIndex=Do.lastIndex=0,o=-1,l=[],s=[];for(e+="",t+="";(n=Po.exec(e))&&(r=Do.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(r=r[0])?l[o]?l[o]+=r:l[++o]=r:(l[++o]=null,s.push({i:o,x:Fo(n,r)})),a=Do.lastIndex;return a<t.length&&(i=t.slice(a),l[o]?l[o]+=i:l[++o]=i),l.length<2?s[0]?function(e){return function(t){return e(t)+""}}(s[0].x):function(e){return function(){return e}}(t):(t=s.length,function(e){for(var n,r=0;r<t;++r)l[(n=s[r]).i]=n.x(e);return l.join("")})}function Bo(e,t){var n,r,i=typeof t;return null==t||"boolean"===i?wo(t):("number"===i?Fo:"string"===i?(n=vr(t))?(t=n,Eo):jo:t instanceof vr?Eo:t instanceof Date?Lo:(r=t,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(t)?No:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Oo:Fo:So))(e,t)}function qo(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Yo,Ho,Io,Ro,Uo=180/Math.PI,$o={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Wo(e,t,n,r,i,a){var o,l,s;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,s/=l),e*r<t*n&&(e=-e,t=-t,s=-s,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*Uo,skewX:Math.atan(s)*Uo,scaleX:o,scaleY:l}}function Vo(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(a,o){var l=[],s=[];return a=e(a),o=e(o),function(e,r,i,a,o,l){if(e!==i||r!==a){var s=o.push("translate(",null,t,null,n);l.push({i:s-4,x:Fo(e,i)},{i:s-2,x:Fo(r,a)})}else(i||a)&&o.push("translate("+i+t+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,l,s),function(e,t,n,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Fo(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(a.rotate,o.rotate,l,s),function(e,t,n,a){e!==t?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Fo(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(a.skewX,o.skewX,l,s),function(e,t,n,r,a,o){if(e!==n||t!==r){var l=a.push(i(a)+"scale(",null,",",null,")");o.push({i:l-4,x:Fo(e,n)},{i:l-2,x:Fo(t,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,l,s),a=o=null,function(e){for(var t,n=-1,r=s.length;++n<r;)l[(t=s[n]).i]=t.x(e);return l.join("")}}}var Go=Vo((function(e){return"none"===e?$o:(Yo||(Yo=document.createElement("DIV"),Ho=document.documentElement,Io=document.defaultView),Yo.style.transform=e,e=Io.getComputedStyle(Ho.appendChild(Yo),null).getPropertyValue("transform"),Ho.removeChild(Yo),Wo(+(e=e.slice(7,-1).split(","))[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}),"px, ","px)","deg)"),Xo=Vo((function(e){return null==e?$o:(Ro||(Ro=document.createElementNS("http://www.w3.org/2000/svg","g")),Ro.setAttribute("transform",e),(e=Ro.transform.baseVal.consolidate())?Wo((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):$o)}),", ",")",")");var Zo=function(e){return function(t,n){var r=e((t=Nr(t)).h,(n=Nr(n)).h),i=Ao(t.s,n.s),a=Ao(t.l,n.l),o=Ao(t.opacity,n.opacity);return function(e){return t.h=r(e),t.s=i(e),t.l=a(e),t.opacity=o(e),t+""}}}(Mo);function Jo(e,t){var n=Ao((e=Ur(e)).l,(t=Ur(t)).l),r=Ao(e.a,t.a),i=Ao(e.b,t.b),a=Ao(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=r(t),e.b=i(t),e.opacity=a(t),e+""}}var Qo=function(e){return function(t,n){var r=e((t=Zr(t)).h,(n=Zr(n)).h),i=Ao(t.c,n.c),a=Ao(t.l,n.l),o=Ao(t.opacity,n.opacity);return function(e){return t.h=r(e),t.c=i(e),t.l=a(e),t.opacity=o(e),t+""}}}(Mo);function Ko(e){return function t(n){function r(t,r){var i=e((t=li(t)).h,(r=li(r)).h),a=Ao(t.s,r.s),o=Ao(t.l,r.l),l=Ao(t.opacity,r.opacity);return function(e){return t.h=i(e),t.s=a(e),t.l=o(Math.pow(e,n)),t.opacity=l(e),t+""}}return n=+n,r.gamma=t,r}(1)}Ko(Mo);var el=Ko(Ao);function tl(e){return+e}var nl=[0,1];function rl(e){return e}function il(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function al(e){var t,n=e[0],r=e[e.length-1];return n>r&&(t=n,n=r,r=t),function(e){return Math.max(n,Math.min(r,e))}}function ol(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=il(i,r),a=n(o,a)):(r=il(r,i),a=n(a,o)),function(e){return a(r(e))}}function ll(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=il(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(t){var n=to(e,t,1,r)-1;return a[n](i[n](t))}}function sl(e,t){return function(){var e,t,n,r,i,a,o=nl,l=nl,s=Bo,c=rl;function u(){return r=Math.min(o.length,l.length)>2?ll:ol,i=a=null,d}function d(t){return isNaN(t=+t)?n:(i||(i=r(o.map(e),l,s)))(e(c(t)))}return d.invert=function(n){return c(t((a||(a=r(l,o.map(e),Fo)))(n)))},d.domain=function(e){return arguments.length?(o=vo.call(e,tl),c===rl||(c=al(o)),u()):o.slice()},d.range=function(e){return arguments.length?(l=xo.call(e),u()):l.slice()},d.rangeRound=function(e){return l=xo.call(e),s=qo,u()},d.clamp=function(e){return arguments.length?(c=e?al(o):rl,d):c!==rl},d.interpolate=function(e){return arguments.length?(s=e,u()):s},d.unknown=function(e){return arguments.length?(n=e,d):n},function(n,r){return e=n,t=r,u()}}()(e,t)}function cl(e,t,n,r){var i,a=function(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=ao?i*=10:a>=oo?i*=5:a>=lo&&(i*=2),t<e?-i:i}(e,t,n);switch((r=kn(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(vn(t)/3)))-vn(Math.abs(e)))}(a,o))||(r.precision=i),Sn(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,vn(t)-vn(e))+1}(a,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(e){return Math.max(0,-vn(Math.abs(e)))}(a))||(r.precision=i-2*("%"===r.type))}return Tn(r)}function ul(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){var r,i,a,o,l=-1;if(n=+n,(e=+e)==(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(o=so(e,t,n))||!isFinite(o))return[];if(o>0)for(e=Math.ceil(e/o),t=Math.floor(t/o),a=new Array(i=Math.ceil(t-e+1));++l<i;)a[l]=(e+l)*o;else for(e=Math.floor(e*o),t=Math.ceil(t*o),a=new Array(i=Math.ceil(e-t+1));++l<i;)a[l]=(e-l)/o;return r&&a.reverse(),a}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return cl(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i=t(),a=0,o=i.length-1,l=i[a],s=i[o];return s<l&&(r=l,l=s,s=r,r=a,a=o,o=r),(r=so(l,s,n))>0?r=so(l=Math.floor(l/r)*r,s=Math.ceil(s/r)*r,n):r<0&&(r=so(l=Math.ceil(l*r)/r,s=Math.floor(s*r)/r,n)),r>0?(i[a]=Math.floor(l/r)*r,i[o]=Math.ceil(s/r)*r,t(i)):r<0&&(i[a]=Math.ceil(l*r)/r,i[o]=Math.floor(s*r)/r,t(i)),e},e}function dl(){var e=sl(rl,rl);return e.copy=function(){return t=e,dl().domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown());var t},bo.apply(e,arguments),ul(e)}function fl(){var e,t=[],n=[],r=[];function i(){var e=0,i=Math.max(1,n.length);for(r=new Array(i-1);++e<i;)r[e-1]=co(t,e/i);return a}function a(t){return isNaN(t=+t)?e:n[to(r,t)]}return a.invertExtent=function(e){var i=n.indexOf(e);return i<0?[NaN,NaN]:[i>0?r[i-1]:t[0],i<r.length?r[i]:t[t.length-1]]},a.domain=function(e){if(!arguments.length)return t.slice();t=[];for(var n,r=0,a=e.length;r<a;++r)null==(n=e[r])||isNaN(n=+n)||t.push(n);return t.sort(Qa),i()},a.range=function(e){return arguments.length?(n=xo.call(e),i()):n.slice()},a.unknown=function(t){return arguments.length?(e=t,a):e},a.quantiles=function(){return r.slice()},a.copy=function(){return fl().domain(t).range(n).unknown(e)},bo.apply(a,arguments)}function pl(){var e,t=0,n=1,r=1,i=[.5],a=[0,1];function o(t){return t<=t?a[to(i,t,0,r)]:e}function l(){var e=-1;for(i=new Array(r);++e<r;)i[e]=((e+1)*n-(e-r)*t)/(r+1);return o}return o.domain=function(e){return arguments.length?(t=+e[0],n=+e[1],l()):[t,n]},o.range=function(e){return arguments.length?(r=(a=xo.call(e)).length-1,l()):a.slice()},o.invertExtent=function(e){var o=a.indexOf(e);return o<0?[NaN,NaN]:o<1?[t,i[0]]:o>=r?[i[r-1],n]:[i[o-1],i[o]]},o.unknown=function(t){return arguments.length?(e=t,o):o},o.thresholds=function(){return i.slice()},o.copy=function(){return pl().domain([t,n]).range(a).unknown(e)},bo.apply(ul(o),arguments)}function hl(){var e,t=[.5],n=[0,1],r=1;function i(i){return i<=i?n[to(t,i,0,r)]:e}return i.domain=function(e){return arguments.length?(t=xo.call(e),r=Math.min(t.length,n.length-1),i):t.slice()},i.range=function(e){return arguments.length?(n=xo.call(e),r=Math.min(t.length,n.length-1),i):n.slice()},i.invertExtent=function(e){var r=n.indexOf(e);return[t[r-1],t[r]]},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return hl().domain(t).range(n).unknown(e)},bo.apply(i,arguments)}function _l(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function yl(){var e=ul(function(){var e,t,n,r,i,a=0,o=1,l=rl,s=!1;function c(t){return isNaN(t=+t)?i:l(0===n?.5:(t=(r(t)-e)*n,s?Math.max(0,Math.min(1,t)):t))}return c.domain=function(i){return arguments.length?(e=r(a=+i[0]),t=r(o=+i[1]),n=e===t?0:1/(t-e),c):[a,o]},c.clamp=function(e){return arguments.length?(s=!!e,c):s},c.interpolator=function(e){return arguments.length?(l=e,c):l},c.unknown=function(e){return arguments.length?(i=e,c):i},function(i){return r=i,e=i(a),t=i(o),n=e===t?0:1/(t-e),c}}()(rl));return e.copy=function(){return _l(e,yl())},mo.apply(e,arguments)}function bl(){var e=ul(function(){var e,t,n,r,i,a,o,l=0,s=.5,c=1,u=rl,d=!1;function f(e){return isNaN(e=+e)?o:(e=.5+((e=+a(e))-t)*(e<t?r:i),u(d?Math.max(0,Math.min(1,e)):e))}return f.domain=function(o){return arguments.length?(e=a(l=+o[0]),t=a(s=+o[1]),n=a(c=+o[2]),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),f):[l,s,c]},f.clamp=function(e){return arguments.length?(d=!!e,f):d},f.interpolator=function(e){return arguments.length?(u=e,f):u},f.unknown=function(e){return arguments.length?(o=e,f):o},function(o){return a=o,e=o(l),t=o(s),n=o(c),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),f}}()(rl));return e.copy=function(){return _l(e,bl())},mo.apply(e,arguments)}Object.freeze({show_legend:!0,title_mode:"auto",title:"",color_band_width:8,color_band_height:1,color_band_radius:3,binned_label_mode:"thresholds",binned_label_custom:"",legend_min:null,legend_max:null,additional_min_label:"",additional_max_label:""}),Object.freeze({show_legend:!0,title_mode:"auto",title:"",clip_height:1,small_symbol_size:.5,shape_fill:"#eeeeee",shape_stroke:"#555555"});var ml,gl,vl,xl,wl=Object.freeze({alignment:"start",orientation:"horizontal",text_color:null,title_weight:"bold",text_weight:"normal",text_size:1});function kl(e){for(var t in this._state=e,wl)void 0===this._state[t]&&(this._state[t]=wl[t]);return this}function Ml(){return this.declarations=[],this}function zl(e){return this.selector=e,this.styles=[],this}kl.prototype.appendTo=function(e){return this._container=ue(e).append("div").node(),this},kl.prototype.add=function(e){this._legends=Array.isArray(e)?e:[e];var t=this;return this._legends.forEach((function(e){e&&"function"==typeof e.appendTo?e.appendTo(t._container):console.warn("Please pass in valid legend instances into .add()")})),this},kl.prototype.update=function(){var e=window.template||void 0,t=e?e.state.layout:void 0;gl=this._state.text_color||e&&t&&t.font_color||"#333333",vl=t?t.body_font.name:window.getComputedStyle(document.body).fontFamily,ml=this._state.text_size,xl=this._state.text_weight;var n={family:vl,weight:xl,size:ml,color:gl};this._legends.forEach((function(e){e&&"function"==typeof e.update&&e.update(n)}));var r="horizontal"===this._state.orientation,i=this._state.alignment,a="center"==i?i:"flex-"+i;return ue(this._container).style("justify-content",r?a:null).style("align-items",r?null:a).style("display","flex").style("flex-direction",r?"row":"column"),ue(this._container).selectAll(".fl-legend-container").style("padding-inline-end",(function(){return r?"0.5rem":0})).style("padding-bottom",(function(){return r?0:"0.25rem"})).style("justify-content",a),ue(this._container).selectAll(".fl-legend-title").style("color",this._state.text_color).style("font-weight",this._state.title_weight).style("font-size",ml+"rem").style("margin-right",.25*ml+"rem").style("line-height","1.25em").style("margin-top",0).style("margin-bottom",0).style("text-align",i),ue(this._container).selectAll(".fl-legend-item").style("display","inline-flex").style("text-align",i),ue(this._container).selectAll(".fl-legend-label").style("color",this._state.text_color).style("font-weight",this._state.text_weight).style("font-size",ml+"rem"),ue(this._container).selectAll(".label").style("color",this._state.text_color).style("font-weight",this._state.text_weight).style("font-size",ml+"rem"),this},Ml.prototype.select=function(e){if(!e)return this;var t=new zl(e);return t.parent=this,this.addDeclaration(t),t},Ml.prototype.addDeclaration=function(e){return this.declarations.push(e),this},Ml.prototype.print=function(){var e="";return this.declarations.forEach((function(t){e+=t.selector+" {\n",t.styles.forEach((function(t){e+="\t"+t[0]+": "+t[1]+";\n"})),e+="}\n\n"})),e},Ml.prototype.clear=function(){return this.declarations=[],this},zl.prototype.style=function(e,t){var n="function"==typeof value_?t():t;return""!==n&&null!=n&&this.styles.push([e,n]),this},zl.prototype.select=function(e){return this.parent.select(this.selector+" "+e)};var Al=Object.freeze({font_size:1,font_weight:"bold",height:2});function El(e,t,n){for(var r in this._state=e,Al)void 0===this._state[r]&&(this._state[r]=Al[r]);return this._layout=n||{},this._styles=new Ml,this._selector=t,this._createStylesheet(),this}El.prototype._createStylesheet=function(){this._stylesheet=document.createElement("style"),this._stylesheet.className="fl-ui-styles-controls",document.head.appendChild(this._stylesheet)},El.prototype.update=function(){this._styles.clear(),this._styles.select(this._selector+".hidden").style("display","none"),this._styles.select(this._selector).style("vertical-align","middle").style("position","relative").style("font-size",this._state.font_size+"rem").style("font-weight",this._state.font_weight),this._styles.select(".fl-controls-title").style("font-size",this._state.font_size+"rem").style("font-weight",this._state.font_weight).style("vertical-align","middle"),this._styles.select(this._selector+".fl-control .button").style("height",this._state.height+"rem").style("padding","0 0.5em"),this._styles.select(this._selector+"-dropdown select").style("height",this._state.height+"rem").style("font-size",this._state.font_size+"rem").style("font-weight",this._state.font_weight).style("padding","0 "+.1*this._state.height+"rem"),this._styles.select(this._selector+"-slider .slider-end-labels").style("font-size",this._state.font_size+"rem").style("font-weight",this._state.font_weight),this._styles.select(this._selector+"-slider").style("height",this._state.height+"rem"),this._stylesheet.innerHTML=this._styles.print()};var Cl=Object.freeze({background:null,font_color:null,background_selected:"#333333",font_color_selected:"#ffffff",background_hover:null,font_color_hover:null,border_width:1,border_transparency:.25,border_color:null,border_radius:3});function Tl(e,t,n){for(var r in this._state=e,Cl)void 0===this._state[r]&&(this._state[r]=Cl[r]);return this._layout=n||{},this._styles=new Ml,this._selector=t,this._createStylesheet(),this}Tl.prototype._createStylesheet=function(){this._stylesheet=document.createElement("style"),this._stylesheet.className="fl-ui-styles-button",document.head.appendChild(this._stylesheet)},Tl.prototype.update=function(){this._styles.clear();var e=this._state.background||this._layout.background_color_enabled&&this._layout.background_color||"#ffffff",t=this._state.font_color||this._layout.font_color||"#333333",n=qi(this._state.border_color||t,this._state.border_transparency),r=ji();this._styles.select(this._selector+".fl-control.hidden").style("display","none"),this._styles.select(this._selector+".fl-control .button").style("overflow","hidden").style("white-space","nowrap").style("margin","0 2px 0 0 !important").style("background-color",e).style("color",t).style("border",this._state.border_width+"px solid "+n).style("border-radius",this._state.border_radius+"px"),this._styles.select(this._selector+".fl-control .button:hover").style("background-color",this._state.background_hover||e).style("color",this._state.font_color_hover||t),this._styles.select(this._selector+".fl-control .button.selected").style("background-color",this._state.background_selected).style("color",this._state.font_color_selected),this._styles.select(this._selector+".grouped.fl-control .button").style("border-right","none").style("border-radius","0").style("margin","0");var i="rtl"===r,a=i?":last-child":":first-child",o=i?":first-child":":last-child";this._styles.select(this._selector+".grouped.fl-control .button"+a).style("border-radius",this._state.border_radius+"px 0 0 "+this._state.border_radius+"px"),this._styles.select(this._selector+".grouped.fl-control .button"+o).style("border-radius","0 "+this._state.border_radius+"px "+this._state.border_radius+"px 0").style("border-right",this._state.border_width+"px solid "+n),this._styles.select(this._selector+".grouped.fl-control.fixed-width:not(.hidden)").style("width",this._state.grouped_width+"%"),this._stylesheet.innerHTML=this._styles.print()};var Sl=Object.freeze({background:null,font_color:null,border_style:"bottom",border_width:1,border_color:null,border_transparency:.25,border_radius:3});function Nl(e,t,n){for(var r in this._state=e,Sl)void 0===this._state[r]&&(this._state[r]=Sl[r]);return this._layout=n||{},this._styles=new Ml,this._selector=t,this._createStylesheet(),this}function Ll(e){return e*parseFloat(getComputedStyle(document.documentElement).fontSize)}Nl.prototype._createStylesheet=function(){this._stylesheet=document.createElement("style"),this._stylesheet.className="fl-ui-styles-dropdown",document.head.appendChild(this._stylesheet)},Nl.prototype.update=function(){this._styles.clear();var e=this._state.background||this._layout.background_color_enabled&&this._layout.background_color||"#ffffff",t=this._state.font_color||this._layout.font_color||"#333333",n=qi(this._state.border_color||t,this._state.border_transparency);this._styles.select(this._selector+" .heading").style("margin-bottom","0.4em"),this._styles.select(this._selector).style("pointer-events","all"),this._styles.select(this._selector+" select").style("display","inline-block").style("cursor","pointer").style("overflow","hidden").style("white-space","nowrap").style("position","relative").style("font-family","inherit").style("background-color",e).style("color",t).style("border","bottom"==this._state.border_style?this._state.border_width+"px solid transparent":this._state.border_width+"px solid "+n).style("border-bottom","bottom"==this._state.border_style?this._state.border_width+"px solid "+n:null).style("border-radius","bottom"==this._state.border_style?null:this._state.border_radius+"px"),this._styles.select(this._selector+":after").style("right","bottom"==this._state.border_style?null:this._state.border_width+5+"px").style("color",t),this._styles.select(this._selector+" .main .current").style("line-height","1em").style("height","100%").style("max-width","88%").style("display","inline-block").style("overflow","hidden").style("vertical-align","top"),this._styles.select(this._selector+" .list").style("top","2px").style("min-width","100%").style("padding","2px").style("display","none").style("max-height","200px").style("overflow-y","auto").style("box-shadow","0 1px 4px rgba(0, 0, 0, .1)").style("margin-top","2px").select(".list-item").style("line-height","1em").style("cursor","pointer").style("font-weight","normal").style("color",t),this._styles.select(this._selector+".open .list").style("display","block").style("border",this._state.border_width+"px solid "+n).style("background-color",e).style("z-index","1").style("animation","dropdown-out 200ms"),this._styles.select(this._selector+" .list-item:hover").style("opacity","0.6"),this._styles.select(this._selector+" .list-item.selected, "+this._selector+" .list-item.selected:hover").style("opacity","1").style("cursor","default"),"bottom"==this._state.border_style&&this._styles.select(this._selector+" .main").style("padding-left",0).style("padding-right","0.1rem"),this._stylesheet.innerHTML=this._styles.print()};var Fl=Object.freeze({play_color:null,handle_color:null,font_color:null,track_color:null,handle_height:1,track_height:.2,margin:4.5,play_button:!0});function Ol(e,t,n){for(var r in this._state=e,Fl)void 0===this._state[r]&&(this._state[r]=Fl[r]);return this._layout=n||{},this._styles=new Ml,this._selector=t,this._createStylesheet(),this}Ol.prototype._createStylesheet=function(){this._stylesheet=document.createElement("style"),this._stylesheet.className="fl-ui-styles-slider",document.head.appendChild(this._stylesheet)},Ol.prototype.update=function(){this._styles.clear();var e=this._state.track_color||"#dddddd",t=this._state.font_color||this._layout.font_color||"currentColor",n=this._state.handle_color||this._layout.font_color||"currentColor",r=this._state.play_color||this._layout.font_color||"currentColor",i=Math.round(Ll(this._state.handle_height)),a=Ll(this._state.track_height);this._styles.select(this._selector+" .fl-controls-slider").style("height",2*i+"px"),this._styles.select(this._selector+" .slider-play").style("fill",r).style("width",i+"px").style("height",i+"px").style("display",this._state.play_button?null:"none"),this._styles.select(this._selector+" .slider-label").style("padding-inline-start","0.3rem").style("color",t),this._styles.select(this._selector+" input[type=range]").style("-webkit-appearance","none").style("color","currentColor").style("background-color","transparent"),this._styles.select(this._selector+" input[type=range]::-webkit-slider-runnable-track").style("-webkit-appearance","none").style("background",e).style("border-radius","100px").style("height",a+"px"),this._styles.select(this._selector+" input[type=range]::-webkit-slider-thumb").style("-webkit-appearance","none").style("width",i+"px").style("height",i+"px").style("border-radius","100px").style("background",n).style("margin-top",-i/2+a/2+"px"),this._styles.select(this._selector+" input[type=range]::-moz-range-track").style("-webkit-appearance","none").style("background",e).style("border-radius","100px").style("height",a+"px"),this._styles.select(this._selector+" input[type=range]::-moz-range-thumb").style("-webkit-appearance","none").style("width",i+"px").style("height",i+"px").style("border-radius","100px").style("border","none").style("background",n),this._stylesheet.innerHTML=this._styles.print()};var Pl=Object.freeze({input_decimal_separator:".",output_separators:",."});function Dl(e){for(var t in Pl)void 0===e[t]&&(e[t]=Pl[t]);return{getParser:function(){return t=e.input_decimal_separator,n=new RegExp("[^-0-9eE"+t+"]","g"),function(e){return"number"==typeof e?e:""===e||void 0===e?NaN:parseFloat(e.replace(n,"").replace(t,"."))};var t,n},getFormatterFunction:function(){return t=e.output_separators,n=t.length>1,r=n?t.charAt(1):t.charAt(0),i=n?t.charAt(0):"",a=Fn(function(e,t){return{decimal:e,thousands:t,grouping:[3],currency:["",""]}}(r,i)).format,a.decimal=r,a.thousands=i,a;var t,n,r,i,a}}}var jl=Object.freeze({transform_labels:!1,transform:"multiply",multiply_divide_constant:1,exponentiate_constant:0,multiplier:1,prefix:"",n_dec:2,suffix:"",strip_zeros:!0,strip_separator:!0,negative_sign:"-$nk"});function Bl(e,t){var n=e.n_dec>=0?Math.floor(e.n_dec):Math.ceil(e.n_dec),r=t(",."+(n>0?n:"0")+"f"),i=t.decimal,a=t.thousands,o=e.strip_zeros&&n>0?new RegExp("\\"+i+"?0+$"):null,l=e.strip_separator&&a,s=e.negative_sign,c=function(e){var t=1;return e.transform_labels&&(t="multiply"===e.transform?e.multiply_divide_constant:"divide"===e.transform?1/e.multiply_divide_constant:Math.pow(10,e.exponentiate_constant)),function(e){return e*t}}(e);return function(t){var i=n>=0?c(t):function(e,t){if(!(t=t>0?Math.floor(t):Math.ceil(t)))return Math.round(e);var n=Math.pow(10,Math.abs(t));return t>0?Math.round(e*n)/n:Math.round(e/n)*n}(c(t),n),u=i<0,d=Math.abs(i),f=l&&a&&d>=1e3&&d<1e4,p=r(d);return o&&(p=p.replace(o,"")),f&&(p=p.replace(a,"")),u&&"none"!==s?"-$nk"===s?"-"+e.prefix+p+e.suffix:"$-nk"===s?e.prefix+"-"+p+e.suffix:"($nk)"===s?"("+e.prefix+p+e.suffix+")":e.prefix+"("+p+")"+e.suffix:e.prefix+p+e.suffix}}let ql,Yl,Hl;"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}return t});var Il,Rl,Ul={},$l=25,Wl=5,Vl=10,Gl=10,Xl={};function Zl(e,t,n,r,i,a,o){var l=n-e/2-Gl,s=n+e/2+Gl,c=e/2+Math.min(0,l-i.left)+Math.max(0,s-i.right);return{pos:[c,o],shape:c-Vl<Wl?[-c,(-Gl-Wl)*a,Math.max(Vl,Wl-c),-Gl*a]:c+Vl>e-Wl?[Math.min(-10,e-c-Wl),-Gl*a,Math.min(Vl,e-c),(-Gl-Wl)*a]:[-10,-Gl*a,Vl,-Gl*a]}}function Jl(e,t,n,r,i,a,o){var l=r-t/2-Gl,s=r+t/2+Gl,c=t/2+Math.min(0,l-i.top)+Math.max(0,s-i.bottom);return{pos:[o,c],shape:c-Vl<Wl?[(-Gl-Wl)*a,-c,-Gl*a,Math.max(Vl,Wl-c)]:c+Vl>t-Wl?[-Gl*a,Math.min(-10,t-c-Wl),(-Gl-Wl)*a,Math.min(Vl,t-c)]:[-Gl*a,-10,-Gl*a,Vl]}}function Ql(e,t,n,r,i,a){var o=Xl[e](t,n,r,i,a),l=r-$l-o.pos[0],s=i-$l-o.pos[1];return{left:l,top:s,right:l+t+2*$l,bottom:s+n+2*$l}}function Kl(e,t,n){var r,i=document.createElementNS("http://www.w3.org/2000/svg",e);if(t)for(r in t)i.setAttribute(r,t[r]);var a=i.style;if(n)for(r in n)a[r]=n[r];return i}function es(){return Il||((Il=document.createElement("div")).id="flourish-popup-constrainer",(Rl=Il.style).overflow="hidden",Rl.pointerEvents="none",Rl.position="absolute",Rl.left="0",Rl.top="0",Rl.margin="0",Rl.padding="0",document.body.appendChild(Il),this._resizeConstrainer(),Il)}Xl.bottom=function(e,t){return{shape:[-10,-Gl,Vl,-Gl],pos:[e/2,t+Gl]}},Xl.top=function(e,t){return{shape:[-10,Gl,Vl,Gl],pos:[e/2,-Gl]}},Xl.left=function(e,t){return{shape:[Gl,Vl,Gl,-10],pos:[-Gl,t/2]}},Xl.right=function(e,t){return{shape:[-Gl,Vl,-Gl,-10],pos:[e+Gl,t/2]}},Xl.topLeft=function(e,t){return{shape:[Gl+Wl,Gl,Gl,Gl+Wl],pos:[-Gl,-Gl]}},Xl.bottomLeft=function(e,t){return{shape:[Gl+Wl,-Gl,Gl,-Gl-Wl],pos:[-Gl,t+Gl]}},Xl.topRight=function(e,t){return{shape:[-Gl-Wl,Gl,-Gl,Gl+Wl],pos:[e+Gl,-Gl]}},Xl.bottomRight=function(e,t){return{shape:[-Gl-Wl,-Gl,-Gl,-Gl-Wl],pos:[e+Gl,t+Gl]}},Xl.bottomFlexible=function(e,t,n,r,i){return Zl(e,0,n,0,i,1,t+Gl)},Xl.topFlexible=function(e,t,n,r,i){return Zl(e,0,n,0,i,-1,-Gl)},Xl.rightFlexible=function(e,t,n,r,i){return Jl(0,t,0,r,i,1,e+Gl)},Xl.leftFlexible=function(e,t,n,r,i){return Jl(0,t,0,r,i,-1,-Gl)};var ts=1,ns={container:document.body,maxWidth:"70%",point:null,html:null,directions:["bottom","top","left","right","topLeft","bottomLeft","topRight","bottomRight","bottomFlexible","topFlexible","leftFlexible","rightFlexible"],fallbackFit:"horizontal"};function rs(){for(var e in this.unique_id=ts++,this.is_visible=!0,ns)this["_"+e]=ns[e];this.handlers={click:[]}}function is(e){rs.prototype[e]=function(t){return void 0===t?this["_"+e]:(this["_"+e]=t,this)}}for(var as in ns)is(as);function os(){return new rs}rs.prototype.point=function(e,t){if(void 0===e)return this._point;if(Array.isArray(e))this._point=[e[0],e[1]];else if(void 0!==t)this._point=[e,t];else if(e instanceof HTMLElement||e instanceof SVGElement){var n=e.getBoundingClientRect();this._point=[Math.floor(n.left+n.width/2),Math.floor(n.top+n.height/2)]}else console.error("Popup: could not understand argument");return this},rs.prototype.directions=function(e){return void 0===e?this._directions:("string"==typeof e&&(e=[e]),this._directions=e.slice(),this)},rs.prototype.text=function(e){return this._html=e.replace(/[&<>]/g,(function(e){return{"&":"&amp;","<":"&lt;",">":"&gt;"}[e]})),this},rs.prototype.on=function(e,t){if(!(e in this.handlers))throw new Error("Popup.on: No such event: "+e);return this.handlers[e].push(t),this},rs.prototype.fire=function(e,t){if(!(e in this.handlers))throw new Error("Popup.fire: No such event: "+e);for(var n=this.handlers[e],r=0;r<n.length;r++)n[r].call(this,t);return this},rs.prototype._getElement=function(){var e=this,t="flourish-popup-"+e.unique_id,n=document.getElementById(t);if(!n){(n=document.createElement("div")).className="flourish-popup",n.id=t;var r=n.style;r.display="none",r.margin=r.padding=0,r.position="absolute",r.width="80px",r.height="40px",r.boxSizing="border-box",n.addEventListener("click",(function(t){e.fire("click",t)}),!1);var i=Kl("svg",{class:"flourish-popup-svg"},{position:"absolute",top:0,left:0,bottom:0,right:0}),a=Kl("filter",{id:"dropshadow-"+e.unique_id,height:"130%"});a.appendChild(Kl("feGaussianBlur",{in:"SourceAlpha",stdDeviation:5})),a.appendChild(Kl("feOffset",{dx:0,dy:2,result:"offsetblur"}));var o=Kl("feComponentTransfer");o.appendChild(Kl("feFuncA",{type:"linear",slope:.2})),a.appendChild(o);var l=Kl("feMerge");a.appendChild(l),l.appendChild(Kl("feMergeNode")),l.appendChild(Kl("feMergeNode",{in:"SourceGraphic"})),i.appendChild(a);var s=Kl("g",{filter:"url(#dropshadow-"+e.unique_id+")",fill:"white",stroke:"none"});s.appendChild(Kl("rect",{x:$l,y:$l,rx:Wl})),s.appendChild(Kl("path")),i.appendChild(s),n.appendChild(i);var c=document.createElement("div");c.className="flourish-popup-content",(r=c.style).position="absolute",r.top=r.left=$l+"px",r.padding="10px",n.appendChild(c),e._getConstrainer().appendChild(n)}return e._resizeConstrainer(),n},rs.prototype._getConstrainer=es,rs.prototype._resizeConstrainer=function(){Il||es.call(this);var e=Rl.display;Rl.display="none",Rl.width=document.documentElement.scrollWidth+"px",Rl.height=document.documentElement.scrollHeight+"px",Rl.display=e},rs.prototype.draw=function(){var e=this;if(e.is_visible=!0,e._point){var t=document.documentElement.getBoundingClientRect(),n=e._point[0],r=e._point[1],i=e._container.getBoundingClientRect();n<i.left?n=i.left:n>i.right&&(n=i.right),r<i.top?r=i.top:r>i.bottom&&(r=i.bottom);var a=n-t.left,o=r-t.top,l=e._getElement(),s=l.style,c=l.querySelector(".flourish-popup-svg"),u=c.querySelector("g"),d=u.querySelector("rect"),f=u.querySelector("path"),p=l.querySelector(".flourish-popup-content");s.display="block",p.style.maxWidth=function(t){return e._maxWidth.match(/^\d+(?:\.\d+)?%$/)?t.width*parseFloat(e._maxWidth)/100:e._maxWidth.match(/^\d+(?:\.\d+)?(?:px)?$/)?parseFloat(e._maxWidth):(null!=e._maxWidth&&console.error("Popup: Unknown value for maxWidth: "+e._maxWidth),t.width)}(i)+"px",e._inner_html!=e._html&&(p.innerHTML=e._inner_html=e._html);var h,_,y=p.getBoundingClientRect();do{h=Math.ceil(y.width),_=Math.ceil(y.height),s.width=h+2*$l+"px",s.height=_+2*$l+"px",y=p.getBoundingClientRect()}while(h!=Math.ceil(y.width)||_!=Math.ceil(y.height));d.setAttribute("width",h),d.setAttribute("height",_),c.setAttribute("width",h+2*$l),c.setAttribute("height",_+2*$l);for(var b,m,g=$l-Gl,v=null,x=null,w=null,k=1/0,M=1/0,z=0;z<e._directions.length;z++){var A=e._directions[z],E=Ql(A,h,_,n,r,i),C=Math.max(0,Math.floor(i.left)-E.left-g)+Math.max(0,E.right-Math.ceil(i.right)-g),T=Math.max(0,Math.floor(i.top)-E.top-g)+Math.max(0,E.bottom-Math.ceil(i.bottom)-g);if(0==C&&0==T){v=A;break}(C<k||C==k&&T<b)&&(k=C,b=T,x=A),(T<M||T==M&&C<m)&&(M=T,m=C,w=A)}return v?A=v:"horizontal"==e._fallbackFit?A=x:"vertical"==e._fallbackFit?A=w:(console.warn("Popup: failed to point box of size ("+h+", "+_+") at ("+n+", "+r+") within ("+i.left+", "+i.top+", "+i.right+", "+i.bottom+")"),A=e._directions[0]),function(e,t,n,r,i,a,o,l,s,c){var u=Xl[e](r,i,l,s,c);t.left=a-$l-u.pos[0]+"px",t.top=o-$l-u.pos[1]+"px",n.setAttribute("d","M0,0L"+u.shape.join(",")+"Z"),n.setAttribute("transform","translate("+(u.pos[0]+$l)+","+(u.pos[1]+$l)+")")}(A,s,f,h,_,a,o,n,r,i),e}console.error("Popup: cannot draw popup till point() has been specified")},rs.prototype.hide=function(){return this.is_visible?(this.is_visible=!1,this._getElement().style.display="none",this):this},os.version="2.1.5";var ls,ss,cs=0,us=0,ds=0,fs=1e3,ps=0,hs=0,_s=0,ys="object"==typeof performance&&performance.now?performance:Date,bs="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ms(){return hs||(bs(gs),hs=ys.now()+_s)}function gs(){hs=0}function vs(){this._call=this._time=this._next=null}function xs(e,t,n){var r=new vs;return r.restart(e,t,n),r}function ws(){ms(),++cs;for(var e,t=ls;t;)(e=hs-t._time)>=0&&t._call.call(null,e),t=t._next;--cs}function ks(){hs=(ps=ys.now())+_s,cs=us=0;try{ws()}finally{cs=0,function(){var e,t,n=ls,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:ls=t);ss=e,zs(r)}(),hs=0}}function Ms(){var e=ys.now(),t=e-ps;t>fs&&(_s-=t,ps=e)}function zs(e){cs||(us&&(us=clearTimeout(us)),e-hs>24?(e<1/0&&(us=setTimeout(ks,e-ys.now()-_s)),ds&&(ds=clearInterval(ds))):(ds||(ps=ys.now(),ds=setInterval(Ms,fs)),cs=1,bs(ks)))}function As(e,t,n){var r=new vs;return t=null==t?0:+t,r.restart((function(n){r.stop(),e(n+t)}),t,n),r}vs.prototype=xs.prototype={constructor:vs,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?ms():+n)+(null==t?0:+t),this._next||ss===this||(ss?ss._next=this:ls=this,ss=this),this._call=e,this._time=n,zs()},stop:function(){this._call&&(this._call=null,this._time=1/0,zs())}};var Es={value:function(){}};function Cs(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new Ts(r)}function Ts(e){this._=e}function Ss(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function Ns(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Es,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}Ts.prototype=Cs.prototype={constructor:Ts,on:function(e,t){var n,r,i=this._,a=(r=i,(e+"").trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),o=-1,l=a.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<l;)if(n=(e=a[o]).type)i[n]=Ns(i[n],e.name,t);else if(null==t)for(n in i)i[n]=Ns(i[n],e.name,null);return this}for(;++o<l;)if((n=(e=a[o]).type)&&(n=Ss(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ts(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,n=(r=this._[e]).length;a<n;++a)r[a].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};var Ls=Cs("start","end","cancel","interrupt"),Fs=[],Os=0,Ps=1,Ds=2,js=3,Bs=4,qs=5,Ys=6;function Hs(e,t,n,r,i,a){var o=e.__transition;if(o){if(n in o)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function a(e){n.state=Ps,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)}function o(a){var c,u,d,f;if(n.state!==Ps)return s();for(c in i)if((f=i[c]).name===n.name){if(f.state===js)return As(o);f.state===Bs?(f.state=Ys,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete i[c]):+c<t&&(f.state=Ys,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete i[c])}if(As((function(){n.state===js&&(n.state=Bs,n.timer.restart(l,n.delay,n.time),l(a))})),n.state=Ds,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ds){for(n.state=js,r=new Array(d=n.tween.length),c=0,u=-1;c<d;++c)(f=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++u]=f);r.length=u+1}}function l(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(s),n.state=qs,1),a=-1,o=r.length;++a<o;)r[a].call(e,i);n.state===qs&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){for(var r in n.state=Ys,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=xs(a,0,n.time)}(e,n,{name:t,index:r,group:i,on:Ls,tween:Fs,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Os})}function Is(e,t){var n=Us(e,t);if(n.state>Os)throw new Error("too late; already scheduled");return n}function Rs(e,t){var n=Us(e,t);if(n.state>js)throw new Error("too late; already running");return n}function Us(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function $s(e,t){var n,r;return function(){var i=Rs(this,e),a=i.tween;if(a!==n)for(var o=0,l=(r=n=a).length;o<l;++o)if(r[o].name===t){(r=r.slice()).splice(o,1);break}i.tween=r}}function Ws(e,t,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var a=Rs(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var l={name:t,value:n},s=0,c=i.length;s<c;++s)if(i[s].name===t){i[s]=l;break}s===c&&i.push(l)}a.tween=i}}function Vs(e,t,n){var r=e._id;return e.each((function(){var e=Rs(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return Us(e,r).value[t]}}function Gs(e,t){var n;return("number"==typeof t?Fo:t instanceof vr?Eo:(n=vr(t))?(t=n,Eo):jo)(e,t)}function Xs(e){return function(){this.removeAttribute(e)}}function Zs(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Js(e,t,n){var r,i,a=n+"";return function(){var o=this.getAttribute(e);return o===a?null:o===r?i:i=t(r=o,n)}}function Qs(e,t,n){var r,i,a=n+"";return function(){var o=this.getAttributeNS(e.space,e.local);return o===a?null:o===r?i:i=t(r=o,n)}}function Ks(e,t,n){var r,i,a;return function(){var o,l,s=n(this);if(null!=s)return(o=this.getAttribute(e))===(l=s+"")?null:o===r&&l===i?a:(i=l,a=t(r=o,s));this.removeAttribute(e)}}function ec(e,t,n){var r,i,a;return function(){var o,l,s=n(this);if(null!=s)return(o=this.getAttributeNS(e.space,e.local))===(l=s+"")?null:o===r&&l===i?a:(i=l,a=t(r=o,s));this.removeAttributeNS(e.space,e.local)}}function tc(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,i)),n}return i._value=t,i}function nc(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,i)),n}return i._value=t,i}function rc(e,t){return function(){Is(this,e).delay=+t.apply(this,arguments)}}function ic(e,t){return t=+t,function(){Is(this,e).delay=t}}function ac(e,t){return function(){Rs(this,e).duration=+t.apply(this,arguments)}}function oc(e,t){return t=+t,function(){Rs(this,e).duration=t}}var lc=ce.prototype.constructor;function sc(e){return function(){this.style.removeProperty(e)}}var cc=0;function uc(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function dc(){return++cc}var fc=ce.prototype;uc.prototype={constructor:uc,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=s(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var l,c,u=r[o],d=u.length,f=a[o]=new Array(d),p=0;p<d;++p)(l=u[p])&&(c=e.call(l,l.__data__,p,u))&&("__data__"in l&&(c.__data__=l.__data__),f[p]=c,Hs(f[p],t,n,p,f,Us(l,n)));return new uc(a,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=u(e));for(var r=this._groups,i=r.length,a=[],o=[],l=0;l<i;++l)for(var s,c=r[l],d=c.length,f=0;f<d;++f)if(s=c[f]){for(var p,h=e.call(s,s.__data__,f,c),_=Us(s,n),y=0,b=h.length;y<b;++y)(p=h[y])&&Hs(p,t,n,y,h,_);a.push(h),o.push(s)}return new uc(a,o,t,n)},filter:function(e){"function"!=typeof e&&(e=d(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o=t[i],l=o.length,s=r[i]=[],c=0;c<l;++c)(a=o[c])&&e.call(a,a.__data__,c,o)&&s.push(a);return new uc(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),l=0;l<a;++l)for(var s,c=t[l],u=n[l],d=c.length,f=o[l]=new Array(d),p=0;p<d;++p)(s=c[p]||u[p])&&(f[p]=s);for(;l<r;++l)o[l]=t[l];return new uc(o,this._parents,this._name,this._id)},selection:function(){return new lc(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=dc(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o,l=r[a],s=l.length,c=0;c<s;++c)if(o=l[c]){var u=Us(o,t);Hs(o,e,n,c,l,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new uc(r,this._parents,e,n)},call:fc.call,nodes:fc.nodes,node:fc.node,size:fc.size,empty:fc.empty,each:fc.each,on:function(e,t){var n=this._id;return arguments.length<2?Us(this.node(),n).on.on(e):this.each(function(e,t,n){var r,i,a=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?Is:Rs;return function(){var o=a(this,e),l=o.on;l!==r&&(i=(r=l).copy()).on(t,n),o.on=i}}(n,e,t))},attr:function(e,t){var n=r(e),i="transform"===n?Xo:Gs;return this.attrTween(e,"function"==typeof t?(n.local?ec:Ks)(n,i,Vs(this,"attr."+e,t)):null==t?(n.local?Zs:Xs)(n):(n.local?Qs:Js)(n,i,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var i=r(e);return this.tween(n,(i.local?tc:nc)(i,t))},style:function(e,t,n){var r="transform"==(e+="")?Go:Gs;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var a=C(this,e),o=(this.style.removeProperty(e),C(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}(e,r)).on("end.style."+e,sc(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,i,a;return function(){var o=C(this,e),l=n(this),s=l+"";return null==l&&(this.style.removeProperty(e),s=l=C(this,e)),o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,l))}}(e,r,Vs(this,"style."+e,t))).each(function(e,t){var n,r,i,a,o="style."+t,l="end."+o;return function(){var s=Rs(this,e),c=s.on,u=null==s.value[o]?a||(a=sc(t)):void 0;c===n&&i===u||(r=(n=c).copy()).on(l,i=u),s.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,a=n+"";return function(){var o=C(this,e);return o===a?null:o===r?i:i=t(r=o,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,i;function a(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&function(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}(e,a,n)),r}return a._value=t,a}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(Vs(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){return function(t){this.textContent=e.call(this,t)}}(r)),t}return r._value=e,r}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=Us(this.node(),n).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===e)return r.value;return null}return this.each((null==t?$s:Ws)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?rc:ic)(t,e)):Us(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?ac:oc)(t,e)):Us(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){Rs(this,e).ease=t}}(t,e)):Us(this.node(),t).ease},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise((function(a,o){var l={value:o},s={value:function(){0==--i&&a()}};n.each((function(){var n=Rs(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(l),t._.interrupt.push(l),t._.end.push(s)),n.on=t}))}))}};var pc={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function hc(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))return pc.time=ms(),pc;return n}ce.prototype.interrupt=function(e){return this.each((function(){!function(e,t){var n,r,i,a=e.__transition,o=!0;if(a){for(i in t=null==t?null:t+"",a)(n=a[i]).name===t?(r=n.state>Ds&&n.state<qs,n.state=Ys,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete a[i]):o=!1;o&&delete e.__transition}}(this,e)}))},ce.prototype.transition=function(e){var t,n;e instanceof uc?(t=e._id,e=e._name):(t=dc(),(n=pc).time=ms(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,l=r[a],s=l.length,c=0;c<s;++c)(o=l[c])&&Hs(o,e,t,c,l,n||hc(o,t));return new uc(r,this._parents,e,t)};var _c=1,yc={container:document.body,point:[window.innerWidth/2,window.innerHeight/2],html:"",open_duration:250,close_duration:250,popup_custom_template:"",position:"overlay",shadow:!0,underlay_color:"rgba(255, 255, 255, 0.75)",width_side:35,height_side:35,width_overlay:80,height_overlay:80,vertical_position:"click",max_width:null,max_height:null,closeable:!0};function bc(){var e=this;for(var t in e.unique_id=_c++,e._is_open=!1,e._onclose=null,yc)e["_"+t]=yc[t]}function mc(e){bc.prototype[e]=function(t){return void 0===t?this["_"+e]:(this["_"+e]=t,this)}}for(var gc in yc)mc(gc);bc.prototype.point=function(e,t){if(void 0===e)return this._point;if(Array.isArray(e))this._point=[e[0],e[1]];else if(void 0!==t)this._point=[e,t];else if(e instanceof HTMLElement||e instanceof SVGElement){var n=e.getBoundingClientRect();this._point=[Math.floor(n.left+n.width/2),Math.floor(n.top+n.height/2)]}else console.error("Panel: could not understand argument");return this},bc.prototype.container=function(e){return e&&(this._container=e),this},bc.prototype.hide=function(){if(this._is_open)return function(e){e._getElement().style.pointerEvents="none",e._is_open=!1;var t=e._close_duration;ue(e._getElement()).transition().duration(t).style("background","rgba(255, 255, 255, 0)").on("interrupt",(function(){ue(this).style("display",e._is_open?"block":"none")})).on("end",(function(){ue(this).style("display","none"),ue(e._content).html("")})).select(".flourish-panel-close").style("opacity","0"),ue(e._inner).transition().duration(t).style("opacity",0),ue(e._content).transition().duration(t/2).style("opacity",0)}(this),this},bc.prototype.close=bc.prototype.hide,bc.prototype.draw=function(){var e=this;return e._content.innerHTML=e._html,function(e){var t=e._is_open||e._html==e._default?0:e._open_duration,n=window.innerWidth,r=window.innerHeight,i="overlay"==e._position,a="top"==e._position||"bottom"==e._position,o="left"==e._position||"right"==e._position,l=100*(e._max_width||1/0)/n,s=100*(e._max_height||1/0)/r,c=100*e._point[1]/r,u="click"==e._vertical_position&&!Flourish.fixed_height,d=i?Math.min(e._width_overlay,l):a?100:Math.min(e._width_side,l),f=i?Math.min(e._height_overlay,s):o?100:Math.min(e._height_side,s),p=i?(100-d)/2:"right"==e._position?100-d:0,h=u?Math.max(1,Math.min(c-f/2,99-f)):(100-f)/2,_=i?h:"bottom"==e._position?100-f:0,y=i?0:d,b=i?0:f,m=i?100*e._point[0]/n:"right"==e._position?100:"left"==e._position?-d:0,g=i?c:"bottom"==e._position?100:"top"==e._position?-f:0;ue(e._getElement()).style("display","block").transition().duration(t).delay(.25*t).style("background",i?e._underlay_color:"rgba(255, 255, 255, 0)").style("pointer-events",i?null:"none"),ue(e._inner).style("opacity",1).style("display","block").style("pointer-events","none").style("width",y+"%").style("height",b+"%").style("left",m+"%").style("top",g+"%").transition().duration(t).style("width",d+"%").style("height",f+"%").style("left",p+"%").style("top",_+"%").on("end",(function(){ue(e._inner).style("pointer-events","all").style("width",d+"%").style("height",f+"%").style("left",p+"%").style("top",_+"%")})).on("interrupt",(function(){ue(e._inner).style("pointer-events","all").style("width",d+"%").style("height",f+"%").style("left",p+"%").style("top",_+"%")}));var v=o&&u;ue(e._content).transition().duration(t/4).delay(t).style("opacity",1).on("interrupt",(function(){ue(this).style("opacity",1)})),ue(e._content).select(".flourish-panel-content-inner").style("position",v?"absolute":null).style("top",v?c+"%":null).style("transform",v?"translateY(-50%)":null),ue(e._inner).select(".flourish-panel-close").style("opacity",0).transition().duration(t/4).delay(t).style("opacity",e._closeable?1:0),e._is_open=!0,ws()}(e),this},bc.prototype.on=function(e,t){return"close"==e?t&&(this._onclose=t):console.error("Panel .on() method only supports 'close' events"),this},bc.prototype.margins=function(){var e={top:0,right:0,bottom:0,left:0};if(this._is_open&&"overlay"!=this._position){var t=this._getElement().getBoundingClientRect();"top"==this._position&&(e.top=t.top+t.height),"right"==this._position&&(e.right=t.left),"bottom"==this._position&&(e.bottom=t.top),"left"==this._position&&(e.left=t.left+t.width)}return e.css=e.top+"px "+e.right+"px "+e.bottom+"px "+e.left+"px",e},bc.prototype._getElement=function(){var e=this,t="flourish-panel-"+e.unique_id,n=document.getElementById(t);if(!n){(n=document.createElement("div")).className="flourish-panel",n.id=t,n.addEventListener("click",(function(t){t.stopPropagation(),e.hide(),e._onclose&&e._onclose()}));var r=n.style;r.position="absolute",r.zIndex="999999",r.pointerEvents="none",r.width="100%",r.height="100%",r.top="0",r.left="0",r.background="rgba(255, 255, 255, 0)";var i=document.createElement("div");i.className="flourish-panel-inner",n.appendChild(i),e._inner=i,(r=i.style).width="0",r.height="0",r.position="absolute",r.boxSizing="border-box";var a=document.createElement("div");a.className="flourish-panel-shadow",i.appendChild(a);var o=document.createElement("div");o.className="flourish-panel-content",i.appendChild(o),e._content=o,(r=o.style).opacity="0",r.overflowY="auto",r.height="100%",function(e){ue(e._inner).append("svg").attr("class","flourish-panel-close").attr("viewBox","0 0 40 40").style("width","1.25rem").style("height","1.25rem").style("position","absolute").style("right","1rem").style("top","1rem").style("cursor","pointer").style("opacity",0).on("mouseover",(function(){e._closeable&&(this.style.opacity=.66)})).on("mouseout",(function(){e._closeable&&(this.style.opacity=1)})).on("click",(function(){K.stopPropagation(),e.hide(),e._onclose&&e._onclose()})).on("touch",(function(){K.stopPropagation(),e.hide(),e._onclose&&e._onclose()})).append("path").attr("stroke","#333333").attr("stroke-width","0.5rem").attr("stroke-linecap","round").attr("d","M 10,10 L 30,30 M 30,10 L 10,30")}(e),e._container.appendChild(n)}return n};var vc={mode:"popup",locked_id:null,popup_is_custom:!1,popup_custom_header:"Popup header",popup_custom_main:"Popup main content. Write your column names in between double curly brackets to display dynamic content.",popup_teaser_default:"Click to see more",popup_text_color:"#333333",popup_align:"start",popup_font_size:1,popup_width:18,popup_background:"#ffffff",popup_background_opacity:1,popup_padding:.5,popup_radius:.2,popup_shadow:!0,popup_pointer:!0,popup_header_background:"#333333",popup_header_text_color:"#ffffff",popup_header_type:"block",popup_list_type:"table",popup_list_label_weight:"normal",popup_list_separator:": ",panel_is_custom:!1,panel_custom_header:"Custom panel header",panel_custom_main:"Custom panel main content",panel_side_default_content:"<h1>Tap or click to explore</h1>",panel_side_fixed:!1,panel_position:"overlay",panel_width_overlay:80,panel_height_overlay:80,panel_vertical_position:"center",panel_width_side:35,panel_height_side:35,panel_max_width:null,panel_max_height:null,panel_text_color:"#333333",panel_align:"start",panel_font_size:1.25,panel_background:"#ffffff",panel_background_opacity:.9,panel_padding:1.2,panel_radius:.2,panel_shadow:!0,panel_open_duration:250,panel_close_duration:250,panel_list_type:"table",panel_list_label_weight:"normal",panel_list_separator:": "};function xc(e,t,n){var r="<div class='flourish-panel-content-inner'>",i=e["_"+n+"_default_template"],a=e._state[n+"_list_type"],o=e._state[n+"_list_separator"],l="<br />"===o,s=l?"":o,c=l?o:"";if(i)r+=i.replace(/\{\{((?:[^}]|\}[^}])*)\}\}/g,(function(n,r){var i;if(Array.isArray(e._column_names[r])){var a=e._column_names[r];if(0==a.length)return"";i="<ul>",a.forEach((function(e,n){i+="<li>"+e+o+t[r][n]+"</li>"})),i+="</ul>"}else i=t[r];return void 0!==i?i:""}));else{var u,d={};(t[e._title_key]||t[e._subtitle_key])&&(r+="<header>",t[e._title_key]&&(r+="<h1>"+t[e._title_key]+"</h1>",d[u=e._column_names[e._title_key]]=!0),t[e._subtitle_key]&&(r+="<h2>"+t[e._subtitle_key]+"</h2>",d[u=e._column_names[e._subtitle_key]]=!0),r+="</header>");var f="";for(var p in e._column_names)if(!(e._column_names_hidden.indexOf(p)>-1)&&p!=e._title_key&&p!=e._subtitle_key)if(Array.isArray(t[p]))for(var h=0;h<t[p].length;h++)d[u=e._column_names[p][h]]||(d[u]=!0,"table"==a?f+="<tr><td class='table-col-label'><span class='data-heading'>"+u+"</span></td><td class='table-col-value'>"+t[p][h]+"</td></tr>":"ul"==a&&(f+="<li><span class='data-heading'>"+u+s+" </span> "+c+t[p][h]+"</li>"));else{if(d[u=e._column_names[p]])continue;d[u]=!0,"table"==a?f+="<tr><td class='table-col-label'><span class='data-heading'>"+u+"</span></td><td class='table-col-value'>"+t[p]+"</td></tr>":"ul"==a&&(f+="<li><span class='data-heading'>"+u+s+" </span> "+c+t[p]+"</li>")}""!==f&&(r+="<div class='main-content'><"+a+">",r+=f,r+="</"+a+"></div></div>")}return r}function wc(e,t,n){var r;return Object.keys(e._column_names).some((function(i){if(Array.isArray(e._column_names[i])){var a=e._column_names[i].indexOf(t);if(a>=0)return r=n[i][a],!0}else if(e._column_names[i]==t)return r=n[i],!0})),void 0!==r?r:""}function kc(e,t,n,r){var i="",a=Mc(t,e,r),o=Mc(n,e,r);return a&&(i+="<header>"+a+"</header>"),o&&(i+="<div class='main-content'>"+o+"</div>"),i}function Mc(e,t,n){return e.replace(/\{\{#if ((?:[^}]|\}[^}])*)\}\}([\s\S]*?)\{\{\/if\}\}/g,(function(e,r,i){return""==wc(t,r,n)?"":i})).replace(/\{\{(visualisation|story)\/(.*)\}\}/g,(function(e,t,n){var r=n.split("/");if(r.length<1||!["visualisation","story"].includes(t))return e;var i,a={id:r[0],w:r[1]||"100%",h:r[2]||"400px%"},l="https://flo.uri.sh/"+t+"/"+a.id+"/embed?";return(i="iframe",ue(o(i).call(document.documentElement))).attr("src",l).attr("title","Interactive or visual content").attr("class","flourish-embed-iframe").attr("frameborder","0").attr("scrolling","no").attr("sandbox","allow-same-origin allow-forms allow-scripts allow-downloads allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation").style("width",a.width).style("height",a.height).node().outerHTML})).replace(/\{\{((?:[^}]|\}[^}])*)\}\}/g,(function(e,r){return wc(t,r,n)})).trim()}function zc(e,t){var n=e._formatters;if(!n)return t;var r={};for(var i in t)if(n[i])if(Array.isArray(n[i])){for(var a=[],o=0;o<n[i].length;o++)if(void 0!==t[i][o]){var l=n[i][o](t[i][o]);a.push(l)}r[i]=a}else r[i]=n[i](t[i]);else r[i]=t[i];return r}function Ac(e,t,n){var r="",i=zc(e,t);return n&&!e._state.popup_is_custom?r+="<div class='main-content'>"+e._state.popup_teaser_default+"</div>":n||e._state.popup_is_custom?r+=kc(e,e._state.popup_custom_header,e._state.popup_custom_main,i):r+=xc(e,i,"popup"),r}function Ec(e,t){var n="",r=zc(e,t);return e._state.panel_is_custom?n+=kc(e,e._state.panel_custom_header,e._state.panel_custom_main,r):n+=xc(e,r,"panel"),n}function Cc(e){var t=e.popup._getElement(),n=t.querySelector(".flourish-popup-content");n.style.padding="0",n.style.textAlign=e._state.popup_align,n.style.color=e._state.popup_text_color,n.style.fontSize=e._state.popup_font_size+"rem",n.style.borderRadius=e._state.popup_radius+"rem",n.addEventListener("click",(function(){event.stopPropagation()}));var r=e.panel._getElement(),i=r.querySelector(".flourish-panel-inner"),a=r.querySelector(".flourish-panel-content"),o=vr(e._state.panel_background);i.style.background="rgba("+o.r+","+o.g+","+o.b+","+e._state.panel_background_opacity+")",i.style.borderRadius=e._state.popup_radius+"rem",i.style.boxShadow="overlay"==e._state.panel_position&&e._state.panel_shadow?"0 0 1.5rem rgba(0,0,0,0.2)":"",i.addEventListener("click",(function(){event.stopPropagation()})),a.style.padding=e._state.panel_padding+"rem",a.style.textAlign=e._state.panel_align,a.style.color=e._state.panel_text_color,a.style.fontSize=e._state.panel_font_size+"rem",a.style.boxSizing="border-box";var l=t.querySelector(".flourish-popup-svg g");l.style.fill=e._state.popup_background,l.style.opacity=e._state.popup_background_opacity;var s=r.querySelector(".flourish-panel-close path");s&&(s.style.stroke=e._state.panel_text_color),0==e._state.popup_shadow?l.removeAttribute("filter"):l.setAttribute("filter","url(#dropshadow-"+e.popup.unique_id+")"),l.querySelector("rect").setAttribute("rx",e._state.popup_radius+"rem"),l.querySelector("path").style.display=e._state.popup_pointer?"block":"none",function(e){if(!document.querySelector("#popup-styles")){var t=document.createElement("style");t.id="popup-styles",document.head.appendChild(t)}var n=new Qn,r="block"==e._state.popup_header_type,i=vr(e._state.popup_header_background||"transparent");i.opacity=e._state.popup_header_background?e._state.popup_background_opacity:0;var a=e._state.panel_position;n.select(".flourish-panel .flourish-panel-shadow").style("pointer-events","none").style("position","absolute").style("display","overlay"!=a&&e._state.panel_shadow?"block":"none").style("top","bottom"==a?"-3rem":"top"==a?"auto":0).style("right","left"==a?"-3rem":"right"==a?"auto":0).style("bottom","top"==a?"-3rem":"bottom"==a?"auto":0).style("left","right"==a?"-3rem":"left"==a?"auto":0).style("width","left"==a||"right"==a?"3rem":"100%").style("height","top"==a||"bottom"==a?"3rem":"100%").style("z-index","-1").style("overflow","hidden"),n.select(".flourish-panel .flourish-panel-shadow:before").style("content","''").style("display","block").style("position","absolute").style("width","left"==a||"right"==a?"1.5rem":"100%").style("height","top"==a||"bottom"==a?"1.5rem":"100%").style("border-radius","50%").style("background","rgba(0,0,0,0.3)").style("bottom","bottom"==a?"-50%":"top"==a?"auto":0).style("left","left"==a?"-50%":"right"==a?"auto":0).style("top","top"==a?"-50%":"bottom"==a?"auto":0).style("right","right"==a?"-50%":"left"==a?"auto":0).style("filter","blur(15px)"),n.select(".flourish-popup").style("pointer-events","none").select(".flourish-popup-content").style("pointer-events","auto").style("max-width",null==e._state.popup_width?null:e._state.popup_width+"rem !important"),n.select(".flourish-popup header, .flourish-panel header").style("margin","0"),n.select(".flourish-popup header").style("font-weight","bold").style("color",r?e._state.popup_header_text_color:null).style("background",r?i.rgb():null).style("padding",e._state.popup_padding+"rem").style("border-radius",e._state.popup_radius+"rem "+e._state.popup_radius+"rem 0 0"),n.select(".flourish-popup header:not(:last-child)").style("padding-bottom",r?null:"0"),n.select(".flourish-popup header:not(:last-child)").style("padding-bottom",r?null:"0"),n.select(".flourish-panel .flourish-panel-content-inner").style("overflow","auto"),n.select(".flourish-panel header").style("font-weight","bold").style("margin-bottom","0.5em").style("padding-right","1rem"),n.select(".flourish-popup .main-content").style("padding",e._state.popup_padding+"rem"),n.select(".flourish-popup header + .main-content").style("padding",e._state.popup_padding+"rem").style("padding-top",r?null:"0"),n.select(".flourish-popup h1, .flourish-panel h1").style("font-size","1em").style("margin","0"),n.select(".flourish-popup h1, .flourish-popup h2, .flourish-popup ul li").style("text-align",e._state.popup_align),n.select(".flourish-panel h1, .flourish-panel h2, .flourish-panel ul li").style("text-align",e._state.panel_align),n.select(".flourish-popup h2, .flourish-panel h2").style("font-size","1em").style("margin",r?"0":"0 0 0.25em").style("opacity","0.6").style("font-weight","normal"),n.select(".flourish-popup h2:empty, .flourish-panel h2:empty, .flourish-popup h1:empty, .flourish-panel h1:empty, .flourish-popup p:empty, .flourish-panel p:empty").style("display","none"),n.select(".flourish-popup p, .flourish-panel p").style("margin","0").style("font-size","inherit").style("font-weight","normal"),n.select(".flourish-popup table, .flourish-panel table").style("margin","0").style("width","100%").style("border-collapse","collapse").style("table-layout","auto"),n.select(".flourish-popup table tr, .flourish-panel table tr").style("border-top","1px solid #eee"),n.select(".flourish-popup table tr:first-child, .flourish-panel table tr:first-child").style("border-top","none"),n.select(".flourish-popup table tr td, .flourish-panel table tr td").style("padding","0.25em 0 0.25em 0").style("padding-inline-end","0.25em").style("vertical-align","top").style("font-size","inherit").style("text-align","start").style("font-weight","normal").style("overflow","hidden").style("text-overflow","ellipsis"),n.select(".flourish-popup table tr:last-child td, .flourish-panel table tr:last-child td").style("padding-bottom","0"),n.select(".flourish-popup .data-heading").style("font-weight",e._state.popup_list_label_weight).style("display","inline-block"),n.select(".flourish-panel .data-heading").style("font-weight",e._state.panel_list_label_weight).style("display","inline-block"),n.select(".flourish-popup table tr td.table-col-value, .flourish-panel table tr td.table-col-value").style("text-align","end").style("padding","0.25em 0 0.25em 0").style("padding-inline-end","0.25em"),n.select(".flourish-popup table tr:last-child td.table-col-value, .flourish-panel table tr:last-child td.table-col-value").style("padding-bottom","0"),n.select(".flourish-popup ul, .flourish-panel ul").style("padding","0").style("margin","0"),n.select(".flourish-popup ul li, .flourish-panel ul li").style("font-size","inherit").style("list-style","none"),document.head.querySelector("#popup-styles").innerHTML=n.print()}(e)}function Tc(e){throw new TypeError("Expected a value of type string but got a value of type "+typeof e)}function Sc(e){return function(t){return"string"!=typeof t&&Tc(t),(t=t.trim())?e(t):null}}var Nc=new Date(1972,3,27,19,45,5),Lc={"%b %d":[{regex:/^june\s(30|[12][0-9]|0?[1-9])$/i,toDate:function(e){return new Date(null,5,e.split(/\s/)[1])}},{regex:/^july\s(3[01]|[12][0-9]|0?[1-9])$/i,toDate:function(e){return new Date(null,6,e.split(/\s/)[1])}},{regex:/^sept\s(30|[12][0-9]|0?[1-9])$/i,toDate:function(e){return new Date(null,8,e.split(/\s/)[1])}}],"%d %b":[{regex:/^(0?[1-9]|[1-9][0-9])\sjune$/i,toDate:function(e){return new Date(null,5,e.split(/\s/)[0])}},{regex:/^(0?[1-9]|[1-9][0-9])\sjuly$/i,toDate:function(e){return new Date(null,6,e.split(/\s/)[0])}},{regex:/^(0?[1-9]|[1-9][0-9])\ssept$/i,toDate:function(e){return new Date(null,8,e.split(/\s/)[0])}}]};function Fc(e){return function(t){var n=null;return e.forEach((function(e){t.match(e.regex)&&(n=e.toDate(t))})),n}}function Oc(e,t){var n,r=Ve(e),i=We(e);return n=Sc("function"==typeof t?function(e){return t(e,null!==r(e))}:function(e){return null!==r(e)}),Object.freeze({test:n,parse:Sc((function(t){return r(t)||(Lc[e]?Fc(Lc[e])(t):null)})),format:function(e){return i(e)},type:"datetime",description:e,id:"datetime$"+e,example:i(Nc)})}var Pc=Object.freeze([Oc("%Y-%m-%dT%H:%M:%S.%LZ"),Oc("%Y-%m-%d %H:%M:%S"),Oc("%Y-%m-%dT%H:%M:%S"),Oc("%Y-%m-%dT%H:%M:%SZ"),Oc("%d/%m/%Y",(function(e,t){if(!t)return!1;var n=e.split("/").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&n[2]>=1e3})),Oc("%d/%m/%Y %H:%M",(function(e,t){if(!t)return!1;var n=e.split(/[/ :]/).map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&n[2]>=1e3&&n[3]>=0&&n[3]<24&&n[4]>=0&&n[4]<60})),Oc("%d/%m/%y",(function(e,t){if(!t)return!1;var n=e.split("/").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&!isNaN(n[2])})),Oc("%m/%d/%Y",(function(e,t){if(!t)return!1;var n=e.split("/").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&n[2]>=1e3})),Oc("%m/%d/%Y %H:%M",(function(e,t){if(!t)return!1;var n=e.split(/[/ :]/).map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&n[2]>=1e3&&n[3]>=0&&n[3]<24&&n[4]>=0&&n[4]<60})),Oc("%m/%d/%y",(function(e,t){if(!t)return!1;var n=e.split("/").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&!isNaN(n[2])})),Oc("%Y/%m/%d",(function(e,t){if(!t)return!1;var n=e.split("/").map(parseFloat);return n[0]>=1e3&&n[1]>0&&n[1]<=12&&n[2]>0&&n[2]<=31})),Oc("%d-%m-%Y",(function(e,t){if(!t)return!1;var n=e.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&n[2]>=1e3})),Oc("%d-%m-%y",(function(e,t){if(!t)return!1;var n=e.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&!isNaN(n[2])})),Oc("%m-%d-%Y",(function(e,t){if(!t)return!1;var n=e.split("-").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&n[2]>=1e3})),Oc("%m-%d-%y",(function(e,t){if(!t)return!1;var n=e.split("-").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&!isNaN(n[2])})),Oc("%Y-%m-%d",(function(e,t){if(!t)return!1;var n=e.split("-").map(parseFloat);return n[0]>=1e3&&n[1]>0&&n[1]<=12&&n[2]>0&&n[2]<=31})),Oc("%Y-%m",(function(e,t){if(!t)return!1;var n=e.split("-").map(parseFloat);return n[0]>=1e3&&n[1]>0&&n[1]<=12})),Oc("%d %b %Y",(function(e,t){if(!t)return!1;var n=e.split(" ").map(parseFloat);return n[0]>0&&n[0]<=31&&n[2]>=1e3})),Oc("%d %B %Y",(function(e,t){if(!t)return!1;var n=e.split(" ").map(parseFloat);return n[0]>0&&n[0]<=31&&n[2]>=1e3})),Oc("%d %b %y"),Oc("%-d %b ’%y"),Oc("%d %B %y"),Oc("%d-%b-%Y",(function(e,t){if(!t)return!1;var n=e.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[2]>=1e3})),Oc("%d-%B-%Y",(function(e,t){if(!t)return!1;var n=e.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[2]>=1e3})),Oc("%d-%b-%y"),Oc("%d-%B-%y"),Oc("%m/%Y",(function(e,t){if(!t)return!1;var n=e.split("/").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>=1e3})),Oc("%m/%y"),Oc("%b %Y",(function(e,t){return!!t&&e.split(" ").map(parseFloat)[1]>=1e3})),Oc("%B %Y",(function(e,t){return!!t&&e.split(" ").map(parseFloat)[1]>=1e3})),Oc("%b-%y"),Oc("%b %y"),Oc("%B %y"),Oc("%d %b",(function(e,t){return!!t||!!Fc(Lc["%d %b"])(e)})),Oc("%d %B"),Oc("%b %d",(function(e,t){return!!t||!!Fc(Lc["%b %d"])(e)})),Oc("%B %d"),Oc("%d-%m",(function(e,t){if(!t)return!1;var n=e.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12})),Oc("%m-%d"),Oc("%d/%m"),Oc("%m/%d"),Oc("%b %d %Y"),Oc("%b %d %Y, %-I.%M%p"),Oc("%Y",(function(e,t){if(!t)return!1;var n=parseFloat(e);return n>1499&&n<2200})),Oc("%B"),Oc("%b"),Oc("%X"),Oc("%I:%M %p"),Oc("%-I.%M%p"),Oc("%H:%M"),Oc("%H:%M:%S"),Oc("%-I%p"),Oc("Q%q %Y",(function(e,t){return!!t&&6===e.replace(/\s/g,"").length})),Oc("%Y Q%q",(function(e,t){return!!t&&6===e.replace(/\s/g,"").length}))]);var Dc={test:Sc((function(e){return/^(\+|-)?\d{1,3}(,\d{3})*(\.\d+)?((e|E)(\+|-)?\d+)?$/.test(e.trim())})),parse:Sc((function(e){return parseFloat(e.replace(/,/g,""))})),description:"Comma thousand separator, point decimal mark",thousand_separator:",",decimal_mark:".",id:"number$comma_point",example:"12,235.56"},jc={test:Sc((function(e){return/^(\+|-)?\d{1,3}(\s\d{3})*(\.\d+)?((e|E)(\+|-)?\d+)?$/.test(e.trim())})),parse:Sc((function(e){return parseFloat(e.replace(/\s/g,""))})),description:"Space thousand separator, point decimal mark",thousand_separator:" ",decimal_mark:".",id:"number$space_point",example:"12 235.56"},Bc={test:Sc((function(e){return/^(\+|-)?\d+(\.\d+)?((e|E)(\+|-)?\d+)?$/.test(e.trim())})),parse:Sc((function(e){return parseFloat(e)})),description:"No thousand separator, point decimal mark",thousand_separator:"",decimal_mark:".",id:"number$none_point",example:"12235.56"},qc={test:Sc((function(e){return/^(\+|-)?\d{1,3}(\.\d{3})*(,\d+)?((e|E)(\+|-)?\d+)?$/.test(e.trim())})),parse:Sc((function(e){return parseFloat(e.replace(/\./g,"").replace(/,/,"."))})),description:"Point thousand separator, comma decimal mark",thousand_separator:".",decimal_mark:",",id:"number$point_comma",example:"12.235,56"},Yc={test:Sc((function(e){return/^(\+|-)?\d{1,3}(\s\d{3})*(,\d+)?((e|E)(\+|-)?\d+)?$/.test(e.trim())})),parse:Sc((function(e){return parseFloat(e.replace(/\s/g,"").replace(/,/,"."))})),description:"Space thousand separator, comma decimal mark",thousand_separator:" ",decimal_mark:",",id:"number$space_comma",example:"12 235,56"},Hc={test:Sc((function(e){return/^(\+|-)?\d+(,\d+)?((e|E)(\+|-)?\d+)?$/.test(e.trim())})),parse:Sc((function(e){return parseFloat(e.replace(/,/,"."))})),description:"No thousand separator, comma decimal mark",thousand_separator:"",decimal_mark:",",id:"number$none_comma",example:"12235,56"},Ic=Object.freeze([Dc,jc,qc,Yc,Bc,Hc]);Ic.forEach((function(e){e.type="number",e.format=function(e){var t,n,r=Fn({decimal:e.decimal_mark,thousands:e.thousand_separator,grouping:[3],currency:["",""]});return function(e,i){return null===e?"":(i||(i=",.2f"),i!==n&&(n=i,t=r.format(n)),t(e))}}(e),Object.freeze(e)}));var Rc=Object.freeze({test:function(e){return"string"==typeof e||Tc(e)},parse:function(e){return"string"==typeof e?e:Tc(e)},format:function(e){if("string"==typeof e)return e},type:"string",description:"Arbitrary string",id:"string$arbitrary_string"}),Uc=Object.freeze({datetime:Pc,number:Ic}),$c=Object.freeze(["datetime","number","string"]),Wc=Object.freeze({n_max:250,n_failing_values:0,failure_fraction:.05,sort:!0}),Vc=Object.freeze(Object.keys(Wc));function Gc(e,t){return e.index-t.index}function Xc(e,t){return t.n_success-e.n_success||Gc(e,t)}function Zc(e){return(""+e).trim()}function Jc(e){return void 0===e?function(e){return Zc(e)}:"function"==typeof e?function(t,n){return Zc(e(t,n))}:function(t){return Zc(t[""+e])}}function Qc(e){e?Array.isArray(e)||(e=[e]):e=$c;var t=e.reduce((function(e,t){var n=Uc[t];return n&&Array.prototype.push.apply(e,n),e}),[]),n=-1!==e.indexOf("string"),r=Vc.reduce((function(e,t){return e[t]=Wc[t],e}),{}),i=function(e,i){i=Jc(i);var a=e.map(i).filter((function(e){return e}));if(!a.length)return n?[Rc]:[];var o=Math.min(r.n_max,a.length),l=Math.floor(o*r.failure_fraction),s=r.n_failing_values,c=r.sort?Xc:Gc,u=t.slice().reduce((function(e,t,n){for(var r=u=0,i=[],c=!1,u=0;u<o;u++){var d=a[u];if(!t.test(d)&&(++r>l?c=!0:-1===i.indexOf(d)&&(i.push(d),i.length>s&&(c=!0)),c))break}return c||e.push({interp:t,n_success:o-r,index:n}),e}),[]).sort(c).map((function(e){return e.interp}));return n&&u.push(Rc),u};return Vc.forEach((function(e){var t;i[(t=e,t.replace(/_(\w)/g,(function(e,t){return t.toUpperCase()})))]=function(t){return void 0===t?r[e]:(r[e]=t,i)}})),i}function Kc(e){const t=Qc.getInterpretation(e);if(!t)throw new Error("format_id ".concat(e," not recognised"));return function(){return t.format(...arguments)}}function eu(e,t,n){var r=this;for(var i in this._state=e,this._popup_default_template=null,this._panel_default_template=null,this._title_key="name",this._subtitle_key=null,this._first_load=!0,this._on_panel_close=null,this._show_default_content_timer=null,this._panel_container=t||document.body,this._popup_container=n||document.body,this._popup_directions=["top","bottom","left","right"],this._column_names=[],this._column_names_hidden=[],this._formatters=null,this._getLockedPosition=function(){return null},vc)null==e[i]&&(e[i]=vc[i]);this.panel=(new bc).container(this._panel_container).on("close",(function(){r._state.locked_id=null,r.popup.hide(),"function"==typeof r._on_panel_close&&r._on_panel_close()})),this.popup=os().container(this._popup_container).point(0,0).draw().hide()}function tu(e){e.popup._getElement().querySelector(".flourish-popup-content").style.pointerEvents="none"}function nu(e){e.popup._getElement().querySelector(".flourish-popup-content").style.pointerEvents="auto"}Qc.DATETIME_IDS=Object.freeze(Pc.map((function(e){return e.id}))),Qc.NUMBER_IDS=Object.freeze(Ic.map((function(e){return e.id}))),Qc.STRING_IDS=Object.freeze([Rc.id]),Qc.getInterpretation=function(){var e=Pc.concat(Ic,Rc).reduce((function(e,t){return e[t.id]=t,e}),{});return function(t){return e[t]}}(),Qc._createAccessorFunction=Jc,Qc.getInterpretation,Object.freeze({transform_labels:!1,transform:"multiply",multiply_divide_constant:1,exponentiate_constant:0,multiplier:1,prefix:"",n_dec:2,suffix:"",strip_zeros:!0,strip_separator:!0,negative_sign:"-$nk"}),eu.prototype.getLockedPosition=function(e){return"function"!=typeof e?console.error("Invalid function passed to @flourish/info-popup getLockedPosition"):this._getLockedPosition=e,this},eu.prototype.update=function(e){if(null!==this._state.locked_id&&"none"!=this._state.mode){var t=this._getLockedPosition(this._state.locked_id);t?this.click(t[0],t[1],this._state.locked_id,e):console.warn("@flourish/info-popup: failed to return value from getLockedPosition function")}else this.clickout()},eu.prototype.click=function(e,t,n,r){if("none"!=this._state.mode){var i="popup"==this._state.mode?"popup":"panel";this._checkIfPopupIsEmpty(t,i)?"panel"===i?this.hidePanel():this.hidePopup():(this._point(e),null!=n?(this._state.locked_id=n,nu(this)):this._state.locked_id=null,"panel"==i?(clearTimeout(this._show_default_content_timer),this.popup.hide(),this._drawPanel(t,r)):"popup"==i&&(this.panel.hide(),this._drawPopup(t,r)))}},eu.prototype.clickout=function(){this._state.locked_id=null,"both"!=this._state.mode&&"panel"!=this._state.mode||(this.popup.draw(),this.popup.hide(),"overlay"!=this._state.panel_position&&this._state.panel_side_fixed?this._showDefaultPanelContent():this.panel.hide()),"popup"==this._state.mode&&(this.panel.hide(),this.popup.draw(),this.popup.hide()),"none"==this._state.mode&&(this.panel.hide(),this.popup.draw(),this.popup.hide())},eu.prototype.touch=function(e,t,n,r){this.mouseover(e,t,r,!0,n)},eu.prototype.mouseover=function(e,t,n,r,i){var a="panel"==this._state.mode?"panel":"popup";if(this._checkIfPopupIsEmpty(t,a,"both"==this._state.mode))"panel"===a?this.hidePanel():this.hidePopup();else{var o=this;if("both"==this._state.mode)if(this._point(e),this._drawPopup(t,n,!0),r?nu(this):tu(this),r)o.popup._getElement().querySelector(".flourish-popup-content").onclick=function(){o.click(e,t,i,n)};if("popup"==this._state.mode){if(null!==this._state.locked_id)return;tu(this),this._point(e),this._drawPopup(t,n)}if("panel"==this._state.mode){if(null!==this._state.locked_id||"overlay"==this._state.panel_position)return;if(!this._state.panel_side_fixed)return;clearTimeout(this._show_default_content_timer),this._point(e),this._drawPanel(t,n)}}},eu.prototype.mouseout=function(){if("both"==this._state.mode&&this.popup.hide(),"popup"==this._state.mode){if(null!==this._state.locked_id)return;this.popup.hide()}if("panel"==this._state.mode){if(null!==this._state.locked_id)return;if("overlay"==this._state.panel_position||!this._state.panel_side_fixed)return;this._showDefaultPanelContent()}},eu.prototype.locked=function(){return this._state.locked_id},eu.prototype.mode=function(){return this._state.mode},eu.prototype.setColumnNames=function(e){return this._column_names=e,this},eu.prototype.hideColumnNames=function(e){return this._column_names_hidden=e,this},eu.prototype.setFormatters=function(e){var t={};for(var n in e)if("function"==typeof e[n])t[n]=e[n];else if(Array.isArray(e[n])){for(var r=[],i=0;i<e[n].length;i++){var a;a="function"==typeof e[n][i]?e[n][i]:Kc(e[n][i].output_format_id),r.push(a)}t[n]=r}else t[n]=Kc(e[n].output_format_id);return this._formatters=t,this},eu.prototype._showDefaultPanelContent=function(){var e=this;clearTimeout(this._show_default_content_timer),this._show_default_content_timer=setTimeout((function(){e.panel.html(e._state.panel_side_default_content),e._drawPanel()}),100),e._drawPanel()},eu.prototype._checkIfPopupIsEmpty=function(e,t,n){return""==("panel"==t?Ec(this,e):Ac(this,e,n)).trim()},eu.prototype.onPanelClose=function(e){return this._on_panel_close=e,this},eu.prototype._drawPopup=function(e,t,n){return e&&this.popup.html(Ac(this,e,n)),Cc(this),this.popup.draw(),t&&t(this.popup._getElement(),e),this},eu.prototype._drawPanel=function(e,t){return Cc(this),this.panel.open_duration(this._state.panel_open_duration).close_duration(this._state.panel_close_duration).width_overlay(this._state.panel_width_overlay).height_overlay(this._state.panel_height_overlay).vertical_position(this._state.panel_vertical_position).width_side(this._state.panel_width_side).height_side(this._state.panel_height_side).position(this._state.panel_position).max_width(this._state.panel_max_width).max_height(this._state.panel_max_height).closeable("overlay"==this._state.panel_position||!this._state.panel_side_fixed),void 0===e?this.panel.draw():this.panel.html(Ec(this,e)).draw(),t&&t(this.panel._getElement(),e),this},eu.prototype.hidePanel=function(){return this.panel.hide(),this},eu.prototype.hidePopup=function(){return this.popup.hide(),this},eu.prototype.popupDirections=function(e){return e?(this._popup_directions=e,this):this._popup_directions.slice()},eu.prototype.margins=function(){return this.panel.margins()},eu.prototype._getBiggestGap=function(e){var t,n,r=this._popup_container.getBoundingClientRect(),i=0,a={right:(r.width+r.left-(e.width+e.left))/r.width,bottom:(r.height+r.top-(e.height+e.top))/r.height,left:(e.left-r.left)/r.width,top:(e.top-r.top)/r.height},o={right:["left","leftFlexible","topLeft","bottomLeft","bottomFlexible","bottom","topFlexible","top","bottomRight","topRight","rightFlexible","right"],left:["right","rightFlexible","topRight","bottomRight","top","topFlexible","bottom","bottomFlexible","bottomLeft","topLeft","leftFlexible","left"],top:["bottom","bottomFlexible","bottomRight","bottomLeft","rightFlexible","leftFlexible","right","left","topRight","topLeft","topFlexible","top"],bottom:["top","topFlexible","topLeft","topRight","left","right","leftFlexible","rightFlexible","bottomLeft","bottomRight","bottomFlexible","bottom"]};for(var l in a)this._popup_directions.indexOf(l)<0||a[l]>i&&(i=a[l],t=l,n=o[l]);var s=e.left,c=e.top;return"left"==t||"right"==t?c+=.5*e.height:"bottom"==t&&(c+=e.height),"top"==t||"bottom"==t?s+=.5*e.width:"right"==t&&(s+=e.width),{side:t,arrow_directions:n,x:s,y:c}},eu.prototype._point=function(e){var t,n,r=this._popup_directions;if(Array.isArray(e))t=e[0],n=e[1];else{if(!e||!e.getBoundingClientRect)return console.warn("@flourish/info-popup: Invalid positional value passed in point function, should be a coordinates array, or a node. Current value is",e),this;var i=e.getBoundingClientRect(),a=this._getBiggestGap(i);t=a.x,n=a.y,r=a.arrow_directions}return this.panel.point(e),this.popup.directions(r).point(t,n),this},eu.prototype.popupDefaultTemplate=function(e){return null!=e?(this._popup_default_template=e,this):this._popup_default_template},eu.prototype.panelDefaultTemplate=function(e){return null!=e?(this._panel_default_template=e,this):this._panel_default_template},eu.prototype.titleKey=function(e){return null!=e?(this._title_key=e,this):this._title_key},eu.prototype.subtitleKey=function(e){return null!=e?(this._subtitle_key=e,this):this._subtitle_key};var ru={root:null},iu="object"==typeof global&&global&&global.Object===Object&&global,au="object"==typeof self&&self&&self.Object===Object&&self,ou=iu||au||Function("return this")(),lu=ou.Symbol,su=Object.prototype,cu=su.hasOwnProperty,uu=su.toString,du=lu?lu.toStringTag:void 0;var fu=Object.prototype.toString;var pu="[object Null]",hu="[object Undefined]",_u=lu?lu.toStringTag:void 0;function yu(e){return null==e?void 0===e?hu:pu:_u&&_u in Object(e)?function(e){var t=cu.call(e,du),n=e[du];try{e[du]=void 0;var r=!0}catch(e){}var i=uu.call(e);return r&&(t?e[du]=n:delete e[du]),i}(e):function(e){return fu.call(e)}(e)}function bu(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var mu="[object AsyncFunction]",gu="[object Function]",vu="[object GeneratorFunction]",xu="[object Proxy]";var wu,ku=ou["__core-js_shared__"],Mu=(wu=/[^.]+$/.exec(ku&&ku.keys&&ku.keys.IE_PROTO||""))?"Symbol(src)_1."+wu:"";var zu=Function.prototype.toString;var Au=/^\[object .+?Constructor\]$/,Eu=Function.prototype,Cu=Object.prototype,Tu=Eu.toString,Su=Cu.hasOwnProperty,Nu=RegExp("^"+Tu.call(Su).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Lu(e){if(!bu(e)||(t=e,Mu&&Mu in t))return!1;var t,n=function(e){if(!bu(e))return!1;var t=yu(e);return t==gu||t==vu||t==mu||t==xu}(e)?Nu:Au;return n.test(function(e){if(null!=e){try{return zu.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function Fu(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Lu(n)?n:void 0}var Ou=Fu(Object,"create");var Pu=Object.prototype.hasOwnProperty;var Du=Object.prototype.hasOwnProperty;function ju(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Bu(e,t){for(var n,r,i=e.length;i--;)if((n=e[i][0])===(r=t)||n!=n&&r!=r)return i;return-1}ju.prototype.clear=function(){this.__data__=Ou?Ou(null):{},this.size=0},ju.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ju.prototype.get=function(e){var t=this.__data__;if(Ou){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Pu.call(t,e)?t[e]:void 0},ju.prototype.has=function(e){var t=this.__data__;return Ou?void 0!==t[e]:Du.call(t,e)},ju.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Ou&&void 0===t?"__lodash_hash_undefined__":t,this};var qu=Array.prototype.splice;function Yu(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Yu.prototype.clear=function(){this.__data__=[],this.size=0},Yu.prototype.delete=function(e){var t=this.__data__,n=Bu(t,e);return!(n<0)&&(n==t.length-1?t.pop():qu.call(t,n,1),--this.size,!0)},Yu.prototype.get=function(e){var t=this.__data__,n=Bu(t,e);return n<0?void 0:t[n][1]},Yu.prototype.has=function(e){return Bu(this.__data__,e)>-1},Yu.prototype.set=function(e,t){var n=this.__data__,r=Bu(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var Hu=Fu(ou,"Map");function Iu(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function Ru(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ru.prototype.clear=function(){this.size=0,this.__data__={hash:new ju,map:new(Hu||Yu),string:new ju}},Ru.prototype.delete=function(e){var t=Iu(this,e).delete(e);return this.size-=t?1:0,t},Ru.prototype.get=function(e){return Iu(this,e).get(e)},Ru.prototype.has=function(e){return Iu(this,e).has(e)},Ru.prototype.set=function(e,t){var n=Iu(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function Uu(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Ru;++t<n;)this.add(e[t])}function $u(e){return e!=e}function Wu(e,t){return!!(null==e?0:e.length)&&function(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):function(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}(e,$u,n)}(e,t,0)>-1}function Vu(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Gu(e,t){return e.has(t)}Uu.prototype.add=Uu.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Uu.prototype.has=function(e){return this.__data__.has(e)};var Xu=Fu(ou,"Set");function Zu(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var Ju=Xu&&1/Zu(new Xu([,-0]))[1]==1/0?function(e){return new Xu(e)}:function(){},Qu=200;function Ku(e){return e&&e.length?function(e,t,n){var r=-1,i=Wu,a=e.length,o=!0,l=[],s=l;if(n)o=!1,i=Vu;else if(a>=Qu){var c=t?null:Ju(e);if(c)return Zu(c);o=!1,i=Gu,s=new Uu}else s=t?[]:l;e:for(;++r<a;){var u=e[r],d=t?t(u):u;if(u=n||0!==u?u:0,o&&d==d){for(var f=s.length;f--;)if(s[f]===d)continue e;t&&s.push(d),l.push(u)}else i(s,d,n)||(s!==l&&s.push(d),l.push(u))}return l}(e):[]}function ed(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function td(e,t){e instanceof Map?(e=[void 0,e],void 0===t&&(t=rd)):void 0===t&&(t=nd);for(var n,r,i,a,o,l=new od(e),s=[l];n=s.pop();)if((i=t(n.data))&&(o=(i=Array.from(i)).length))for(n.children=i,a=o-1;a>=0;--a)s.push(r=i[a]=new od(i[a])),r.parent=n,r.depth=n.depth+1;return l.eachBefore(ad)}function nd(e){return e.children}function rd(e){return Array.isArray(e)?e[1]:null}function id(e){void 0!==e.data.value&&(e.value=e.data.value),e.data=e.data.data}function ad(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function od(e){this.data=e,this.depth=this.height=0,this.parent=null}function ld(e){for(var t,n,r=0,i=(e=function(e){for(var t,n,r=e.length;r;)n=Math.random()*r--|0,t=e[r],e[r]=e[n],e[n]=t;return e}(Array.from(e))).length,a=[];r<i;)t=e[r],n&&ud(n,t)?++r:(n=fd(a=sd(a,t)),r=0);return n}function sd(e,t){var n,r;if(dd(t,e))return[t];for(n=0;n<e.length;++n)if(cd(t,e[n])&&dd(pd(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(cd(pd(e[n],e[r]),t)&&cd(pd(e[n],t),e[r])&&cd(pd(e[r],t),e[n])&&dd(hd(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function cd(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function ud(e,t){var n=e.r-t.r+1e-9*Math.max(e.r,t.r,1),r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function dd(e,t){for(var n=0;n<t.length;++n)if(!ud(e,t[n]))return!1;return!0}function fd(e){switch(e.length){case 1:return{x:(t=e[0]).x,y:t.y,r:t.r};case 2:return pd(e[0],e[1]);case 3:return hd(e[0],e[1],e[2])}var t}function pd(e,t){var n=e.x,r=e.y,i=e.r,a=t.x,o=t.y,l=t.r,s=a-n,c=o-r,u=l-i,d=Math.sqrt(s*s+c*c);return{x:(n+a+s/d*u)/2,y:(r+o+c/d*u)/2,r:(d+i+l)/2}}function hd(e,t,n){var r=e.x,i=e.y,a=e.r,o=t.x,l=t.y,s=t.r,c=n.x,u=n.y,d=n.r,f=r-o,p=r-c,h=i-l,_=i-u,y=s-a,b=d-a,m=r*r+i*i-a*a,g=m-o*o-l*l+s*s,v=m-c*c-u*u+d*d,x=p*h-f*_,w=(h*v-_*g)/(2*x)-r,k=(_*y-h*b)/x,M=(p*g-f*v)/(2*x)-i,z=(f*b-p*y)/x,A=k*k+z*z-1,E=2*(a+w*k+M*z),C=w*w+M*M-a*a,T=-(A?(E+Math.sqrt(E*E-4*A*C))/(2*A):C/E);return{x:r+w+k*T,y:i+M+z*T,r:T}}function _d(e,t,n){var r,i,a,o,l=e.x-t.x,s=e.y-t.y,c=l*l+s*s;c?(i=t.r+n.r,i*=i,o=e.r+n.r,i>(o*=o)?(r=(c+o-i)/(2*c),a=Math.sqrt(Math.max(0,o/c-r*r)),n.x=e.x-r*l-a*s,n.y=e.y-r*s+a*l):(r=(c+i-o)/(2*c),a=Math.sqrt(Math.max(0,i/c-r*r)),n.x=t.x+r*l-a*s,n.y=t.y+r*s+a*l)):(n.x=t.x+n.r,n.y=t.y)}function yd(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function bd(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,a=(t.y*n.r+n.y*t.r)/r;return i*i+a*a}function md(e){this._=e,this.next=null,this.previous=null}function gd(e){if(!(a=(t=e,e="object"==typeof t&&"length"in t?t:Array.from(t)).length))return 0;var t,n,r,i,a,o,l,s,c,u,d,f;if((n=e[0]).x=0,n.y=0,!(a>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(a>2))return n.r+r.r;_d(r,n,i=e[2]),n=new md(n),r=new md(r),i=new md(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(s=3;s<a;++s){_d(n._,r._,i=e[s]),i=new md(i),c=r.next,u=n.previous,d=r._.r,f=n._.r;do{if(d<=f){if(yd(c._,i._)){r=c,n.next=r,r.previous=n,--s;continue e}d+=c._.r,c=c.next}else{if(yd(u._,i._)){(n=u).next=r,r.previous=n,--s;continue e}f+=u._.r,u=u.previous}}while(c!==u.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=bd(n);(i=i.next)!==r;)(l=bd(i))<o&&(n=i,o=l);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=ld(n),s=0;s<a;++s)(n=e[s]).x-=i.x,n.y-=i.y;return i.r}function vd(e){if("function"!=typeof e)throw new Error;return e}function xd(){return 0}function wd(e){return function(){return e}}function kd(e){return Math.sqrt(e.value)}function Md(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function zd(e,t){return function(n){if(r=n.children){var r,i,a,o=r.length,l=e(n)*t||0;if(l)for(i=0;i<o;++i)r[i].r+=l;if(a=gd(r),l)for(i=0;i<o;++i)r[i].r-=l;n.r=a+l}}}function Ad(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function Ed(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Cd(e,t,n,r,i){for(var a,o=e.children,l=-1,s=o.length,c=e.value&&(r-t)/e.value;++l<s;)(a=o[l]).y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*c}function Td(e,t){return e.parent===t.parent?1:2}function Sd(e){var t=e.children;return t?t[0]:e.t}function Nd(e){var t=e.children;return t?t[t.length-1]:e.t}function Ld(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Fd(e,t,n){return e.a.parent===t.parent?e.a:n}function Od(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function Pd(e,t,n,r,i){for(var a,o=e.children,l=-1,s=o.length,c=e.value&&(i-n)/e.value;++l<s;)(a=o[l]).x0=t,a.x1=r,a.y0=n,a.y1=n+=a.value*c}od.prototype=td.prototype={constructor:od,count:function(){return this.eachAfter(ed)},each:function(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this},eachAfter:function(e,t){for(var n,r,i,a=this,o=[a],l=[],s=-1;a=o.pop();)if(l.push(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r]);for(;a=l.pop();)e.call(t,a,++s,this);return this},eachBefore:function(e,t){for(var n,r,i=this,a=[i],o=-1;i=a.pop();)if(e.call(t,i,++o,this),n=i.children)for(r=n.length-1;r>=0;--r)a.push(n[r]);return this},find:function(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r},sum:function(e){return this.eachAfter((function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n}))},sort:function(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;e=n.pop(),t=r.pop();for(;e===t;)i=e,e=n.pop(),t=r.pop();return i}(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){return Array.from(this)},leaves:function(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e},links:function(){var e=this,t=[];return e.each((function(n){n!==e&&t.push({source:n.parent,target:n})})),t},copy:function(){return td(this).eachBefore(id)},[Symbol.iterator]:function*(){var e,t,n,r,i=this,a=[i];do{for(e=a.reverse(),a=[];i=e.pop();)if(yield i,t=i.children)for(n=0,r=t.length;n<r;++n)a.push(t[n])}while(a.length)}},Od.prototype=Object.create(od.prototype);var Dd=(1+Math.sqrt(5))/2;function jd(e,t,n,r,i,a){for(var o,l,s,c,u,d,f,p,h,_,y,b=[],m=t.children,g=0,v=0,x=m.length,w=t.value;g<x;){s=i-n,c=a-r;do{u=m[v++].value}while(!u&&v<x);for(d=f=u,y=u*u*(_=Math.max(c/s,s/c)/(w*e)),h=Math.max(f/y,y/d);v<x;++v){if(u+=l=m[v].value,l<d&&(d=l),l>f&&(f=l),y=u*u*_,(p=Math.max(f/y,y/d))>h){u-=l;break}h=p}b.push(o={value:u,dice:s<c,children:m.slice(g,v)}),o.dice?Cd(o,n,r,i,w?r+=c*u/w:a):Pd(o,n,r,w?n+=s*u/w:i,a),w-=u,g=v}return b}var Bd=function e(t){function n(e,n,r,i,a){jd(t,e,n,r,i,a)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(Dd);var qd=function e(t){function n(e,n,r,i,a){if((o=e._squarify)&&o.ratio===t)for(var o,l,s,c,u,d=-1,f=o.length,p=e.value;++d<f;){for(s=(l=o[d]).children,c=l.value=0,u=s.length;c<u;++c)l.value+=s[c].value;l.dice?Cd(l,n,r,i,p?r+=(a-r)*l.value/p:a):Pd(l,n,r,p?n+=(i-n)*l.value/p:i,a),p-=l.value}else e._squarify=o=jd(t,e,n,r,i,a),o.ratio=t}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(Dd);let Yd={Count:e=>e.reduce(((e,t)=>e+1),0),Sum:e=>e.reduce(((e,t)=>e+(isNaN(t.value)?0:t.value)),0)};function Hd(e,t){if(0===e.length||0===Ul.data.column_names.nest_columns.length)return[];let n=function(e){let t=Ul.data.column_names.nest_columns,n=Ul.data.column_names.size_columns.indexOf(Ja.size_by),r=Yl.getParser();return e.map((e=>{let i={};for(let n=0;n<t.length;n++)i[t[n]]=e.nest_columns[n];return i.value=n>-1?r(e.size_columns[n]):0,i.original_data=e,i}))}(e);t&&(n=function(e){var t=e.filter((e=>e.value>=0));return t.length,e.length,t}(n));let r=fi(),i=cp();return Ul.data.column_names.nest_columns.forEach((e=>{r=r.key((t=>t[e]))})),r=r.rollup((e=>({values:e,rollup_value:Yd[i](e)}))),r=r.entries(n),r}function Id(e){let t=e.ancestors().slice(0,-1).map((e=>e.data.key)).reverse();e.id=0===e.depth?"root":e.depth+"-"+t.join("-"),e.children&&e.children.forEach((e=>{Id(e)}))}function Rd(e){e.children&&(e.children.sort(((e,t)=>e.value>t.value?-1:e.value<t.value?1:0)),e.children.forEach(Rd))}function Ud(e){e.children&&(e.children.sort(((e,t)=>e.data.key>t.data.key?1:e.data.key<t.data.key?-1:0)),e.children.forEach(Ud))}function $d(e){void 0!==e&&e.forEach((e=>{e.level1_key=e.ancestors()[e.depth-1].data.key,$d(e.children)}))}function Wd(e){let t;return 0===e.length?(t=td({}),t.id="root",t.value=0,t.data.key="",t.data.value=0,t):(t=td({values:e},(e=>e.values)),t.descendants().forEach((e=>{e.data.column_name=Ul.data.column_names.nest_columns[e.depth-1]})),t.leaves().forEach((e=>{let t=e.data.value.values;1===t.length&&(e.data.unique_row=t[0].original_data),e.data.value=e.data.value.rollup_value})),t.sum((e=>e.value)),Id(t),"value"===Ja.sort_by?Rd(t):"name"===Ja.sort_by&&Ud(t),$d(t.children),t)}function Vd(e,t){if(!t)return null;let n=e.descendants();for(let e=0;e<n.length;e++){let r=n[e];if(r.id===t)return r}return null}function Gd(e){if(!e)return null;let t=e.ancestors().slice(0,-1);return t=t.map((e=>e.data.key)),t.reverse(),t}function Xd(e,t){let n=e.ancestors(),r=!1;for(let e=0;e<n.length;e++)n[e].id===t.id&&(r=!0);return r}var Zd=Object.freeze({categorical_type:"palette",categorical_palette:["#4328E7","#9654E5","#FF6283","#FF8800","#FFC502","#007D8E","#1AA7EE","#29DAE4","#88E99A","#019C00","#C11F1F","#730000"],categorical_extend:!0,categorical_custom_palette:"",numeric_type:"sequential",sequential_palette:"Blues",sequential_custom_min:"#F7F7F7",sequential_custom_max:"#FF6283",sequential_color_space:"rgb",sequential_reverse:!1,sequential_custom_domain:!1,sequential_domain_min:0,sequential_domain_max:1,diverging_palette:"RdBu",diverging_custom_min:"#1AA7EE",diverging_custom_mid:"#F7F7F7",diverging_custom_max:"#FF6283",diverging_color_space:"rgb",diverging_reverse:!1,diverging_custom_domain:!1,diverging_domain_min:0,diverging_domain_mid:.5,diverging_domain_max:1,binning:!1,bin_count:4,bin_mode:"fixed",bin_thresholds:""}),Jd=360/((1+Math.sqrt(5))/2),Qd="#FF0000";function Kd(e,t,n){return function(r,i){Array.isArray(r)||(r=r?[r]:[Qd]),i=void 0!==i?i:Jd;var a=r.map((function(t){return e(t)})).filter((function(e){return!isNaN(e[t])&&!isNaN(e[n])}));a.length||(a=[e(Qd)]);var o,l=a.length,s=a.reduce((function(e,n){return e+n[t]}),0)/l,c=a.reduce((function(e,t){return e+t[n]}),0)/l,u=l;do{o=a[--u].h}while(isNaN(o)&&u>0);var d=0;return function(){var t=++d*i;return vr(e((o+t)%360,s,c)).hex()}}}var ef={hcl:Kd(Zr,"c","l"),hsl:Kd(Nr,"s","l")};function tf(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function nf(e){return To(e[e.length-1])}var rf=nf(new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(tf)),af=nf(new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(tf)),of=nf(new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(tf)),lf=nf(new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(tf)),sf=nf(new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(tf)),cf=nf(new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(tf)),uf=nf(new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(tf)),df=nf(new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(tf)),ff=nf(new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(tf)),pf=nf(new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(tf)),hf=nf(new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(tf)),_f=nf(new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(tf)),yf=nf(new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(tf)),bf=nf(new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(tf)),mf=nf(new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(tf)),gf=nf(new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(tf)),vf=nf(new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(tf)),xf=nf(new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(tf)),wf=nf(new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(tf)),kf=nf(new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(tf)),Mf=nf(new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(tf)),zf=nf(new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(tf)),Af=nf(new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(tf)),Ef=nf(new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(tf)),Cf=nf(new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(tf)),Tf=nf(new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(tf)),Sf=nf(new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(tf)),Nf=el(li(300,.5,0),li(-240,.5,1)),Lf=el(li(-100,.75,.35),li(80,1.5,.8)),Ff=el(li(260,.75,.35),li(80,1.5,.8));function Of(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}li();var Pf=Of(tf("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Df=Of(tf("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),jf=Of(tf("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Bf=Of(tf("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function qf(e,t){return e-t}function Yf(e,t){var n=t[0],r=t[t.length-1],i=pl().domain([n,r]),a=Math.floor(e.bin_count);return i.range(io(a)),i.thresholds()}function Hf(e,t,n){var r;return r="fixed"==e.bin_mode?Yf(e,t):"quantile"==e.bin_mode?function(e,t,n){var r=fl().domain(n),i=Math.floor(e.bin_count);return r.range(io(i)),r.quantiles()}(e,0,n):function(e){return e.bin_thresholds.split(";").map(parseFloat).filter((function(e){return!isNaN(e)&&null!==e})).sort(qf)}(e),r}function If(e,t,n,r,i){for(var a=1+t;a<=e+t;a++)i.push(r(n(a)))}function Rf(e,t,n){var r=t.length,i=dl(),a=[];if(1===r)a.push(n(.5));else if(2===e.length)i.domain([1,r]).range([0,1]),If(r,0,i,n,a);else if(2===r)a.push(n(0)),a.push(n(1));else{var o,l,s=e[1],c=function(e,t){var n;return e.forEach((function(e,r){Math.abs(e-t)<.001&&(n=r)})),n}(t,s);c?(o=c,l=r-c-1,i.domain([1,o+1]).range([0,.5]),If(o,0,i,n,a),a.push(n(.5)),i.domain([1,l+1]).range([.5,1]),If(l,1,i,n,a)):(o=function(e,t){var n=0;return e.forEach((function(e){e<t&&n++})),n}(t,s),l=r-o,i.domain([1,o+1]).range([0,.5]),If(o,0,i,n,a),i.domain([1,l+1]).range([.5,1]),If(l,1,i,n,a))}return a}function Uf(e,t,n,r){var i,a=Hf(e,t,n),o=function(e,t,n){var r=[];if(0===t.length)return[.5*(e+n)];r.push(.5*(e+t[0]));for(var i=0;i<t.length-1;i++)r.push(.5*(t[i]+t[i+1]));return r.push(.5*(n+t[t.length-1])),r}(t[0],a,t[t.length-1]),l=Rf(t,o,r);(i="quantile"==e.bin_mode?fl().domain(n):hl().domain(a)).range(l);var s=function(e){return isNaN(e)||null===e?null:i(e)};return s.domain=Object.freeze(t),s.thresholds=Object.freeze(a),s.centers=Object.freeze(o),s}function $f(e){return Array.isArray(e)?ro(e):[0,1]}var Wf=Object.freeze(["#efeca4","#e9e28f","#dccf64","#e3b23c","#e49547","#e37746","#dc5b36","#cb4144","#bb2244","#972545","#6a2c4f"]),Vf=Object.freeze({Blues:zf,BuGn:pf,BuPu:hf,Carrots:To(Wf),Cool:Ff,CubehelixDefault:Nf,GnBu:_f,Greens:Af,Greys:Ef,Inferno:jf,Magma:Df,Oranges:Sf,OrRd:yf,Plasma:Bf,PuBu:mf,PuBuGn:bf,PuRd:gf,Purples:Cf,RdPu:vf,Reds:Tf,Viridis:Pf,Warm:Lf,YlGn:wf,YlGnBu:xf,YlOrBr:kf,YlOrRd:Mf}),Gf={hcl:Qo,hsl:Zo,lab:Jo,rgb:Eo};function Xf(e,t){var n=e.sequential_custom_domain?[e.sequential_domain_min,e.sequential_domain_max]:$f(t),r=function(t){var n=Vf[e.sequential_palette]||function(e){var t=e.sequential_color_space,n=e.sequential_custom_min,r=e.sequential_custom_max;return Gf[t](n,r)}(e);return e.sequential_reverse?n(1-t):n(t)};if(e.binning)return Uf(e,n,t,r);var i=yl(r).domain(n),a=function(e){return isNaN(e)||null===e?null:i(e)};return a.domain=Object.freeze(n),a}var Zf=Object.freeze({BrBG:rf,PiYG:of,PRGn:af,PuOr:lf,RdBu:sf,RdGy:cf,RdYlBu:uf,RdYlGn:df,Spectral:ff}),Jf={hcl:Qo,hsl:Zo,lab:Jo,rgb:Eo};function Qf(e){var t=e.diverging_color_space,n=e.diverging_custom_min,r=e.diverging_custom_mid,i=e.diverging_custom_max;return function(e,t){for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return a[t](e-t)}}(Jf[t],[n,r,i])}var Kf,ep,tp,np,rp=function(e){var t=null;for(var n in Zd)void 0===e[n]&&(e[n]=Zd[n]);var r=null,i=function(e){return t&&t(e)||r};return{getColor:i,updateColorScale:function(n){return"number"!=typeof n[0]?t=function(e,t){var n={},r=gi(t).values(),i=e.categorical_palette,a=i.length;if(e.categorical_extend){var o=Zd.rotation_angle,l=ef.hcl(i,o);r.forEach((function(e,t){n[e]=t<a?i[t]:l()}))}else r.forEach((function(e,t){n[e]=i[t%a]}));e.categorical_custom_palette.split("\n").filter((function(e){return e})).forEach((function(e){var t=e.lastIndexOf(":");if(-1!==t){var r=e.slice(0,t).trim(),i=e.slice(t+1).trim();r&&i&&(n[r]=i)}}));var s=function(e){return n[e]};return s.domain=r.slice(),s.colors=r.map((function(e){return n[e]})),s.items=r.map((function(e){return{label:e,color:n[e]}})),s}(e,n):"sequential"===e.numeric_type?t=Xf(e,n):"diverging"===e.numeric_type&&(t=function(e,t){var n=$f(t),r=n[0]<0&&n[1]>0?0:(n[0]+n[1])/2,i=[n[0],r,n[1]];e.diverging_custom_domain&&(i=[e.diverging_domain_min,e.diverging_domain_mid,e.diverging_domain_max]);var a=function(t){var n=Zf[e.diverging_palette]||Qf(e);return e.diverging_reverse?n(1-t):n(t)};if(e.binning)return Uf(e,i,t,a);var o=bl(a).domain(i),l=function(e){return isNaN(e)||null===e?null:o(e)};return l.domain=Object.freeze(i),l.midpoint=e.diverging_custom_domain?e.diverging_domain_mid:r,l}(e,n)),i.thresholds=t.thresholds,i.centers=t.centers,i.midpoint=t.midpoint,i.domain=t.domain,i.colors=t.colors,i.items=t.items,this},fallback:function(e){return void 0===e?r:(r="default"===e?null:e,this)}}}(Ja.color),ip=[];function ap(e){return 180*e/Math.PI}function op(e){return e*Math.PI/180}function lp(){let e=Ja.color.categorical_custom_palette,t=[];return e.split("\n").filter((function(e){return e})).forEach((function(e){var n=e.lastIndexOf(":");if(-1!==n){var r=e.slice(0,n).trim();r&&t.push(r)}})),t}function sp(e){return lp().indexOf(e)>-1}function cp(){return Ul.data.column_names.size_columns.length>0?Ja.aggregation_type:"Count"}function up(e){return e.depth>1&&sp(e.data.key)}function dp(e,t){return 0===e.depth?"none":1===e.depth||sp(e.data.key)?rp.getColor(e.data.key):t?"white":rp.getColor(e.level1_key)}function fp(e){return dp(e,!0)}function pp(e){return dp(e,!1)}function hp(){return{low:16,medium:24,high:32}[Ja.cellPadding]}function _p(e){return"allUpperCase"===Ja.label_case||(!(!e||"bottomUpperCase"!==Ja.label_case)||!e&&"topUpperCase"===Ja.label_case)}function yp(e){return"allBold"===Ja.label_weight||e&&"bottomBold"===Ja.label_weight?"bold":e||"topBold"!==Ja.label_weight?"normal":"bold"}function bp(e,t,n){let r=Di(e+"...",n||"");if(t-r-8>0)return e;let i=Math.floor(e.length*t/r);return i=Math.max(0,i-3),(e=e.slice(0,i)).length>0&&(e+="…"),e}function mp(){return ru.root.leaves()[0].depth+1}function gp(){return Vd(ru.root,Ja.zoomed_node_id)||ru.root}function vp(e,t,n,r,i,a){let o=10*(t-2*r)/Di(e,"10px "+i+(a?" bold":"")),l=Math.max(0,n-2*r);return Math.min(o,l)}function xp(e,t,n,r,i,a){let o=function(e){const t=e.split(/\s+/g);return t[t.length-1]||t.pop(),t[0]||t.shift(),t}(e),l=t&&""!==t;l&&o.push(t);let s=[],c={text:""},u=r+"px "+a;for(let e=0;e<o.length;e++){if(s.length*r>i)return[];let t=o[e];if(Di(t,u)>n)return[];if(l&&e===o.length-1)c={text:t},s.push(c);else if(""===c.text)c.text=t,s.push(c);else{let e=c.text+" "+t;Di(e,u)<=n?c.text=e:(c={text:t},s.push(c))}}return s=s.map((function(e){return e.text})),s}function wp(e,t,n,r,i,a){let o=xp(e,t,n,r,i,a).length;return o>0?o*r:1/0}function kp(e,t,n,r,i,a,o,l,s){let c=.5*(n+r),u=wp(e,t,i,Math.pow(2,c),a,s);return u<=a&&c>o&&(o=c),0===l?o:u<a?kp(e,t,c,r,i,a,o,l-1,s):kp(e,t,n,c,i,a,o,l-1,s)}function Mp(e,t,n,r,i,a,o,l,s){let c=Math.max(0,n-2*i),u=Math.max(0,r-2*i);if(wp(e,t,c,o,u,s)<=u){return{lines:xp(e,t,c,o,u,s),size:o}}if(a>u)return{lines:[],size:a};if(wp(e,"",c,a,u,s)>u){if(l){let t=function(e,t,n,r,i){let a=xp(e,null,t,n,1/0,i);if(0===a.length)return[];let o=Math.floor(r/n);if(0===o)return[];let l=a.slice(0,o),s=l.slice(-1)[0].slice(0,-3)+"…";return l[l.length-1]=s,l}(e,c,a,u,s);if(0===t.length)t=[bp(e,c,a+"px "+s)];return{lines:t,size:a}}return{lines:[],size:0}}let d=wp(e,t,c,a,u,s)<=u?t:"",f=Math.log(a)/Math.log(2),p=kp(e,d,f,Math.log(o)/Math.log(2),c,u,f,2,s),h=Math.pow(2,p);return{lines:xp(e,d,c,h,u,s),size:h}}function zp(){return Ja.bar_axis_labels_above?Pi(Ja.bar_axis_label_size):0}function Ap(e,t){let n=e/t-Ja.bar_bar_padding-zp();return n=Math.min(n,Ja.bar_max_bar_thickness),n=Math.max(n,Ja.bar_min_bar_thickness),n}function Ep(e){return"never"!==e&&("editor"!==e||"editor"===Flourish.environment||"story_editor"===Flourish.environment)}function Cp(){let e=(tp="filter"in Ul.data.column_names)&&Ep(Ja.filter_control_visibility);if(fy.visible(e),Kf&&!tp&&(fy.remove(),Kf=!1,Ja.filter=null),tp){var t,n=function(e){for(var t=[],n={},r=0;r<e.length;r++)e[r]in n||(n[e[r]]=!0,t.push(e[r]));return t}(Ul.data.map((function(e){return e.filter})));t=Ja.filter_include_all?[Ja.filter_all_label].concat(n):n,Kf||(vy.add([fy]),fy.on("change",(function(e){Ja.filter=e,J_()})),Kf=!0),-1===t.indexOf(Ja.filter)&&(Ja.filter=t[0]),fy.options(t).value(Ja.filter).update()}}function Tp(){let e=(np=Ul.data.column_names.size_columns.length>1)&&Ep(Ja.size_by_control_visibility);if(py.visible(e),function(){var e=Ul.data.column_names.size_columns.map((e=>e));if(0===e.length)return void(Ja.size_by=null);-1===e.indexOf(Ja.size_by)&&(Ja.size_by=e[0])}(),ep&&!np&&(py.remove(),ep=!1),np){var t=Ul.data.column_names.size_columns.map((e=>e));ep||(vy.add([py]),py.on("change",(function(e){Ja.size_by=e,J_()})),ep=!0),py.options(t).value(Ja.size_by).update()}}const Sp={x:10,y:10},Np={x:10,y:10},Lp=40,Fp=.2,Op="#ffffff",Pp="#333333";var Dp,jp,Bp,qp,Yp,Hp,Ip,Rp,Up,$p;function Wp(e){let t=e.id||e.data.id;e.display&&!1===e.display.visible||j_||"root"===t||(!function(e,t){let n=Vd(ru.root,t.id);if(!dy(n))return;let r=sy(n),i=ay(n);ty.locked()||ty.setColumnNames(r.column_names);ty.mouseover(i,r.datum)}(0,e),"popup"!==Ja.popup.mode&&"both"!==Ja.popup.mode||iy(e.id),ty.locked()||ey("updateHighlightedNode",t))}function Vp(e){var t;e.display&&!1===e.display.visible||j_||(t=K.relatedTarget,ny.contains(t)||(ty.mouseout(),ty.locked()||(iy(null),ey("updateHighlightedNode",null))))}function Gp(e){e.display&&!1===e.display.visible||j_||(K.stopPropagation(),0!==e.height&&ey("zoomToNode",e))}function Xp(){ue(this).on("mouseover",Wp).on("mouseout",Vp).on("click",Gp)}var Zp={treemapBinary:function(e,t,n,r,i){var a,o,l=e.children,s=l.length,c=new Array(s+1);for(c[0]=o=a=0;a<s;++a)c[a+1]=o+=l[a].value;!function e(t,n,r,i,a,o,s){if(t>=n-1){var u=l[t];return u.x0=i,u.y0=a,u.x1=o,void(u.y1=s)}var d=c[t],f=r/2+d,p=t+1,h=n-1;for(;p<h;){var _=p+h>>>1;c[_]<f?p=_+1:h=_}f-c[p-1]<c[p]-f&&t+1<p&&--p;var y=c[p]-d,b=r-y;if(o-i>s-a){var m=r?(i*b+o*y)/r:o;e(t,p,y,i,a,m,s),e(p,n,b,m,a,o,s)}else{var g=r?(a*b+s*y)/r:s;e(t,p,y,i,a,o,g),e(p,n,b,i,g,o,s)}}(0,s,e.value,t,n,r,i)},treemapResquarify:qd,treemapSlice:Pd,treemapDice:Cd,treemapSliceDice:function(e,t,n,r,i){(1&e.depth?Pd:Cd)(e,t,n,r,i)}},Jp=function(){var e=Bd,t=!1,n=1,r=1,i=[0],a=xd,o=xd,l=xd,s=xd,c=xd;function u(e){return e.x0=e.y0=0,e.x1=n,e.y1=r,e.eachBefore(d),i=[0],t&&e.eachBefore(Ed),e}function d(t){var n=i[t.depth],r=t.x0+n,u=t.y0+n,d=t.x1-n,f=t.y1-n;d<r&&(r=d=(r+d)/2),f<u&&(u=f=(u+f)/2),t.x0=r,t.y0=u,t.x1=d,t.y1=f,t.children&&(n=i[t.depth+1]=a(t)/2,r+=c(t)-n,u+=o(t)-n,(d-=l(t)-n)<r&&(r=d=(r+d)/2),(f-=s(t)-n)<u&&(u=f=(u+f)/2),e(t,r,u,d,f))}return u.round=function(e){return arguments.length?(t=!!e,u):t},u.size=function(e){return arguments.length?(n=+e[0],r=+e[1],u):[n,r]},u.tile=function(t){return arguments.length?(e=vd(t),u):e},u.padding=function(e){return arguments.length?u.paddingInner(e).paddingOuter(e):u.paddingInner()},u.paddingInner=function(e){return arguments.length?(a="function"==typeof e?e:wd(+e),u):a},u.paddingOuter=function(e){return arguments.length?u.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):u.paddingTop()},u.paddingTop=function(e){return arguments.length?(o="function"==typeof e?e:wd(+e),u):o},u.paddingRight=function(e){return arguments.length?(l="function"==typeof e?e:wd(+e),u):l},u.paddingBottom=function(e){return arguments.length?(s="function"==typeof e?e:wd(+e),u):s},u.paddingLeft=function(e){return arguments.length?(c="function"==typeof e?e:wd(+e),u):c},u}();function Qp(e,t,n){e.display.x0=t(e.x0),e.display.x1=t(e.x1),e.display.y0=n(e.y0),e.display.y1=n(e.y1),void 0!==e.children&&e.children.forEach((e=>{Qp(e,t,n)}))}function Kp(e,t,n){e.children.forEach((e=>{e.display.x0=t(e.display.x0),e.display.x1=t(e.display.x1),e.display.y0=n(e.display.y0),e.display.y1=n(e.display.y1),e.display.x1<e.display.x0&&(e.display.x1=e.display.x0),e.display.y1<e.display.y0&&(e.display.y1=e.display.y0),e.children&&Kp(e,t,n)}))}function eh(e,t){if(!e.children)return;Kp(e,dl().domain([e.display.x0,e.display.x1]).range([e.display.x0+t,e.display.x1-t]),dl().domain([e.display.y0,e.display.y1]).range([e.display.y0+t,e.display.y1-t])),e.children.forEach((e=>{eh(e,t)}))}function th(e){if(e.display.top_label="",!1===e.display.visible_leaf&&0!==e.depth){let n=hp(),r=e.display.x1-e.display.x0-2*n,i=e.data.key,a="'"+Ja.layout.body_font.name+"'";if(Ja.zoomed_node_id&&Ja.zoomed_node_id===e.id){var t=Gd(e);i=t?t.join(" | "):""}_p(!1)&&(i=i.toUpperCase()),e.display.top_label=bp(i,r,"10px "+a),e.display.top_label_font_size=11;let o=.5*(n-16),l=e.display.x1-e.display.x0,s=4+o;e.display.top_label_x=Za?l-s:s,e.display.top_label_y=12+o}e.display.top_label_weight=yp(!1),e.children&&e.children.forEach((e=>{th(e)}))}function nh(e){let t=e.display.x1-e.display.x0,n=e.display.y1-e.display.y0,r=Pi(Ja.min_label_size),i=Pi(Ja.max_label_size),a=e.data.key,o="'"+Ja.layout.body_font.name+"'";if(e.display.multi_line_label=!1,e.display.multi_line_center_label_lines=[],e.display.visible&&e.display.visible_leaf){_p(!0)&&(a=a.toUpperCase());let l=Ja.show_value_labels?ql(e.value):"";if(Ja.multi_line_labels||0===Ja.number_formatter.prefix.indexOf(":")||(l=" "+l),Ja.multi_line_labels){e.display.multi_line_label=!0;let s=Mp(a,l,t,n,Pi(Ja.label_padding),r,i,!0,o),c=-.5*s.lines.length*s.size;e.display.multi_line_center_label_lines=s.lines.map(((e,t)=>{let n=s.size,r=yp(!0),i=c+(t+.8)*n;if(Ja.show_value_labels&&t===s.lines.length-1){n*=Ja.value_label_relative_size,r=Ja.value_label_bold?"bold":"normal";let e=3;i-=.8*(s.size-n)-e}return{text:e,size:n,weight:r,line_offset:i}}))}else if(r>n)e.display.center_label_text="",e.display.value_text="",e.display.center_label_font_size=0;else{let i=!0,s=vp(a+l,t,n,Pi(Ja.label_padding),o);s=Math.min(Pi(Ja.max_label_size),s),s<r&&(i=!1,s=vp(a,t,n,Pi(Ja.label_padding),o),s=Math.min(Pi(Ja.max_label_size),s),s<r&&(a=bp(a,t,r+"px "+o))),e.display.center_label_text=a,e.display.center_value_text=i?l:null,e.display.center_label_font_size=s,e.display.center_label_weight=yp(!0)}}e.display.center_label_x=.5*t,e.display.center_label_y=.5*n,e.children&&e.children.forEach((e=>{nh(e)}))}function rh(e,t,n){let r=[Math.max(t-2,0),Math.max(n-2,0)],i=hp(),a=Math.min(r[0],r[1]);i=Math.min(i,.5*a);var o=Zp[Ja.treemap_type];"treemapResquarify"==Ja.treemap_type&&(o=o.ratio(Ja.treemap_ratio)),Jp.size(r).tile(o),Jp(e);let l=dl(),s=dl();l.domain([0,r[0]]).range([0,r[0]]),s.domain([0,r[1]]).range([0,r[1]]);var c=gp();if("root"!==c.id){if(!c)return ey("zoomOut");l.domain([c.x0,c.x1]),s.domain([c.y0,c.y1])}else l.domain([i,r[0]-i]),s.domain([i,r[1]-i]);Qp(e,l,s),eh(c||e,i),th(e),nh(e)}let ih=null;function ah(e){ih=e}function oh(e){if(null!=Ja.label_color)return Ja.label_color;var t=pp(e),n="sunburst"===Ja.hierarchy_layout?1-Ja.sunburst_depth_fade:Fp,r=Math.min(Ja.num_of_visible_levels,e.depth+e.height)-1,i=Eo("white",t)(Math.pow(1-n,r)),a="none"===t||function(e){if(!e)return void console.warn("No valid color",e);const t=Bi(e),n=.2126*Yi(t.r/255)+.7152*Yi(t.g/255)+.0722*Yi(t.b/255);return(1>n?(n+.05)/1.05:1.05/(n+.05))>(0>n?(n+.05)/.05:.05/(n+.05))}(i);return a?Pp:Op}function lh(e,t){ue(this).style("fill",fp).style("stroke",Ja.stroke_color||Ja.layout.background_color).style("display",e.display.visible?"inline":"none").style("cursor",e.children&&Ja.zoomed_node_id!==e.id?"pointer":"default").transition().duration(t).attr("width",e.display.x1-e.display.x0).attr("height",e.display.y1-e.display.y0)}function sh(e,t){e.display.visible&&!0===e.display.visible_leaf&&(ue(this).attr("dy","0.33em").text(e.display.center_label_text).style("font-weight",e.display.center_label_weight).transition("font-size").duration(t).style("font-size",e.display.center_label_font_size+"px"),ue(this).append("tspan").style("font-weight",Ja.value_label_bold?"bold":"normal").style("font-size",Ja.value_label_relative_size+"em").text(e.display.center_value_text)),ue(this).transition().duration(t).style("opacity",!0!==e.display.visible||!0!==e.display.visible_leaf||e.display.multi_line_label?0:1).attr("x",e.display.center_label_x).attr("y",e.display.center_label_y)}function ch(e,t){let n=e.display.multi_line_center_label_lines;if(ue(this).transition("label-center").duration(t).attr("transform","translate("+e.display.center_label_x+","+e.display.center_label_y+")"),JSON.stringify(this.__current_multi_lines)===JSON.stringify(n.map((e=>e.text))))return ue(this).transition("center-label").duration(t).style("opacity",!0===e.display.visible&&!0===e.display.visible_leaf&&e.display.multi_line_label?1:0),void ue(this).selectAll("tspan").data(n).transition("center-label").duration(t).style("font-weight",(e=>e.weight)).style("font-size",(e=>e.size+"px")).attr("y",(e=>e.line_offset));ue(this).transition("center-label").duration(.5*t).style("opacity",0).on("end",(function(){ue(this).transition("center-label").duration(.5*t).style("opacity",!0===e.display.visible&&!0===e.display.visible_leaf&&e.display.multi_line_label?1:0);var r=ue(this).selectAll("tspan").data(n);r.enter().append("tspan").merge(r).text((function(e){return e.text})).transition("center-label").duration(0).style("font-size",(e=>e.size+"px")).style("font-weight",(e=>e.weight)).attr("x",0).attr("y",(e=>e.line_offset)),r.exit().remove(),this.__current_multi_lines=n.map((e=>e.text))}))}function uh(e){0!==e.depth&&(ue(this).style("display",!0===e.display.visible&&!1===e.display.visible_leaf?"inline":"none").style("fill",oh).style("font-weight",e.display.top_label_weight),!1===e.display.visible_leaf&&ue(this).attr("x",e.display.top_label_x).attr("y",e.display.top_label_y).style("font-size",e.display.top_label_font_size+"px").text(e.display.top_label))}function dh(){Yp.selectAll("g").select("rect").style("opacity",(e=>{if(!1===e.display.visible)return 0;var t=up(e);let n=t||1==e.depth?1:Fp,r=1==e.depth||t?.8:2;return n*(e.id===ih?r:1)}))}function fh(e,t,n){let r=!1===e?0:1e3*Ja.animation_duration;if(Yp.transition().duration(r).style("opacity","treemap"===Ja.hierarchy_layout?1:0).on("end",(function(){"treemap"!==Ja.hierarchy_layout&&Yp.selectAll("g").remove()})),"treemap"!==Ja.hierarchy_layout)return;rh(ru.root,t,n);let i=Yp.selectAll("g").data(ru.root.descendants(),(e=>e.id)),a=i.enter().append("g").classed("node",!0).attr("transform",(e=>"translate("+[e.display.x0,e.display.y0]+")"));a.append("rect").attr("width",(e=>e.display.x1-e.display.x0)).attr("height",(e=>e.display.y1-e.display.y0)).style("stroke-width",1),a.append("text").classed("text-center",!0).attr("x",(e=>e.display.center_label_x)).attr("y",(e=>e.display.center_label_y)).style("pointer-events","none").style("font-size","0px").style("font-weight","normal").style("text-anchor","middle"),a.append("text").classed("text-center-multiline",!0).attr("transform",(e=>"translate("+e.display.center_label_x+","+e.display.center_label_y+")")).style("pointer-events","none").style("font-weight","normal").style("text-anchor","middle"),a.append("text").classed("text-top",!0).style("pointer-events","none").style("font-size","11px"),a.merge(i).transition().duration(r).attr("transform",(function(e){return"translate("+[e.display.x0,e.display.y0]+")"})),a.each(Xp),a.merge(i).style("pointer-events",(function(e){return e.display.visible?"all":"none"})).select("rect").each((function(e){lh.call(this,e,r)})),a.merge(i).select("text.text-center").style("fill",oh).each((function(e){sh.call(this,e,r)})),a.merge(i).select("text.text-center-multiline").style("fill",oh).each((function(e){ch.call(this,e,r)})),a.merge(i).select("text.text-top").each((function(e){uh.call(this,e,r)})),i.exit().remove(),dh()}function ph(){ue(this).on("mouseover",Wp).on("mouseout",Vp).on("click",(e=>{if(e.display.visible&&!j_){if(K.stopPropagation(),0===e.height){let t=gp(),n=e.path(t);if(!(n.length>2))return;ey("zoomToNode",n[n.length-2])}ey("zoomToNode",e)}}))}var hh=function(){var e=null,t=1,n=1,r=xd;function i(i){return i.x=t/2,i.y=n/2,e?i.eachBefore(Md(e)).eachAfter(zd(r,.5)).eachBefore(Ad(1)):i.eachBefore(Md(kd)).eachAfter(zd(xd,1)).eachAfter(zd(r,i.r/Math.min(t,n))).eachBefore(Ad(Math.min(t,n)/(2*i.r))),i}return i.radius=function(t){return arguments.length?(e=function(e){return null==e?null:vd(e)}(t),i):e},i.size=function(e){return arguments.length?(t=+e[0],n=+e[1],i):[t,n]},i.padding=function(e){return arguments.length?(r="function"==typeof e?e:wd(+e),i):r},i}();function _h(e,t,n,r){e.display.x=t(e.x),e.display.y=n(e.y),e.display.r=r(e.r),void 0!==e.children&&e.children.forEach((e=>{_h(e,t,n,r)}))}function yh(e){let t,n=Math.max(e.display.r-10,0);if(e.children)if(e.display.visible_leaf||!e.display.visible)t=!1;else if(e.display.r<30)t=!1;else if(1===e.children.length){t=e.display.r-e.children[0].display.r>10,t&&(n=.5*(e.display.r+e.children[0].display.r)-3),e.children[0].display.visible_leaf&&(t=!0)}else{let n=uo(e.children.map((e=>e.display.r)));e.display.max_child_r=n,t=e.display.r-n>10}else t=!1;e.display.enough_space_for_top_label=t,e.display.top_label_path_r=n,e.children&&e.children.forEach((e=>{yh(e)}))}function bh(e){let t;if(e.display.top_label_visible=e.display.visible,0===e.depth)t="";else if(0===e.height)t="";else if(e.display.visible_leaf)t="";else if(e.display.visible)if(Ja.zoomed_node_id&&e.depth<gp().depth)t="";else if(e.display.enough_space_for_top_label)if(Ja.zoomed_node_id===e.id){t=Gd(e).join(" > ")}else{let n=function(e){let t=e.ancestors().slice(1,-1),n=[];for(let e=0;e<t.length;e++){let r=t[e];if(r.display.enough_space_for_top_label)break;n.push(r)}return n}(e);if(n.reverse(),n.length>0){t=n.map((e=>e.data.key)).join(" > ")+" > "+e.data.key}else t=e.data.key}else t="";else t="";let n=bp(t,Math.PI*e.display.r);_p(!1)&&(n=n.toUpperCase()),e.display.top_label_text=n,""===n&&(e.display.top_label_visible=!1),e.display.top_label_weight=yp(!1),e.children&&e.children.forEach((e=>{bh(e)}))}function mh(e){let t=e.display.r,n=2.2*Math.sqrt(t*t/2),r="'"+Ja.layout.body_font.name+"'",i=Pi(Ja.min_label_size),a=Pi(Ja.max_label_size),o=e.data.key;if(e.display.multi_line_label=!1,e.display.multi_line_center_label_lines=[],e.display.visible&&e.display.visible_leaf){_p(!0)&&(o=o.toUpperCase());let l=Ja.show_value_labels?ql(e.value):"";if(Ja.multi_line_labels||0===Ja.number_formatter.prefix.indexOf(":")||(l=" "+l),Ja.multi_line_labels){e.display.multi_line_label=!0;let t=Mp(o,l,n,n,Pi(Ja.label_padding),i,a,!0,r),s=-.5*t.lines.length*t.size;e.display.multi_line_center_label_lines=t.lines.map(((e,n)=>{let r=t.size,i=yp(!0),a=s+(n+.8)*r;if(Ja.show_value_labels&&n===t.lines.length-1){r*=Ja.value_label_relative_size,i=Ja.value_label_bold?"bold":"normal";let e=3;a-=.8*(t.size-r)-e}return{text:e,size:r,weight:i,line_offset:a}}))}else if(i>2*t)e.display.center_label_text="",e.display.value_text="",e.display.center_label_font_size=0;else{let n=!0,a=vp(o+l,2*t,2*t,Pi(Ja.label_padding),r);a=Math.min(Pi(Ja.max_label_size),a),a<i&&(n=!1,a=vp(o,2*t,2*t,Pi(Ja.label_padding),r),a=Math.min(Pi(Ja.max_label_size),a),a<i&&(o=bp(o,2*t,i+"px "+r))),e.display.center_label_text=o,e.display.center_value_text=n?l:null,e.display.center_label_font_size=a,e.display.center_label_weight=yp(!0)}}e.children&&e.children.forEach((e=>{mh(e)}))}function gh(e,t,n){let r=t-2*Sp.x,i=n-2*Sp.y;r=Math.max(0,r),i=Math.max(0,i);let a=Math.min(4,Math.min(r,i));hh.size([r,i]).padding(a),hh(e),"root"===e.id&&0===e.height&&(e.r=0);let o=dl(),l=dl(),s=dl();o.domain([0,r]).range([0,r]),l.domain([0,i]).range([0,i]);var c=gp();if("root"!==c.id){if(!c)return ey("zoomOut");let e,t;r>i?(t=2*c.r,e=t*(r/i),s.range([0,i/t])):(e=2*c.r,t=e*(i/r),s.range([0,r/e]));let n=c.x-.5*e,a=c.x+.5*e,u=c.y-.5*t,d=c.y+.5*t;o.domain([n,a]),l.domain([u,d])}_h(e,o,l,s),yh(e),bh(e),mh(e)}function vh(e,t){ue(this).style("fill",fp).style("display",e.display.visible?"inline":"none").style("cursor",e.children&&Ja.zoomed_node_id!==e.id?"pointer":"default").transition().duration(t).attr("r",e.display.r)}function xh(e,t){e.display.visible&&!0===e.display.visible_leaf&&(ue(this).attr("dy","0.33em").text(e.display.center_label_text).style("fill",oh).style("font-weight",e.display.center_label_weight).transition("font-size").duration(t).style("font-size",e.display.center_label_font_size+"px"),ue(this).append("tspan").style("font-weight",Ja.value_label_bold?"bold":"normal").style("font-size",Ja.value_label_relative_size+"em").text(e.display.center_value_text)),ue(this).transition().duration(t).style("opacity",!0===e.display.visible&&!0===e.display.visible_leaf?1:0)}function wh(e,t){let n=e.display.multi_line_center_label_lines;if(JSON.stringify(this.__current_multi_lines)===JSON.stringify(n.map((e=>e.text))))return ue(this).transition("center-label").duration(t).style("opacity",!0===e.display.visible&&!0===e.display.visible_leaf&&e.display.multi_line_label?1:0),void ue(this).selectAll("tspan").data(n).transition("center-label").duration(t).style("font-weight",(e=>e.weight)).style("font-size",(e=>e.size+"px")).attr("y",(e=>e.line_offset));ue(this).transition("center-label").duration(.5*t).style("opacity",0).on("end",(function(){ue(this).transition("center-label").duration(.5*t).style("opacity",!0===e.display.visible&&!0===e.display.visible_leaf&&e.display.multi_line_label?1:0);var r=ue(this).selectAll("tspan").data(n);r.enter().append("tspan").merge(r).text((function(e){return e.text})).transition("center-label").duration(0).style("font-size",(e=>e.size+"px")).style("font-weight",(e=>e.weight)).attr("x",0).attr("y",(e=>e.line_offset)),r.exit().remove(),this.__current_multi_lines=n.map((e=>e.text))}))}function kh(e,t){if(0===e.depth)return;let n=e.display.top_label_path_r;ue(this).transition().duration(t).attr("d","M-0.5,".concat(n," A").concat(n,",").concat(n," 0 1,1 0.5,").concat(n))}const Mh=dl().domain([30,60]).range([-.1,0]).clamp(!0);function zh(e){0!==e.depth&&(ue(this).style("display",e.display.top_label_visible?"inline":"none"),!1===e.display.visible_leaf&&ue(this).select("textPath").style("fill",oh).style("font-weight",(e=>e.display.top_label_weight)).style("letter-spacing",(e=>Mh(e.display.r)+"em")).text(e.display.top_label_text))}function Ah(){Hp.selectAll("g").select("circle").style("opacity",(e=>{if(!1===e.display.visible)return 0;var t=up(e);let n=t||1==e.depth?1:.2,r=1==e.depth||t?.8:2;return n*(e.id===ih?r:1)}))}function Eh(e,t,n){let r=!1===e?0:1e3*Ja.animation_duration;if(Hp.transition().duration(r).style("opacity","circlePacking"===Ja.hierarchy_layout?1:0).on("end",(function(){"circlePacking"!==Ja.hierarchy_layout&&Hp.selectAll("g").remove()})),"circlePacking"!==Ja.hierarchy_layout)return;gh(ru.root,t,n);let i=Hp.selectAll("g").data(ru.root.descendants(),(e=>e.id)),a=i.enter().append("g").attr("transform",(function(e){return"translate("+[e.display.x,e.display.y]+")"})).classed("node",!0);a.append("circle"),a.append("text").classed("text-center",!0).style("font-weight","normal").style("text-anchor","middle").style("font-size","0px").style("pointer-events","none"),a.append("text").classed("text-center-multiline",!0).style("pointer-events","none").style("font-weight","normal").style("text-anchor","middle"),a.append("path").classed("label-path",!0).attr("id",(e=>"pack-label-path-"+e.id)).attr("d",(e=>{let t=e.display.r-10;return"M-0.5,".concat(t," A").concat(t,",").concat(t," 0 1,1 0.5,").concat(t)})).style("fill","none"),a.append("text").classed("text-top",!0).append("textPath").attr("href",(e=>"#pack-label-path-"+e.id)).attr("startOffset","50%").style("text-anchor","middle").style("pointer-events","none").style("font-weight","bold").style("font-size","11px"),a.merge(i).transition().duration(r).attr("transform",(function(e){return"translate("+[e.display.x,e.display.y]+")"})),a.each(ph),a.merge(i).select("circle").each((function(e){vh.call(this,e,r)})),a.merge(i).select("text.text-center").each((function(e){xh.call(this,e,r)})),a.merge(i).select("text.text-center-multiline").style("fill",oh).each((function(e){wh.call(this,e,r)})),a.merge(i).select("path.label-path").each((function(e){kh.call(this,e,r)})),a.merge(i).select("text.text-top").each((function(e){zh.call(this,e,r)})),i.exit().remove(),Ah()}function Ch(){ue(this).on("mouseover",Wp).on("mouseout",Vp).on("click",Gp)}var Th=function(){var e=1,t=1,n=0,r=!1;function i(i){var a=i.height+1;return i.x0=i.y0=n,i.x1=e,i.y1=t/a,i.eachBefore(function(e,t){return function(r){r.children&&Cd(r,r.x0,e*(r.depth+1)/t,r.x1,e*(r.depth+2)/t);var i=r.x0,a=r.y0,o=r.x1-n,l=r.y1-n;o<i&&(i=o=(i+o)/2),l<a&&(a=l=(a+l)/2),r.x0=i,r.y0=a,r.x1=o,r.y1=l}}(t,a)),r&&i.eachBefore(Ed),i}return i.round=function(e){return arguments.length?(r=!!e,i):r},i.size=function(n){return arguments.length?(e=+n[0],t=+n[1],i):[e,t]},i.padding=function(e){return arguments.length?(n=+e,i):n},i}();function Sh(e,t){e.display=e.display||{},e.display.visible=!0,e.display.isTopVisibleLevel=e.depth===t,e.display.opacity=Math.pow(Ja.sunburst_depth_fade,e.depth-1),void 0!==e.children&&e.children.forEach((e=>{Sh(e,t)}))}function Nh(e,t){t&&t.id===e.id||0===e.height?e.display.cursorType="default":e.display.cursorType="pointer",void 0!==e.children&&e.children.forEach((e=>{Nh(e,t)}))}function Lh(e,t,n){e.display=e.display||{},e.display.a0=n(e.x0),e.display.a1=n(e.x1),e.display.r0=t(e.y0),e.display.r1=t(e.y1),e.display.rMid=.5*(e.display.r0+e.display.r1),void 0!==e.children&&e.children.forEach((e=>{Lh(e,t,n)}))}function Fh(e){let t=e.display.r1-e.display.r0;t*=.9,t=Math.max(t,0);let n=.5*(e.display.r0+e.display.r1)*(e.display.a1-e.display.a0);n*=.9,n=Math.max(n,0);let r=0===e.display.r0&&0===e.display.a0&&e.display.a1===2*Math.PI,i="radial"===Ja.sunburst_labelling||"circular"!==Ja.sunburst_labelling&&t>n,a=r?"center":i?"radial":"circular",o="'"+Ja.layout.body_font.name+"'",l=Pi(Ja.min_label_size),s=Pi(Ja.max_label_size);e.display.radialLabel="",e.display.circularLabel="",e.display.centerLabel="";let c=e.data.key,u=Ja.show_value_labels?ql(e.value):"";0!==Ja.number_formatter.prefix.indexOf(":")&&(u=" "+u),e.display.radialLabelOpacity=0,e.display.circularLabelOpacity=0,e.display.centerLabelOpacity=0,e.display.fontSize=0;let d=0,f=e.display.isTopVisibleLevel;if(e.depth>0)switch(_p(!f)&&(c=c.toUpperCase()),a){case"radial":e.display.radialLabel=c,e.display.radialValueLabel=u,e.display.radialLabelOpacity=1,d=vp(c+u,t,n,4,o,Ja.sunburst_bold_labels);break;case"circular":e.display.circularLabel=c,e.display.circularValueLabel=u,e.display.circularLabelOpacity=1,d=vp(c+u,n,t,4,o,Ja.sunburst_bold_labels);break;case"center":e.display.centerLabel=c,e.display.centerValueLabel=u,e.display.centerLabelOpacity=1,d=vp(c+u,2*t,.5*t,Pi(Ja.label_padding),o,Ja.sunburst_bold_labels)}d=Math.min(s,d),d<l&&(e.display.circularLabel="",e.display.circularValueLabel="",e.display.radialLabel="",e.display.radialValueLabel="",e.display.centerLabel="",e.display.centerValueLabel=""),e.display.fontSize=d,e.display.fontWeight=yp(!f),void 0!==e.children&&e.children.forEach((e=>{Fh(e)}))}function Oh(e,t,n){let r=.5*Math.min(t-2*Np.x,n-2*Np.y),i=mp();Th.size([2*Math.PI,i]),Th(e);let a=Ja.sunburst_show_zoomed_node_in_center?0:r*Ja.sunburst_inner_radius/100,o=dl().range([a,r*Ja.sunburst_outer_radius/100]).clamp(!0),l=dl().range([0,2*Math.PI]).clamp(!0),s=Ja.zoomed_node_id?Vd(e,Ja.zoomed_node_id):e,c=s.depth,u=Ja.sunburst_show_zoomed_node_in_center?c:Math.max(c,1),d=Math.min(c+Ja.num_of_visible_levels+1,i);if(c>0&&!s)return ey("zoomOut");o.domain([u,d]),l.domain([s.x0,s.x1]),Lh(e,o,l),Sh(e,c),Nh(e,s),Fh(e)}var Ph=Math.PI,Dh=2*Ph,jh=1e-6,Bh=Dh-jh;function qh(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Yh(){return new qh}function Hh(e){return function(){return e}}qh.prototype=Yh.prototype={constructor:qh,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,l=n-e,s=r-t,c=a-e,u=o-t,d=c*c+u*u;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(d>jh)if(Math.abs(u*l-s*c)>jh&&i){var f=n-a,p=r-o,h=l*l+s*s,_=f*f+p*p,y=Math.sqrt(h),b=Math.sqrt(d),m=i*Math.tan((Ph-Math.acos((h+d-_)/(2*y*b)))/2),g=m/b,v=m/y;Math.abs(g-1)>jh&&(this._+="L"+(e+g*c)+","+(t+g*u)),this._+="A"+i+","+i+",0,0,"+ +(u*f>c*p)+","+(this._x1=e+v*l)+","+(this._y1=t+v*s)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,r,i,a){e=+e,t=+t,a=!!a;var o=(n=+n)*Math.cos(r),l=n*Math.sin(r),s=e+o,c=t+l,u=1^a,d=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+s+","+c:(Math.abs(this._x1-s)>jh||Math.abs(this._y1-c)>jh)&&(this._+="L"+s+","+c),n&&(d<0&&(d=d%Dh+Dh),d>Bh?this._+="A"+n+","+n+",0,1,"+u+","+(e-o)+","+(t-l)+"A"+n+","+n+",0,1,"+u+","+(this._x1=s)+","+(this._y1=c):d>jh&&(this._+="A"+n+","+n+",0,"+ +(d>=Ph)+","+u+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var Ih=Math.abs,Rh=Math.atan2,Uh=Math.cos,$h=Math.max,Wh=Math.min,Vh=Math.sin,Gh=Math.sqrt,Xh=1e-12,Zh=Math.PI,Jh=Zh/2,Qh=2*Zh;function Kh(e){return e>=1?Jh:e<=-1?-Jh:Math.asin(e)}function e_(e){return e.innerRadius}function t_(e){return e.outerRadius}function n_(e){return e.startAngle}function r_(e){return e.endAngle}function i_(e){return e&&e.padAngle}function a_(e,t,n,r,i,a,o){var l=e-n,s=t-r,c=(o?a:-a)/Gh(l*l+s*s),u=c*s,d=-c*l,f=e+u,p=t+d,h=n+u,_=r+d,y=(f+h)/2,b=(p+_)/2,m=h-f,g=_-p,v=m*m+g*g,x=i-a,w=f*_-h*p,k=(g<0?-1:1)*Gh($h(0,x*x*v-w*w)),M=(w*g-m*k)/v,z=(-w*m-g*k)/v,A=(w*g+m*k)/v,E=(-w*m+g*k)/v,C=M-y,T=z-b,S=A-y,N=E-b;return C*C+T*T>S*S+N*N&&(M=A,z=E),{cx:M,cy:z,x01:-u,y01:-d,x11:M*(i/x-1),y11:z*(i/x-1)}}var o_=function(){var e=e_,t=t_,n=Hh(0),r=null,i=n_,a=r_,o=i_,l=null;function s(){var s,c,u,d=+e.apply(this,arguments),f=+t.apply(this,arguments),p=i.apply(this,arguments)-Jh,h=a.apply(this,arguments)-Jh,_=Ih(h-p),y=h>p;if(l||(l=s=Yh()),f<d&&(c=f,f=d,d=c),f>Xh)if(_>Qh-Xh)l.moveTo(f*Uh(p),f*Vh(p)),l.arc(0,0,f,p,h,!y),d>Xh&&(l.moveTo(d*Uh(h),d*Vh(h)),l.arc(0,0,d,h,p,y));else{var b,m,g=p,v=h,x=p,w=h,k=_,M=_,z=o.apply(this,arguments)/2,A=z>Xh&&(r?+r.apply(this,arguments):Gh(d*d+f*f)),E=Wh(Ih(f-d)/2,+n.apply(this,arguments)),C=E,T=E;if(A>Xh){var S=Kh(A/d*Vh(z)),N=Kh(A/f*Vh(z));(k-=2*S)>Xh?(x+=S*=y?1:-1,w-=S):(k=0,x=w=(p+h)/2),(M-=2*N)>Xh?(g+=N*=y?1:-1,v-=N):(M=0,g=v=(p+h)/2)}var L=f*Uh(g),F=f*Vh(g),O=d*Uh(w),P=d*Vh(w);if(E>Xh){var D,j=f*Uh(v),B=f*Vh(v),q=d*Uh(x),Y=d*Vh(x);if(_<Zh&&(D=function(e,t,n,r,i,a,o,l){var s=n-e,c=r-t,u=o-i,d=l-a,f=d*s-u*c;if(!(f*f<Xh))return[e+(f=(u*(t-a)-d*(e-i))/f)*s,t+f*c]}(L,F,q,Y,j,B,O,P))){var H=L-D[0],I=F-D[1],R=j-D[0],U=B-D[1],$=1/Vh(((u=(H*R+I*U)/(Gh(H*H+I*I)*Gh(R*R+U*U)))>1?0:u<-1?Zh:Math.acos(u))/2),W=Gh(D[0]*D[0]+D[1]*D[1]);C=Wh(E,(d-W)/($-1)),T=Wh(E,(f-W)/($+1))}}M>Xh?T>Xh?(b=a_(q,Y,L,F,f,T,y),m=a_(j,B,O,P,f,T,y),l.moveTo(b.cx+b.x01,b.cy+b.y01),T<E?l.arc(b.cx,b.cy,T,Rh(b.y01,b.x01),Rh(m.y01,m.x01),!y):(l.arc(b.cx,b.cy,T,Rh(b.y01,b.x01),Rh(b.y11,b.x11),!y),l.arc(0,0,f,Rh(b.cy+b.y11,b.cx+b.x11),Rh(m.cy+m.y11,m.cx+m.x11),!y),l.arc(m.cx,m.cy,T,Rh(m.y11,m.x11),Rh(m.y01,m.x01),!y))):(l.moveTo(L,F),l.arc(0,0,f,g,v,!y)):l.moveTo(L,F),d>Xh&&k>Xh?C>Xh?(b=a_(O,P,j,B,d,-C,y),m=a_(L,F,q,Y,d,-C,y),l.lineTo(b.cx+b.x01,b.cy+b.y01),C<E?l.arc(b.cx,b.cy,C,Rh(b.y01,b.x01),Rh(m.y01,m.x01),!y):(l.arc(b.cx,b.cy,C,Rh(b.y01,b.x01),Rh(b.y11,b.x11),!y),l.arc(0,0,d,Rh(b.cy+b.y11,b.cx+b.x11),Rh(m.cy+m.y11,m.cx+m.x11),y),l.arc(m.cx,m.cy,C,Rh(m.y11,m.x11),Rh(m.y01,m.x01),!y))):l.arc(0,0,d,w,x,y):l.lineTo(O,P)}else l.moveTo(0,0);if(l.closePath(),s)return l=null,s+""||null}return s.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Zh/2;return[Uh(r)*n,Vh(r)*n]},s.innerRadius=function(t){return arguments.length?(e="function"==typeof t?t:Hh(+t),s):e},s.outerRadius=function(e){return arguments.length?(t="function"==typeof e?e:Hh(+e),s):t},s.cornerRadius=function(e){return arguments.length?(n="function"==typeof e?e:Hh(+e),s):n},s.padRadius=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:Hh(+e),s):r},s.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:Hh(+e),s):i},s.endAngle=function(e){return arguments.length?(a="function"==typeof e?e:Hh(+e),s):a},s.padAngle=function(e){return arguments.length?(o="function"==typeof e?e:Hh(+e),s):o},s.context=function(e){return arguments.length?(l=null==e?null:e,s):l},s}();function l_(e,t){0!==e.depth&&(ue(this).style("cursor",e.display.cursorType).select("path").style("fill",pp).style("stroke",Ja.stroke_color||Ja.layout.background_color).style("stroke-width","0.5").style("display",e.display.visible?"inline":"none"),ue(this).select("text.radial-label").style("font-weight",e.display.fontWeight).text(e.display.radialLabel).append("tspan").style("font-weight",Ja.value_label_bold?"bold":null).style("font-size",Ja.value_label_relative_size+"em").text(e.display.radialValueLabel),ue(this).attr("dy","0.33em").select("text.circular-label textPath").style("font-weight",e.display.fontWeight).text(e.display.circularLabel).append("tspan").style("font-weight",Ja.value_label_bold?"bold":null).style("font-size",Ja.value_label_relative_size+"em").text(e.display.circularValueLabel),ue(this).select("text.center-label").style("font-weight",e.display.fontWeight).text(e.display.centerLabel).append("tspan").style("font-weight",Ja.value_label_bold?"bold":null).style("font-size",Ja.value_label_relative_size+"em").text(e.display.centerValueLabel),ue(this).transition().duration(t).tween("sunburst",(function(e){let t=this,n=ue(t).select("path.segment"),r=ue(t).select("text.radial-label"),i=ue(t).select("text.circular-label"),a=ue(t).select("path.label-path"),o=ue(t).select("text.center-label");t.__curTweenState=t.__curTweenState||{a0:e.display.a0,a1:e.display.a1,r0:e.display.r0,r1:e.display.r1,radialLabelOpacity:e.display.radialLabelOpacity,circularLabelOpacity:e.display.circularLabelOpacity,centerLabelOpacity:e.display.centerLabelOpacity,fontSize:e.display.fontSize};let l=t.__curTweenState,s=Bo(l.a0,e.display.a0),c=Bo(l.a1,e.display.a1),u=Bo(l.r0,e.display.r0),d=Bo(l.r1,e.display.r1),f=Bo(l.radialLabelOpacity,e.display.radialLabelOpacity),p=Bo(l.circularLabelOpacity,e.display.circularLabelOpacity),h=Bo(l.centerLabelOpacity,e.display.centerLabelOpacity),_=Bo(l.fontSize,e.display.fontSize);return function(e){t.__curTweenState.a0=s(e),t.__curTweenState.a1=c(e),t.__curTweenState.r0=u(e),t.__curTweenState.r1=d(e),t.__curTweenState.radialLabelOpacity=f(e),t.__curTweenState.circularLabelOpacity=p(e),t.__curTweenState.centerLabelOpacity=h(e),t.__curTweenState.fontSize=_(e);let l=s(e),y=c(e),b=u(e),m=d(e);n.attr("d",o_({startAngle:l,endAngle:y,innerRadius:b,outerRadius:m})).style("stroke-width",y-l==0?0:.5);let g=ap(.5*(s(e)+c(e)))-90,v=.5*(b+m);r.style("opacity",f(e)).style("font-size",Math.floor(_(e))+"px").attr("transform",g>90?"rotate(".concat(g-180,")translate(").concat(-v,", 0)"):"rotate(".concat(g,")translate(").concat(v,", 0)")),i.style("font-size",Math.floor(_(e))+"px").style("opacity",p(e)),o.style("opacity",h(e)).style("font-size",Math.floor(_(e))+"px");let x=v*Math.sin(s(e))+1e-4,w=-v*Math.cos(s(e)),k=v*Math.sin(c(e))-1e-4,M=-v*Math.cos(c(e)),z=c(e)-s(e)>=Math.PI?1:0,A=.5*(s(e)+c(e)),E=A>.5*Math.PI&&A<1.5*Math.PI?"M".concat(k,",").concat(M," A").concat(v,",").concat(v," 0 ").concat(z,",0 ").concat(x,",").concat(w):"M".concat(x,",").concat(w," A").concat(v,",").concat(v," 0 ").concat(z,",1 ").concat(k,",").concat(M);a.attr("d",E)}})).on("end",(function(){ue(this).select("text.radial-label").text((e=>e.display.radialLabel)).append("tspan").style("font-weight",Ja.value_label_bold?"bold":"normal").style("font-size",Ja.value_label_relative_size+"em").text((e=>e.display.radialValueLabel)),ue(this).select("text.circular-label textPath").text((e=>e.display.circularLabel)).append("tspan").style("font-weight",Ja.value_label_bold?"bold":"normal").style("font-size",Ja.value_label_relative_size+"em").text(e.display.circularValueLabel),ue(this).select("text.center-label").text((e=>e.display.centerLabel)).append("tspan").style("font-weight",Ja.value_label_bold?"bold":"normal").style("font-size",Ja.value_label_relative_size+"em").text(e.display.centerValueLabel)})))}function s_(){Ip.selectAll("g").select("path").style("opacity",(e=>{if(!1===e.display.visible)return 0;return(up(e)||1==e.depth?1:e.display.opacity)*(e.id===ih?.8:1)}))}function c_(e,t,n){let r=!1===e?0:1e3*Ja.animation_duration;if(Ip.transition().duration(r).style("opacity","sunburst"===Ja.hierarchy_layout?1:0).on("end",(function(){"sunburst"!==Ja.hierarchy_layout&&Ip.selectAll("g").remove()})),"sunburst"!==Ja.hierarchy_layout)return;Oh(ru.root,t,n),Ip.attr("transform","translate(".concat(.5*t,", ").concat(.5*n,")"));let i=Ip.selectAll("g").data(ru.root.descendants(),(e=>e.id)),a=i.enter().append("g").classed("node",!0);a.append("path").classed("segment",!0),a.append("text").classed("radial-label",!0).style("text-anchor","middle").attr("dy","0.33em").style("pointer-events","none"),a.append("path").classed("label-path",!0).style("fill","none").attr("id",(e=>"sunburst-label-path-"+e.id)),a.append("text").classed("circular-label",!0).attr("dy","0.33em").append("textPath").attr("xlink:xlink:href",(e=>"#sunburst-label-path-"+e.id)).attr("startOffset","50%").style("text-anchor","middle").style("pointer-events","none"),a.append("text").classed("center-label",!0).style("text-anchor","middle").attr("dy","0.33em").style("pointer-events","none"),a.each(Ch),a.merge(i).each((function(e){l_.call(this,e,r)})),a.merge(i).select(".radial-label").style("fill",oh),a.merge(i).select(".circular-label").style("fill",oh),a.merge(i).select(".center-label").style("fill",oh),i.exit().remove(),s_()}function u_(){ue(this).select("rect").on("mouseover",Wp).on("mouseout",Vp).on("click",Gp),ue(this).select(".axis-label").on("click",(e=>{j_||(K.stopPropagation(),ey("zoomToNode",e))}))}function d_(){return.7*Ja.bar_axis_label_space*Pi(Ja.bar_axis_label_size)}function f_(e){let t="'"+Ja.layout.body_font.name+"'",n=e.data.key;n&&_p(!0)&&(n=n.toUpperCase());let r=.2*e.display.thickness;e.display.fontSize=Math.min(Pi(Ja.label_size),e.display.thickness-2*r),e.display.fontWeight=yp(!0),e.display.barLabelText=bp(n,.9*e.display.l,e.display.fontSize+"px "+t),e.display.barLabelX=e.display.x+.5*e.display.l,e.display.barLabelY=e.display.y+.5*e.display.thickness,e.display.axisLabelY=Ja.bar_axis_labels_above?e.display.y:e.display.barLabelY,e.display.axisLabelDy=Ja.bar_axis_labels_above?"-0.2em":"0.33em",e.display.axisLabelDx=Ja.bar_axis_labels_above?"0em":"-0.3em",e.display.axisLabelSize=Pi(Ja.bar_axis_label_size),e.display.valueLabelX=e.display.x+e.display.l+Pi(.5),e.display.valueLabelY=e.display.barLabelY,e.display.valueLabelText=ql(e.value)}function p_(e,t,n,r){e.display=e.display||{};let i="",a=mp(),o=Math.min(a-1-t.depth,Ja.num_of_visible_levels);if(e.display.visible=Xd(e,t)&&e.depth-t.depth===o,e.depth>0){i=e.data.key,_p(!1)&&(i=i.toUpperCase());let t=Ja.bar_axis_labels_above?n:d_(),r="'"+Ja.layout.body_font.name+"'";i=bp(i,t,e.display.axisLabelSize+"px "+r)}e.display.axisLabelText=i,e.display.axisLabelVisible=Xd(e,t)&&t.depth===e.depth-1,e.display.axisFontWeight=yp(!1),e.display.valueLabelVisible=Ja.show_value_labels&&Xd(e,t)&&t.depth===e.depth-1,e.display.fill=pp(e),e.children&&(!function(e,t){let n=t.ancestors(),r=!1;for(let t=0;t<n.length;t++)n[t].id===e.id&&(r=!0);return r}(e,t)?function(e){let t=dl().domain([0,e.value]).range([0,e.display.l]),n=e.display.x;e.children.forEach((r=>{r.display=r.display||{},r.display.x=n,r.display.l=t(r.value),r.display.y=e.display.y,r.display.thickness=e.display.thickness,f_(r),r.display.barLabelVisible=!0,n+=t(r.value)}))}(e):function(e,t,n){let r,i,a=[0,Math.max(t-5,0)],o=uo(e.children,(e=>e.value)),l=dl().domain([0,o]).range(a);Ja.bar_max_value&&l.domain([0,Ja.bar_max_value]);let s=zp();if(Ja.auto_set_height&&!1===Flourish.fixed_height)r=Ja.bar_min_bar_thickness;else{let t=n-Lp,i=e.children.length;r=Ap(t,i)}i=r+Ja.bar_bar_padding+s,e.children.forEach(((e,t)=>{e.display=e.display||{},e.display.x=0,e.display.l=l(e.value),e.display.y=t*i+s,e.display.thickness=r,f_(e),e.display.barLabelVisible=!1}))}(e,n,r),e.children.forEach((e=>{p_(e,t,n,r)})))}function h_(e,t){ue(this).select("rect").transition().duration(t).attr("x",e.display.x).attr("y",e.display.y).attr("width",e.display.l).attr("height",e.display.thickness).style("fill",e.display.fill).style("opacity",e.display.visible?1:0).style("pointer-events",e.display.visible?"all":"none").style("stroke",Ja.stroke_color||Ja.layout.background_color),ue(this).select("text.bar-label").transition().duration(t).attr("x",e.display.barLabelX).attr("y",e.display.barLabelY).style("font-size",e.display.fontSize+"px").style("font-weight",e.display.fontWeight).style("opacity",e.display.visible&&e.display.barLabelVisible?1:0).text(e.display.barLabelText),ue(this).select("text.axis-label").transition().duration(t).attr("y",e.display.axisLabelY).attr("dx",e.display.axisLabelDx).attr("dy",e.display.axisLabelDy).style("opacity",e.display.axisLabelVisible?1:0).style("font-size",e.display.axisLabelSize+"px").style("font-weight",e.display.axisFontWeight).style("pointer-events",e.display.axisLabelVisible?"all":"none").style("fill",Ja.axis_label_color||Ja.layout.font_color).style("text-anchor",Ja.bar_axis_labels_above!==Za?"start":"end").text(e.display.axisLabelText),ue(this).select("text.value-label").transition().duration(t).attr("x",e.display.valueLabelX).attr("y",e.display.valueLabelY).text((e=>e.display.valueLabelText)).style("font-size",e.display.fontSize+"px").style("font-weight",Ja.value_label_bold?"bold":"normal").style("opacity",e.display.valueLabelVisible?1:0).style("fill",Ja.axis_label_color||Ja.layout.font_color).style("text-anchor",Za?"end":"start")}function __(e,t,n){let r=!1===e?0:1e3*Ja.animation_duration;if(Rp.transition().duration(r).style("opacity","bar"===Ja.hierarchy_layout?1:0).on("end",(function(){"bar"!==Ja.hierarchy_layout&&Rp.select(".bars").selectAll("*").remove()})),"bar"!==Ja.hierarchy_layout)return;let i=Ja.bar_axis_labels_above?0:d_(),a=t-i-(Ja.show_value_labels?Pi(Ja.bar_value_label_space):0),o=gp();!function(e,t,n,r){p_(e,t,n,r)}(ru.root,o,a,n);let l=ru.root.descendants().slice(1);l.reverse();let s=Rp.select(".bars").selectAll("g.node").data(l,(e=>e.id));Rp.select(".bars").transition().duration(r).attr("transform","translate(".concat(i,", ").concat(Lp,")"));let c=s.enter().append("g").classed("node",!0);c.append("rect").attr("x",(e=>e.display.x)).attr("y",(e=>e.display.y)).attr("width",(e=>e.display.l)).attr("height",(e=>e.display.thickness)).style("fill",(e=>e.display.fill)),c.append("text").classed("bar-label",!0).attr("x",(e=>e.display.barLabelX)).attr("y",(e=>e.display.barLabelY)).attr("dy","0.33em").style("text-anchor","middle").style("opacity",0).style("pointer-events","none"),c.append("text").classed("axis-label",!0).attr("y",(e=>e.display.axisLabelY)).style("opacity",0).style("text-anchor","end"),c.append("text").classed("value-label",!0).attr("x",(e=>e.display.valueLabelX)).attr("y",(e=>e.display.valueLabelY)).attr("dy","0.33em").style("opacity",0).style("pointer-events","none"),c.each(u_),c.merge(s).style("cursor",(e=>e.children?"pointer":"default")).each((function(e){h_.call(this,e,r)})),c.merge(s).select(".bar-label").style("fill",oh),s.exit().remove(),function(e,t,n){let r=e.ancestors().slice(0,-1).reverse(),i=Ja.bar_axis_labels_above?0:d_();t.select(".breadcrumb").transition().duration(n).attr("transform","translate(".concat(i,", 30)"));let a=t.select(".breadcrumb").style("font-weight","allBold"===Ja.label_weight||"topBold"===Ja.label_weight?"bold":"normal").select("text").selectAll("tspan.item").data(r),o=a.enter().append("tspan").style("opacity",0).style("fill",Ja.axis_label_color||Ja.layout.font_color).classed("item",!0);o.append("tspan").classed("separator",!0).text(" > "),o.append("tspan").classed("label",!0).on("click",(e=>{j_||(K.stopPropagation(),ey("zoomToNode",e))})),o.merge(a).transition().duration(n).style("fill",Ja.axis_label_color||Ja.layout.font_color).style("opacity",1),a.select("tspan.label").text((e=>"allUpperCase"===Ja.label_case||"topUpperCase"===Ja.label_case?e.data.key.toUpperCase():e.data.key)),a.exit().transition().duration(n).style("opacity",0).remove()}(o,Rp,r)}function y_(){Rp.select(".bars").selectAll("g").select("rect").style("opacity",(e=>{let t=e.id===ih;return e.display.visible?t?.7:1:0}))}function b_(e,t){return{x:t*Math.cos(e),y:t*Math.sin(e)}}function m_(e,t,n,r,i,a,o,l,s,c){e.each((function(e){var u,d=ap(l(e.data.x)),f=s(e.data.y),p=e.data.value,h=e.data.value<0,_=0===e.height||e.depth===t.depth+Ja.num_of_visible_levels,y=0===e.depth;e.data.display.rotate=d,e.data.display.translate=f,e.data.display.parent_rotate=ap(l(e.data.parent_x)),e.data.display.parent_translate=s(e.data.parent_y),e.data.display.cp2_translate=e.depth===t.depth+1?0:(e.data.display.translate+e.data.display.parent_translate)/2,e.data.display.bar_width=i,e.data.display.bar_length=_?Math.abs(c(p)):0,e.data.display.bar_translate=_?p>0?0:-e.data.display.bar_length:0,e.data.display.circle_opacity=_||y?0:1,e.data.display.bar_opacity=_?1:0,function(e,t,n,r,i,a,o,l,s,c){let u={},d=e.data.key;d&&_p(!0)&&(d=d.toUpperCase()),u.normal=n?"translate(4, 0)":"translate(8, 0)",i||(u.normal+="translate("+e.data.display.bar_length+", 0)"),u.reversed=n?"rotate(180)translate(-4, 0)":"rotate(180)translate(-8, 0)",i||(u.reversed+="translate("+-e.data.display.bar_length+", 0)");var f=a>-90&&a<90?"normal":"reversed";e.data.display.name_label_orientation=f,e.data.id===r.data.id&&(e.data.display.name_label_orientation="normal",u.normal="rotate("+-a+")translate(8, 0)",d&&_p(!1)&&(d=d.toUpperCase())),e.data.display.name_label_transform=u;let p="'"+Ja.layout.body_font.name+"'",h=l>20?.2*l:.05*l,_=Math.min(Pi(Ja.label_size),Math.floor(l-2*h)),y=_+"px "+p,b="bold "+y,m="",g="";if(n){let t=c-4-e.data.display.bar_length,n=!1;if(Ja.radial_tree_show_values){g=ql(o);let e=Di(g+" ",b);e>=t?(g=bp(g,t,b),n=!0):t-=e}n||(m=bp(d||"",t,y))}else t||(m=bp(d||"",.8*s,y));e.data.display.label_size=_,e.data.display.font_weight=yp(e.data.id!==r.data.id),e.data.display.name_label=m,e.data.display.value_label=g}(e,y,_,t,h,d,p,i,a,o),e.data.display.color=pp(e),Ja.radial_tree_colored_links?(u=Mr(e.data.display.color)).opacity=.25:u=Ja.radial_tree_link_color,e.data.display.link_color=u;var b=b_(op(d),f+(_?e.data.display.bar_length:0));e.data.display.popup={x:.5*n+b.x,y:.5*r+b.y}}))}function g_(){ue(this).on("mouseover",Wp).on("mouseout",Vp).on("click",(e=>{Gp(Vd(ru.root,e.data.id))}))}function v_(e){e.append("tspan").classed("name-label",!0),e.append("tspan").classed("value-label",!0).style("font-weight","bold")}function x_(e,t,n){var r=e.append("g").classed("name-label-"+n,!0).style("opacity",0).style("fill",(function(e){return e.data.display.color})).style("font-size",(function(e){return e.data.display.label_size+"px"})).style("font-weight",t.data.display.font_weight),i=r.append("text").classed("name-label-background",!0).attr("dy","0.33em").style("stroke-width","0.25em"),a=r.append("text").classed("name-label-foreground",!0).attr("dy","0.33em");v_(i),v_(a)}function w_(e,t){var n=ue(this);this._tween={rotate:e.data.display.prev_rotate,translate:e.data.display.prev_translate},n.classed("node",!0).style("opacity",0).transition().duration(.5*t).delay(.5*t).style("opacity",1),n.classed("node",!0).attr("transform",(function(e){return"rotate("+e.data.display.prev_rotate+")"})),(n=n.append("g")).classed("translate-layer",!0).attr("transform",(function(e){return"translate("+e.data.display.prev_translate+")"})),n.append("circle").attr("r",4).style("opacity",0).style("fill",(function(e){return e.data.display.color})),x_(n,e,"normal"),x_(n,e,"reversed"),n.append("rect").style("opacity",0).style("fill",(function(e){return e.data.display.color}))}function k_(e){var t=this,n=this._tween.rotate,r=this._tween.translate,i=Bo(n,e.data.display.rotate),a=Bo(r,e.data.display.translate);return function(e){ue(t).attr("transform","rotate("+i(e)+")").select(".translate-layer").attr("transform","translate("+a(e)+")"),t._tween.rotate=i(e),t._tween.translate=a(e)}}function M_(e){ue(this).transition().duration(.5*e).style("opacity",0),ue(this).transition("nodes").duration(e).tween("node",k_).on("end",(function(){ue(this).remove()}))}function z_(e,t){Up.select(".nodes").selectAll("g.node").data(ru.root.descendants(),(function(e){return e.data.id}));var n=Up.select(".nodes").selectAll("g.node").data(e.descendants(),(function(e){return e.data.id}));n.enter().append("g").each((function(e){w_.call(this,e,t)})).each(g_).merge(n).transition("nodes").duration(t).tween("node",k_),n.exit().each((function(){M_.call(this,t)})),Up.select(".nodes").selectAll("g.node").transition().delay(t).duration(.1*t).style("opacity",1),Up.select(".nodes").selectAll("g.node").select("circle").transition("nodes").duration(t).style("fill",(function(e){return e.data.display.color})).style("opacity",(function(e){return e.data.display.circle_opacity})),Up.select(".nodes").selectAll("g.node").select("rect").transition("nodes").duration(t).style("fill",(function(e){return e.data.display.color})).style("opacity",(function(e){return e.data.display.bar_opacity})).attr("y",(function(e){return-.5*e.data.display.bar_width})).attr("x",(function(e){return e.data.display.bar_translate})).attr("width",(function(e){return e.data.display.bar_length})).attr("height",(function(e){return e.data.display.bar_width})),Up.select(".nodes").selectAll("g.node").select("g.name-label-normal").each((function(e){ue(this).selectAll("tspan.value-label").text((Za?" ":"")+e.data.display.value_label).style("font-weight",Ja.value_label_bold?"bold":"normal");var t=ue(this).selectAll("tspan.name-label");t.text((Za?"":" ")+e.data.display.name_label).style("font-weight",e.data.display.font_weight),ue(this).select(".name-label-background").style("stroke",Ja.layout.background_color),Za?t.lower():t.raise()})).style("text-anchor",Za?"end":"start").transition().duration(t).style("fill",(function(e){return e.data.display.color})).style("font-size",(function(e){return e.data.display.label_size+"px"})).style("font-weight",(function(e){return e.data.display.font_weight})).attr("transform",(function(e){return e.data.display.name_label_transform.normal})).style("opacity",(function(e){return"normal"===e.data.display.name_label_orientation?1:0})),Up.select(".nodes").selectAll("g.node").select("g.name-label-reversed").each((function(e){ue(this).selectAll("tspan.name-label").text(e.data.display.name_label+(Za?"":" ")).style("font-weight",e.data.display.font_weight);var t=ue(this).selectAll("tspan.value-label");t.text(e.data.display.value_label+(Za?" ":"")).style("font-weight",Ja.value_label_bold?"bold":"normal"),ue(this).select(".name-label-background").style("stroke",Ja.layout.background_color),Za?t.lower():t.raise()})).style("text-anchor",Za?"start":"end").transition().duration(t).style("fill",(function(e){return e.data.display.color})).style("font-size",(function(e){return e.data.display.label_size+"px"})).attr("transform",(function(e){return e.data.display.name_label_transform.reversed})).style("opacity",(function(e){return"normal"===e.data.display.name_label_orientation?0:1}))}function A_(e,t){var n=ue(this);this._tween={rotate:e.data.display.prev_rotate,translate:e.data.display.prev_translate,parent_rotate:e.data.display.prev_parent_rotate,parent_translate:e.data.display.prev_parent_translate,cp2_translate:e.data.display.cp2_translate},n.classed("link",!0).style("opacity",0).transition().duration(.5*t).delay(.5*t).style("opacity",1)}function E_(e){var t=this;this._tween=this._tween||{};var n=this._tween.rotate||0,r=this._tween.translate||0,i=this._tween.parent_rotate||0,a=this._tween.parent_translate||0,o=this._tween.cp2_translate||0,l=Bo(n,e.data.display.rotate),s=Bo(r,e.data.display.translate),c=Bo(i,e.data.display.parent_rotate),u=Bo(a,e.data.display.parent_translate),d=Bo(o,e.data.display.cp2_translate);return function(e){var n=l(e),r=s(e),i=c(e),a=u(e),o=d(e),f=function(e,t,n,r,i){var a=b_(op(e),t),o=b_(op(e),(t+r)/2),l=b_(op(n),i),s=b_(op(n),r);return"M"+a.x+","+a.y+"C"+o.x+","+o.y+" "+l.x+","+l.y+" "+s.x+","+s.y}(n,r,i,a,o);ue(t).attr("d",f),t._tween.rotate=n,t._tween.translate=r,t._tween.parent_rotate=i,t._tween.parent_translate=a,t._tween.cp2_translate=o}}function C_(e){ue(this).transition().duration(.5*e).style("opacity",0),ue(this).transition("links").duration(e).tween("link",E_).on("end",(function(){ue(this).remove()}))}function T_(e,t){Up.select(".links").selectAll("path").data(ru.root.descendants().slice(1),(function(e){return e.data.id}));var n=Up.select(".links").selectAll("path").data(e.descendants().slice(1),(function(e){return e.data.id}));n.enter().append("path").each((function(e){A_.call(this,e,t)})).merge(n).transition("links").duration(t).style("stroke",(function(e){return e.data.display.link_color})).style("fill","none").tween("link",E_),n.exit().each((function(){C_.call(this,t)})),Up.select(".links").selectAll("path").transition().delay(t).duration(.1*t).style("opacity",1)}var S_,N_,L_,F_,O_,P_,D_,j_,B_=2*Math.PI,q_={},Y_=function(){var e=Td,t=1,n=1,r=null;function i(i){var s=function(e){for(var t,n,r,i,a,o=new Od(e,0),l=[o];t=l.pop();)if(r=t._.children)for(t.children=new Array(a=r.length),i=a-1;i>=0;--i)l.push(n=t.children[i]=new Od(r[i],i)),n.parent=t;return(o.parent=new Od(null,0)).children=[o],o}(i);if(s.eachAfter(a),s.parent.m=-s.z,s.eachBefore(o),r)i.eachBefore(l);else{var c=i,u=i,d=i;i.eachBefore((function(e){e.x<c.x&&(c=e),e.x>u.x&&(u=e),e.depth>d.depth&&(d=e)}));var f=c===u?1:e(c,u)/2,p=f-c.x,h=t/(u.x+f+p),_=n/(d.depth||1);i.eachBefore((function(e){e.x=(e.x+p)*h,e.y=e.depth*_}))}return i}function a(t){var n=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(n){!function(e){for(var t,n=0,r=0,i=e.children,a=i.length;--a>=0;)(t=i[a]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(t);var a=(n[0].z+n[n.length-1].z)/2;i?(t.z=i.z+e(t._,i._),t.m=t.z-a):t.z=a}else i&&(t.z=i.z+e(t._,i._));t.parent.A=function(t,n,r){if(n){for(var i,a=t,o=t,l=n,s=a.parent.children[0],c=a.m,u=o.m,d=l.m,f=s.m;l=Nd(l),a=Sd(a),l&&a;)s=Sd(s),(o=Nd(o)).a=t,(i=l.z+d-a.z-c+e(l._,a._))>0&&(Ld(Fd(l,t,r),t,i),c+=i,u+=i),d+=l.m,c+=a.m,f+=s.m,u+=o.m;l&&!Nd(o)&&(o.t=l,o.m+=d-u),a&&!Sd(s)&&(s.t=a,s.m+=c-f,r=t)}return r}(t,i,t.parent.A||r[0])}function o(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function l(e){e.x*=t,e.y=e.depth*n}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i}().separation((function(){return 1})),H_=dl(),I_=dl(),R_=dl();function U_(e){var t=I_(e),n=2*Math.PI;return t<-n&&(t=-n),t>n&&(t=n),t+=op(Ja.radial_tree_rotation)}function $_(e,t){var n=e.copy();return n.eachBefore((function(e){e.depth===t&&delete e.children})),n.each((function(e){e.isTruncated=!0,e.id=e.data.id})),n}function W_(e,t,n){let r=!1===e?0:1e3*Ja.animation_duration;if(function(e){Up.transition().duration(e).style("opacity","radialTree"===Ja.hierarchy_layout?1:0).on("end",(function(){"radialTree"!==Ja.hierarchy_layout&&(Up.select(".nodes").selectAll("*").remove(),Up.select(".links").selectAll("*").remove())}))}(r),"radialTree"===Ja.hierarchy_layout){var i=gp();ru.root.each((function(e){e.data.id=e.id,e.data.value=e.value})),function(e){e.each((function(e){if(void 0!==q_[e.id]){var t=q_[e.id];e.data.display={prev_rotate:t.rotate,prev_translate:t.translate,prev_parent_rotate:t.parent_rotate,prev_parent_translate:t.parent_translate,cp2_translate:t.cp2_translate}}else e.data.display={prev_rotate:0,prev_translate:0,prev_parent_rotate:0,prev_parent_translate:0,cp2_translate:0}}))}(ru.root),function(e,t){var n=$_(e,t);Y_(e),Y_(n);var r,i=(r={},n.each((function(e){r[e.data.id]=e})),r);e.eachBefore((function(e){var t=i[e.data.id];if(e.data.y=e.y,void 0!==t)e.data.x=t.x,e.data.x_delta=t.x-e.x;else{var n=e.parent.data.x_delta;e.data.x=e.x+n,e.data.x_delta=n}0===e.depth?(e.data.parent_x=e.data.x,e.data.parent_y=e.data.y):(e.data.parent_x=e.parent.data.x,e.data.parent_y=e.parent.data.y)}))}(ru.root,i.depth+Ja.num_of_visible_levels);var a=$_(i,Ja.num_of_visible_levels);!function(e,t){var n=Math.min(e,t);S_=.5*Ja.radial_tree_outer_radius*n/100,N_=.5*Ja.radial_tree_bar_length*n/100,L_=S_/Ja.num_of_visible_levels,F_=.5*n-S_,O_=Ja.radial_tree_bar_width}(t,n),function(e){var t=e.leaves().length,n=t*O_/S_;n>=B_?(P_=S_*B_/t-1,D_=B_):(D_=n,P_=O_-2),P_=Math.max(P_,0),D_-=(P_+1)/S_,D_=Math.max(D_,0)}(a),function(e,t){var n=e.leaves(),r=ro(n,(function(e){return e.data.x}));I_.domain(r).range([-.5*D_,.5*D_]),1===n.length&&I_.range([0,0]);var i=[t.data.y,n[0].data.y];R_.domain(i).range([0,S_]),H_.domain([0,uo(n,(function(e){return Math.abs(e.data.value)}))]).range([0,N_])}(a,i),m_(ru.root,i,t,n,P_,L_,F_,U_,R_,H_),Up.attr("transform","translate(".concat(.5*t,", ").concat(.5*n,")")),z_(a,r),T_(a,r),function(e){e.each((function(e){q_[e.id]=e.data.display}))}(ru.root)}}function V_(){j_||Up.select(".nodes").selectAll(".node").style("opacity",(function(e){return e.data&&e.data.id===ih?.7:1}))}function G_(e,t){let n=Ja.num_of_visible_levels;e.display={},e.display.visible=e.depth<t+n+1,e.display.leaf=!e.children,e.display.visible_leaf=e.depth===t+n||e.display.leaf&&e.depth<t+n,e.children&&e.children.forEach((e=>{G_(e,t)}))}function X_(){let e=gp(),t=e?e.depth:0;G_(ru.root,t)}function Z_(){var e=lp(),t=gp(),n=function(){let e=lp(),t=gp(),n=[];return t.each((function(r){e.includes(r.data.key)&&r.depth-t.depth<=Ja.num_of_visible_levels&&n.push(r.data.key)})),Ku(n)}(),r="off"===Ja.legend_mode,i=[];i=Ja.filter&&Ja.filter!==Ja.filter_all_label?Ku([Ja.filter].concat(n)):Ja.legend_only_show_custom_overrides?e:Ku(ip.concat(e));var a=t.depth>0?i.filter((function(e){return n.includes(e)||t.level1_key===e&&!n.includes(t.data.key)})):i.filter((function(t){return!e.includes(t)||n.includes(t)})),o=i.filter((function(e){return!a.includes(e)}));my.data(r?[]:i,rp.getColor).filtered(o),gy.update(),Xa.setLegendPosition(Ja.legend_position)}function J_(e){let t;!function(){const e=Yl.getFormatterFunction();ql=Hl(e)}(),Cp(),Tp(),(np||tp)&&vy.update(),t=tp?Ul.data.filter((function(e){return Ja.filter===Ja.filter_all_label||e.filter==Ja.filter})):Ul.data;let n=!0;"radialTree"===Ja.hierarchy_layout&&(n=!1);let r=Hd(t,n);ru.root=Wd(r),ip=Ku(Ul.data.map((e=>e.nest_columns[0]))),rp.updateColorScale(ip),Z_(),Xa.update(),Za="rtl"===ji(),function(){let e=Ja.hierarchy_layout,t=Math.max(0,Xa.getPrimaryWidth()),n=Math.max(0,Xa.getPrimaryHeight()),r=n,i=gp(),a=i.children?i.children.length:0;var o=!1;if(Ja.auto_set_height&&!1===Flourish.fixed_height)if("treemap"===e){let e=t<Ja.responsive_narrow_breakpoint?.01*t*Ja.treemap_aspect_ratio_narrow:.01*t*Ja.treemap_aspect_ratio_normal;Xa.setHeight(e),r=e}else if("circlePacking"===e||"sunburst"===e||"radialTree"===e)Xa.setHeight(t),r=t;else if("bar"===e){let e=zp(),t=Ja.bar_min_bar_thickness+Ja.bar_bar_padding+e,n=Lp+a*t;Xa.setHeight(n),r=n}else Xa.setHeight(null);else if(Xa.setHeight(null),"bar"===e){let e=Ap(n-Lp,a),t=zp(),i=a*(e+Ja.bar_bar_padding+t)+Lp;i>n&&(r=i,o=!0)}Bp.attr("width",t).attr("height",r),qp.attr("width",t).attr("height",r),Dp.select("#fl-layout-primary-container").style("overflow-y",o?"auto":"hidden")}();let i=Math.max(0,Xa.getPrimaryWidth()),a=Math.max(0,Xa.getPrimaryHeight());ru.w=i,ru.h=a,X_(),fh(e,i,a),Eh(e,i,a),c_(e,i,a),__(e,i,a),W_(e,i,a),function(){let e=Ja.zoomed_node_id&&Ep(Ja.ascend_button_visibility);$p.style("display",e?"block":"none").style("background",Ja.zoom_out_button_color).classed("top-left","right"===Ja.popup.panel_position).classed("bottom-right","top"===Ja.popup.panel_position).on("touchstart",(()=>{K.stopPropagation(),ey("zoomOut")})).on("click",(()=>{K.stopPropagation(),ey("zoomOut")})).select("svg path").style("fill",Ja.zoom_out_arrow_color)}(),hy.update(),_y.update(),yy.update(),by.update(),Xa.showOverlay(void 0===ru.root.children?"No data to display":null),function(){let e=ty.locked();if(e){let t=Vd(ru.root,e);if(!t||!dy(t))return void ty.clickout();{let e=sy(t);ty.setColumnNames(e.column_names)}}ty.update(),ue(".flourish-popup").classed("all-events","popup"===Ja.popup.mode||"both"===Ja.popup.mode)}()}function Q_(){J_()}function K_(){dh(),Ah(),s_(),y_(),V_()}function ey(e,t){switch(e){case"updateHighlightedNode":ah(t),K_();break;case"zoomToNode":j_=!0,t.children&&(Ja.zoomed_node_id=t.id),ah(null),Q_(),ty.clickout(),setTimeout((function(){j_=!1}),1e3*Ja.animation_duration+100);break;case"zoomOut":if(null===Ja.zoomed_node_id)return;j_=!0;let e=Vd(ru.root,Ja.zoomed_node_id),n=e?e.ancestors():null;Ja.zoomed_node_id=n&&2!==n.length?n[1].id:null,ah(null),Q_(),ty.clickout(),setTimeout((function(){j_=!1}),1e3*Ja.animation_duration+100)}}let ty,ny,ry=null;function iy(e){ry=e}function ay(e){if(!e)return;let t,n,r=Bp.node().getBoundingClientRect().left,i=Bp.node().getBoundingClientRect().top;switch(Ja.hierarchy_layout){case"treemap":t=.5*(e.display.x1+e.display.x0),n=e.display.visible_leaf?.5*(e.display.y1+e.display.y0)+15:e.display.y0+10;break;case"circlePacking":t=e.display.x+Sp.x,n=e.display.visible_leaf?e.display.y+Sp.y+15:e.display.y-e.display.r+Sp.y+15;break;case"sunburst":let r=.5*(e.display.a0+e.display.a1),i=r>.5*Math.PI&&r<1.5*Math.PI?.4:.6,a=i*e.display.r0+(1-i)*e.display.r1;t=.5*ru.w+a*Math.sin(r),n=.5*ru.h-a*Math.cos(r);break;case"bar":t=e.display.x+.5*e.display.l+(Ja.bar_axis_labels_above?0:d_()),n=e.display.y+.5*e.display.thickness+Lp+10;break;case"radialTree":t=e.data.display.popup.x,n=e.data.display.popup.y+15;break;default:console.log("Missing handler for "+Ja.hierarchy_layout+" in popup")}return t+=r,n+=i,[t,n]}function oy(e){let t=Vd(ru.root,e),n=sy(t);return[ay(t),n.datum]}function ly(e,t,n){t.__value="VALUE",n.__value=ql(e.value),t.__size_by="SIZEBY",n.__size_by="Sum"===Ja.aggregation_type?Ja.size_by:"Count",t.__name="NAME",n.__name=e.data.key}function sy(e){let t={},n={},r=Yl.getParser();if(0===e.height&&e.data.unique_row)n={...Ul.data.column_names},t={...e.data.unique_row},t.__title=e.data.key,n.nest_columns=n.nest_columns.slice(0,-1),t.size_columns=t.size_columns.map((e=>ql(r(e)))),(Ja.popup.popup_is_custom||Ja.popup.panel_is_custom)&&ly(e,n,t);else if(Ja.popup.popup_is_custom||Ja.popup.panel_is_custom){let r=e.ancestors().slice(0,-1);n.ancestors=r.map((e=>e.data.column_name)),t.ancestors=r.map((e=>e.data.key)),n.value=Ja.size_by,t.value=ql(e.value),ly(e,n,t)}else{t.__title=e.data.key;let r=e.ancestors().slice(1,-1);n.ancestors=r.map((e=>e.data.column_name)),t.ancestors=r.map((e=>e.data.key));let i=cp();n.value="Count"===i?"Count":Ja.size_by,t.value=ql(e.value)}return{datum:t,column_names:n}}function cy(){ey("updateHighlightedNode",null)}function uy(){if(ty.locked()&&("popup"===Ja.popup.mode||"both"===Ja.popup.mode))return void ty.clickout();let e=ry,t=Vd(ru.root,e),n=sy(t),r=ay(t);ty.setColumnNames(n.column_names).click(r,n.datum,e),ey("updateHighlightedNode",e)}function dy(e){let t=gp(),n=e.depth>=t.depth&&e.depth<=t.depth+Ja.num_of_visible_levels,r=!Ja.popup_active_levels||"all_levels"===Ja.popup_active_levels||"top_level"===Ja.popup_active_levels&&1===e.depth||"below_top_level"===Ja.popup_active_levels&&e.depth>1||"above_bottom_level"===Ja.popup_active_levels&&e.height>0||"bottom_level"===Ja.popup_active_levels&&0===e.height;return n&&r}Yl=Dl(Ja.localization),Hl=function(e){for(var t in jl)void 0===e[t]&&(e[t]=jl[t]);return function(t){return Bl(e,t)}}(Ja.number_formatter),Xa=Ga(Ja.layout);var fy=Ti(Ja.filter_control),py=Ti(Ja.size_by_control),hy=function(e,t,n){return new El(e,t,n)}(Ja.controls_style,".fl-control",Ja.layout),_y=function(e,t,n){return new Nl(e,t,n)}(Ja.dropdown_style,".fl-control-dropdown",Ja.layout),yy=function(e,t,n){return new Tl(e,t,n)}(Ja.button_style,".fl-control-buttons",Ja.layout),by=function(e,t,n){return new Ol(e,t,n)}(Ja.slider_style,".fl-control-slider",Ja.layout);const my=function(e){return new yo(e)}(Ja.legend_categorical);ty=function(e,t,n){return new eu(e,t,n)}(Ja.popup),ty.titleKey("__title").subtitleKey("__subtitle").getLockedPosition(oy).onPanelClose(cy),ny=ue(".flourish-popup").node(),ue(".flourish-popup-content").on("click",uy),ue(".flourish-popup").on("mouseleave",(()=>ty.mouseout()));var gy=function(e){return new kl(e)}(Ja.legend_container).appendTo(Xa.getSection("legend")).add(my),vy=function(e){return new zi(e)}(Ja.controls_container).appendTo(Xa.getSection("controls")),xy=function(){return ou.Date.now()},wy=/\s/;var ky=/^\s+/;function My(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&wy.test(e.charAt(t)););return t}(e)+1).replace(ky,""):e}var zy="[object Symbol]";var Ay=NaN,Ey=/^[-+]0x[0-9a-f]+$/i,Cy=/^0b[01]+$/i,Ty=/^0o[0-7]+$/i,Sy=parseInt;function Ny(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return null!=e&&"object"==typeof e}(e)&&yu(e)==zy}(e))return Ay;if(bu(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=bu(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=My(e);var n=Cy.test(e);return n||Ty.test(e)?Sy(e.slice(2),n?2:8):Ey.test(e)?Ay:+e}var Ly="Expected a function",Fy=Math.max,Oy=Math.min;function Py(e,t,n){var r,i,a,o,l,s,c=0,u=!1,d=!1,f=!0;if("function"!=typeof e)throw new TypeError(Ly);function p(t){var n=r,a=i;return r=i=void 0,c=t,o=e.apply(a,n)}function h(e){var n=e-s;return void 0===s||n>=t||n<0||d&&e-c>=a}function _(){var e=xy();if(h(e))return y(e);l=setTimeout(_,function(e){var n=t-(e-s);return d?Oy(n,a-(e-c)):n}(e))}function y(e){return l=void 0,f&&r?p(e):(r=i=void 0,o)}function b(){var e=xy(),n=h(e);if(r=arguments,i=this,s=e,n){if(void 0===l)return function(e){return c=e,l=setTimeout(_,t),u?p(e):o}(s);if(d)return clearTimeout(l),l=setTimeout(_,t),p(s)}return void 0===l&&(l=setTimeout(_,t)),o}return t=Ny(t)||0,bu(n)&&(u=!!n.leading,a=(d="maxWait"in n)?Fy(Ny(n.maxWait)||0,t):a,f="trailing"in n?!!n.trailing:f),b.cancel=function(){void 0!==l&&clearTimeout(l),c=0,r=s=i=l=void 0},b.flush=function(){return void 0===l?o:y(xy())},b}var Dy;function jy(e,t,n){for(var r in t){var i=t[r];if("object"!=typeof i||null===i||Array.isArray(i))n.indexOf(r)>-1?e[r]=i:Flourish.warn("State property `"+r+"` not whitelisted for use in URL");else{var a=r.length,o=n.filter((function(e){return e.substring(0,a)==r})).map((function(e){return e.substring(a+1)}));jy(e[r],i,o)}}}function By(e,t){var n=location.hash.substring(1);if(""!=n){var r;try{r=JSON.parse(decodeURIComponent(n))}catch(e){Flourish.warn({message:"Invalid JSON passed to template URL hash",explanation:e})}r&&jy(e,r,t)}}var qy=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return bu(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Py(e,t,{leading:r,maxWait:t,trailing:i})}((function(){J_(Dy==window.innerWidth),Dy=window.innerWidth}),500);return e.data=Ul,e.draw=function(){var e,t,n,r;e=Ja.url_state,t=Ja,n=J_,r=(e.enabled,e.whitelist||"").split(/\n/),By(t,r),window.addEventListener("hashchange",(function(){By(t,r),n&&n()})),Dp=ue(document.body),jp=ue(Xa.getSection("primary")),Bp=jp.append("svg").classed("noselect",!0),qp=Bp.append("rect").classed("background",!0).style("fill","none").style("pointer-events","visible"),Yp=Bp.append("g").classed("g-treemap",!0),Hp=Bp.append("g").classed("g-circle-packing",!0).attr("transform","translate(".concat(Sp.x,",").concat(Sp.y,")")),Ip=Bp.append("g").classed("g-sunburst",!0),(Rp=Bp.append("g").classed("g-bar",!0)).append("g").classed("breadcrumb",!0).append("text"),Rp.append("g").classed("bars",!0),(Up=Bp.append("g").classed("g-radial-tree",!0)).append("g").classed("links",!0),Up.append("g").classed("nodes",!0),($p=jp.append("div").classed("zoomout-button",!0).attr("title","Go up a level")).append("svg").append("path").attr("d","M7.285,16.01l4.12,4.119l5.137,-5.137l0,21.201l5.825,0l0,-21.201l5.138,5.137l4.119,-4.119l-12.169,-12.169l-12.17,12.169Z"),qp.on("click",(()=>{ey("zoomOut")})),Dy=window.innerWidth,window.addEventListener("resize",(function(){qy()})),Xa.awaitFonts((()=>J_(!1)))},e.state=Ja,e.update=Q_,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=template.js.map
</script><script src="embedded.js"></script><script>
			function _Flourish_unflattenInto(dest, src) {
				dest = dest || {};
				for (var k in src) {
					var t = dest;
					for (var i = k.indexOf("."), p = 0; i >= 0; i = k.indexOf(".", p = i+1)) {
						var s = k.substring(p, i);
						if (!(s in t)) t[s] = {};
						t = t[s];
					}
					t[k.substring(p)] = src[k];
				}
				return dest;
			}
			var _Flourish_settings = {"animation_duration":0.5,"ascend_button_visibility":"always","button_style.background":"#ffffff","cellPadding":"medium","color.categorical_custom_palette":"Others:#c2b7af\nTurkey:#42a7d2\nEgypt:#42a7d2\nIndia:#42a7d2","color.categorical_extend":true,"color.categorical_palette":["#42a7d2","#ef6590","#70dce6","#9dbf57","#ee7680"],"dropdown_style.background":"#ffffff","dropdown_style.border_styles_advanced":true,"filter_include_all":false,"hierarchy_layout":"treemap","layout.background_color_enabled":true,"layout.footer_align_vertical":"flex-end","layout.footer_logo_order":"right","layout.footer_note":"","layout.footer_note_secondary":"","layout.multiple_sources":false,"layout.screenreader_text_primary":"Treemap showing the share of UK PFI contracts where the assets return to public ownership after expiration of the contract.","layout.source_name":"Union of Concerned Scientists","layout.source_name_2":"FT research","layout.source_url":"https://www.ucsusa.org/resources/satellite-database","layout.space_between_sections":"1","layout.subtitle":"Number of satellites with military users","layout.title":"The US operates more than twice as many military satellites as Russia","legend_mode":"off","max_label_size":1.5,"min_label_size":1,"multi_line_labels":true,"number_formatter.advanced":true,"number_formatter.n_dec":0,"number_formatter.prefix":"","number_formatter.strip_separator":false,"number_formatter.suffix":"","popup_active_levels":"all_levels","popup.mode":"none","popup.popup_custom_header":"{{brand}}","popup.popup_custom_main":"\u003cp>\u003cstrong>Revenue:\u003c/strong> {{revenue}}\u003c/p>","popup.popup_is_custom":true,"show_value_labels":true,"size_by_control_visibility":"never","sort_by":"data","treemap_type":"treemapBinary","layout.font_size_mobile_small":100,"layout.font_size_mobile_big":100,"layout.font_size_tablet":100,"layout.font_size_desktop":100,"layout.font_size_big_screen":120,"layout.body_font":{"name":"Metric Web","url":"https://mississippi.river.to/right/f/fonts/stylesheet.css"},"layout.margin_top":0,"layout.margin_right":0,"layout.margin_bottom":0,"layout.margin_left":0,"layout.space_between_sections_custom":1.75,"layout.background_color":"transparent","layout.header_logo_enabled":true,"layout.header_logo_src":"https://mississippi.river.to/right/f/uploads/1c064a3c-9c0f-4043-8de0-379265d5d2c9.svg","layout.header_logo_height":0.25,"layout.header_logo_margin_top":0,"layout.header_logo_margin_right":0,"layout.title_size":"custom","layout.title_size_custom":1.5,"layout.title_line_height":1.25,"layout.title_weight":"normal","layout.title_space_above":"custom","layout.title_space_above_custom":0.75,"layout.title_styling":true,"layout.subtitle_size":"custom","layout.subtitle_size_custom":1.125,"layout.subtitle_line_height":1.25,"layout.subtitle_color":"#4d4845","layout.subtitle_space_above":"custom","layout.subtitle_space_above_custom":1.25,"layout.subtitle_styling":true,"layout.header_text_size":"custom","layout.header_text_size_custom":1,"layout.header_text_line_height":1.25,"layout.header_text_color":"#4d4845","layout.footer_text_size":0.875,"layout.footer_text_color":"#4d4845","layout.footer_logo_enabled":true,"layout.footer_logo_src":"https://mississippi.river.to/right/f/uploads/43d2c31d-7939-4110-a079-53f54ba93ac6.svg","layout.footer_logo_height":0.75,"layout.footer_logo_margin":1,"layout.header_text_styling":false,"line_labels.text_color":"#4d4845","controls.control_type":"buttons","controls.button_group_width_mode":"auto","controls.control_styles":true,"controls_style.padding":0.7,"button_style.font_color":"#006b74","button_style.background_selected":"#006b74","button_style.background_hover":"#e3e0d6","button_style.border_transparency":1,"button_style.border_color":"#006b74","button_style.border_radius":0,"button_style.button_styles_advanced":true,"x.line_and_tick_color":"#999189","x.line_and_tick_width":0.063,"x.tick_label_size":1,"x.tick_label_color":"#4d4845","x.tick_label_angle":"0","x.gridline_color":"#ccc1b7","x.gridline_width":0.063,"x.title_mode":"custom","x.title_color":"#66605C","x.title_styling":false,"x.tick_label_styling":true,"x.gridline_styling":false,"y.line_visible":false,"y.line_and_tick_color":"#999189","y.line_and_tick_width":0,"y.tick_mode":"number","y.tick_number":4,"y.tick_label_size":1,"y.tick_label_color":"#4d4845","y.gridline_color":"#ccc1b7","y.gridline_width":0.063,"y.title_mode":"custom","y.title_color":"#66605C","y.title_styling":false,"y.tick_label_styling":true,"y.gridlines_styling":true,"y2.line_visible":false,"y2.line_and_tick_color":"#999189","y2.line_and_tick_width":0,"y2.tick_label_size":1,"y2.tick_label_color":"#4d4845","y2.gridline_color":"#ccc1b7","y2.gridline_width":0.063,"y2.title_mode":"custom","y2.title_color":"#66605C","y2.title_styling":false,"y2.tick_label_styling":true,"y2.gridlines_styling":true,"legend_categorical.swatch_width":1.25,"legend_categorical.swatch_height":0.625,"legend_categorical.swatch_radius":0,"colors.categorical_palette":["#1e558c","#94d2e6","#1e8fcc","#b3325d","#ff75a3","#aecc70","#f34d5b","#d9ccc3"],"color.palette":["#1e558c","#94d2e6","#1e8fcc","#b3325d","#ff75a3","#aecc70","#f34d5b","#d9ccc3"],"colors.palette":["#1e558c","#94d2e6","#1e8fcc","#b3325d","#ff75a3","#aecc70","#f34d5b","#d9ccc3"],"map_categorical_colors.palette":["#1e558c","#94d2e6","#1e8fcc","#b3325d","#ff75a3","#aecc70","#f34d5b","#d9ccc3"],"point_categorical_colors.palette":["#1e558c","#94d2e6","#1e8fcc","#b3325d","#ff75a3","#aecc70","#f34d5b","#d9ccc3"],"point_colors.categorical_palette":["#1e558c","#94d2e6","#1e8fcc","#b3325d","#ff75a3","#aecc70","#f34d5b","#d9ccc3"],"map_colors.categorical_palette":["#1e558c","#94d2e6","#1e8fcc","#b3325d","#ff75a3","#aecc70","#f34d5b","#d9ccc3"],"legend_categorical_points.swatch_width":1.25,"legend_categorical_map.swatch_width":1.25,"legend_categorical_points.swatch_height":0.625,"legend_categorical_map.swatch_height":0.625,"legend_categorical_points.swatch_radius":0,"legend_categorical_map.swatch_radius":0,"url_state.enabled":true};
			_Flourish_unflattenInto(window.template.state, _Flourish_settings);
	
			var _Flourish_data_column_names = {"data":{"filter":"","nest_columns":["Country of Operator/Owner"],"popup_metadata":["Commercial/Military"],"size_columns":["Grand Total"]}},
				_Flourish_data_metadata = {"data":{"nest_columns":[{"type":"string","type_id":"string$arbitrary_string","output_format_id":"string$arbitrary_string"}],"popup_metadata":[{"type":"number","type_id":"number$comma_point","output_format_id":"number$comma_point"}],"size_columns":[null]}},
				_Flourish_data = {"data":[{"filter":"","nest_columns":["US"],"popup_metadata":[""],"size_columns":["247"]},{"filter":"","nest_columns":["China"],"popup_metadata":[""],"size_columns":["157"]},{"filter":"","nest_columns":["Russia"],"popup_metadata":[""],"size_columns":["110"]},{"filter":"","nest_columns":["France"],"popup_metadata":[""],"size_columns":["15"]},{"filter":"","nest_columns":["Israel"],"popup_metadata":[""],"size_columns":["12"]},{"filter":"","nest_columns":["Italy"],"popup_metadata":[""],"size_columns":["9"]},{"filter":"","nest_columns":["India"],"popup_metadata":[""],"size_columns":["8"]},{"filter":"","nest_columns":["Germany"],"popup_metadata":[""],"size_columns":["8"]},{"filter":"","nest_columns":["UK"],"popup_metadata":[""],"size_columns":["6"]},{"filter":"","nest_columns":["Spain"],"popup_metadata":[""],"size_columns":["4"]},{"filter":"","nest_columns":["Australia"],"popup_metadata":[""],"size_columns":["4"]},{"filter":"","nest_columns":["UAE"],"popup_metadata":[""],"size_columns":["3"]},{"filter":"","nest_columns":["Norway"],"popup_metadata":[""],"size_columns":["3"]},{"filter":"","nest_columns":["Mexico"],"popup_metadata":[""],"size_columns":["3"]},{"filter":"","nest_columns":["Turkey"],"popup_metadata":[""],"size_columns":["2"]},{"filter":"","nest_columns":["Thailand"],"popup_metadata":[""],"size_columns":["2"]},{"filter":"","nest_columns":["South Korea"],"popup_metadata":[""],"size_columns":["2"]},{"filter":"","nest_columns":["Japan"],"popup_metadata":["1"],"size_columns":["2"]},{"filter":"","nest_columns":["Iran"],"popup_metadata":[""],"size_columns":["2"]},{"filter":"","nest_columns":["France/Italy/Belgium/Spain/Greece"],"popup_metadata":[""],"size_columns":["2"]},{"filter":"","nest_columns":["France/Italy"],"popup_metadata":[""],"size_columns":["2"]},{"filter":"","nest_columns":["Colombia"],"popup_metadata":[""],"size_columns":["2"]},{"filter":"","nest_columns":["Sweden"],"popup_metadata":[""],"size_columns":["1"]},{"filter":"","nest_columns":["Singapore"],"popup_metadata":[""],"size_columns":["1"]},{"filter":"","nest_columns":["Luxembourg"],"popup_metadata":[""],"size_columns":["1"]},{"filter":"","nest_columns":["Egypt"],"popup_metadata":[""],"size_columns":["1"]},{"filter":"","nest_columns":["Denmark"],"popup_metadata":[""],"size_columns":["1"]},{"filter":"","nest_columns":["Chile"],"popup_metadata":[""],"size_columns":["1"]},{"filter":"","nest_columns":["Canada"],"popup_metadata":[""],"size_columns":["1"]},{"filter":"","nest_columns":["Brazil"],"popup_metadata":["1"],"size_columns":["1"]}]},
				_Flourish_visualisation_id = 16910037,
				_Flourish_visualisation_version_number = 55,
				_Flourish_template_id = 13442;
			for (var _Flourish_dataset in _Flourish_data) {
					window.template.data[_Flourish_dataset] = _Flourish_data[_Flourish_dataset];
					window.template.data[_Flourish_dataset].column_names = _Flourish_data_column_names[_Flourish_dataset];
					window.template.data[_Flourish_dataset].metadata = _Flourish_data_metadata[_Flourish_dataset];
			}
	
			if (Flourish.enableCustomerAnalytics) { Flourish.enableCustomerAnalytics(); }
			window.template.draw();
		</script></body></html>