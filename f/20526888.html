<!DOCTYPE html><html><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="choices.min.css">
    <link rel="stylesheet" type="text/css" href="77108/bundle.css">
	<title>tesla china 2 </title></head>
	<body>
	

<script>window.Flourish = {"environment":"live","is_read_only":true};</script><script>var template=function(e){"use strict";var t="http://www.w3.org/1999/xhtml",n={svg:"http://www.w3.org/2000/svg",xhtml:t,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function r(e){var t=e+="",r=t.indexOf(":");return r>=0&&"xmlns"!==(t=e.slice(0,r))&&(e=e.slice(r+1)),n.hasOwnProperty(t)?{space:n[t],local:e}:e}function i(e){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===t&&n.documentElement.namespaceURI===t?n.createElement(e):n.createElementNS(r,e)}}function a(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function o(e){var t=r(e);return(t.local?a:i)(t)}function l(){}function s(e){return null==e?l:function(){return this.querySelector(e)}}function u(){return[]}function c(e){return null==e?u:function(){return this.querySelectorAll(e)}}function d(e){return function(){return this.matches(e)}}function f(e){return new Array(e.length)}function p(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}p.prototype={constructor:p,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function h(e,t,n,r,i,a){for(var o,l=0,s=t.length,u=a.length;l<u;++l)(o=t[l])?(o.__data__=a[l],r[l]=o):n[l]=new p(e,a[l]);for(;l<s;++l)(o=t[l])&&(i[l]=o)}function _(e,t,n,r,i,a,o){var l,s,u,c={},d=t.length,f=a.length,h=new Array(d);for(l=0;l<d;++l)(s=t[l])&&(h[l]=u="$"+o.call(s,s.__data__,l,t),u in c?i[l]=s:c[u]=s);for(l=0;l<f;++l)(s=c[u="$"+o.call(e,a[l],l,a)])?(r[l]=s,s.__data__=a[l],c[u]=null):n[l]=new p(e,a[l]);for(l=0;l<d;++l)(s=t[l])&&c[h[l]]===s&&(i[l]=s)}function y(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function b(e){return function(){this.removeAttribute(e)}}function m(e){return function(){this.removeAttributeNS(e.space,e.local)}}function g(e,t){return function(){this.setAttribute(e,t)}}function v(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function w(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function x(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function k(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function M(e){return function(){this.style.removeProperty(e)}}function A(e,t,n){return function(){this.style.setProperty(e,t,n)}}function z(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function T(e,t){return e.style.getPropertyValue(t)||k(e).getComputedStyle(e,null).getPropertyValue(t)}function C(e){return function(){delete this[e]}}function E(e,t){return function(){this[e]=t}}function S(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function N(e){return e.trim().split(/^|\s+/)}function F(e){return e.classList||new L(e)}function L(e){this._node=e,this._names=N(e.getAttribute("class")||"")}function O(e,t){for(var n=F(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function j(e,t){for(var n=F(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function D(e){return function(){O(this,e)}}function $(e){return function(){j(this,e)}}function P(e,t){return function(){(t.apply(this,arguments)?O:j)(this,e)}}function U(){this.textContent=""}function B(e){return function(){this.textContent=e}}function H(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function q(){this.innerHTML=""}function Y(e){return function(){this.innerHTML=e}}function R(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function I(){this.nextSibling&&this.parentNode.appendChild(this)}function W(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function V(){return null}function G(){var e=this.parentNode;e&&e.removeChild(this)}function X(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Z(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}L.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var J={},Q=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(J={mouseenter:"mouseover",mouseleave:"mouseout"}));function K(e,t,n){return e=ee(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function ee(e,t,n){return function(r){var i=Q;Q=r;try{e.call(this,this.__data__,t,n)}finally{Q=i}}}function te(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,a=t.length;r<a;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?t.length=i:delete this.__on}}}function ne(e,t,n){var r=J.hasOwnProperty(e.type)?K:ee;return function(i,a,o){var l,s=this.__on,u=r(t,a,o);if(s)for(var c=0,d=s.length;c<d;++c)if((l=s[c]).type===e.type&&l.name===e.name)return this.removeEventListener(l.type,l.listener,l.capture),this.addEventListener(l.type,l.listener=u,l.capture=n),void(l.value=t);this.addEventListener(e.type,u,n),l={type:e.type,name:e.name,value:t,listener:u,capture:n},s?s.push(l):this.__on=[l]}}function re(e,t,n){var r=k(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function ie(e,t){return function(){return re(this,e,t)}}function ae(e,t){return function(){return re(this,e,t.apply(this,arguments))}}var oe=[null];function le(e,t){this._groups=e,this._parents=t}function se(){return new le([[document.documentElement]],oe)}function ue(e){return"string"==typeof e?new le([[document.querySelector(e)]],[document.documentElement]):new le([[e]],oe)}le.prototype=se.prototype={constructor:le,select:function(e){"function"!=typeof e&&(e=s(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o,l=t[i],u=l.length,c=r[i]=new Array(u),d=0;d<u;++d)(a=l[d])&&(o=e.call(a,a.__data__,d,l))&&("__data__"in a&&(o.__data__=a.__data__),c[d]=o);return new le(r,this._parents)},selectAll:function(e){"function"!=typeof e&&(e=c(e));for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o,l=t[a],s=l.length,u=0;u<s;++u)(o=l[u])&&(r.push(e.call(o,o.__data__,u,l)),i.push(o));return new le(r,i)},filter:function(e){"function"!=typeof e&&(e=d(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o=t[i],l=o.length,s=r[i]=[],u=0;u<l;++u)(a=o[u])&&e.call(a,a.__data__,u,o)&&s.push(a);return new le(r,this._parents)},data:function(e,t){if(!e)return p=new Array(this.size()),u=-1,this.each((function(e){p[++u]=e})),p;var n=t?_:h,r=this._parents,i=this._groups;"function"!=typeof e&&(e=function(e){return function(){return e}}(e));for(var a=i.length,o=new Array(a),l=new Array(a),s=new Array(a),u=0;u<a;++u){var c=r[u],d=i[u],f=d.length,p=e.call(c,c&&c.__data__,u,r),y=p.length,b=l[u]=new Array(y),m=o[u]=new Array(y);n(c,d,b,m,s[u]=new Array(f),p,t);for(var g,v,w=0,x=0;w<y;++w)if(g=b[w]){for(w>=x&&(x=w+1);!(v=m[x])&&++x<y;);g._next=v||null}}return(o=new le(o,r))._enter=l,o._exit=s,o},enter:function(){return new le(this._enter||this._groups.map(f),this._parents)},exit:function(){return new le(this._exit||this._groups.map(f),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,a=this.exit();return r="function"==typeof e?e(r):r.append(e+""),null!=t&&(i=t(i)),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(e){for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),l=0;l<a;++l)for(var s,u=t[l],c=n[l],d=u.length,f=o[l]=new Array(d),p=0;p<d;++p)(s=u[p]||c[p])&&(f[p]=s);for(;l<r;++l)o[l]=t[l];return new le(o,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=y);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,l=n[a],s=l.length,u=i[a]=new Array(s),c=0;c<s;++c)(o=l[c])&&(u[c]=o);u.sort(t)}return new le(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each((function(){e[++t]=this})),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){var e=0;return this.each((function(){++e})),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,a=t[n],o=0,l=a.length;o<l;++o)(i=a[o])&&e.call(i,i.__data__,o,a);return this},attr:function(e,t){var n=r(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==t?n.local?m:b:"function"==typeof t?n.local?x:w:n.local?v:g)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?M:"function"==typeof t?z:A)(e,t,null==n?"":n)):T(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?C:"function"==typeof t?S:E)(e,t)):this.node()[e]},classed:function(e,t){var n=N(e+"");if(arguments.length<2){for(var r=F(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?P:t?D:$)(n,t))},text:function(e){return arguments.length?this.each(null==e?U:("function"==typeof e?H:B)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?q:("function"==typeof e?R:Y)(e)):this.node().innerHTML},raise:function(){return this.each(I)},lower:function(){return this.each(W)},append:function(e){var t="function"==typeof e?e:o(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:o(e),r=null==t?V:"function"==typeof t?t:s(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(G)},clone:function(e){return this.select(e?Z:X)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,a=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),o=a.length;if(!(arguments.length<2)){for(l=t?ne:te,null==n&&(n=!1),r=0;r<o;++r)this.each(l(a[r],t,n));return this}var l=this.node().__on;if(l)for(var s,u=0,c=l.length;u<c;++u)for(r=0,s=l[u];r<o;++r)if((i=a[r]).type===s.type&&i.name===s.name)return s.value},dispatch:function(e,t){return this.each(("function"==typeof t?ae:ie)(e,t))}};var ce=new Date,de=new Date;function fe(e,t,n,r){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=function(t){return e(t=new Date(+t)),t},i.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},i.round=function(e){var t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},i.range=function(n,r,a){var o,l=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&a>0))return l;do{l.push(o=new Date(+n)),t(n,a),e(n)}while(o<n&&n<r);return l},i.filter=function(n){return fe((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(i.count=function(t,r){return ce.setTime(+t),de.setTime(+r),e(ce),e(de),Math.floor(n(ce,de))},i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?function(t){return r(t)%e==0}:function(t){return i.count(0,t)%e==0}):i:null}),i}var pe=864e5,he=6048e5,_e=fe((function(e){e.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/pe}),(function(e){return e.getDate()-1}));function ye(e){return fe((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/he}))}_e.range;var be=ye(0),me=ye(1),ge=ye(2),ve=ye(3),we=ye(4),xe=ye(5),ke=ye(6);be.range,me.range,ge.range,ve.range,we.range,xe.range,ke.range;var Me=fe((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));Me.every=function(e){return isFinite(e=Math.floor(e))&&e>0?fe((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null},Me.range;var Ae=fe((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/pe}),(function(e){return e.getUTCDate()-1}));function ze(e){return fe((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/he}))}Ae.range;var Te=ze(0),Ce=ze(1),Ee=ze(2),Se=ze(3),Ne=ze(4),Fe=ze(5),Le=ze(6);Te.range,Ce.range,Ee.range,Se.range,Ne.range,Fe.range,Le.range;var Oe=fe((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()}));function je(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function De(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function $e(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}Oe.every=function(e){return isFinite(e=Math.floor(e))&&e>0?fe((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null},Oe.range;var Pe,Ue,Be,He={"-":"",_:" ",0:"0"},qe=/^\s*\d+/,Ye=/^%/,Re=/[\\^$*+?|[\]().{}]/g;function Ie(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function We(e){return e.replace(Re,"\\$&")}function Ve(e){return new RegExp("^(?:"+e.map(We).join("|")+")","i")}function Ge(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function Xe(e,t,n){var r=qe.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Ze(e,t,n){var r=qe.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Je(e,t,n){var r=qe.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Qe(e,t,n){var r=qe.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Ke(e,t,n){var r=qe.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function et(e,t,n){var r=qe.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function tt(e,t,n){var r=qe.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function nt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function rt(e,t,n){var r=qe.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function it(e,t,n){var r=qe.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function at(e,t,n){var r=qe.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function ot(e,t,n){var r=qe.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function lt(e,t,n){var r=qe.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function st(e,t,n){var r=qe.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function ut(e,t,n){var r=qe.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function ct(e,t,n){var r=qe.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function dt(e,t,n){var r=qe.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function ft(e,t,n){var r=Ye.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function pt(e,t,n){var r=qe.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function ht(e,t,n){var r=qe.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function _t(e,t){return Ie(e.getDate(),t,2)}function yt(e,t){return Ie(e.getHours(),t,2)}function bt(e,t){return Ie(e.getHours()%12||12,t,2)}function mt(e,t){return Ie(1+_e.count(Me(e),e),t,3)}function gt(e,t){return Ie(e.getMilliseconds(),t,3)}function vt(e,t){return gt(e,t)+"000"}function wt(e,t){return Ie(e.getMonth()+1,t,2)}function xt(e,t){return Ie(e.getMinutes(),t,2)}function kt(e,t){return Ie(e.getSeconds(),t,2)}function Mt(e){var t=e.getDay();return 0===t?7:t}function At(e,t){return Ie(be.count(Me(e)-1,e),t,2)}function zt(e){var t=e.getDay();return t>=4||0===t?we(e):we.ceil(e)}function Tt(e,t){return e=zt(e),Ie(we.count(Me(e),e)+(4===Me(e).getDay()),t,2)}function Ct(e){return e.getDay()}function Et(e,t){return Ie(me.count(Me(e)-1,e),t,2)}function St(e,t){return Ie(e.getFullYear()%100,t,2)}function Nt(e,t){return Ie((e=zt(e)).getFullYear()%100,t,2)}function Ft(e,t){return Ie(e.getFullYear()%1e4,t,4)}function Lt(e,t){var n=e.getDay();return Ie((e=n>=4||0===n?we(e):we.ceil(e)).getFullYear()%1e4,t,4)}function Ot(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ie(t/60|0,"0",2)+Ie(t%60,"0",2)}function jt(e,t){return Ie(e.getUTCDate(),t,2)}function Dt(e,t){return Ie(e.getUTCHours(),t,2)}function $t(e,t){return Ie(e.getUTCHours()%12||12,t,2)}function Pt(e,t){return Ie(1+Ae.count(Oe(e),e),t,3)}function Ut(e,t){return Ie(e.getUTCMilliseconds(),t,3)}function Bt(e,t){return Ut(e,t)+"000"}function Ht(e,t){return Ie(e.getUTCMonth()+1,t,2)}function qt(e,t){return Ie(e.getUTCMinutes(),t,2)}function Yt(e,t){return Ie(e.getUTCSeconds(),t,2)}function Rt(e){var t=e.getUTCDay();return 0===t?7:t}function It(e,t){return Ie(Te.count(Oe(e)-1,e),t,2)}function Wt(e){var t=e.getUTCDay();return t>=4||0===t?Ne(e):Ne.ceil(e)}function Vt(e,t){return e=Wt(e),Ie(Ne.count(Oe(e),e)+(4===Oe(e).getUTCDay()),t,2)}function Gt(e){return e.getUTCDay()}function Xt(e,t){return Ie(Ce.count(Oe(e)-1,e),t,2)}function Zt(e,t){return Ie(e.getUTCFullYear()%100,t,2)}function Jt(e,t){return Ie((e=Wt(e)).getUTCFullYear()%100,t,2)}function Qt(e,t){return Ie(e.getUTCFullYear()%1e4,t,4)}function Kt(e,t){var n=e.getUTCDay();return Ie((e=n>=4||0===n?Ne(e):Ne.ceil(e)).getUTCFullYear()%1e4,t,4)}function en(){return"+0000"}function tn(){return"%"}function nn(e){return+e}function rn(e){return Math.floor(+e/1e3)}function an(e){throw new TypeError("Expected a value of type string but got a value of type "+typeof e)}function on(e){return function(t){return"string"!=typeof t&&an(t),(t=t.trim())?e(t):null}}Pe=function(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,l=e.months,s=e.shortMonths,u=Ve(i),c=Ge(i),d=Ve(a),f=Ge(a),p=Ve(o),h=Ge(o),_=Ve(l),y=Ge(l),b=Ve(s),m=Ge(s),g={a:function(e){return o[e.getDay()]},A:function(e){return a[e.getDay()]},b:function(e){return s[e.getMonth()]},B:function(e){return l[e.getMonth()]},c:null,d:_t,e:_t,f:vt,g:Nt,G:Lt,H:yt,I:bt,j:mt,L:gt,m:wt,M:xt,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:nn,s:rn,S:kt,u:Mt,U:At,V:Tt,w:Ct,W:Et,x:null,X:null,y:St,Y:Ft,Z:Ot,"%":tn},v={a:function(e){return o[e.getUTCDay()]},A:function(e){return a[e.getUTCDay()]},b:function(e){return s[e.getUTCMonth()]},B:function(e){return l[e.getUTCMonth()]},c:null,d:jt,e:jt,f:Bt,g:Jt,G:Kt,H:Dt,I:$t,j:Pt,L:Ut,m:Ht,M:qt,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:nn,s:rn,S:Yt,u:Rt,U:It,V:Vt,w:Gt,W:Xt,x:null,X:null,y:Zt,Y:Qt,Z:en,"%":tn},w={a:function(e,t,n){var r=p.exec(t.slice(n));return r?(e.w=h[r[0].toLowerCase()],n+r[0].length):-1},A:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.w=f[r[0].toLowerCase()],n+r[0].length):-1},b:function(e,t,n){var r=b.exec(t.slice(n));return r?(e.m=m[r[0].toLowerCase()],n+r[0].length):-1},B:function(e,t,n){var r=_.exec(t.slice(n));return r?(e.m=y[r[0].toLowerCase()],n+r[0].length):-1},c:function(e,n,r){return M(e,t,n,r)},d:at,e:at,f:dt,g:tt,G:et,H:lt,I:lt,j:ot,L:ct,m:it,M:st,p:function(e,t,n){var r=u.exec(t.slice(n));return r?(e.p=c[r[0].toLowerCase()],n+r[0].length):-1},q:rt,Q:pt,s:ht,S:ut,u:Ze,U:Je,V:Qe,w:Xe,W:Ke,x:function(e,t,r){return M(e,n,t,r)},X:function(e,t,n){return M(e,r,t,n)},y:tt,Y:et,Z:nt,"%":ft};function x(e,t){return function(n){var r,i,a,o=[],l=-1,s=0,u=e.length;for(n instanceof Date||(n=new Date(+n));++l<u;)37===e.charCodeAt(l)&&(o.push(e.slice(s,l)),null!=(i=He[r=e.charAt(++l)])?r=e.charAt(++l):i="e"===r?" ":"0",(a=t[r])&&(r=a(n,i)),o.push(r),s=l+1);return o.push(e.slice(s,l)),o.join("")}}function k(e,t){return function(n){var r,i,a=$e(1900,void 0,1);if(M(a,e,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(t&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=De($e(a.y,0,1))).getUTCDay(),r=i>4||0===i?Ce.ceil(r):Ce(r),r=Ae.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=je($e(a.y,0,1))).getDay(),r=i>4||0===i?me.ceil(r):me(r),r=_e.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?De($e(a.y,0,1)).getUTCDay():je($e(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,De(a)):je(a)}}function M(e,t,n,r){for(var i,a,o=0,l=t.length,s=n.length;o<l;){if(r>=s)return-1;if(37===(i=t.charCodeAt(o++))){if(i=t.charAt(o++),!(a=w[i in He?t.charAt(o++):i])||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return g.x=x(n,g),g.X=x(r,g),g.c=x(t,g),v.x=x(n,v),v.X=x(r,v),v.c=x(t,v),{format:function(e){var t=x(e+="",g);return t.toString=function(){return e},t},parse:function(e){var t=k(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=x(e+="",v);return t.toString=function(){return e},t},utcParse:function(e){var t=k(e+="",!0);return t.toString=function(){return e},t}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Pe.format,Pe.parse,Ue=Pe.utcFormat,Be=Pe.utcParse;var ln=new Date(1972,3,27,19,45,5),sn={"%b %d":[{regex:/^june\s(30|[12][0-9]|0?[1-9])$/i,toDate:function(e){return new Date(null,5,e.split(/\s/)[1])}},{regex:/^july\s(3[01]|[12][0-9]|0?[1-9])$/i,toDate:function(e){return new Date(null,6,e.split(/\s/)[1])}},{regex:/^sept\s(30|[12][0-9]|0?[1-9])$/i,toDate:function(e){return new Date(null,8,e.split(/\s/)[1])}}],"%d %b":[{regex:/^(0?[1-9]|[1-9][0-9])\sjune$/i,toDate:function(e){return new Date(null,5,e.split(/\s/)[0])}},{regex:/^(0?[1-9]|[1-9][0-9])\sjuly$/i,toDate:function(e){return new Date(null,6,e.split(/\s/)[0])}},{regex:/^(0?[1-9]|[1-9][0-9])\ssept$/i,toDate:function(e){return new Date(null,8,e.split(/\s/)[0])}}]};function un(e){return function(t){var n=null;return e.forEach((function(e){t.match(e.regex)&&(n=e.toDate(t))})),n}}function cn(e,t){var n,r=Be(e),i=Ue(e);return n=on("function"==typeof t?function(e){return t(e,null!==r(e))}:function(e){return null!==r(e)}),Object.freeze({test:n,parse:on((function(t){return r(t)||(sn[e]?un(sn[e])(t):null)})),format:function(e){return i(e)},type:"datetime",description:e,id:"datetime$"+e,example:i(ln)})}var dn=Object.freeze([cn("%Y-%m-%dT%H:%M:%S.%LZ"),cn("%Y-%m-%d %H:%M:%S"),cn("%Y-%m-%dT%H:%M:%S"),cn("%Y-%m-%dT%H:%M:%SZ"),cn("%d/%m/%Y",(function(e,t){if(!t)return!1;var n=e.split("/").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&n[2]>=1e3})),cn("%d/%m/%Y %H:%M",(function(e,t){if(!t)return!1;var n=e.split(/[/ :]/).map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&n[2]>=1e3&&n[3]>=0&&n[3]<24&&n[4]>=0&&n[4]<60})),cn("%d/%m/%y",(function(e,t){if(!t)return!1;var n=e.split("/").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&!isNaN(n[2])})),cn("%m/%d/%Y",(function(e,t){if(!t)return!1;var n=e.split("/").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&n[2]>=1e3})),cn("%m/%d/%Y %H:%M",(function(e,t){if(!t)return!1;var n=e.split(/[/ :]/).map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&n[2]>=1e3&&n[3]>=0&&n[3]<24&&n[4]>=0&&n[4]<60})),cn("%m/%d/%y",(function(e,t){if(!t)return!1;var n=e.split("/").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&!isNaN(n[2])})),cn("%Y/%m/%d",(function(e,t){if(!t)return!1;var n=e.split("/").map(parseFloat);return n[0]>=1e3&&n[1]>0&&n[1]<=12&&n[2]>0&&n[2]<=31})),cn("%d-%m-%Y",(function(e,t){if(!t)return!1;var n=e.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&n[2]>=1e3})),cn("%d-%m-%y",(function(e,t){if(!t)return!1;var n=e.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&!isNaN(n[2])})),cn("%d.%m.%Y",(function(e,t){if(!t)return!1;var n=e.split(".").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&n[2]>=1e3})),cn("%m.%d.%y",(function(e,t){if(!t)return!1;var n=e.split(".").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&!isNaN(n[2])})),cn("%m-%d-%Y",(function(e,t){if(!t)return!1;var n=e.split("-").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&n[2]>=1e3})),cn("%m-%d-%y",(function(e,t){if(!t)return!1;var n=e.split("-").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&!isNaN(n[2])})),cn("%Y-%m-%d",(function(e,t){if(!t)return!1;var n=e.split("-").map(parseFloat);return n[0]>=1e3&&n[1]>0&&n[1]<=12&&n[2]>0&&n[2]<=31})),cn("%Y-%m",(function(e,t){if(!t)return!1;var n=e.split("-").map(parseFloat);return n[0]>=1e3&&n[1]>0&&n[1]<=12})),cn("%Y%m",(function(e,t){if(!t)return!1;var n=parseFloat(e.slice(0,4)),r=parseFloat(e.slice(4));return n>1e3&&r>0&&r<=12})),cn("%d %b %Y",(function(e,t){if(!t)return!1;var n=e.split(" ").map(parseFloat);return n[0]>0&&n[0]<=31&&n[2]>=1e3})),cn("%d %B %Y",(function(e,t){if(!t)return!1;var n=e.split(" ").map(parseFloat);return n[0]>0&&n[0]<=31&&n[2]>=1e3})),cn("%d %b %y"),cn("%-d %b ’%y"),cn("%d %B %y"),cn("%d-%b-%Y",(function(e,t){if(!t)return!1;var n=e.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[2]>=1e3})),cn("%d-%B-%Y",(function(e,t){if(!t)return!1;var n=e.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[2]>=1e3})),cn("%d-%b-%y"),cn("%d-%B-%y"),cn("%m/%Y",(function(e,t){if(!t)return!1;var n=e.split("/").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>=1e3})),cn("%m/%y"),cn("%b %Y",(function(e,t){return!!t&&e.split(" ").map(parseFloat)[1]>=1e3})),cn("%B %Y",(function(e,t){return!!t&&e.split(" ").map(parseFloat)[1]>=1e3})),cn("%b-%y"),cn("%b %y"),cn("%B %y"),cn("%b '%y"),cn("%b ’%y"),cn("%B %-d %Y"),cn("%d %b",(function(e,t){return!!t||!!un(sn["%d %b"])(e)})),cn("%d %B"),cn("%b %d",(function(e,t){return!!t||!!un(sn["%b %d"])(e)})),cn("%B %d"),cn("%d-%m",(function(e,t){if(!t)return!1;var n=e.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12})),cn("%m-%d"),cn("%d/%m"),cn("%m/%d"),cn("%b %d %Y"),cn("%b %d %Y, %-I.%M%p"),cn("%Y",(function(e,t){if(!t)return!1;var n=parseFloat(e);return n>1499&&n<2200})),cn("%B"),cn("%b"),cn("%X"),cn("%I:%M %p"),cn("%-I.%M%p"),cn("%H:%M",(function(e,t){if(!t)return!1;var n=e.split(":").map(parseFloat);return n[0]>=0&&n[0]<24})),cn("%H:%M:%S"),cn("%M:%S"),cn("%-I%p"),cn("Q%q %Y",(function(e,t){return!!t&&6===e.replace(/\s/g,"").length})),cn("%Y Q%q",(function(e,t){return!!t&&6===e.replace(/\s/g,"").length}))]);function fn(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function pn(e){return(e=fn(Math.abs(e)))?e[1]:NaN}var hn,_n=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function yn(e){if(!(t=_n.exec(e)))throw new Error("invalid format: "+e);var t;return new bn({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function bn(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function mn(e,t){var n=fn(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}yn.prototype=bn.prototype,bn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var gn={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return mn(100*e,t)},r:mn,s:function(e,t){var n=fn(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(hn=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+fn(e,Math.max(0,t+a-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function vn(e){return e}var wn,xn,kn,Mn=Array.prototype.map,An=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function zn(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?vn:(t=Mn.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,a=[],o=0,l=t[0],s=0;i>0&&l>0&&(s+l+1>r&&(l=Math.max(1,r-s)),a.push(e.substring(i-=l,i+l)),!((s+=l+1)>r));)l=t[o=(o+1)%t.length];return a.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",a=void 0===e.currency?"":e.currency[1]+"",o=void 0===e.decimal?".":e.decimal+"",l=void 0===e.numerals?vn:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(Mn.call(e.numerals,String)),s=void 0===e.percent?"%":e.percent+"",u=void 0===e.minus?"-":e.minus+"",c=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=yn(e)).fill,n=e.align,d=e.sign,f=e.symbol,p=e.zero,h=e.width,_=e.comma,y=e.precision,b=e.trim,m=e.type;"n"===m?(_=!0,m="g"):gn[m]||(void 0===y&&(y=12),b=!0,m="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var g="$"===f?i:"#"===f&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",v="$"===f?a:/[%p]/.test(m)?s:"",w=gn[m],x=/[defgprs%]/.test(m);function k(e){var i,a,s,f=g,k=v;if("c"===m)k=w(e)+k,e="";else{var M=(e=+e)<0||1/e<0;if(e=isNaN(e)?c:w(Math.abs(e),y),b&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),M&&0==+e&&"+"!==d&&(M=!1),f=(M?"("===d?d:u:"-"===d||"("===d?"":d)+f,k=("s"===m?An[8+hn/3]:"")+k+(M&&"("===d?")":""),x)for(i=-1,a=e.length;++i<a;)if(48>(s=e.charCodeAt(i))||s>57){k=(46===s?o+e.slice(i+1):e.slice(i))+k,e=e.slice(0,i);break}}_&&!p&&(e=r(e,1/0));var A=f.length+e.length+k.length,z=A<h?new Array(h-A+1).join(t):"";switch(_&&p&&(e=r(z+e,z.length?h-k.length:1/0),z=""),n){case"<":e=f+e+k+z;break;case"=":e=f+z+e+k;break;case"^":e=z.slice(0,A=z.length>>1)+f+e+k+z.slice(A);break;default:e=z+f+e+k}return l(e)}return y=void 0===y?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),k.toString=function(){return e+""},k}return{format:d,formatPrefix:function(e,t){var n=d(((e=yn(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(pn(t)/3))),i=Math.pow(10,-r),a=An[8+r/3];return function(e){return n(i*e)+a}}}}!function(e){wn=zn(e),xn=wn.format,kn=wn.formatPrefix}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});var Tn={test:on((function(e){return/^(\+|-)?\d{1,3}(,\d{3})*(\.\d+)?((e|E)(\+|-)?\d+)?$/.test(e.trim())})),parse:on((function(e){return parseFloat(e.replace(/,/g,""))})),description:"Comma thousand separator, point decimal mark",thousand_separator:",",decimal_mark:".",id:"number$comma_point",example:"12,235.56"},Cn={test:on((function(e){return/^(\+|-)?\d{1,3}(\s\d{3})*(\.\d+)?((e|E)(\+|-)?\d+)?$/.test(e.trim())})),parse:on((function(e){return parseFloat(e.replace(/\s/g,""))})),description:"Space thousand separator, point decimal mark",thousand_separator:" ",decimal_mark:".",id:"number$space_point",example:"12 235.56"},En={test:on((function(e){return/^(\+|-)?\d+(\.\d+)?((e|E)(\+|-)?\d+)?$/.test(e.trim())})),parse:on((function(e){return parseFloat(e)})),description:"No thousand separator, point decimal mark",thousand_separator:"",decimal_mark:".",id:"number$none_point",example:"12235.56"},Sn={test:on((function(e){return/^(\+|-)?\d{1,3}(\.\d{3})*(,\d+)?((e|E)(\+|-)?\d+)?$/.test(e.trim())})),parse:on((function(e){return parseFloat(e.replace(/\./g,"").replace(/,/,"."))})),description:"Point thousand separator, comma decimal mark",thousand_separator:".",decimal_mark:",",id:"number$point_comma",example:"12.235,56"},Nn={test:on((function(e){return/^(\+|-)?\d{1,3}(\s\d{3})*(,\d+)?((e|E)(\+|-)?\d+)?$/.test(e.trim())})),parse:on((function(e){return parseFloat(e.replace(/\s/g,"").replace(/,/,"."))})),description:"Space thousand separator, comma decimal mark",thousand_separator:" ",decimal_mark:",",id:"number$space_comma",example:"12 235,56"},Fn={test:on((function(e){return/^(\+|-)?\d+(,\d+)?((e|E)(\+|-)?\d+)?$/.test(e.trim())})),parse:on((function(e){return parseFloat(e.replace(/,/,"."))})),description:"No thousand separator, comma decimal mark",thousand_separator:"",decimal_mark:",",id:"number$none_comma",example:"12235,56"},Ln=Object.freeze([Tn,Cn,Sn,Nn,En,Fn]);Ln.forEach((function(e){e.type="number",e.format=function(e){var t,n,r=zn({decimal:e.decimal_mark,thousands:e.thousand_separator,grouping:[3],currency:["",""]});return function(e,i){return null===e?"":(i||(i=",.2f"),i!==n&&(n=i,t=r.format(n)),t(e))}}(e),Object.freeze(e)}));var On,jn=Object.freeze({test:function(e){return"string"==typeof e||an(e)},parse:function(e){return"string"==typeof e?e:an(e)},format:function(e){if("string"==typeof e)return e},type:"string",description:"Arbitrary string",id:"string$arbitrary_string"}),Dn=Object.freeze({datetime:dn,number:Ln}),$n=Object.freeze(["datetime","number","string"]),Pn=Object.freeze({n_max:250,n_failing_values:0,failure_fraction:.05,sort:!0}),Un=Object.freeze(Object.keys(Pn));function Bn(e,t){return e.index-t.index}function Hn(e,t){return t.n_success-e.n_success||Bn(e,t)}function qn(e){return(""+e).trim()}function Yn(e){return void 0===e?function(e){return qn(e)}:"function"==typeof e?function(t,n){return qn(e(t,n))}:function(t){return qn(t[""+e])}}function Rn(e){e?Array.isArray(e)||(e=[e]):e=$n;var t=e.reduce((function(e,t){var n=Dn[t];return n&&Array.prototype.push.apply(e,n),e}),[]),n=-1!==e.indexOf("string"),r=Un.reduce((function(e,t){return e[t]=Pn[t],e}),{}),i=function(e,i){i=Yn(i);var a=e.map(i).filter(Boolean);if(!a.length)return n?[jn]:[];var o=Math.min(r.n_max,a.length),l=Math.floor(o*r.failure_fraction),s=r.n_failing_values,u=r.sort?Hn:Bn,c=t.slice().reduce((function(e,t,n){for(var r=c=0,i=[],u=!1,c=0;c<o;c++){var d=a[c];if(!t.test(d)&&(++r>l?u=!0:-1===i.indexOf(d)&&(i.push(d),i.length>s&&(u=!0)),u))break}return u||e.push({interp:t,n_success:o-r,index:n}),e}),[]).sort(u).map((function(e){return e.interp}));return n&&c.push(jn),c};return Un.forEach((function(e){var t;i[(t=e,t.replace(/_(\w)/g,(function(e,t){return t.toUpperCase()})))]=function(t){return void 0===t?r[e]:(r[e]=t,i)}})),i}Rn.DATETIME_IDS=Object.freeze(dn.map((function(e){return e.id}))),Rn.NUMBER_IDS=Object.freeze(Ln.map((function(e){return e.id}))),Rn.STRING_IDS=Object.freeze([jn.id]),Rn.getInterpretation=(On=dn.concat(Ln,jn).reduce((function(e,t){return e[t.id]=t,e}),{}),function(e){return On[e]}),Rn._createAccessorFunction=Yn;const In=Rn.getInterpretation,Wn=Object.freeze({transform_labels:!1,transform:"multiply",multiply_divide_constant:1,exponentiate_constant:0,multiplier:1,prefix:"",n_dec:2,suffix:"",strip_zeros:!0,strip_separator:!0,negative_sign:"-$nk"});function Vn(e,t){const n=In(t);if(!n)throw new Error(`format_id ${t} not recognised`);if("number"!==n.type)throw new Error(`format_id ${t}not a number format`);const r=n.format,i=n.decimal_mark,a=n.thousand_separator,o=Math.trunc(e.n_dec),l=(a?",":"")+"."+Math.max(0,o)+"f",s=e.strip_zeros&&o>0?new RegExp("\\"+i+"?0+$"):null,u=e.strip_separator&&a,c=e.negative_sign,d=function(e){let t=1;return e.transform_labels&&(t="multiply"===e.transform?e.multiply_divide_constant:"divide"===e.transform?1/e.multiply_divide_constant:Math.pow(10,e.exponentiate_constant)),function(e){return e*t}}(e);return function(t){if(null===t)return"";const n=o>=0?d(t):function(e,t){if(!(t=t>0?Math.floor(t):Math.ceil(t)))return Math.round(e);const n=Math.pow(10,Math.abs(t));return t>0?Math.round(e*n)/n:Math.round(e/n)*n}(d(t),o),i=n<0,f=Math.abs(n),p=u&&a&&f>=1e3&&f<1e4;let h=r(f,l);return s&&(h=h.replace(s,"")),p&&(h=h.replace(a,"")),i&&"none"!==c?"-$nk"===c?"-"+e.prefix+h+e.suffix:"$-nk"===c?e.prefix+"-"+h+e.suffix:"($nk)"===c?"("+e.prefix+h+e.suffix+")":e.prefix+"("+h+")"+e.suffix:e.prefix+h+e.suffix}}function Gn(e){for(let t in Wn)void 0===e[t]&&(e[t]=Wn[t]);return function(t){return Vn(e,t)}}function Xn(e){const t=Rn.getInterpretation(e);if(!t)throw new Error(`format_id ${e} not recognised`);return function(){return t.format(...arguments)}}function Zn(){return this.declarations=[],this}function Jn(e){return this.selector=e,this.styles=[],this}Zn.prototype.select=function(e){if(!e)return this;var t=new Jn(e);return t.parent=this,this.addDeclaration(t),t},Zn.prototype.addDeclaration=function(e){return this.declarations.push(e),this},Zn.prototype.print=function(){var e="";return this.declarations.forEach((function(t){e+=t.selector+" {\n",t.styles.forEach((function(t){e+="\t"+t[0]+": "+t[1]+";\n"})),e+="}\n\n"})),e},Zn.prototype.clear=function(){return this.declarations=[],this},Jn.prototype.style=function(e,t){var n="function"==typeof value_?t():t;return""!==n&&null!=n&&this.styles.push([e,n]),this},Jn.prototype.select=function(e){return this.parent.select(this.selector+" "+e)};var Qn=!1;function Kn(){if(!Qn&&"undefined"!=typeof document){var e,t=((e=new Zn).select(".fl-controls-container").style("display","inline-block").style("line-height","1em"),e.select(".fl-controls-title").style("display","inline-block").style("margin-inline-end","0.5rem"),e.select(".fl-controls-container, .fl-controls-container *").style("box-sizing","border-box"),e.select(".slider-holder").style("margin-bottom","20px"),e.select(".fl-controls-slider, .slider-play").style("pointer-events","all").style("display","inline-block").style("vertical-align","middle"),e.select(".slider-play svg").style("height","100%").style("width","100%").style("display","block").style("cursor"," pointer",""),e.select(".fl-controls-slider svg").style("display","block"),e.select(".slider-play:hover").style("opacity","0.6"),e.select(".fl-control-slider").style("width","100%").style("bottom","0").style("align-items","center"),e.select(".fl-control").style("position","relative"),e.select(".fl-control.hidden").style("display","none"),e.select(".fl-control .button").style("display","inline-flex").style("align-items","center").style("background","#eee").style("padding","0 0.5em").style("margin-right","0.25em").style("margin-bottom","0.25em").style("line-height","1em").style("box-sizing","border-box"),e.select(".fl-control.grouped:not(.hidden)").style("display","inline-table").style("table-layout","fixed").select(".button").style("display","table-cell").style("vertical-align","middle").style("margin","0").style("text-align","center"),e.select(".fl-control .button.selected").style("background","#ddd"),e.select(".fl-control-dropdown").style("line-height","1em").style("position","relative"),e.select(".fl-control-dropdown::after").style("display","block").style("content","''").style("width","10px").style("height","10px").style("background","transparent").style("position","absolute").style("right","5px").style("left","auto").style("top","50%").style("pointer-events","none").style("transform","translateY(calc(-50% + 3px))").style("border-left","5px solid transparent").style("border-right","5px solid transparent").style("border-top","5px solid").style("box-sizing","border-box"),e.select(".is-rtl .fl-control-dropdown::after").style("left","5px").style("right","auto"),e.select(".fl-control-dropdown select").style("-webkit-appearance","none").style("width","100%"),e.print()),n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",r.className="flourish-controls",n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t)),Qn=!0}}function er(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function tr(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function nr(){}var rr=.7,ir=1/rr,ar="\\s*([+-]?\\d+)\\s*",or="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",lr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sr=/^#([0-9a-f]{3,8})$/,ur=new RegExp("^rgb\\("+[ar,ar,ar]+"\\)$"),cr=new RegExp("^rgb\\("+[lr,lr,lr]+"\\)$"),dr=new RegExp("^rgba\\("+[ar,ar,ar,or]+"\\)$"),fr=new RegExp("^rgba\\("+[lr,lr,lr,or]+"\\)$"),pr=new RegExp("^hsl\\("+[or,lr,lr]+"\\)$"),hr=new RegExp("^hsla\\("+[or,lr,lr,or]+"\\)$"),_r={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function yr(){return this.rgb().formatHex()}function br(){return this.rgb().formatRgb()}function mr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=sr.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?gr(t):3===n?new kr(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?vr(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?vr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=ur.exec(e))?new kr(t[1],t[2],t[3],1):(t=cr.exec(e))?new kr(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=dr.exec(e))?vr(t[1],t[2],t[3],t[4]):(t=fr.exec(e))?vr(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=pr.exec(e))?Tr(t[1],t[2]/100,t[3]/100,1):(t=hr.exec(e))?Tr(t[1],t[2]/100,t[3]/100,t[4]):_r.hasOwnProperty(e)?gr(_r[e]):"transparent"===e?new kr(NaN,NaN,NaN,0):null}function gr(e){return new kr(e>>16&255,e>>8&255,255&e,1)}function vr(e,t,n,r){return r<=0&&(e=t=n=NaN),new kr(e,t,n,r)}function wr(e){return e instanceof nr||(e=mr(e)),e?new kr((e=e.rgb()).r,e.g,e.b,e.opacity):new kr}function xr(e,t,n,r){return 1===arguments.length?wr(e):new kr(e,t,n,null==r?1:r)}function kr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Mr(){return"#"+zr(this.r)+zr(this.g)+zr(this.b)}function Ar(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function zr(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function Tr(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Sr(e,t,n,r)}function Cr(e){if(e instanceof Sr)return new Sr(e.h,e.s,e.l,e.opacity);if(e instanceof nr||(e=mr(e)),!e)return new Sr;if(e instanceof Sr)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,l=a-i,s=(a+i)/2;return l?(o=t===a?(n-r)/l+6*(n<r):n===a?(r-t)/l+2:(t-n)/l+4,l/=s<.5?a+i:2-a-i,o*=60):l=s>0&&s<1?0:o,new Sr(o,l,s,e.opacity)}function Er(e,t,n,r){return 1===arguments.length?Cr(e):new Sr(e,t,n,null==r?1:r)}function Sr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Nr(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}er(nr,mr,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:yr,formatHex:yr,formatHsl:function(){return Cr(this).formatHsl()},formatRgb:br,toString:br}),er(kr,xr,tr(nr,{brighter:function(e){return e=null==e?ir:Math.pow(ir,e),new kr(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?rr:Math.pow(rr,e),new kr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Mr,formatHex:Mr,formatRgb:Ar,toString:Ar})),er(Sr,Er,tr(nr,{brighter:function(e){return e=null==e?ir:Math.pow(ir,e),new Sr(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?rr:Math.pow(rr,e),new Sr(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new kr(Nr(e>=240?e-240:e+120,i,r),Nr(e,i,r),Nr(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var Fr=Math.PI/180,Lr=180/Math.PI,Or=.96422,jr=.82521,Dr=4/29,$r=6/29,Pr=3*$r*$r,Ur=$r*$r*$r;function Br(e){if(e instanceof qr)return new qr(e.l,e.a,e.b,e.opacity);if(e instanceof Gr)return Xr(e);e instanceof kr||(e=wr(e));var t,n,r=Wr(e.r),i=Wr(e.g),a=Wr(e.b),o=Yr((.2225045*r+.7168786*i+.0606169*a)/1);return r===i&&i===a?t=n=o:(t=Yr((.4360747*r+.3850649*i+.1430804*a)/Or),n=Yr((.0139322*r+.0971045*i+.7141733*a)/jr)),new qr(116*o-16,500*(t-o),200*(o-n),e.opacity)}function Hr(e,t,n,r){return 1===arguments.length?Br(e):new qr(e,t,n,null==r?1:r)}function qr(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function Yr(e){return e>Ur?Math.pow(e,1/3):e/Pr+Dr}function Rr(e){return e>$r?e*e*e:Pr*(e-Dr)}function Ir(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Wr(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Vr(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof Gr)return new Gr(e.h,e.c,e.l,e.opacity);if(e instanceof qr||(e=Br(e)),0===e.a&&0===e.b)return new Gr(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Lr;return new Gr(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}(e):new Gr(e,t,n,null==r?1:r)}function Gr(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Xr(e){if(isNaN(e.h))return new qr(e.l,0,0,e.opacity);var t=e.h*Fr;return new qr(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}er(qr,Hr,tr(nr,{brighter:function(e){return new qr(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new qr(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new kr(Ir(3.1338561*(t=Or*Rr(t))-1.6168667*(e=1*Rr(e))-.4906146*(n=jr*Rr(n))),Ir(-.9787684*t+1.9161415*e+.033454*n),Ir(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),er(Gr,Vr,tr(nr,{brighter:function(e){return new Gr(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new Gr(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return Xr(this).rgb()}}));var Zr=-.14861,Jr=1.78277,Qr=-.29227,Kr=-.90649,ei=1.97294,ti=ei*Kr,ni=ei*Jr,ri=Jr*Qr-Kr*Zr;function ii(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof ai)return new ai(e.h,e.s,e.l,e.opacity);e instanceof kr||(e=wr(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(ri*r+ti*t-ni*n)/(ri+ti-ni),a=r-i,o=(ei*(n-i)-Qr*a)/Kr,l=Math.sqrt(o*o+a*a)/(ei*i*(1-i)),s=l?Math.atan2(o,a)*Lr-120:NaN;return new ai(s<0?s+360:s,l,i,e.opacity)}(e):new ai(e,t,n,null==r?1:r)}function ai(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}er(ai,ii,tr(nr,{brighter:function(e){return e=null==e?ir:Math.pow(ir,e),new ai(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?rr:Math.pow(rr,e),new ai(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*Fr,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new kr(255*(t+n*(Zr*r+Jr*i)),255*(t+n*(Qr*r+Kr*i)),255*(t+n*(ei*r)),this.opacity)}}));var oi="$";function li(){}function si(e,t){var n=new li;if(e instanceof li)e.each((function(e,t){n.set(t,e)}));else if(Array.isArray(e)){var r,i=-1,a=e.length;if(null==t)for(;++i<a;)n.set(i,e[i]);else for(;++i<a;)n.set(t(r=e[i],i,e),r)}else if(e)for(var o in e)n.set(o,e[o]);return n}function ui(){var e,t,n,r=[],i=[];function a(n,i,o,l){if(i>=r.length)return null!=e&&n.sort(e),null!=t?t(n):n;for(var s,u,c,d=-1,f=n.length,p=r[i++],h=si(),_=o();++d<f;)(c=h.get(s=p(u=n[d])+""))?c.push(u):h.set(s,[u]);return h.each((function(e,t){l(_,t,a(e,i,o,l))})),_}function o(e,n){if(++n>r.length)return e;var a,l=i[n-1];return null!=t&&n>=r.length?a=e.entries():(a=[],e.each((function(e,t){a.push({key:t,values:o(e,n)})}))),null!=l?a.sort((function(e,t){return l(e.key,t.key)})):a}return n={object:function(e){return a(e,0,ci,di)},map:function(e){return a(e,0,fi,pi)},entries:function(e){return o(a(e,0,fi,pi),0)},key:function(e){return r.push(e),n},sortKeys:function(e){return i[r.length-1]=e,n},sortValues:function(t){return e=t,n},rollup:function(e){return t=e,n}}}function ci(){return{}}function di(e,t,n){e[t]=n}function fi(){return si()}function pi(e,t,n){e.set(t,n)}function hi(){}li.prototype=si.prototype={constructor:li,has:function(e){return oi+e in this},get:function(e){return this[oi+e]},set:function(e,t){return this[oi+e]=t,this},remove:function(e){var t=oi+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===oi&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===oi&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===oi&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===oi&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===oi&&++e;return e},empty:function(){for(var e in this)if(e[0]===oi)return!1;return!0},each:function(e){for(var t in this)t[0]===oi&&e(this[t],t.slice(1),this)}};var _i=si.prototype;function yi(e,t){var n=new hi;if(e instanceof hi)e.each((function(e){n.add(e)}));else if(e){var r=-1,i=e.length;if(null==t)for(;++r<i;)n.add(e[r]);else for(;++r<i;)n.add(t(e[r],r,e))}return n}hi.prototype=yi.prototype={constructor:hi,has:_i.has,add:function(e){return this[oi+(e+="")]=e,this},remove:_i.remove,clear:_i.clear,values:_i.keys,size:_i.size,empty:_i.empty,each:_i.each};var bi,mi,gi=(bi=document.createElement("canvas").getContext("2d"),function(e,t){return bi.font=t||"10px sans-serif",bi.measureText(e).width});function vi(e,t,n){var r,i,a,o,l,s={},u=ue(n).append("div").attr("class","fl-control fl-control-slider").style("flex","1"),c=u.append("div").attr("class","slider-play").attr("role","button").attr("aria-label","play-button").attr("cursor","pointer").attr("tabindex",0),d=u.append("div").attr("class","fl-controls-slider").style("display","none").style("align-items","center"),f=null;const p=d.append("input").attr("type","range").attr("id","slider-range").attr("name","slider-range").attr("value",0),h=d.append("label").attr("class","slider-label").attr("for","slider-range");var _=function(){clearTimeout(f),f=null},y=function(t){var n=a[t];n.options_index!==e.index()&&(e.index(n.options_index),e.trigger("change"))},b=function(){_(),u.classed("playing",!1),c.html(r).attr("aria-label","play-button"),e._isPlaying_(!1),l=!1},m=function(){var n=e.getSortedIndex(),r=o[n],i=e.n_options-1,a=n<i?n+1:0;f=setTimeout((function(){y(a),t.slider_loop||a<i?m():b()}),r)},g=function(){u.classed("playing",!0),c.html(i).attr("aria-label","pause-button"),m(),e._isPlaying_(!0),l=!0};c.on("click",(function(){null===f?g():b()})).on("keyup",(function(){"Space"!==Q.code&&"Enter"!==Q.code||(Q.preventDefault(),null===f?g():b())}));var v=function(e){const n=Math.min(Math.ceil(e),mi(t.slider_max_label_width))+"px";return h.style("width",n).style("flex-shrink",0),u.style("display","inline-flex"),p.style("width",mi(t.slider_width)+"px"),r='<svg aria-hidden="true" width="25px" height="30px" viewBox="0 0 25 30"> <polygon stroke="none" points="25 15 0 30 0 0"></polygon> </svg>',i='<svg aria-hidden="true" width="26px" height="30px" viewBox="0 0 26 30"> <g stroke="none" stroke-width="1"quarter><rect x="2" y="2" width="9" height="26"></rect> <rect x="15" y="2" width="9" height="26"></rect> </g> </svg>',c.html(f?i:r),s},w=function(){return b(),u.style("display","none"),s};return s.show=v,s.hide=w,s.update=function(n,r){if(d.style("display","flex"),a=n,!e.n_options||"slider"!==t.control_type)return w(),s;var i=window.getComputedStyle(h.node()).fontSize,c=window.getComputedStyle(h.node()).fontFamily,x=window.getComputedStyle(u.node()).fontWeight;let k=0;const M=x+" "+i+" "+c+", sans-serif";a.forEach((function(e){const t=gi(e.display,M);k=Math.max(k,t)})),r?v(k):w();var A=e.n_options,z=t.slider_loop;o=a.map((function(e,n){return 1e3*(t.slider_step_time+(z&&n===A-1?t.slider_restart_pause:0))}));var T=e.getSortedIndex(),C=a[T],E=a[0].display,S=a[a.length-1].display;return p.attr("min",0).attr("max",A-1).attr("step",1).attr("aria-valuenow",C.display).attr("aria-valuemin",E).attr("aria-valuemax",S).on("input",(function(){var e=null!==f;e&&_(),y(this.value),e&&m()})),p.node().value=T,h.html(C.display),e._isPlaying_()&&!l?g():!e._isPlaying_()&&l&&b(),s},s}var wi=Object.freeze({alignment:"start",controls_spacing:1});function xi(e){for(var t in this._state=e,wi)void 0===this._state[t]&&(this._state[t]=wi[t]);return this}xi.prototype.appendTo=function(e){return this._container=ue(e).append("div").node(),this},xi.prototype.add=function(e){return this._controls=Array.isArray(e)?e:[e],this._controls.forEach((function(e){e&&"function"==typeof e.appendTo?e.appendTo(this._container):console.warn("Please pass valid controls instances to .add()")}),this),this},xi.prototype.update=function(){this._controls.forEach((function(e){e&&"function"==typeof e.update&&e.update()}));var e=this._state.alignment,t="center"==e?e:"flex-"+e,n=window.template||void 0,r=n?n.state.layout:void 0,i=r&&r.read_direction||ue("body").node().dir||"ltr",a=e;"rtl"===i&&"center"!==e&&(a="start"===e?"end":"start"),ue(this._container).classed("is-rtl","rtl"==i).style("display","flex").style("flex-wrap","wrap").style("justify-content",t);var o,l,s=ue(this._container).selectAll(".fl-controls-container"),u=this._state.controls_spacing;switch(a){case"end":o=u+"em",l=0;break;case"center":o=.5*u+"em",l=.5*u+"em";break;default:o=0,l=u+"em"}return s.style("margin-left",o).style("margin-right",l),this};var ki=Object.freeze({control_type:"dropdown",control_title:"",dropdown_width_mode:"auto",dropdown_width_fixed:20,button_group:!0,button_group_width_mode:"auto",button_group_width_fixed:20,slider_width:15,slider_max_label_width:20,slider_handle_height:1,slider_track_height:.2,slider_margin:4.5,slider_play_button:!0,slider_step_time:2,slider_loop:!0,slider_restart_pause:0,sort:!1,_index_:null,_is_playing_:!1});function Mi(e){return e}function Ai(e){return null==e?"":e.toString()}function zi(e,t){var n={},r=Mi,i=Ai,a=[],o=!0,l=[],s=[],u=[],c=document.createElement("div");c.setAttribute("class","fl-controls-container");var d=ue(c).append("div").attr("class","fl-controls-title"),f=function(e,t,n){var r={},i=ue(n).append("div").attr("class","fl-control fl-control-dropdown").style("display","none");const a=i.append("select").on("change",(function(){const t=a.select("option:checked").datum().options_index;e.index(t),e.trigger("change")}));var o=function(e){var r="100%";"auto"==t.dropdown_width_mode?r=Math.min(e+40,mi(20))+mi(1)+"px":"fixed"==t.dropdown_width_mode&&(r=mi(t.dropdown_width_fixed)+"px"),n.style.width="full"==t.dropdown_width_mode?r:"",i.style("width",r).style("display","full"!==t.dropdown_width_mode?"inline-table":null)},l=function(){i.style("display","none")};return r.show=o,r.hide=l,r.update=function(n,i){var s=window.getComputedStyle(a.node()).fontSize;if(!e.n_options||"dropdown"!==t.control_type)return l(),r;const u=a.selectAll("option").data(n,(e=>e.value));u.exit().remove();var c=u.enter().append("option");u.merge(c).text((e=>e.display)).attr("value",(e=>e.value));let d=0;const f=s+" sans-serif";return"auto"===t.dropdown_width_mode&&u.merge(c).each((function(e){const t=gi(e.display,f);d=Math.max(d,t)})),a.node().value=e.value(),i?o(d):l(),r},r}(n,e,c),p=function(e,t,n){var r={},i=ue(n).append("div").attr("class","fl-control fl-control-buttons"),a=function(){i.classed("hidden",!1)},o=function(){i.classed("hidden",!0)};return r.show=a,r.hide=o,r.update=function(n,l){if(!e.n_options||"buttons"!==t.control_type)return o(),r;var s=e.index();i.classed("grouped",t.button_group),i.classed("fixed-width","fixed"==t.button_group_width_mode||"full"==t.button_group_width_mode),i.style("width",t.button_group&&"fixed"==t.button_group_width_mode?mi(t.button_group_width_fixed)+"px":"full"==t.button_group_width_mode?"100%":null);var u=function(t){var n=t.options_index;n!==e.index()&&(e.index(n),e.trigger("change"))},c=i.selectAll(".button").data(n,(function(e){return e.display})),d=c.enter().append("div").attr("class","button").style("cursor","pointer").attr("role","button").attr("tabindex",0).on("click",(function(e){u(e)})).on("keyup",(function(e){"Space"!==Q.code&&"Enter"!==Q.code||(Q.preventDefault(),u(e))}));d.append("span").text((function(e){return e.display})),c.merge(d).classed("selected",(function(e){return e.options_index===s})).attr("aria-pressed",(function(e){return e.options_index===s})),c.exit().remove(),l?a():o()},r}(n,e,c),h=vi(n,e,c);for(var _ in ki)void 0===e[_]&&(e[_]=ki[_]);var y=e._index_;n.appendTo=function(e){return Kn(),ue(e).node().appendChild(c),n};n.remove=function(){return c.parentElement&&c.parentElement.removeChild(c),n},n.options=function(e){if(void 0===e)return l.slice();if(!Array.isArray(e))return n;var t=(l=e.slice()).length,r=b();return t?(null===r||r>=t)&&b(0):b(null),n},Object.defineProperty(n,"n_options",{get:function(){return l.length}});var b=function(t){return void 0===t?(e._is_playing_||(y=e._index_),y):(null===t||function(e){return l.length&&e>=0&&e<l.length}(t)?(y=t,e._is_playing_||(e._index_=y)):console.warn("Invalid index, ignoring update call"),n)};n.index=b,n.getSortedIndex=function(){var t,n=b();return"unsorted"==e.sort?n:(s.some((function(e,r){if(e.options_index===n)return t=r,!0})),t)},n.value=function(e){if(void 0===e)return l[b()];var t=l.indexOf(e);return-1!==t&&b(t),n},n.on=function(e,t){return"change"===e&&u.push(t.bind(n)),n},n.parse=function(e){return void 0===e?r:(r=null===e?Mi:e,n)},n.format=function(e,t){if(void 0===e)return i;if(null===e&&(i=Ai),"string"==typeof e)try{i=Xn(e)}catch(e){i=Ai,console.warn(e.message)}else i=e;return t&&Array.isArray(t)&&(a=t),n},n.visible=function(e){return void 0===e?o:(o=null===e||e,n)},n.update=function(){return function(){var e=parseFloat(getComputedStyle(document.documentElement).fontSize)||16;mi=function(t){return t*e}}(),s=function(e,t,n,r,i){var a=e.map((function(e,t){return{value:e,options_index:t,parsed:n(e),display:i.includes(e)?e:r(e)}}));return t?a.sort((function(e,t){return function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}(e.parsed,t.parsed)})):a}(l,e.sort,r,i,a),function(t){c.style.display=t.length>1?"flex":"none",c.style.width="",c.style.alignItems="center",d.node().innerHTML=e.control_title,d.node().style.display=""===e.control_title?"none":"inline-block",h.update(t,o),f.update(t,o),p.update(t,o)}(s),n},n.trigger=function(e){var t,r;return"change"===e&&(t=b(),r=l[t],u.forEach((function(e){e(r,t)}))),n},n.getNode=function(){return c};return n._isPlaying_=function(t){if(void 0===t)return e._is_playing_;e._is_playing_=!!t,t||b(y)},n}function Ti(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ci(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ei(){}var Si=.7,Ni=1/Si,Fi="\\s*([+-]?\\d+)\\s*",Li="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Oi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ji=/^#([0-9a-f]{3,8})$/,Di=new RegExp(`^rgb\\(${Fi},${Fi},${Fi}\\)$`),$i=new RegExp(`^rgb\\(${Oi},${Oi},${Oi}\\)$`),Pi=new RegExp(`^rgba\\(${Fi},${Fi},${Fi},${Li}\\)$`),Ui=new RegExp(`^rgba\\(${Oi},${Oi},${Oi},${Li}\\)$`),Bi=new RegExp(`^hsl\\(${Li},${Oi},${Oi}\\)$`),Hi=new RegExp(`^hsla\\(${Li},${Oi},${Oi},${Li}\\)$`),qi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Yi(){return this.rgb().formatHex()}function Ri(){return this.rgb().formatRgb()}function Ii(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ji.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Wi(t):3===n?new Zi(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Vi(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Vi(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Di.exec(e))?new Zi(t[1],t[2],t[3],1):(t=$i.exec(e))?new Zi(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Pi.exec(e))?Vi(t[1],t[2],t[3],t[4]):(t=Ui.exec(e))?Vi(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Bi.exec(e))?na(t[1],t[2]/100,t[3]/100,1):(t=Hi.exec(e))?na(t[1],t[2]/100,t[3]/100,t[4]):qi.hasOwnProperty(e)?Wi(qi[e]):"transparent"===e?new Zi(NaN,NaN,NaN,0):null}function Wi(e){return new Zi(e>>16&255,e>>8&255,255&e,1)}function Vi(e,t,n,r){return r<=0&&(e=t=n=NaN),new Zi(e,t,n,r)}function Gi(e){return e instanceof Ei||(e=Ii(e)),e?new Zi((e=e.rgb()).r,e.g,e.b,e.opacity):new Zi}function Xi(e,t,n,r){return 1===arguments.length?Gi(e):new Zi(e,t,n,null==r?1:r)}function Zi(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Ji(){return`#${ta(this.r)}${ta(this.g)}${ta(this.b)}`}function Qi(){const e=Ki(this.opacity);return`${1===e?"rgb(":"rgba("}${ea(this.r)}, ${ea(this.g)}, ${ea(this.b)}${1===e?")":`, ${e})`}`}function Ki(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ea(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ta(e){return((e=ea(e))<16?"0":"")+e.toString(16)}function na(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new aa(e,t,n,r)}function ra(e){if(e instanceof aa)return new aa(e.h,e.s,e.l,e.opacity);if(e instanceof Ei||(e=Ii(e)),!e)return new aa;if(e instanceof aa)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,l=a-i,s=(a+i)/2;return l?(o=t===a?(n-r)/l+6*(n<r):n===a?(r-t)/l+2:(t-n)/l+4,l/=s<.5?a+i:2-a-i,o*=60):l=s>0&&s<1?0:o,new aa(o,l,s,e.opacity)}function ia(e,t,n,r){return 1===arguments.length?ra(e):new aa(e,t,n,null==r?1:r)}function aa(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function oa(e){return(e=(e||0)%360)<0?e+360:e}function la(e){return Math.max(0,Math.min(1,e||0))}function sa(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}Ti(Ei,Ii,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Yi,formatHex:Yi,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return ra(this).formatHsl()},formatRgb:Ri,toString:Ri}),Ti(Zi,Xi,Ci(Ei,{brighter(e){return e=null==e?Ni:Math.pow(Ni,e),new Zi(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?Si:Math.pow(Si,e),new Zi(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Zi(ea(this.r),ea(this.g),ea(this.b),Ki(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ji,formatHex:Ji,formatHex8:function(){return`#${ta(this.r)}${ta(this.g)}${ta(this.b)}${ta(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Qi,toString:Qi})),Ti(aa,ia,Ci(Ei,{brighter(e){return e=null==e?Ni:Math.pow(Ni,e),new aa(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?Si:Math.pow(Si,e),new aa(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Zi(sa(e>=240?e-240:e+120,i,r),sa(e,i,r),sa(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new aa(oa(this.h),la(this.s),la(this.l),Ki(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ki(this.opacity);return`${1===e?"hsl(":"hsla("}${oa(this.h)}, ${100*la(this.s)}%, ${100*la(this.l)}%${1===e?")":`, ${e})`}`}}));const ua=Math.PI/180,ca=180/Math.PI,da=.96422,fa=.82521,pa=4/29,ha=6/29,_a=3*ha*ha,ya=ha*ha*ha;function ba(e){if(e instanceof ma)return new ma(e.l,e.a,e.b,e.opacity);if(e instanceof Ma)return Aa(e);e instanceof Zi||(e=Gi(e));var t,n,r=xa(e.r),i=xa(e.g),a=xa(e.b),o=ga((.2225045*r+.7168786*i+.0606169*a)/1);return r===i&&i===a?t=n=o:(t=ga((.4360747*r+.3850649*i+.1430804*a)/da),n=ga((.0139322*r+.0971045*i+.7141733*a)/fa)),new ma(116*o-16,500*(t-o),200*(o-n),e.opacity)}function ma(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function ga(e){return e>ya?Math.pow(e,1/3):e/_a+pa}function va(e){return e>ha?e*e*e:_a*(e-pa)}function wa(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function xa(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function ka(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof Ma)return new Ma(e.h,e.c,e.l,e.opacity);if(e instanceof ma||(e=ba(e)),0===e.a&&0===e.b)return new Ma(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*ca;return new Ma(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}(e):new Ma(e,t,n,null==r?1:r)}function Ma(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Aa(e){if(isNaN(e.h))return new ma(e.l,0,0,e.opacity);var t=e.h*ua;return new ma(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}function za(e,t){if("string"==typeof e&&(e=document.querySelector(e)),!e)return console.error("No valid target in createScreenshotSVG"),null;const{width:n,height:r,x:i,y:a}=e.getBoundingClientRect(),o=document.createElementNS("http://www.w3.org/2000/svg","svg");return o.id=t,o.classList.add("flourish-screenshot-svg-container"),o.style.left=i+"px",o.style.top=a+"px",o.style.width=n+"px",o.style.height=r+"px",o.style.position="absolute",e.appendChild(o),{addTextElements:function(t){if("string"==typeof t&&(t=e.querySelectorAll(t)),!t)return console.error("No valid els inside addTextElements"),null;for(const e of t){const{x:t,y:n,width:r}=e.getBoundingClientRect(),i=document.createElementNS("http://www.w3.org/2000/svg","text"),{color:a,"font-family":l,"font-size":s,"font-weight":u,"line-height":c,"padding-left":d,"padding-top":f}=window.getComputedStyle(e),p=`${u} ${s} ${l}`,h=La(e.innerText,p,null,Math.ceil(r)),_=isNaN(parseFloat(c))?1.2*parseFloat(s)+"px":c,y=window.getComputedStyle(e.closest("[style*='opacity']")||e).opacity;h.forEach(((e,n)=>{const r=document.createElementNS("http://www.w3.org/2000/svg","tspan");r.innerHTML=e,r.setAttribute("dy",0===n?parseFloat(f):_),r.setAttribute("dx",parseFloat(d)),r.setAttribute("x",t),r.setAttribute("opacity",y),i.appendChild(r)})),i.style.dominantBaseline="text-before-edge",i.setAttribute("x",t+"px"),i.setAttribute("y",n+"px"),i.setAttribute("font-family",l),i.setAttribute("font-size",s),i.setAttribute("font-weight",u),i.setAttribute("fill",a),o.appendChild(i)}return this},addCircleElements:function(t){if("string"==typeof t&&(t=e.querySelectorAll(t)),!t)return console.error("No valid els inside addCircleElements"),null;for(const e of t){const t=document.createElementNS("http://www.w3.org/2000/svg","circle"),{x:n,y:r,width:i}=e.getBoundingClientRect(),a=window.getComputedStyle(e)["background-color"],l=window.getComputedStyle(e.closest("[style*='opacity']")||e).opacity,s=i/2;t.setAttribute("cx",n+s+"px"),t.setAttribute("cy",r+s+"px"),t.setAttribute("r",s+"px"),t.setAttribute("opacity",l),t.setAttribute("fill",a),"rgba(0, 0, 0, 0)"===a&&t.setAttribute("stroke","#CCC"),o.appendChild(t)}return this},addSwatchElements:function(t,n){if("string"==typeof t&&(t=e.querySelectorAll(t)),!t)return console.error("No valid els inside addSwatchElements"),null;"string"==typeof n&&(n=e.querySelectorAll(n));for(const[e,r]of t.entries()){const t=document.createElementNS("http://www.w3.org/2000/svg","rect"),{x:i,y:a,width:l,height:s}=r.getBoundingClientRect(),u=n[e]?.getBoundingClientRect()?.y,c=window.getComputedStyle(r)["background-color"],d=window.getComputedStyle(r).border,[,f,p,h,_]=d.replace(/\s/g,"").match(/rgba?\((\d+(?:\.\d+)?),(\d+(?:\.\d+)?),(\d+(?:\.\d+)?)(?:,(\d+(?:\.\d+)?))?\)/i),y=_?`rgba(${f},${p},${h},${_})`:`rgb(${f},${p},${h})`||"#000",b=d.split(" ")[0]||0;let m=window.getComputedStyle(r)["border-radius"]||0;m=parseFloat(m);const g=window.getComputedStyle(r.closest("[style*='opacity']")||r).opacity;t.setAttribute("x",i),t.setAttribute("y",u||a),t.setAttribute("width",`${l}px`),t.setAttribute("height",`${s}px`),t.setAttribute("rx",m),t.setAttribute("ry",m),t.setAttribute("opacity",g),t.setAttribute("fill",c),t.setAttribute("stroke",y),t.setAttribute("stroke-width",b),"rgba(0, 0, 0, 0)"===c&&t.setAttribute("stroke","#CCC"),o.appendChild(t)}return this},addGradient:function(t,n,r){if("string"==typeof t&&(t=e.querySelector(t)),!t)return console.error("No valid els inside addCircleElements"),null;const i=document.createElementNS("http://www.w3.org/2000/svg","g"),{x:a,y:l,width:s,height:u}=t.getBoundingClientRect(),{max:c,min:d}=r,f=c-d;for(let e=0;e<=s;e++){const t=document.createElementNS("http://www.w3.org/2000/svg","line");t.setAttribute("stroke",n(d+e*f/s)),t.setAttribute("x1",e+a),t.setAttribute("y1",l),t.setAttribute("x2",e+a),t.setAttribute("y2",u+l),i.appendChild(t)}return o.appendChild(i),this},remove:function(){o.remove()}}}function Ta(e){return"string"==typeof e&&null!=e.match(/^(https?:\/\/|data:)/i)}Ti(ma,(function(e,t,n,r){return 1===arguments.length?ba(e):new ma(e,t,n,null==r?1:r)}),Ci(Ei,{brighter(e){return new ma(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker(e){return new ma(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new Zi(wa(3.1338561*(t=da*va(t))-1.6168667*(e=1*va(e))-.4906146*(n=fa*va(n))),wa(-.9787684*t+1.9161415*e+.033454*n),wa(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),Ti(Ma,ka,Ci(Ei,{brighter(e){return new Ma(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker(e){return new Ma(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb(){return Aa(this).rgb()}}));const Ca=document.createElement("canvas").getContext("2d");function Ea(e){var t,n;return window.innerWidth!==t&&(t=window.innerWidth,n=parseFloat(getComputedStyle(document.documentElement).fontSize)),e*n}function Sa(e,t){return function(e,t){Ca.font=t||"10px sans-serif";var n=Ca.measureText(e);return{width:n.width,height:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent}}(e,t).width}function Na(){return window.getComputedStyle(document.body).direction||"ltr"}function Fa(e,t){var n=function(e,t){if("string"!=typeof e)return!1;var n=Ii(e);return n.opacity=void 0!==t?t:1,n}(e,t);return!!n&&n.toString()}function La(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];"string"!=typeof e&&(e=String(e));const a=e=>Ca.measureText(e).width>r,o=(e,t)=>{let n=Ca.measureText(e).width;if(n<=t)return e;let r=1,i=e;do{i=e.substring(0,e.length-r)+"…",n=Ca.measureText(i).width}while(n>t&&++r<e.length);return i.length<1&&(i=e.substring(0,1)+"…"),i};Ca.font=t;let l=[];if(Object.defineProperty(l,"widest_line",{value:0,enumerable:!0,writable:!0}),Object.defineProperty(l,"has_truncated",{value:!1,enumerable:!0,writable:!0}),void 0===e||Number.isInteger(n)&&n<=0)return l;if(0===e.length)return l.push(""),l;if(r<=0)return e.length>0&&(l.push(e.slice(0,1)+"…"),l.widest_line=Ca.measureText(l[0]).width),l;if(!e||0===e.length||0===n||r<=0)return l;const s=e.split(/\s+/g);if(!a(e))return l.push(e),l.widest_line=Ca.measureText(e).width,l.has_truncated=!1,l;let u=new String(s[0]);if(u&&a(u))return i?u=o(u,r):s.length>1&&(u+="…"),l.push(u),l.widest_line=Ca.measureText(u).width,l.has_truncated=!0,l;let c="",d=!1;if(s.forEach((e=>{if(!d)if(a(c+(c?" ":"")+e)){if(c){Ca.measureText(c).width>r&&(c=o(c,r),d=!0),l.push(c),c=""}c=e}else c+=(c?" ":"")+e})),c&&!d&&l.push(o(c,r)),l.length>n){if(l.length>n&&Number.isInteger(n)){l.splice(n,l.length-n);let e=l[l.length-1];a(e+"…")&&(e=o(e,r-Ca.measureText("…").width)),"…"!==e.slice(-1)&&(e+="…"),l[l.length-1]=e,d=!0}}return l.widest_line=Math.max(...l.map((e=>Ca.measureText(e).width))),l.has_truncated=d,l}var Oa,ja,Da;function $a(){document.body.querySelector(".font-samples").innerHTML=""}function Pa(e){Da||(Da=e||["normal","bold"]);var t="";["mobile_big","tablet","desktop","big_screen"].forEach((function(e){var n="@media(min-width: "+mu["breakpoint_"+e]+"px) {\n",r="html { font-size:"+mu["font_size_"+e]+"%; }";t+=n+r+"\n}\n\n"}));var n="html { \n font-size:"+mu.font_size_mobile_small+"%; \n -webkit-font-smoothing: antialiased; \n -moz-osx-font-smoothing: auto; } \n\n\n";Oa.innerHTML=n+t;var r=[mu.body_font,mu.title_font,mu.subtitle_font,mu.footer_font];r.forEach((function(e){if(e){for(var t=!1,n=document.head.querySelectorAll("link.layout-font"),r=0;r<n.length;r++){n[r].href==e.url&&(t=!0)}if(!t){var i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("href",e.url),i.className="layout-font",document.head.appendChild(i),function(e){document.body.querySelector(".font-samples")||((ja=document.createElement("div")).className="font-samples",ja.style.visibility="hidden",ja.style.overflow="hidden",ja.style.height=0,document.body.appendChild(ja)),Da.forEach((function(t){var n=document.createElement("div");n.className="font-sample-el",n.innerText=e.name,n.style.fontFamily=e.name,n.style.fontWeight=t,ja.appendChild(n)}))}(e)}}}));for(var i=document.head.querySelectorAll("link.layout-font"),a=0;a<i.length;a++){var o=i[a],l=!1;r.forEach((function(e){e&&e.url==o.href&&(l=!0)})),l||o.parentElement.removeChild(o)}document.body.style.fontFamily=mu.body_font.name}var Ua,Ba,Ha,qa,Ya,Ra,Ia,Wa,Va,Ga,Xa=Object.freeze({"stack-default":["header","controls","legend","primary","footer"],"stack-2":["primary","header","controls","legend","footer"],"stack-3":["header","primary","controls","legend","footer"],"stack-4":["controls","primary","header","legend","footer"],"stack-5":["header","controls","primary","legend","footer"],"stack-6":["header","legend","primary","controls","footer"],"grid-1":{wrapper:{display:"grid","grid-template-rows":"min-content min-content minmax(min-content,auto) min-content","grid-template-columns":"1fr 2fr"},header:{"grid-column-start":1},legend:{"grid-column-start":1},controls:{"grid-column-start":1},primary:{"grid-column-start":2,"grid-row":"1 / -1"},footer:{"grid-column-start":"1","grid-row-start":4}}});function Za(e){return window.innerWidth!==Ua&&(Ua=window.innerWidth,Ba=parseFloat(getComputedStyle(document.documentElement).fontSize)),e*Ba}function Ja(e){return"justify"==e?"":"left"==e?"start":"right"==e?"end":"center"==e?"center":void 0}function Qa(e){return 0!==e.indexOf("http://")&&0!==e.indexOf("https://")?"http://"+e:e}function Ka(){return mu.header_logo_enabled&&mu.header_logo_src}function eo(){var e="top"==mu.header_border||"top_and_bottom"==mu.header_border,t="bottom"==mu.header_border||"top_and_bottom"==mu.header_border;Ha.style.textAlign=Ja(mu.header_align),Ha.style.margin=0,Ha.style.borderTop=e?mu.header_border_width+"px "+mu.header_border_style+" "+mu.header_border_color:null,Ha.style.borderBottom=t?mu.header_border_width+"px "+mu.header_border_style+" "+mu.header_border_color:null,Ha.style.paddingTop=e?mu.header_border_space+"rem":"",Ha.style.paddingBottom=t?mu.header_border_space+"rem":"",qa.innerHTML=mu.title?mu.title:"",qa.setAttribute("id","flourish-header-title"),qa.style.fontFamily=mu.title_font?mu.title_font.name:"inherit",qa.style.fontSize=("custom"!=mu.title_size?mu.title_size:mu.title_size_custom)+"rem",qa.style.lineHeight=mu.title_line_height,qa.style.fontWeight=mu.title_weight,qa.style.color=mu.title_color||mu.font_color,qa.style.margin=0,qa.style.paddingTop=mu.title?("custom"==mu.title_space_above?mu.title_space_above_custom:mu.title_space_above)+"rem":0,Ya.innerHTML=mu.subtitle?mu.subtitle:"",Ya.setAttribute("id","flourish-header-subtitle"),Ya.style.fontFamily=mu.subtitle_font?mu.subtitle_font.name:"inherit",Ya.style.fontSize=("custom"!=mu.subtitle_size?mu.subtitle_size:mu.subtitle_size_custom)+"rem",Ya.style.lineHeight=mu.subtitle_line_height,Ya.style.fontWeight=mu.subtitle_weight,Ya.style.color=mu.subtitle_color||mu.font_color,Ya.style.margin=0,Ya.style.paddingTop=mu.subtitle?("custom"==mu.subtitle_space_above?mu.subtitle_space_above_custom:mu.subtitle_space_above)+"rem":0,Ra.innerHTML=mu.header_text?mu.header_text:"",Ra.setAttribute("id","flourish-header-text"),Ra.style.fontSize=("custom"!=mu.header_text_size?mu.header_text_size:mu.header_text_size_custom)+"rem",Ra.style.lineHeight=mu.header_text_line_height,Ra.style.fontWeight=mu.header_text_weight,Ra.style.margin=0,Ra.style.color=mu.header_text_color||mu.font_color,Ra.style.paddingTop=mu.header_text?("custom"==mu.header_text_space_above?mu.header_text_space_above_custom:mu.header_text_space_above)+"rem":0,Ia.style.clear="both",Wa.innerHTML="",Ka()&&((Va=Va||document.createElement("img")).className="flourish-header-logo",Va.src=Qa(mu.header_logo_src),Va.alt=mu.header_logo_alt,Va.style.position="inside"==mu.header_logo_align?"":"fixed",Va.style.height=mu.header_logo_height+"rem",Va.style.top="outside"==mu.header_logo_align?0:"",Va.style.left="outside"==mu.header_logo_align&&"left"==mu.header_logo_position_outside?0:"",Va.style.right="outside"==mu.header_logo_align&&"right"==mu.header_logo_position_outside?0:"",Va.style.marginTop=mu.header_logo_margin_top+"rem",Va.style.marginBottom=mu.header_logo_margin_bottom+"rem",Va.style.marginLeft=mu.header_logo_margin_left+"rem",Va.style.marginRight=mu.header_logo_margin_right+"rem",Va.style.float="top"==mu.header_logo_position_inside||"outside"==mu.header_logo_align?"":mu.header_logo_position_inside,Va.style.width="auto",mu.header_logo_link_url?((Ga=document.createElement("a")).target="_blank",Ga.appendChild(Va),Wa.appendChild(Ga),Va.style.cursor="pointer",Ga.href=Qa(mu.header_logo_link_url)):Wa.appendChild(Va))}
/** @preserve
  /////    SAPC APCA - Advanced Perceptual Contrast Algorithm
  /////           Beta 0.1.9 W3 • contrast function only
  /////           DIST: W3 • Revision date: July 3, 2022
  /////    Function to parse color values and determine Lc contrast
  /////    Copyright © 2019-2022 by Andrew Somers. All Rights Reserved.
  /////    LICENSE: W3 LICENSE
  /////    CONTACT: Please use the ISSUES or DISCUSSIONS tab at:
  /////    https://github.com/Myndex/SAPC-APCA/
  /////
  ///////////////////////////////////////////////////////////////////////////////
  /////
  /////    MINIMAL IMPORTS:
  /////      import { APCAcontrast, sRGBtoY, displayP3toY,
  /////               calcAPCA, fontLookupAPCA } from 'apca-w3';
  /////      import { colorParsley } from 'colorparsley';
  /////
  /////    FORWARD CONTRAST USAGE:
  /////      Lc = APCAcontrast( sRGBtoY( TEXTcolor ) , sRGBtoY( BACKGNDcolor ) );
  /////    Where the colors are sent as an rgba array [255,255,255,1]
  /////
  /////    Retrieving an array of font sizes for the contrast:
  /////      fontArray = fontLookupAPCA(Lc);
  /////
  /////    Live Demonstrator at https://www.myndex.com/APCA/
  // */
const to={mainTRC:2.4,get mainTRCencode(){return 1/this.mainTRC},sRco:.2126729,sGco:.7151522,sBco:.072175,normBG:.56,normTXT:.57,revTXT:.62,revBG:.65,blkThrs:.022,blkClmp:1.414,scaleBoW:1.14,scaleWoB:1.14,loBoWoffset:.027,loWoBoffset:.027,deltaYmin:5e-4,loClip:.1,mFactor:1.9468554433171,get mFactInv(){return 1/this.mFactor},mOffsetIn:.0387393816571401,mExpAdj:.283343396420869,get mExp(){return this.mExpAdj/this.blkClmp},mOffsetOut:.312865795870758};function no(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0];function t(e){return Math.pow(e/255,to.mainTRC)}return to.sRco*t(e[0])+to.sGco*t(e[1])+to.sBco*t(e[2])}function ro(e,t){if("string"!=typeof e)return!1;var n=Ii(e);return n.opacity=1,n}function io(e,t){if(!e||!t)return void console.warn("No valid color",e,t);const n=no(Object.values(ro(e))),r=no(Object.values(ro(t)));return Math.abs(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;const r=[0,1.1];if(isNaN(e)||isNaN(t)||Math.min(e,t)<r[0]||Math.max(e,t)>r[1])return 0;let i=0,a=0,o="BoW";return e=e>to.blkThrs?e:e+Math.pow(to.blkThrs-e,to.blkClmp),t=t>to.blkThrs?t:t+Math.pow(to.blkThrs-t,to.blkClmp),Math.abs(t-e)<to.deltaYmin?0:(t>e?(i=(Math.pow(t,to.normBG)-Math.pow(e,to.normTXT))*to.scaleBoW,a=i<to.loClip?0:i-to.loBoWoffset):(o="WoB",i=(Math.pow(t,to.revBG)-Math.pow(e,to.revTXT))*to.scaleWoB,a=i>-to.loClip?0:i+to.loWoBoffset),n<0?100*a:0==n?Math.round(100*Math.abs(a))+"<sub>"+o+"</sub>":Number.isInteger(n)?(100*a).toFixed(n):0)}(n,r))}function ao(e){if(!e)return void console.warn("No valid color",e);const t=io("#000000",e);return io("#ffffff",e)<t}const oo=new Date,lo=new Date;function so(e,t,n,r){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=t=>(e(t=new Date(+t)),t),i.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),i.round=e=>{const t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=(e,n)=>(t(e=new Date(+e),null==n?1:Math.floor(n)),e),i.range=(n,r,a)=>{const o=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&a>0))return o;let l;do{o.push(l=new Date(+n)),t(n,a),e(n)}while(l<n&&n<r);return o},i.filter=n=>so((t=>{if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),((e,r)=>{if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););})),n&&(i.count=(t,r)=>(oo.setTime(+t),lo.setTime(+r),e(oo),e(lo),Math.floor(n(oo,lo))),i.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?t=>r(t)%e==0:t=>i.count(0,t)%e==0):i:null)),i}const uo=6e4,co=864e5,fo=6048e5,po=so((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*uo)/co),(e=>e.getDate()-1));po.range;const ho=so((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/co),(e=>e.getUTCDate()-1));ho.range;const _o=so((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/co),(e=>Math.floor(e/co)));function yo(e){return so((t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),((e,t)=>{e.setDate(e.getDate()+7*t)}),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*uo)/fo))}_o.range;const bo=yo(0),mo=yo(1),go=yo(2),vo=yo(3),wo=yo(4),xo=yo(5),ko=yo(6);function Mo(e){return so((t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)}),((e,t)=>(t-e)/fo))}bo.range,mo.range,go.range,vo.range,wo.range,xo.range,ko.range;const Ao=Mo(0),zo=Mo(1),To=Mo(2),Co=Mo(3),Eo=Mo(4),So=Mo(5),No=Mo(6);Ao.range,zo.range,To.range,Co.range,Eo.range,So.range,No.range;const Fo=so((e=>{e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,t)=>{e.setFullYear(e.getFullYear()+t)}),((e,t)=>t.getFullYear()-e.getFullYear()),(e=>e.getFullYear()));Fo.every=e=>isFinite(e=Math.floor(e))&&e>0?so((t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,n)=>{t.setFullYear(t.getFullYear()+n*e)})):null,Fo.range;const Lo=so((e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)}),((e,t)=>t.getUTCFullYear()-e.getUTCFullYear()),(e=>e.getUTCFullYear()));function Oo(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function jo(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Do(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}Lo.every=e=>isFinite(e=Math.floor(e))&&e>0?so((t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null,Lo.range;var $o,Po,Uo={"-":"",_:" ",0:"0"},Bo=/^\s*\d+/,Ho=/^%/,qo=/[\\^$*+?|[\]().{}]/g;function Yo(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function Ro(e){return e.replace(qo,"\\$&")}function Io(e){return new RegExp("^(?:"+e.map(Ro).join("|")+")","i")}function Wo(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function Vo(e,t,n){var r=Bo.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Go(e,t,n){var r=Bo.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Xo(e,t,n){var r=Bo.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Zo(e,t,n){var r=Bo.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Jo(e,t,n){var r=Bo.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Qo(e,t,n){var r=Bo.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Ko(e,t,n){var r=Bo.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function el(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function tl(e,t,n){var r=Bo.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function nl(e,t,n){var r=Bo.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function rl(e,t,n){var r=Bo.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function il(e,t,n){var r=Bo.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function al(e,t,n){var r=Bo.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function ol(e,t,n){var r=Bo.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function ll(e,t,n){var r=Bo.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function sl(e,t,n){var r=Bo.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function ul(e,t,n){var r=Bo.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function cl(e,t,n){var r=Ho.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function dl(e,t,n){var r=Bo.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function fl(e,t,n){var r=Bo.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function pl(e,t){return Yo(e.getDate(),t,2)}function hl(e,t){return Yo(e.getHours(),t,2)}function _l(e,t){return Yo(e.getHours()%12||12,t,2)}function yl(e,t){return Yo(1+po.count(Fo(e),e),t,3)}function bl(e,t){return Yo(e.getMilliseconds(),t,3)}function ml(e,t){return bl(e,t)+"000"}function gl(e,t){return Yo(e.getMonth()+1,t,2)}function vl(e,t){return Yo(e.getMinutes(),t,2)}function wl(e,t){return Yo(e.getSeconds(),t,2)}function xl(e){var t=e.getDay();return 0===t?7:t}function kl(e,t){return Yo(bo.count(Fo(e)-1,e),t,2)}function Ml(e){var t=e.getDay();return t>=4||0===t?wo(e):wo.ceil(e)}function Al(e,t){return e=Ml(e),Yo(wo.count(Fo(e),e)+(4===Fo(e).getDay()),t,2)}function zl(e){return e.getDay()}function Tl(e,t){return Yo(mo.count(Fo(e)-1,e),t,2)}function Cl(e,t){return Yo(e.getFullYear()%100,t,2)}function El(e,t){return Yo((e=Ml(e)).getFullYear()%100,t,2)}function Sl(e,t){return Yo(e.getFullYear()%1e4,t,4)}function Nl(e,t){var n=e.getDay();return Yo((e=n>=4||0===n?wo(e):wo.ceil(e)).getFullYear()%1e4,t,4)}function Fl(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Yo(t/60|0,"0",2)+Yo(t%60,"0",2)}function Ll(e,t){return Yo(e.getUTCDate(),t,2)}function Ol(e,t){return Yo(e.getUTCHours(),t,2)}function jl(e,t){return Yo(e.getUTCHours()%12||12,t,2)}function Dl(e,t){return Yo(1+ho.count(Lo(e),e),t,3)}function $l(e,t){return Yo(e.getUTCMilliseconds(),t,3)}function Pl(e,t){return $l(e,t)+"000"}function Ul(e,t){return Yo(e.getUTCMonth()+1,t,2)}function Bl(e,t){return Yo(e.getUTCMinutes(),t,2)}function Hl(e,t){return Yo(e.getUTCSeconds(),t,2)}function ql(e){var t=e.getUTCDay();return 0===t?7:t}function Yl(e,t){return Yo(Ao.count(Lo(e)-1,e),t,2)}function Rl(e){var t=e.getUTCDay();return t>=4||0===t?Eo(e):Eo.ceil(e)}function Il(e,t){return e=Rl(e),Yo(Eo.count(Lo(e),e)+(4===Lo(e).getUTCDay()),t,2)}function Wl(e){return e.getUTCDay()}function Vl(e,t){return Yo(zo.count(Lo(e)-1,e),t,2)}function Gl(e,t){return Yo(e.getUTCFullYear()%100,t,2)}function Xl(e,t){return Yo((e=Rl(e)).getUTCFullYear()%100,t,2)}function Zl(e,t){return Yo(e.getUTCFullYear()%1e4,t,4)}function Jl(e,t){var n=e.getUTCDay();return Yo((e=n>=4||0===n?Eo(e):Eo.ceil(e)).getUTCFullYear()%1e4,t,4)}function Ql(){return"+0000"}function Kl(){return"%"}function es(e){return+e}function ts(e){return Math.floor(+e/1e3)}!function(e){$o=function(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,l=e.months,s=e.shortMonths,u=Io(i),c=Wo(i),d=Io(a),f=Wo(a),p=Io(o),h=Wo(o),_=Io(l),y=Wo(l),b=Io(s),m=Wo(s),g={a:function(e){return o[e.getDay()]},A:function(e){return a[e.getDay()]},b:function(e){return s[e.getMonth()]},B:function(e){return l[e.getMonth()]},c:null,d:pl,e:pl,f:ml,g:El,G:Nl,H:hl,I:_l,j:yl,L:bl,m:gl,M:vl,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:es,s:ts,S:wl,u:xl,U:kl,V:Al,w:zl,W:Tl,x:null,X:null,y:Cl,Y:Sl,Z:Fl,"%":Kl},v={a:function(e){return o[e.getUTCDay()]},A:function(e){return a[e.getUTCDay()]},b:function(e){return s[e.getUTCMonth()]},B:function(e){return l[e.getUTCMonth()]},c:null,d:Ll,e:Ll,f:Pl,g:Xl,G:Jl,H:Ol,I:jl,j:Dl,L:$l,m:Ul,M:Bl,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:es,s:ts,S:Hl,u:ql,U:Yl,V:Il,w:Wl,W:Vl,x:null,X:null,y:Gl,Y:Zl,Z:Ql,"%":Kl},w={a:function(e,t,n){var r=p.exec(t.slice(n));return r?(e.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.w=f.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=b.exec(t.slice(n));return r?(e.m=m.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=_.exec(t.slice(n));return r?(e.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return M(e,t,n,r)},d:rl,e:rl,f:ul,g:Ko,G:Qo,H:al,I:al,j:il,L:sl,m:nl,M:ol,p:function(e,t,n){var r=u.exec(t.slice(n));return r?(e.p=c.get(r[0].toLowerCase()),n+r[0].length):-1},q:tl,Q:dl,s:fl,S:ll,u:Go,U:Xo,V:Zo,w:Vo,W:Jo,x:function(e,t,r){return M(e,n,t,r)},X:function(e,t,n){return M(e,r,t,n)},y:Ko,Y:Qo,Z:el,"%":cl};function x(e,t){return function(n){var r,i,a,o=[],l=-1,s=0,u=e.length;for(n instanceof Date||(n=new Date(+n));++l<u;)37===e.charCodeAt(l)&&(o.push(e.slice(s,l)),null!=(i=Uo[r=e.charAt(++l)])?r=e.charAt(++l):i="e"===r?" ":"0",(a=t[r])&&(r=a(n,i)),o.push(r),s=l+1);return o.push(e.slice(s,l)),o.join("")}}function k(e,t){return function(n){var r,i,a=Do(1900,void 0,1);if(M(a,e,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(t&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=jo(Do(a.y,0,1))).getUTCDay(),r=i>4||0===i?zo.ceil(r):zo(r),r=ho.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=Oo(Do(a.y,0,1))).getDay(),r=i>4||0===i?mo.ceil(r):mo(r),r=po.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?jo(Do(a.y,0,1)).getUTCDay():Oo(Do(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,jo(a)):Oo(a)}}function M(e,t,n,r){for(var i,a,o=0,l=t.length,s=n.length;o<l;){if(r>=s)return-1;if(37===(i=t.charCodeAt(o++))){if(i=t.charAt(o++),!(a=w[i in Uo?t.charAt(o++):i])||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return g.x=x(n,g),g.X=x(r,g),g.c=x(t,g),v.x=x(n,v),v.X=x(r,v),v.c=x(t,v),{format:function(e){var t=x(e+="",g);return t.toString=function(){return e},t},parse:function(e){var t=k(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=x(e+="",v);return t.toString=function(){return e},t},utcParse:function(e){var t=k(e+="",!0);return t.toString=function(){return e},t}}}(e),Po=$o.format,$o.parse,$o.utcFormat,$o.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var ns=Uint8Array,rs=Uint16Array,is=Int32Array,as=new ns([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),os=new ns([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ls=new ns([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ss=function(e,t){for(var n=new rs(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new is(n[30]);for(r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)i[a]=a-n[r]<<5|r;return{b:n,r:i}},us=ss(as,2),cs=us.b,ds=us.r;cs[28]=258,ds[258]=28;for(var fs=ss(os,0).r,ps=new rs(32768),hs=0;hs<32768;++hs){var _s=(43690&hs)>>1|(21845&hs)<<1;_s=(61680&(_s=(52428&_s)>>2|(13107&_s)<<2))>>4|(3855&_s)<<4,ps[hs]=((65280&_s)>>8|(255&_s)<<8)>>1}var ys=function(e,t,n){for(var r=e.length,i=0,a=new rs(t);i<r;++i)e[i]&&++a[e[i]-1];var o,l=new rs(t);for(i=1;i<t;++i)l[i]=l[i-1]+a[i-1]<<1;if(n){o=new rs(1<<t);var s=15-t;for(i=0;i<r;++i)if(e[i])for(var u=i<<4|e[i],c=t-e[i],d=l[e[i]-1]++<<c,f=d|(1<<c)-1;d<=f;++d)o[ps[d]>>s]=u}else for(o=new rs(r),i=0;i<r;++i)e[i]&&(o[i]=ps[l[e[i]-1]++]>>15-e[i]);return o},bs=new ns(288);for(hs=0;hs<144;++hs)bs[hs]=8;for(hs=144;hs<256;++hs)bs[hs]=9;for(hs=256;hs<280;++hs)bs[hs]=7;for(hs=280;hs<288;++hs)bs[hs]=8;var ms=new ns(32);for(hs=0;hs<32;++hs)ms[hs]=5;var gs=ys(bs,9,0),vs=ys(ms,5,0),ws=function(e){return(e+7)/8|0},xs=function(e,t,n){return(null==n||n>e.length)&&(n=e.length),new ns(e.subarray(t,n))},ks=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ms=function(e,t,n){var r=new Error(t||ks[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,Ms),!n)throw r;return r},As=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},zs=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},Ts=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,a=n.slice();if(!i)return{t:Os,l:0};if(1==i){var o=new ns(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var l=n[0],s=n[1],u=0,c=1,d=2;for(n[0]={s:-1,f:l.f+s.f,l:l,r:s};c!=i-1;)l=n[n[u].f<n[d].f?u++:d++],s=n[u!=c&&n[u].f<n[d].f?u++:d++],n[c++]={s:-1,f:l.f+s.f,l:l,r:s};var f=a[0].s;for(r=1;r<i;++r)a[r].s>f&&(f=a[r].s);var p=new rs(f+1),h=Cs(n[c-1],p,0);if(h>t){r=0;var _=0,y=h-t,b=1<<y;for(a.sort((function(e,t){return p[t.s]-p[e.s]||e.f-t.f}));r<i;++r){var m=a[r].s;if(!(p[m]>t))break;_+=b-(1<<h-p[m]),p[m]=t}for(_>>=y;_>0;){var g=a[r].s;p[g]<t?_-=1<<t-p[g]++-1:++r}for(;r>=0&&_;--r){var v=a[r].s;p[v]==t&&(--p[v],++_)}h=t}return{t:new ns(p),l:h}},Cs=function(e,t,n){return-1==e.s?Math.max(Cs(e.l,t,n+1),Cs(e.r,t,n+1)):t[e.s]=n},Es=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new rs(++t),r=0,i=e[0],a=1,o=function(e){n[r++]=e},l=1;l<=t;++l)if(e[l]==i&&l!=t)++a;else{if(!i&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(i),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(i);a=1,i=e[l]}return{c:n.subarray(0,r),n:t}},Ss=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},Ns=function(e,t,n){var r=n.length,i=ws(t+2);e[i]=255&r,e[i+1]=r>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var a=0;a<r;++a)e[i+a+4]=n[a];return 8*(i+4+r)},Fs=function(e,t,n,r,i,a,o,l,s,u,c){As(t,c++,n),++i[256];for(var d=Ts(i,15),f=d.t,p=d.l,h=Ts(a,15),_=h.t,y=h.l,b=Es(f),m=b.c,g=b.n,v=Es(_),w=v.c,x=v.n,k=new rs(19),M=0;M<m.length;++M)++k[31&m[M]];for(M=0;M<w.length;++M)++k[31&w[M]];for(var A=Ts(k,7),z=A.t,T=A.l,C=19;C>4&&!z[ls[C-1]];--C);var E,S,N,F,L=u+5<<3,O=Ss(i,bs)+Ss(a,ms)+o,j=Ss(i,f)+Ss(a,_)+o+14+3*C+Ss(k,z)+2*k[16]+3*k[17]+7*k[18];if(s>=0&&L<=O&&L<=j)return Ns(t,c,e.subarray(s,s+u));if(As(t,c,1+(j<O)),c+=2,j<O){E=ys(f,p,0),S=f,N=ys(_,y,0),F=_;var D=ys(z,T,0);As(t,c,g-257),As(t,c+5,x-1),As(t,c+10,C-4),c+=14;for(M=0;M<C;++M)As(t,c+3*M,z[ls[M]]);c+=3*C;for(var $=[m,w],P=0;P<2;++P){var U=$[P];for(M=0;M<U.length;++M){var B=31&U[M];As(t,c,D[B]),c+=z[B],B>15&&(As(t,c,U[M]>>5&127),c+=U[M]>>12)}}}else E=gs,S=bs,N=vs,F=ms;for(M=0;M<l;++M){var H=r[M];if(H>255){zs(t,c,E[(B=H>>18&31)+257]),c+=S[B+257],B>7&&(As(t,c,H>>23&31),c+=as[B]);var q=31&H;zs(t,c,N[q]),c+=F[q],q>3&&(zs(t,c,H>>5&8191),c+=os[q])}else zs(t,c,E[H]),c+=S[H]}return zs(t,c,E[256]),c+S[256]},Ls=new is([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Os=new ns(0),js=function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var n=t,r=9;--r;)n=(1&n&&-306674912)^n>>>1;e[t]=n}return e}(),Ds=function(){var e=-1;return{p:function(t){for(var n=e,r=0;r<t.length;++r)n=js[255&n^t[r]]^n>>>8;e=n},d:function(){return~e}}},$s=function(e,t,n,r,i){if(!i&&(i={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),o=new ns(a.length+e.length);o.set(a),o.set(e,a.length),e=o,i.w=a.length}return function(e,t,n,r,i,a){var o=a.z||e.length,l=new ns(r+o+5*(1+Math.ceil(o/7e3))+i),s=l.subarray(r,l.length-i),u=a.l,c=7&(a.r||0);if(t){c&&(s[0]=a.r>>3);for(var d=Ls[t-1],f=d>>13,p=8191&d,h=(1<<n)-1,_=a.p||new rs(32768),y=a.h||new rs(h+1),b=Math.ceil(n/3),m=2*b,g=function(t){return(e[t]^e[t+1]<<b^e[t+2]<<m)&h},v=new is(25e3),w=new rs(288),x=new rs(32),k=0,M=0,A=a.i||0,z=0,T=a.w||0,C=0;A+2<o;++A){var E=g(A),S=32767&A,N=y[E];if(_[S]=N,y[E]=S,T<=A){var F=o-A;if((k>7e3||z>24576)&&(F>423||!u)){c=Fs(e,s,0,v,w,x,M,z,C,A-C,c),z=k=M=0,C=A;for(var L=0;L<286;++L)w[L]=0;for(L=0;L<30;++L)x[L]=0}var O=2,j=0,D=p,$=S-N&32767;if(F>2&&E==g(A-$))for(var P=Math.min(f,F)-1,U=Math.min(32767,A),B=Math.min(258,F);$<=U&&--D&&S!=N;){if(e[A+O]==e[A+O-$]){for(var H=0;H<B&&e[A+H]==e[A+H-$];++H);if(H>O){if(O=H,j=$,H>P)break;var q=Math.min($,H-2),Y=0;for(L=0;L<q;++L){var R=A-$+L&32767,I=R-_[R]&32767;I>Y&&(Y=I,N=R)}}}$+=(S=N)-(N=_[S])&32767}if(j){v[z++]=268435456|ds[O]<<18|fs[j];var W=31&ds[O],V=31&fs[j];M+=as[W]+os[V],++w[257+W],++x[V],T=A+O,++k}else v[z++]=e[A],++w[e[A]]}}for(A=Math.max(A,T);A<o;++A)v[z++]=e[A],++w[e[A]];c=Fs(e,s,u,v,w,x,M,z,C,A-C,c),u||(a.r=7&c|s[c/8|0]<<3,c-=7,a.h=y,a.p=_,a.i=A,a.w=T)}else{for(A=a.w||0;A<o+u;A+=65535){var G=A+65535;G>=o&&(s[c/8|0]=u,G=o),c=Ns(s,c+1,e.subarray(A,G))}a.i=o}return xs(l,0,r+ws(c)+i)}(e,null==t.level?6:t.level,null==t.mem?i.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,n,r,i)},Ps=function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n},Us=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8};function Bs(e,t){return $s(e,t||{},0,0)}var Hs=function(e,t,n,r){for(var i in e){var a=e[i],o=t+i,l=r;Array.isArray(a)&&(l=Ps(r,a[1]),a=a[0]),a instanceof ns?n[o]=[a,l]:(n[o+="/"]=[new ns(0),l],Hs(a,o,n,r))}},qs="undefined"!=typeof TextEncoder&&new TextEncoder,Ys="undefined"!=typeof TextDecoder&&new TextDecoder;try{Ys.decode(Os,{stream:!0})}catch(e){}function Rs(e,t){if(qs)return qs.encode(e);for(var n=e.length,r=new ns(e.length+(e.length>>1)),i=0,a=function(e){r[i++]=e},o=0;o<n;++o){if(i+5>r.length){var l=new ns(i+8+(n-o<<1));l.set(r),r=l}var s=e.charCodeAt(o);s<128||t?a(s):s<2048?(a(192|s>>6),a(128|63&s)):s>55295&&s<57344?(a(240|(s=65536+(1047552&s)|1023&e.charCodeAt(++o))>>18),a(128|s>>12&63),a(128|s>>6&63),a(128|63&s)):(a(224|s>>12),a(128|s>>6&63),a(128|63&s))}return xs(r,0,i)}var Is=function(e){var t=0;if(e)for(var n in e){var r=e[n].length;r>65535&&Ms(9),t+=r+4}return t},Ws=function(e,t,n,r,i,a,o,l){var s=r.length,u=n.extra,c=l&&l.length,d=Is(u);Us(e,t,null!=o?33639248:67324752),t+=4,null!=o&&(e[t++]=20,e[t++]=n.os),e[t]=20,t+=2,e[t++]=n.flag<<1|(a<0&&8),e[t++]=i&&8,e[t++]=255&n.compression,e[t++]=n.compression>>8;var f=new Date(null==n.mtime?Date.now():n.mtime),p=f.getFullYear()-1980;if((p<0||p>119)&&Ms(10),Us(e,t,p<<25|f.getMonth()+1<<21|f.getDate()<<16|f.getHours()<<11|f.getMinutes()<<5|f.getSeconds()>>1),t+=4,-1!=a&&(Us(e,t,n.crc),Us(e,t+4,a<0?-a-2:a),Us(e,t+8,n.size)),Us(e,t+12,s),Us(e,t+14,d),t+=16,null!=o&&(Us(e,t,c),Us(e,t+6,n.attrs),Us(e,t+10,o),t+=14),e.set(r,t),t+=s,d)for(var h in u){var _=u[h],y=_.length;Us(e,t,+h),Us(e,t+2,y),e.set(_,t+4),t+=4+y}return c&&(e.set(l,t),t+=c),t};function Vs(e,t){t||(t={});var n={},r=[];Hs(e,"",n,t);var i=0,a=0;for(var o in n){var l=n[o],s=l[0],u=l[1],c=0==u.level?0:8,d=(k=Rs(o)).length,f=u.comment,p=f&&Rs(f),h=p&&p.length,_=Is(u.extra);d>65535&&Ms(11);var y=c?Bs(s,u):s,b=y.length,m=Ds();m.p(s),r.push(Ps(u,{size:s.length,crc:m.d(),c:y,f:k,m:p,u:d!=o.length||p&&f.length!=h,o:i,compression:c})),i+=30+d+_+b,a+=76+2*(d+_)+(h||0)+b}for(var g=new ns(a+22),v=i,w=a-i,x=0;x<r.length;++x){var k=r[x];Ws(g,k.o,k,k.f,k.u,k.c.length);var M=30+k.f.length+Is(k.extra);g.set(k.c,k.o+M),Ws(g,i,k,k.f,k.u,k.c.length,k.o,k.m),i+=16+M+(k.m?k.m.length:0)}return function(e,t,n,r,i){Us(e,t,101010256),Us(e,t+8,n),Us(e,t+10,n),Us(e,t+12,r),Us(e,t+16,i)}(g,i,r.length,w,v),g}function Gs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=e;return"datetime"===t&&Boolean(r)&&(r=function(e,t){let n=t;/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z$/.test(t)?n=new Date(t):"string"==typeof t&&(n=Rn.getInterpretation(e).parse(n));return Xn(e)(n)}(n,r)),"number"===t&&Boolean(r)&&(r=function(e,t){const n=parseFloat(t);let r=Xn(e)(t);const i={none:"",comma:",",point:".",space:" "},a=e.split("$")[1].split("_")[1];return Number.isInteger(n)&&(r=r.split(i[a])[0]),r}(n,r)),(String(r).includes(",")||String(r).includes('"')||String(r).includes("\r")||String(r).includes("\n"))&&(r=`"${String(r).replace(/"/g,'""')}"`),r}function Xs(e){const t=Object.keys(e);let n={};const r=["lines","order","labels","colors","regions_geometry","geo_regions"],i=t.filter((t=>!r.includes(t)&&0!==e[t].length));return i.forEach((t=>{const r=function(e,t){const n=JSON.parse(JSON.stringify(e[t]));return n.column_names=e[t].column_names||{},n.metadata=e[t].metadata||{},n.forEach((e=>{Object.keys(e).forEach((t=>{Object.keys(n.column_names).includes(t)||delete e[t]}))})),n}(e,t);n[t]=r})),{formatted_datasets:n,datasets_to_download:i}}function Zs(e,t){const n=e[t],{headers:r,header_index_lookup:i}=function(e){const t=[],n={};for(const r in e.column_names)e.column_names[r]&&((Array.isArray(e.column_names[r])?e.column_names[r]:[e.column_names[r]]).forEach((e=>{let n=Gs(e);t.includes(n)||t.push(n)})),Array.isArray(e.column_names[r])?n[r]=e.column_names[r].map((e=>t.indexOf(Gs(e)))):n[r]=t.indexOf(Gs(e.column_names[r])));return{headers:t,header_index_lookup:n}}(n),a=function(e,t,n){const r=[];return e.forEach((t=>{const i=[];for(const r in t){const a=t[r],o=n[r];let l=e.metadata?e.metadata[r]?.type:null,s=e.metadata?e.metadata[r]?.type_id:null;Array.isArray(a)?a.forEach(((t,n)=>{l=e.metadata[r][n]?.type,s=e.metadata[r][n]?.type_id,i[o[n]]=Gs(t,l,s)})):i[o]=Gs(a,l,s)}r.push(i)})),[t.join(",")].concat(r.map((e=>e.join(",")))).join("\n")}(n,r,i);return a}var Js="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0;function Qs(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){nu(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function Ks(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return t.status>=200&&t.status<=299}function eu(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var tu=Js.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),nu=Js.saveAs||("object"!=typeof window||window!==Js?function(){}:"download"in HTMLAnchorElement.prototype&&!tu?function(e,t,n){var r=Js.URL||Js.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener","string"==typeof e?(i.href=e,i.origin!==location.origin?Ks(i.href)?Qs(e,t,n):eu(i,i.target="_blank"):eu(i)):(i.href=r.createObjectURL(e),setTimeout((function(){r.revokeObjectURL(i.href)}),4e4),setTimeout((function(){eu(i)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download","string"==typeof e)if(Ks(e))Qs(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout((function(){eu(r)}))}else navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof e)return Qs(e,t,n);var i="application/octet-stream"===e.type,a=/constructor/i.test(Js.HTMLElement)||Js.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&a||tu)&&"undefined"!=typeof FileReader){var l=new FileReader;l.onloadend=function(){var e=l.result;e=o?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location=e,r=null},l.readAsDataURL(e)}else{var s=Js.URL||Js.webkitURL,u=s.createObjectURL(e);r?r.location=u:location.href=u,r=null,setTimeout((function(){s.revokeObjectURL(u)}),4e4)}});let ru,iu,au,ou,lu;Js.saveAs=nu.saveAs=nu;let su=!1;function uu(){var e;return(e=document.createElement("style")).type="text/css",e.innerHTML=".flourish-footer { margin: 0; } .flourish-footer p { margin: 0; display: inline; } .flourish-footer p:empty { height: 0; } .flourish-footer a { color: inherit; }",document.head.appendChild(e),ru=document.createElement("footer"),ru.className="flourish-footer",iu=document.createElement("div"),iu.className="flourish-footer-text",iu.setAttribute("id","flourish-footer-text"),au=document.createElement("div"),au.className="flourish-footer-logo-container",ru.appendChild(iu),ru.appendChild(au),ru}function cu(){var e=mu.footer_logo_src?mu.footer_logo_src:"";return mu.footer_logo_src_light&&mu.background_color_enabled&&!ao(mu.background_color)&&(e=mu.footer_logo_src_light),e}function du(){return mu.footer_logo_enabled&&cu()}function fu(){var e=[{name:mu.source_name,url:mu.source_url},{name:mu.multiple_sources?mu.source_name_2:"",url:mu.multiple_sources?mu.source_url_2:""},{name:mu.multiple_sources?mu.source_name_3:"",url:mu.multiple_sources?mu.source_url_3:""}].filter((function(e){return e.name||e.url}));su=e.length>0||mu.footer_note||mu.footer_note_secondary||du();var t,n="top"==mu.footer_border||"top_and_bottom"==mu.footer_border,r="bottom"==mu.footer_border||"top_and_bottom"==mu.footer_border;ru.style.display="flex",ru.style.height=su?null:0,ru.style.width="100%",ru.style.paddingTop=n?mu.footer_border_space+"rem":"",ru.style.paddingBottom=r?mu.footer_border_space+"rem":"",ru.style.borderTop=n?mu.footer_border_width+"px "+mu.footer_border_style+" "+mu.footer_border_color:"",ru.style.borderBottom=r?mu.footer_border_width+"px "+mu.footer_border_style+" "+mu.footer_border_color:"",ru.style.fontFamily=mu.footer_font?mu.footer_font.name:"inherit",ru.style.fontWeight=mu.footer_text_weight,ru.style.justifyContent="justify"==(t=mu.footer_align)?"space-between":"left"==t?"flex-start":"right"==t?"flex-end":"center"==t?"center":void 0,ru.style.fontSize=mu.footer_text_size+"rem",ru.style.color=mu.footer_text_color||mu.font_color,ru.style.alignItems=mu.footer_align_vertical;var i=document.createElement("span");e.forEach((function(e,t){var n=document.createElement("p");if(t>0&&(n.innerText=", "),e.url){var r=document.createElement("a");r.innerText=e.name||e.url,r.href=Qa(e.url),r.target="_blank",n.appendChild(r)}else n.innerText+=e.name||e.url;i.innerHTML+=n.innerHTML})),iu.style.order="left"==mu.footer_logo_order?2:"",iu.style.textAlign=Ja(mu.footer_align);const a=""!==i.innerHTML?`${mu.source_label} ${i.innerHTML}`:"",o=mu.footer_note?(""!==i.innerHTML?" • ":"")+pu("primary"):"",l=mu.footer_note_secondary?`<br /><p>${pu("secondary")}</p>`:"";iu.innerHTML=`<p>${a}${o}</p>${l}`,au.innerHTML="",du()&&(ou=ou||document.createElement("img"),ou.className="flourish-footer-logo",ou.src=Qa(cu()),ou.alt=mu.footer_logo_alt,ou.style.height=mu.footer_logo_height+"rem",ou.style.marginRight="left"==mu.footer_logo_order?mu.footer_logo_margin+"rem":"",ou.style.marginLeft="right"==mu.footer_logo_order?mu.footer_logo_margin+"rem":"",ou.style.verticalAlign=mu.footer_align_vertical,ou.style.display=du()?"":"none",mu.footer_logo_link_url?(lu=document.createElement("a"),lu.target="_blank",lu.appendChild(ou),au.appendChild(lu),ou.style.cursor="pointer",lu.href=Qa(mu.footer_logo_link_url)):au.appendChild(ou)),document.querySelectorAll(".fl-data-download-button").forEach((e=>{e.addEventListener("click",(async e=>{e.preventDefault();const{file_name:t,blob:n}=await async function(){const e={},{formatted_datasets:t,datasets_to_download:n}=Xs(window.template?.data);if(1===n.length){const e=n[0],r=`Flourish-data_${e}.csv`,i=Zs(t,e);return{file_name:r,blob:new Blob([i],{type:"text/csv"})}}if(n.length>1){n.forEach((n=>{const r=Zs(t,n);e[`${n}.csv`]=Rs(r)}));const r="Flourish-data.zip",i=Vs(e);return{file_name:r,blob:new Blob([i],{type:"application/zip"})}}return Flourish.warn("There is no data to download"),null}();try{nu(n,t)}catch(e){console.error("An error occurred while saving the file:",e)}}))}))}function pu(e){const t=("primary"===e?mu.footer_note:mu.footer_note_secondary).replace(/{{([^}]+)}}/g,((e,t)=>{if("data_last_updated"===t){return function(e,t){let n="n/a";null!==e&&(n=Po(t)(e));return n}(function(e){const t="data_last_updated"===e?"last_updated":e,n=Object.keys(window.template?.data);if(n.length>0){const e=n.map((e=>window.template.data[e].timestamps?.[t]||null)).filter((e=>null!==e));if(0===e.length)return null;return Math.max(...e)}return null}(t),mu.footer_timestamp_format)}if(t.includes("download_data")){return!!window.template.data&&(window.template.data.length||Object.keys(window.template.data).length)?function(e){let t="Download data";if(e.includes('"')){const n=e.indexOf('"'),r=e.lastIndexOf('"');t=e.slice(n+1,r)}return`<a href='#' class='fl-data-download-button'>${t}</a>`}(t):(Flourish.warn("There is no data to download"),"")}return""})).replace(/\n/gm,"<br />");return t}function hu(){Pa(),eo(),fu(),document.body.style.backgroundColor=mu.background_color_enabled?mu.background_color:"transparent",document.body.style.backgroundImage=mu.background_image_enabled?"url("+mu.background_image_src+")":"",document.body.style.backgroundSize=mu.background_image_size,document.body.style.backgroundRepeat="no-repeat",document.body.style.backgroundPosition=mu.background_image_position;var e=ku.wrapper.style;e.display="flex",e.height="100vh",e.color=mu.font_color,e.maxWidth="wrapper"==mu.max_width_target?mu.max_width+"px":"",e.marginLeft="wrapper"==mu.max_width_target&&"left"!=mu.max_width_align?"auto":"",e.marginRight="wrapper"==mu.max_width_target&&"right"!=mu.max_width_align?"auto":"",e.padding=mu.margin_top+"rem "+mu.margin_right+"rem "+mu.margin_bottom+"rem "+mu.margin_left+"rem",e.borderTop=mu.border.enabled?mu.border.top.width+"px "+mu.border.top.style+" "+mu.border.top.color:"",e.borderRight=mu.border.enabled?mu.border.right.width+"px "+mu.border.right.style+" "+mu.border.right.color:"",e.borderBottom=mu.border.enabled?mu.border.bottom.width+"px "+mu.border.bottom.style+" "+mu.border.bottom.color:"",e.borderLeft=mu.border.enabled?mu.border.left.width+"px "+mu.border.left.style+" "+mu.border.left.color:"";var t=ku.primary.outer.style,n=ku.legend.outer.style,r=_u();if("stack"==r.mode)r.elements.forEach((function(e,t){ku[e].outer.style.order=10*t}));else for(var i in r.elements)for(var a in r.elements[i]){var o=ku[i].outer||ku[i];o.style[a]=r.elements[i][a],o.style.order=""}ku.header.outer.style.display="",ku.footer.outer.style.display="",ku.controls.outer.style.display="",t.display="flex",n.display="",t.flex="1 1 auto",t.height=null,ku.primary.outer.style.maxWidth="primary"==mu.max_width_target?mu.max_width+"px":"",ku.primary.outer.style.marginLeft="primary"==mu.max_width_target&&"left"!=mu.max_width_align?"auto":"",ku.primary.outer.style.marginRight="primary"==mu.max_width_target&&"right"!=mu.max_width_align?"auto":"";var l=""!=mu.screenreader_text_primary.trim(),s=document.getElementById("fl-layout-primary-description");ku.primary.outer.setAttribute("aria-label","primary visualisation container"),s.innerText=mu.screenreader_text_primary,l?ku.primary.outer.setAttribute("aria-describedBy","fl-layout-primary-description"):ku.primary.outer.removeAttribute("aria-describedBy"),mu.screenreader_hide_primary?ku.primary.inner.setAttribute("aria-hidden",!0):ku.primary.inner.removeAttribute("aria-hidden"),""!=mu.screenreader_label.trim()?Tu().setAttribute("aria-label",mu.screenreader_label):Tu().removeAttribute("aria-label"),xu.map((function(e){var t=ku[e],n=t.outer.style;return{name:e,height:Au(t.inner),order:parseFloat(n.order),style:n}})).sort((function(e,t){return e.order-t.order})).filter((function(e){if(e.height||"primary"==e.name)return!0;e.style.paddingBottom="",e.style.paddingTop="",e.style.display="none"})).forEach((function(e,t,n){e.style.width="100%",e.style.paddingTop=t?yu("padding"):"",e.style.paddingBottom=t<n.length-1?yu("padding"):""})),ku.wrapper.style.gridColumnGap=yu("gap"),ku.wrapper.style.gridRowGap=yu("gap"),document.body.setAttribute("dir",mu.read_direction),ku.wrapper.setAttribute("dir",mu.read_direction),document.getElementById("fl-layout-wrapper-outer").setAttribute("dir","ltr")}function _u(){var e=window.innerWidth<mu.breakpoint_mobile_big,t=mu.layout_order.indexOf("grid")>-1,n={id:mu.layout_order,mode:t?"grid":"stack",elements:Xa[mu.layout_order]};return e&&t&&(n.id="stack-default",n.mode="stack",n.elements=Xa["stack-default"]),n}function yu(e){var t,n=_u();return t="custom"==mu.space_between_sections?mu.space_between_sections_custom:mu.space_between_sections,"grid"==n.mode?"gap"==e?t+"rem":"":"gap"==e?"":t/2+"rem"}var bu=Object.freeze({body_font:{name:"Canva Sans Variable",url:"https://public.flourish.studio/resources/fonts/canva-sans.css"},title_font:null,subtitle_font:null,footer_font:null,read_direction:"ltr",border:{enabled:!1,top:{width:1,color:"#dddddd",style:"solid"},right:{width:1,color:"#dddddd",style:"solid"},bottom:{width:1,color:"#dddddd",style:"solid"},left:{width:1,color:"#dddddd",style:"solid"}},layout_order:"stack-default",margin_top:.75,margin_right:.75,margin_bottom:.75,margin_left:.75,space_between_sections:1,space_between_sections_custom:1,background_color_enabled:!0,background_color:"#ffffff",background_image_enabled:!1,background_image_src:"",background_image_size:"cover",background_image_position:"center center",max_width:600,max_width_target:"none",max_width_align:"center",breakpoint_mobile_small:0,breakpoint_mobile_big:380,breakpoint_tablet:580,breakpoint_desktop:1080,breakpoint_big_screen:1280,font_color:"#333333",font_size_mobile_small:62.5,font_size_mobile_big:75,font_size_tablet:87.5,font_size_desktop:100,font_size_big_screen:120,header_align:"left",header_border:"none",header_border_width:1,header_border_color:"#dddddd",header_border_style:"solid",header_border_space:.5,header_logo_enabled:!1,header_logo_align:"inside",header_logo_src:"",header_logo_alt:"Header logo",header_logo_link_url:"",header_logo_height:3,header_logo_position_inside:"left",header_logo_position_outside:"left",header_logo_margin_top:.25,header_logo_margin_right:.5,header_logo_margin_bottom:0,header_logo_margin_left:0,title:"",title_size:2,title_size_custom:1.6,title_line_height:1.2,title_color:null,title_weight:"bold",title_space_above:0,title_space_above_custom:1.5,title_styling:!1,subtitle:"",subtitle_size:1.4,subtitle_size_custom:1.6,subtitle_line_height:1.2,subtitle_color:null,subtitle_weight:"normal",subtitle_space_above:.5,subtitle_space_above_custom:1.5,subtitle_styling:!1,header_text:"",header_text_size:1.2,header_text_size_custom:1.2,header_text_line_height:1.2,header_text_color:null,header_text_weight:"normal",header_text_space_above:.5,header_text_space_above_custom:1.5,source_label:"Source: ",source_name:"",source_url:"",source_name_2:"",source_url_2:"",source_name_3:"",source_url_3:"",footer_note:"",footer_note_secondary:"",footer_text_size:1,footer_text_color:null,footer_styling:!1,footer_text_weight:"normal",footer_align:"justify",footer_align_vertical:"center",footer_border:"none",footer_border_width:1,footer_border_color:"#dddddd",footer_border_style:"solid",footer_border_space:.5,footer_logo_enabled:!1,footer_logo_src:"",footer_logo_src_light:"",footer_logo_alt:"Footer logo",footer_logo_link_url:"",footer_logo_height:1.5,footer_logo_margin:.25,footer_logo_order:"right",footer_timestamp_format:"%H:%M:%S",screenreader_hide_primary:!0,screenreader_text_primary:"",screenreader_label:""});var mu;function gu(e,t,n){Pa(n),e=function(e){return function(){return document.body.classList.add("fl-fonts-loaded"),e.apply(this,arguments)}}(e=e||window.template.update);var r=setTimeout(e,isNaN(t)?500:t),i=[],a=[];document.fonts&&a.push(document.fonts.ready),du()&&a.push(function(){if(du())return new Promise((function(e){var t=Qa(cu());function n(){"undefined"!=typeof Flourish&&Flourish.warn&&Flourish.warn("flourish-layout unable to load image: "+t),e()}ou=ou||document.createElement("img"),ou.onload=function(){e()},ou.onerror=n,ou.oncancel=n,ou.src=t}))}()),Ka()&&a.push(function(){if(Ka())return new Promise((function(e){var t=Qa(mu.header_logo_src);function n(){"undefined"!=typeof Flourish&&Flourish.warn&&Flourish.warn("flourish-layout unable to load image: "+t),e()}(Va=Va||document.createElement("img")).onload=function(){e()},Va.onerror=n,Va.oncancel=n,Va.src=t}))}()),a.length&&(document.fonts||a.push(new Promise((function(e){setTimeout(e,500)}))),Promise.all(a).then((function(t){if(document.fonts&&t[0].size){var n=function(e){for(var t=e.next(),n=[];t&&!t.done;)n.push(t.value),t=e.next();return n}(t[0].keys()).map((function(e){return vu(e)}));i=i.concat(n),clearTimeout(r),e(),$a()}document.fonts.addEventListener("loadingdone",(function(t){var n=!1;t.fontfaces.forEach((function(e){var t=vu(e);i.includes(t)||(i.push(t),n=!0)})),n&&(clearTimeout(r),e(),$a())}))})))}function vu(e){return[e.family,e.variant,e.weight,e.unicodeRange].join(" ")}var wu,xu=["header","controls","legend","primary","footer"],ku={};function Mu(e){return e.getBoundingClientRect().width}function Au(e){return e.getBoundingClientRect().height}function zu(e,t){var n="fl-layout-"+e,r=document.createElement("section");r.className="fl-layout-container",r.id=n+"-container",r.style.width="100%",r.style.position="relative",r.style.order=t;var i=document.createElement("div");return i.className="fl-layout-inner",i.id=n,i.style.width="100%",i.style.position="relative","primary"==e&&(r.style.display="flex",function(e){var t=document.createElement("p");t.id="fl-layout-primary-description";var n=t.style;n.border="0",n.height="1px",n.width="1px",n.margin="-1px",n.overflow="hidden",n.padding="0",n.position="absolute",n.clip="rect(0 0 0 0)",e.appendChild(t)}(r)),r.appendChild(i),ku.wrapper.appendChild(r),{outer:r,inner:i}}function Tu(){return ku.wrapper}function Cu(){return ku.sidebar}function Eu(e){return-1!==xu.indexOf(e)?ku[e].inner:null}function Su(e){return ku[e]||void 0===e?Mu("wrapper"==e||void 0===e?ku.wrapper:ku[e].outer):null}function Nu(e){return ku[e]||void 0===e?"wrapper"==e||void 0===e?Mu(ku.wrapper)-Uu("horizontal")-Bu("horizontal"):Mu(ku[e].inner):null}function Fu(e){return ku[e]||void 0===e?Au("wrapper"==e||void 0===e?ku.wrapper:ku[e].outer):null}function Lu(e){return ku[e]||void 0===e?"wrapper"==e||void 0===e?Au(ku.wrapper)-Uu("vertical")-Bu("vertical"):Au(ku[e].inner):null}function Ou(){var e="grid"==_u().mode?0:$u(ku.primary.outer);return Au(ku.primary.outer)-e}function ju(){return Mu(ku.primary.inner)}function Du(){return mu.screenreader_hide_primary?"hidden":"readable"}function $u(e){return"grid"==_u().mode?parseFloat(getComputedStyle(ku.wrapper).gap)||0:(parseFloat(getComputedStyle(e).paddingTop)||0)+(parseFloat(getComputedStyle(e).paddingBottom)||0)}function Pu(){var e=function(){if(Flourish.fixed_height)return window.innerHeight;var e=window.innerWidth;return e>999?650:e>599?575:400}()-Uu("vertical")-Bu("vertical"),t=function(){var e=_u(),t="grid-1"==e.id?[]:["header","controls","legend","footer"];return t.reduce((function(t,n){var r=Fu(n);return r>0&&"grid"==e.mode&&(r+=$u()),t+r}),0)}();return e-t-("grid"==_u().mode?0:$u(ku.primary.outer))}function Uu(e){var t;return"left"==e?t=mu.margin_left:"right"==e?t=mu.margin_right:"top"==e?t=mu.margin_top:"bottom"==e?t=mu.margin_bottom:"horizontal"==e?t=mu.margin_left+mu.margin_right:"vertical"==e&&(t=mu.margin_top+mu.margin_bottom),Za(t)}function Bu(e){return mu.border.enabled?"vertical"==e?mu.border.top.width+mu.border.bottom.width:"horizontal"==e?mu.border.left.width+mu.border.right.width:null:0}function Hu(e){var t=ku.primary;if(Flourish.fixed_height||void 0===Flourish.fixed_height)t.inner.style.height="";else{var n=null===e,r=n?Pu():e;r+$u(ku.primary.outer)!==parseFloat(t.outer.style.height)&&(ku.wrapper.style.height="",t.outer.style.flex="",t.inner.style.height=r+"px",Flourish.setHeight(n?null:Fu()))}}function qu(e){var t=wu.querySelector(".fl-layout-overlay-message");if(e){wu.style.display="block";var n="string"==typeof e?e:"Your web browser does not support the features used by this content. Consider updating to a modern browser.";t.innerHTML=n}else t.textContent="",wu.style.display="none"}function Yu(){return wu}let Ru;function Iu(){Ru&&Wu(),Ru=za(this.getWrapper(),"fl-layout-svg-screenshot-container"),Ru.addTextElements("#fl-layout-header-container h2"),Ru.addTextElements("#fl-layout-header-container h3"),Ru.addTextElements("#fl-layout-header-container p"),Ru.addTextElements("#fl-layout-footer .flourish-footer-text")}function Wu(){Ru.remove(),Ru=null}function Vu(e){for(var t in mu=e,bu)void 0===mu[t]&&(mu[t]=bu[t]);return(Oa=document.createElement("style")).id="flourish-page-styles",Oa.type="text/css",document.head.appendChild(Oa),ku.wrapper=function(){var e=document.createElement("div");e.id="fl-layout-wrapper-outer",e.style.display="flex";var t=document.createElement("main");t.id="fl-layout-wrapper",t.style.display="flex",t.style.flexGrow="1",t.style.flexDirection="column",t.style.boxSizing="border-box",t.style.overflow="hidden";var n=document.createElement("aside");return n.id="fl-layout-sidebar",n.style.position="relative",ku.sidebar=n,e.appendChild(t),e.appendChild(n),document.body.appendChild(e),t}(),xu.forEach((function(e,t){ku[e]=zu(e,t)})),Eu("header").appendChild(function(){(Ha=document.createElement("header")).className="flourish-header";var e=document.createElement("hgroup");return qa=document.createElement("h2"),Ya=document.createElement("h3"),Ra=document.createElement("p"),(Ia=document.createElement("div")).className="clearfix",(Wa=document.createElement("div")).className="flourish-header-logo-container",Ha.appendChild(Wa),Ha.appendChild(e),e.appendChild(qa),e.appendChild(Ya),Ha.appendChild(Ra),Ha.appendChild(Ia),Ha}()),Eu("footer").appendChild(uu()),ku.primary.outer.style.overflow="hidden",function(){var e=ku.primary.outer;e.style.position="relative",(wu=document.createElement("div")).id="fl-layout-overlay";var t=wu.style;t.position="absolute",t.display="none",t.width="100%",t.height="100%",t.top=0,t.left=0,t.backgroundColor="rgb(200,200,200)",t.zIndex=999999,t.pointerEvents="none";var n=document.createElement("p");n.className="fl-layout-overlay-message",(t=n.style).color="#333333",t.fontSize="1.5rem",t.paddingLeft="15%",t.paddingRight="15%",t.width="100%",t.boxSizing="border-box",t.position="absolute",t.top="50%",t.transform="translate(0, -50%)",t.margin="0",t.textAlign="center",wu.appendChild(n),e.appendChild(wu)}(),{update:hu,getWrapper:Tu,getSidebar:Cu,getSection:Eu,getOuterWidth:Su,getInnerWidth:Nu,getOuterHeight:Fu,getInnerHeight:Lu,getPrimaryHeight:Ou,getPrimaryWidth:ju,getDefaultPrimaryHeight:Pu,getPrimaryScreenReadability:Du,setHeight:Hu,showOverlay:qu,remToPx:Za,getOverlay:Yu,awaitFonts:gu,prepareScreenshotSVG:Iu,clearScreenshotSVG:Wu}}var Gu,Xu,Zu={aggregation_type:"Sum",hierarchy_layout:"treemap",color:{},stroke_color:null,label_color:null,axis_label_color:null,radial_tree_link_color:"#dddddd",legend_mode:"off",legend_container:{},legend_categorical:{title_mode:"custom",max_width:100},cellPadding:"low",num_of_visible_levels:2,auto_set_height:!0,treemap_aspect_ratio_narrow:100,treemap_aspect_ratio_normal:66,responsive_narrow_breakpoint:500,label_size:.9,min_label_size:.5,max_label_size:1.5,label_padding:.3,multi_line_labels:!0,label_case:"topUpperCase",label_weight:"topBold",show_value_labels:!1,value_label_relative_size:.75,value_label_bold:!0,sort_by:"value",treemap_type:"treemapBinary",treemap_ratio:2,sunburst_inner_radius:33,sunburst_outer_radius:100,sunburst_show_zoomed_node_in_center:!0,sunburst_depth_fade:.75,sunburst_labelling:"auto",bar_min_bar_thickness:30,bar_max_bar_thickness:50,bar_bar_padding:10,bar_axis_label_size:1,bar_axis_labels_above:!0,bar_max_value:null,bar_axis_label_space:8,bar_value_label_space:6,radial_tree_outer_radius:55,radial_tree_bar_length:20,radial_tree_bar_width:40,radial_tree_rotation:0,popup:{mode:"none"},popup_show_title:!1,popup_separator:">",popup_title:"",popup_hide_value:!1,popup_active_levels:"all_levels",filter:null,size_by:null,controls_container:{},filter_control:{},filter_control_visibility:"always",size_by_control:{},size_by_control_visibility:"always",controls_padding:0,filter_include_all:!0,filter_all_label:"All",controls_style:{},dropdown_style:{},button_style:{},slider_style:{},ascend_button_visibility:"always",animation_duration:1,zoom_out_button_color:"#f3f3f3",zoom_out_arrow_color:"#000000",zoomed_node_id:null,size_by_number_formatter:{},filter_number_formatter:{},layout:{},url_state:{}};function Ju(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var Qu,Ku,ec=(1===(Qu=Ju).length&&(Ku=Qu,Qu=function(e,t){return Ju(Ku(e),t)}),{left:function(e,t,n,r){for(null==n&&(n=0),null==r&&(r=e.length);n<r;){var i=n+r>>>1;Qu(e[i],t)<0?n=i+1:r=i}return n},right:function(e,t,n,r){for(null==n&&(n=0),null==r&&(r=e.length);n<r;){var i=n+r>>>1;Qu(e[i],t)>0?r=i:n=i+1}return n}}),tc=ec.right;function nc(e){return null===e?NaN:+e}function rc(e,t){var n,r,i,a=e.length,o=-1;if(null==t){for(;++o<a;)if(null!=(n=e[o])&&n>=n)for(r=i=n;++o<a;)null!=(n=e[o])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++o<a;)if(null!=(n=t(e[o],o,e))&&n>=n)for(r=i=n;++o<a;)null!=(n=t(e[o],o,e))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]}function ic(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),a=new Array(i);++r<i;)a[r]=e+r*n;return a}var ac=Math.sqrt(50),oc=Math.sqrt(10),lc=Math.sqrt(2);function sc(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=ac?10:a>=oc?5:a>=lc?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=ac?10:a>=oc?5:a>=lc?2:1)}function uc(e,t,n){if(null==n&&(n=nc),r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e);return o+(+n(e[a+1],a+1,e)-o)*(i-a)}}function cc(e,t){var n,r,i=e.length,a=-1;if(null==t){for(;++a<i;)if(null!=(n=e[a])&&n>=n)for(r=n;++a<i;)null!=(n=e[a])&&n>r&&(r=n)}else for(;++a<i;)if(null!=(n=t(e[a],a,e))&&n>=n)for(r=n;++a<i;)null!=(n=t(e[a],a,e))&&n>r&&(r=n);return r}var dc="0.2em";function fc(e){return e*parseFloat(getComputedStyle(document.documentElement).fontSize)}var pc=0,hc=Object.freeze({show_legend:!0,title_mode:"auto",title:"",max_width:100,swatch_width:.75,swatch_height:1,swatch_radius:3,swatch_outline:!1,swatch_outline_color:null,legend_items_padding:.5,icon_height:1,icon_color:"#777777",icon_fill_opacity:1,icon_stroke_opacity:1,order_override:"",orientation:"horizontal"});function _c(e){for(var t in this._state=e,hc)void 0===this._state[t]&&(this._state[t]=hc[t]);return this._colorFunction=void 0,this._formatFunction=void 0,this._legend_items=[],this._filtered_items=[],this._eventListeners=[],this._id="fl-legend-discrete-color-"+pc,this._visible=!0,this._auto_title="",this._container=ue(document.createElement("div")).attr("class","fl-legend-container").attr("id",this._id),this._container.append("p").attr("class","fl-legend-title"),pc++,this}function yc(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function bc(e,t){switch(arguments.length){case 0:break;case 1:this.interpolator(e);break;default:this.interpolator(t).domain(e)}return this}_c.prototype.appendTo=function(e){if(e.appendChild(this._container.node()),!document.querySelector("#legend-styles")){var t=document.createElement("style"),n=new Zn;n.select(".fl-legend-container.interactive .fl-legend-item:hover").style("opacity",.75).style("cursor","pointer"),t.id="legend-styles",t.type="text/css",t.innerHTML=n.print(),document.head.appendChild(t)}return this},_c.prototype.format=function(e){return this._formatFunction=e,this},_c.prototype.getContainer=function(){return this._container},_c.prototype.visible=function(e){return void 0===e?this._visible:(this._visible=e,this)},_c.prototype.allowSingleEntry=function(e){return void 0===e?this._allow_single_entry:(this._allow_single_entry=e,this)},_c.prototype.autoTitle=function(e){return void 0===e?this._auto_title:(this._auto_title=e,this)},_c.prototype._updateTitle=function(){var e=this,t="auto"==e._state.title_mode?e.autoTitle():e._state.title;this._container.select(".fl-legend-title").text(t).style("display",(function(){return t.trim()?void 0===e._state.orientation||"horizontal"==e._state.orientation?"inline-block":"block":"none"})).style("padding-inline-start",0).style("padding-inline-end",dc)},_c.prototype.data=function(e,t){return this._colorFunction=t,e||t?(t?Array.isArray(e)?this._legend_items=e.slice().map((function(e,n){var r="object"==typeof e?e?.label||"":e;return r?{label:r,color:t(r),index:n}:null})).filter((function(e){return null!==e})):this._legend_items=[]:this._legend_items=Array.isArray(e)?e.slice():[],this):this._legend_items.slice()},_c.prototype.filtered=function(e){return e?(this._filtered_items=Array.isArray(e)?e.slice():[],this):this._filtered_items.slice()},_c.prototype.on=function(e,t){return this._container?(t&&this._eventListeners.indexOf(e)<0?this._eventListeners.push(e):t||this._eventListeners.splice(this._eventListeners.indexOf[e],1),this._container.classed("interactive",this._eventListeners.length>0),t?(this._container.on(e,(function(){var e=Q.target,n=e.parentNode,r=e.classList.contains("fl-legend-item")?e:n.classList.contains("fl-legend-item")?n:null;if(r){var i=ue(r).datum();t.call(r,i,i.index)}})),"click"==e&&this._container.on("keydown",(function(){if("Enter"==Q.key){var e=Q.target,n=e.parentNode,r=e.classList.contains("fl-legend-item")?e:n.classList.contains("fl-legend-item")?n:null;if(r){var i=ue(r).datum();t.call(r,i,i.index)}}}))):(this._container.on(e,null),"click"==e&&this._container.on("keydown",null)),this):this},_c.prototype.update=function(){const e=this._allow_single_entry?1:2,t=this._state.show_legend&&this._visible&&this._legend_items.length>=e;return this._container.style("display",t?"":"none"),t?(this._updateTitle(),this._updateLegend(),this):this},_c.prototype._updateLegend=function(){var e,t=this,n=this._formatFunction;this._container.style("max-width",fc(this._state.max_width)+"px").style("display","inline-flex").style("flex-wrap","wrap").style("align-items","horizontal"==this._state.orientation?"center":"start").style("align-content","horizontal"==this._state.orientation?"center":null).style("flex-direction","horizontal"==this._state.orientation?null:"column").style("max-height",.5*window.innerHeight+"px").style("overflow-y","auto"),e=this._state.order_override.trim()?function(e,t){for(var n={},r=t.split(/\s*\n\s*/),i=0;i<r.length;i++)n[r[i]]=i;for(var a=[],o=0;o<e.length;o++){var l=e[o],s=n[l.label];void 0!==s&&(a[s]=l)}return a.filter((function(e){return void 0!==e}))}(this._legend_items,this._state.order_override):this._legend_items;var r=this._container.selectAll(".fl-legend-item").data(e),i=r.enter().append("div").attr("class","fl-legend-item");i.append("div").attr("class","fl-legend-swatch");let a=i.append("div").attr("class","fl-legend-icon-container");a.append("svg").attr("class","fl-legend-icon fl-ignore-svg-download").append("path"),a.append("img").attr("class","fl-legend-icon"),a.append("div").attr("class","fl-legend-icon"),i.append("p").attr("class","fl-legend-label");var o=r.merge(i),l=this._eventListeners.length>0;o.style("display","horizontal"==this._state.orientation?"inline-flex":"flex").style("flex-direction",(function(e){return e.reverse?"row-reverse":"row"})).style("opacity",(function(e){return t._filtered_items.indexOf(e.label)>-1?.2:""})).style("align-items","center").style("padding-inline-end","horizontal"==this._state.orientation?this._state.legend_items_padding+"rem":0).style("padding-inline-start",0).attr("tabindex",l?"0":null).attr("role",l?"button":null),o.select(".fl-legend-swatch").style("height",this._state.swatch_height+"rem").style("width",this._state.swatch_width+"rem").style("border-radius",this._state.swatch_radius+"px").style("background-color",(function(e){return e.color})).style("border",(()=>this._state.swatch_outline?this._state.swatch_outline_color?`1px solid ${this._state.swatch_outline_color}`:"1px solid":"none")).style("box-sizing",this._state.swatch_outline?"border-box":"content-box").style("flex-shrink","0").style("display",(function(e){return e.icon?"none":null}));const s=o.filter((e=>e.icon));return s.each((function(e){let n=Math.ceil(fc(t._state.icon_height)),r="auto";if(e.icon.width){let n=e.icon.width,i=e.icon.height,a=e.outline?i*e.stroke_thickness:0;n+=a,i+=a;let o=n/i,l=fc(t._state.icon_height*o);r=Math.ceil(l)}let i=.25*t._state.text_size+"rem";ue(this).selectAll(".fl-legend-icon").attr("height",n).attr("width",r).style("margin-right",i)})),o.select(".fl-legend-icon-container").style("display",(function(e){return e.icon?null:"none"})),s.each((function(e){ue(this).select("svg.fl-legend-icon").style("display",e.icon.path_string?"inline":"none"),ue(this).select("img.fl-legend-icon").style("display",e.icon.url?"inline":"none"),ue(this).select("div.fl-legend-icon").style("display",e.icon.html?"inline-block":"none")})),s.filter((e=>e.icon.url)).select("img.fl-legend-icon").attr("src",(e=>e.icon.url)),s.filter((e=>e.icon.html)).select("div.fl-legend-icon").html((e=>e.icon.html)).style("font-size",`${Math.ceil(fc(this._state.icon_height))}px`).style("color",(function(e){return e.outline?"none":e.fill||e.color||t._state.icon_color})),s.filter((e=>e.icon.path_string)).select("svg.fl-legend-icon path").attr("d",(function(e){return e.icon?e.icon.path_string:null})).attr("transform",(function(e){if(!e.icon)return null;var n=e.icon.height,r=e.outline?n*e.stroke_thickness:0;n+=r;var i="scale("+fc(t._state.icon_height)/n+")";return i+="translate("+.5*r+","+.5*r+")"})).style("fill",(function(e){return e.outline?"none":e.fill||e.color||t._state.icon_color})).style("fill-opacity",(function(e){return e.outline?0:e.fill_opacity||t._state.icon_fill_opacity})).style("stroke",(function(e){return e.outline||e.stroke?e.stroke||e.color||t._state.icon_color:"none"})).style("stroke-width",(function(e){if(!e.outline&&!e.stroke_width)return 0;var t=e.icon.height*e.stroke_thickness;return e.stroke_width||t})).style("stroke-opacity",(function(e){return e.outline||e.stroke_opacity?e.stroke_opacity||t._state.icon_stroke_opacity:0})),o.select(".fl-legend-label").text((function(e){return n?n(e.label):e.label})).style("margin",0).style("user-select","none").style("padding-inline-end",0).style("padding-inline-start",dc),r.exit().remove(),this._legend_item_els=o,this},_c.prototype.prepareScreenshotSVG=function(){this._state.show_legend&&this._visible&&this._legend_items.length&&za("#fl-layout-wrapper",this._id+"-svg-screenshot-container").addTextElements(".fl-legend-title").addSwatchElements(".fl-legend-swatch",".fl-legend-label").addTextElements(".fl-legend-label")},_c.prototype.clearScreenshotSVG=function(){const e=document.getElementById(this._id+"-svg-screenshot-container");e&&e.remove()};var mc=Array.prototype,gc=mc.map,vc=mc.slice;function wc(e){return function(){return e}}function xc(e,t){return function(n){return e+n*t}}function kc(e,t){var n=t-e;return n?xc(e,n>180||n<-180?n-360*Math.round(n/360):n):wc(isNaN(e)?t:e)}function Mc(e){return 1==(e=+e)?Ac:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):wc(isNaN(t)?n:t)}}function Ac(e,t){var n=t-e;return n?xc(e,n):wc(isNaN(e)?t:e)}var zc=function e(t){var n=Mc(t);function r(e,t){var r=n((e=xr(e)).r,(t=xr(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),o=Ac(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);var Tc,Cc=(Tc=function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1],o=r>0?e[r-1]:2*i-a,l=r<t-1?e[r+2]:2*a-i;return function(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}((n-r/t)*t,o,i,a,l)}},function(e){var t,n,r=e.length,i=new Array(r),a=new Array(r),o=new Array(r);for(t=0;t<r;++t)n=xr(e[t]),i[t]=n.r||0,a[t]=n.g||0,o[t]=n.b||0;return i=Tc(i),a=Tc(a),o=Tc(o),n.opacity=1,function(e){return n.r=i(e),n.g=a(e),n.b=o(e),n+""}});function Ec(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(a){for(n=0;n<r;++n)i[n]=e[n]*(1-a)+t[n]*a;return i}}function Sc(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=$c(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<i;++n)o[n]=a[n](e);return o}}function Nc(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Fc(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Lc(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=$c(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var Oc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jc=new RegExp(Oc.source,"g");function Dc(e,t){var n,r,i,a=Oc.lastIndex=jc.lastIndex=0,o=-1,l=[],s=[];for(e+="",t+="";(n=Oc.exec(e))&&(r=jc.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(r=r[0])?l[o]?l[o]+=r:l[++o]=r:(l[++o]=null,s.push({i:o,x:Fc(n,r)})),a=jc.lastIndex;return a<t.length&&(i=t.slice(a),l[o]?l[o]+=i:l[++o]=i),l.length<2?s[0]?function(e){return function(t){return e(t)+""}}(s[0].x):function(e){return function(){return e}}(t):(t=s.length,function(e){for(var n,r=0;r<t;++r)l[(n=s[r]).i]=n.x(e);return l.join("")})}function $c(e,t){var n,r=typeof t;return null==t||"boolean"===r?wc(t):("number"===r?Fc:"string"===r?(n=mr(t))?(t=n,zc):Dc:t instanceof mr?zc:t instanceof Date?Nc:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?Ec:Array.isArray(t)?Sc:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Lc:Fc)(e,t)}function Pc(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Uc,Bc,Hc,qc,Yc=180/Math.PI,Rc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ic(e,t,n,r,i,a){var o,l,s;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,s/=l),e*r<t*n&&(e=-e,t=-t,s=-s,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*Yc,skewX:Math.atan(s)*Yc,scaleX:o,scaleY:l}}function Wc(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(a,o){var l=[],s=[];return a=e(a),o=e(o),function(e,r,i,a,o,l){if(e!==i||r!==a){var s=o.push("translate(",null,t,null,n);l.push({i:s-4,x:Fc(e,i)},{i:s-2,x:Fc(r,a)})}else(i||a)&&o.push("translate("+i+t+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,l,s),function(e,t,n,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Fc(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(a.rotate,o.rotate,l,s),function(e,t,n,a){e!==t?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Fc(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(a.skewX,o.skewX,l,s),function(e,t,n,r,a,o){if(e!==n||t!==r){var l=a.push(i(a)+"scale(",null,",",null,")");o.push({i:l-4,x:Fc(e,n)},{i:l-2,x:Fc(t,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,l,s),a=o=null,function(e){for(var t,n=-1,r=s.length;++n<r;)l[(t=s[n]).i]=t.x(e);return l.join("")}}}var Vc=Wc((function(e){return"none"===e?Rc:(Uc||(Uc=document.createElement("DIV"),Bc=document.documentElement,Hc=document.defaultView),Uc.style.transform=e,e=Hc.getComputedStyle(Bc.appendChild(Uc),null).getPropertyValue("transform"),Bc.removeChild(Uc),Ic(+(e=e.slice(7,-1).split(","))[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}),"px, ","px)","deg)"),Gc=Wc((function(e){return null==e?Rc:(qc||(qc=document.createElementNS("http://www.w3.org/2000/svg","g")),qc.setAttribute("transform",e),(e=qc.transform.baseVal.consolidate())?Ic((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Rc)}),", ",")",")");var Xc=function(e){return function(t,n){var r=e((t=Er(t)).h,(n=Er(n)).h),i=Ac(t.s,n.s),a=Ac(t.l,n.l),o=Ac(t.opacity,n.opacity);return function(e){return t.h=r(e),t.s=i(e),t.l=a(e),t.opacity=o(e),t+""}}}(kc);function Zc(e,t){var n=Ac((e=Hr(e)).l,(t=Hr(t)).l),r=Ac(e.a,t.a),i=Ac(e.b,t.b),a=Ac(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=r(t),e.b=i(t),e.opacity=a(t),e+""}}var Jc=function(e){return function(t,n){var r=e((t=Vr(t)).h,(n=Vr(n)).h),i=Ac(t.c,n.c),a=Ac(t.l,n.l),o=Ac(t.opacity,n.opacity);return function(e){return t.h=r(e),t.c=i(e),t.l=a(e),t.opacity=o(e),t+""}}}(kc);function Qc(e){return function t(n){function r(t,r){var i=e((t=ii(t)).h,(r=ii(r)).h),a=Ac(t.s,r.s),o=Ac(t.l,r.l),l=Ac(t.opacity,r.opacity);return function(e){return t.h=i(e),t.s=a(e),t.l=o(Math.pow(e,n)),t.opacity=l(e),t+""}}return n=+n,r.gamma=t,r}(1)}Qc(kc);var Kc=Qc(Ac);function ed(e){return+e}var td=[0,1];function nd(e){return e}function rd(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function id(e){var t,n=e[0],r=e[e.length-1];return n>r&&(t=n,n=r,r=t),function(e){return Math.max(n,Math.min(r,e))}}function ad(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=rd(i,r),a=n(o,a)):(r=rd(r,i),a=n(a,o)),function(e){return a(r(e))}}function od(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=rd(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(t){var n=tc(e,t,1,r)-1;return a[n](i[n](t))}}function ld(e,t){return function(){var e,t,n,r,i,a,o=td,l=td,s=$c,u=nd;function c(){return r=Math.min(o.length,l.length)>2?od:ad,i=a=null,d}function d(t){return isNaN(t=+t)?n:(i||(i=r(o.map(e),l,s)))(e(u(t)))}return d.invert=function(n){return u(t((a||(a=r(l,o.map(e),Fc)))(n)))},d.domain=function(e){return arguments.length?(o=gc.call(e,ed),u===nd||(u=id(o)),c()):o.slice()},d.range=function(e){return arguments.length?(l=vc.call(e),c()):l.slice()},d.rangeRound=function(e){return l=vc.call(e),s=Pc,c()},d.clamp=function(e){return arguments.length?(u=e?id(o):nd,d):u!==nd},d.interpolate=function(e){return arguments.length?(s=e,c()):s},d.unknown=function(e){return arguments.length?(n=e,d):n},function(n,r){return e=n,t=r,c()}}()(e,t)}function sd(e,t,n,r){var i,a=function(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=ac?i*=10:a>=oc?i*=5:a>=lc&&(i*=2),t<e?-i:i}(e,t,n);switch((r=yn(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(pn(t)/3)))-pn(Math.abs(e)))}(a,o))||(r.precision=i),kn(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,pn(t)-pn(e))+1}(a,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(e){return Math.max(0,-pn(Math.abs(e)))}(a))||(r.precision=i-2*("%"===r.type))}return xn(r)}function ud(e){var t=e.domain;return e.ticks=function(e){var n=t();return function(e,t,n){var r,i,a,o,l=-1;if(n=+n,(e=+e)==(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(o=sc(e,t,n))||!isFinite(o))return[];if(o>0)for(e=Math.ceil(e/o),t=Math.floor(t/o),a=new Array(i=Math.ceil(t-e+1));++l<i;)a[l]=(e+l)*o;else for(e=Math.floor(e*o),t=Math.ceil(t*o),a=new Array(i=Math.ceil(e-t+1));++l<i;)a[l]=(e-l)/o;return r&&a.reverse(),a}(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return sd(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i=t(),a=0,o=i.length-1,l=i[a],s=i[o];return s<l&&(r=l,l=s,s=r,r=a,a=o,o=r),(r=sc(l,s,n))>0?r=sc(l=Math.floor(l/r)*r,s=Math.ceil(s/r)*r,n):r<0&&(r=sc(l=Math.ceil(l*r)/r,s=Math.floor(s*r)/r,n)),r>0?(i[a]=Math.floor(l/r)*r,i[o]=Math.ceil(s/r)*r,t(i)):r<0&&(i[a]=Math.ceil(l*r)/r,i[o]=Math.floor(s*r)/r,t(i)),e},e}function cd(){var e=ld(nd,nd);return e.copy=function(){return t=e,cd().domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown());var t},yc.apply(e,arguments),ud(e)}function dd(){var e,t=[],n=[],r=[];function i(){var e=0,i=Math.max(1,n.length);for(r=new Array(i-1);++e<i;)r[e-1]=uc(t,e/i);return a}function a(t){return isNaN(t=+t)?e:n[tc(r,t)]}return a.invertExtent=function(e){var i=n.indexOf(e);return i<0?[NaN,NaN]:[i>0?r[i-1]:t[0],i<r.length?r[i]:t[t.length-1]]},a.domain=function(e){if(!arguments.length)return t.slice();t=[];for(var n,r=0,a=e.length;r<a;++r)null==(n=e[r])||isNaN(n=+n)||t.push(n);return t.sort(Ju),i()},a.range=function(e){return arguments.length?(n=vc.call(e),i()):n.slice()},a.unknown=function(t){return arguments.length?(e=t,a):e},a.quantiles=function(){return r.slice()},a.copy=function(){return dd().domain(t).range(n).unknown(e)},yc.apply(a,arguments)}function fd(){var e,t=0,n=1,r=1,i=[.5],a=[0,1];function o(t){return t<=t?a[tc(i,t,0,r)]:e}function l(){var e=-1;for(i=new Array(r);++e<r;)i[e]=((e+1)*n-(e-r)*t)/(r+1);return o}return o.domain=function(e){return arguments.length?(t=+e[0],n=+e[1],l()):[t,n]},o.range=function(e){return arguments.length?(r=(a=vc.call(e)).length-1,l()):a.slice()},o.invertExtent=function(e){var o=a.indexOf(e);return o<0?[NaN,NaN]:o<1?[t,i[0]]:o>=r?[i[r-1],n]:[i[o-1],i[o]]},o.unknown=function(t){return arguments.length?(e=t,o):o},o.thresholds=function(){return i.slice()},o.copy=function(){return fd().domain([t,n]).range(a).unknown(e)},yc.apply(ud(o),arguments)}function pd(){var e,t=[.5],n=[0,1],r=1;function i(i){return i<=i?n[tc(t,i,0,r)]:e}return i.domain=function(e){return arguments.length?(t=vc.call(e),r=Math.min(t.length,n.length-1),i):t.slice()},i.range=function(e){return arguments.length?(n=vc.call(e),r=Math.min(t.length,n.length-1),i):n.slice()},i.invertExtent=function(e){var r=n.indexOf(e);return[t[r-1],t[r]]},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return pd().domain(t).range(n).unknown(e)},yc.apply(i,arguments)}function hd(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function _d(){var e=ud(function(){var e,t,n,r,i,a=0,o=1,l=nd,s=!1;function u(t){return isNaN(t=+t)?i:l(0===n?.5:(t=(r(t)-e)*n,s?Math.max(0,Math.min(1,t)):t))}return u.domain=function(i){return arguments.length?(e=r(a=+i[0]),t=r(o=+i[1]),n=e===t?0:1/(t-e),u):[a,o]},u.clamp=function(e){return arguments.length?(s=!!e,u):s},u.interpolator=function(e){return arguments.length?(l=e,u):l},u.unknown=function(e){return arguments.length?(i=e,u):i},function(i){return r=i,e=i(a),t=i(o),n=e===t?0:1/(t-e),u}}()(nd));return e.copy=function(){return hd(e,_d())},bc.apply(e,arguments)}function yd(){var e=ud(function(){var e,t,n,r,i,a,o,l=0,s=.5,u=1,c=nd,d=!1;function f(e){return isNaN(e=+e)?o:(e=.5+((e=+a(e))-t)*(e<t?r:i),c(d?Math.max(0,Math.min(1,e)):e))}return f.domain=function(o){return arguments.length?(e=a(l=+o[0]),t=a(s=+o[1]),n=a(u=+o[2]),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),f):[l,s,u]},f.clamp=function(e){return arguments.length?(d=!!e,f):d},f.interpolator=function(e){return arguments.length?(c=e,f):c},f.unknown=function(e){return arguments.length?(o=e,f):o},function(o){return a=o,e=o(l),t=o(s),n=o(u),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),f}}()(nd));return e.copy=function(){return hd(e,yd())},bc.apply(e,arguments)}var bd,md,gd,vd,wd=Object.freeze({alignment:"start",orientation:"horizontal",text_color:null,title_weight:"bold",text_weight:"normal",text_size:1});function xd(e){for(var t in this._state=e,wd)void 0===this._state[t]&&(this._state[t]=wd[t]);return this}function kd(){return this.declarations=[],this}function Md(e){return this.selector=e,this.styles=[],this}xd.prototype.appendTo=function(e){return this._container=ue(e).append("div").node(),this},xd.prototype.add=function(e){this._legends=Array.isArray(e)?e:[e];var t=this;return this._legends.forEach((function(e){e&&"function"==typeof e.appendTo?e.appendTo(t._container):console.warn("Please pass in valid legend instances into .add()")})),this},xd.prototype.update=function(){var e=window.template||void 0,t=e?e.state.layout:void 0;md=this._state.text_color||e&&t&&t.font_color||"#333333",gd=t?t.body_font.name:window.getComputedStyle(document.body).fontFamily,bd=this._state.text_size,vd=this._state.text_weight;var n={family:gd,weight:vd,size:bd,color:md};this._legends.forEach((function(e){e&&"function"==typeof e.update&&e.update(n)}));var r="horizontal"===this._state.orientation,i=this._state.alignment,a="center"==i?i:"flex-"+i;return ue(this._container).style("justify-content",r?a:null).style("align-items",r?null:a).style("display","flex").style("flex-direction",r?"row":"column"),ue(this._container).selectAll(".fl-legend-container").style("padding-inline-end",(function(){return r?"0.5rem":0})).style("padding-bottom",(function(){return r?0:"0.25rem"})).style("justify-content",a),ue(this._container).selectAll(".fl-legend-title").style("color",this._state.text_color).style("font-weight",this._state.title_weight).style("font-size",bd+"rem").style("margin-right",.25*bd+"rem").style("line-height","1.25em").style("margin-top",0).style("margin-bottom",0).style("text-align",i),ue(this._container).selectAll(".fl-legend-item").style("display","inline-flex").style("text-align",i),ue(this._container).selectAll(".fl-legend-label").style("color",this._state.text_color).style("font-weight",this._state.text_weight).style("font-size",bd+"rem"),ue(this._container).selectAll(".label").style("color",this._state.text_color).style("font-weight",this._state.text_weight).style("font-size",bd+"rem"),this},kd.prototype.select=function(e){if(!e)return this;var t=new Md(e);return t.parent=this,this.addDeclaration(t),t},kd.prototype.addDeclaration=function(e){return this.declarations.push(e),this},kd.prototype.print=function(){var e="";return this.declarations.forEach((function(t){e+=t.selector+" {\n",t.styles.forEach((function(t){e+="\t"+t[0]+": "+t[1]+";\n"})),e+="}\n\n"})),e},kd.prototype.clear=function(){return this.declarations=[],this},Md.prototype.style=function(e,t){var n="function"==typeof value_?t():t;return""!==n&&null!=n&&this.styles.push([e,n]),this},Md.prototype.select=function(e){return this.parent.select(this.selector+" "+e)};var Ad=Object.freeze({font_size:1,font_weight:"bold",height:2});function zd(e,t,n){for(var r in this._state=e,Ad)void 0===this._state[r]&&(this._state[r]=Ad[r]);return this._layout=n||{},this._styles=new kd,this._selector=t,this._createStylesheet(),this}zd.prototype._createStylesheet=function(){this._stylesheet=document.createElement("style"),this._stylesheet.className="fl-ui-styles-controls",document.head.appendChild(this._stylesheet)},zd.prototype.update=function(){this._styles.clear(),this._styles.select(this._selector+".hidden").style("display","none"),this._styles.select(this._selector).style("vertical-align","middle").style("position","relative").style("font-size",this._state.font_size+"rem").style("font-weight",this._state.font_weight),this._styles.select(".fl-controls-title").style("font-size",this._state.font_size+"rem").style("font-weight",this._state.font_weight).style("vertical-align","middle"),this._styles.select(this._selector+".fl-control .button").style("height",this._state.height+"rem").style("padding","0 0.5em"),this._styles.select(this._selector+"-dropdown select").style("height",this._state.height+"rem").style("font-size",this._state.font_size+"rem").style("font-weight",this._state.font_weight).style("padding","0 "+.1*this._state.height+"rem"),this._styles.select(this._selector+"-slider .slider-end-labels").style("font-size",this._state.font_size+"rem").style("font-weight",this._state.font_weight),this._styles.select(this._selector+"-slider").style("height",this._state.height+"rem"),this._stylesheet.innerHTML=this._styles.print()};var Td=Object.freeze({background:null,font_color:null,background_selected:"#333333",font_color_selected:"#ffffff",background_hover:null,font_color_hover:null,border_width:1,border_transparency:.25,border_color:null,border_radius:3});function Cd(e,t,n){for(var r in this._state=e,Td)void 0===this._state[r]&&(this._state[r]=Td[r]);return this._layout=n||{},this._styles=new kd,this._selector=t,this._createStylesheet(),this}Cd.prototype._createStylesheet=function(){this._stylesheet=document.createElement("style"),this._stylesheet.className="fl-ui-styles-button",document.head.appendChild(this._stylesheet)},Cd.prototype.update=function(){this._styles.clear();var e=this._state.background||this._layout.background_color_enabled&&this._layout.background_color||"#ffffff",t=this._state.font_color||this._layout.font_color||"#333333",n=Fa(this._state.border_color||t,this._state.border_transparency),r=Na();this._styles.select(this._selector+".fl-control.hidden").style("display","none"),this._styles.select(this._selector+".fl-control .button").style("overflow","hidden").style("white-space","nowrap").style("margin","0 2px 0 0 !important").style("background-color",e).style("color",t).style("border",this._state.border_width+"px solid "+n).style("border-radius",this._state.border_radius+"px"),this._styles.select(this._selector+".fl-control .button:hover").style("background-color",this._state.background_hover||e).style("color",this._state.font_color_hover||t),this._styles.select(this._selector+".fl-control .button.selected").style("background-color",this._state.background_selected).style("color",this._state.font_color_selected),this._styles.select(this._selector+".grouped.fl-control .button").style("border-right","none").style("border-radius","0").style("margin","0");var i="rtl"===r,a=i?":last-child":":first-child",o=i?":first-child":":last-child";this._styles.select(this._selector+".grouped.fl-control .button"+a).style("border-radius",this._state.border_radius+"px 0 0 "+this._state.border_radius+"px"),this._styles.select(this._selector+".grouped.fl-control .button"+o).style("border-radius","0 "+this._state.border_radius+"px "+this._state.border_radius+"px 0").style("border-right",this._state.border_width+"px solid "+n),this._styles.select(this._selector+".grouped.fl-control.fixed-width:not(.hidden)").style("width",this._state.grouped_width+"%"),this._stylesheet.innerHTML=this._styles.print()};var Ed=Object.freeze({background:null,font_color:null,border_style:"bottom",border_width:1,border_color:null,border_transparency:.25,border_radius:3});function Sd(e,t,n){for(var r in this._state=e,Ed)void 0===this._state[r]&&(this._state[r]=Ed[r]);return this._layout=n||{},this._styles=new kd,this._selector=t,this._createStylesheet(),this}function Nd(e){return e*parseFloat(getComputedStyle(document.documentElement).fontSize)}Sd.prototype._createStylesheet=function(){this._stylesheet=document.createElement("style"),this._stylesheet.className="fl-ui-styles-dropdown",document.head.appendChild(this._stylesheet)},Sd.prototype.update=function(){this._styles.clear();const e=this._state.background||"transparent",t=this._state.font_color||this._layout.font_color,n=t||"inherit";let r;r=this._state.border_color?Fa(this._state.border_color,this._state.border_transparency):t?Fa(t,this._state.border_transparency):"currentColor",this._styles.select(this._selector+" .heading").style("margin-bottom","0.4em"),this._styles.select(this._selector).style("pointer-events","all"),this._styles.select(this._selector+" select").style("display","inline-block").style("cursor","pointer").style("overflow","hidden").style("white-space","nowrap").style("position","relative").style("font-family","inherit").style("background-color",e).style("color",n).style("border","bottom"==this._state.border_style?this._state.border_width+"px solid transparent":this._state.border_width+"px solid "+r).style("border-bottom","bottom"==this._state.border_style?this._state.border_width+"px solid "+r:null).style("border-radius","bottom"==this._state.border_style?null:this._state.border_radius+"px"),this._styles.select(this._selector+":after").style("right","bottom"==this._state.border_style?null:this._state.border_width+5+"px").style("color",n),this._styles.select(this._selector+" .main .current").style("line-height","1em").style("height","100%").style("max-width","88%").style("display","inline-block").style("overflow","hidden").style("vertical-align","top"),this._styles.select(this._selector+" .list").style("top","2px").style("min-width","100%").style("padding","2px").style("display","none").style("max-height","200px").style("overflow-y","auto").style("box-shadow","0 1px 4px rgba(0, 0, 0, .1)").style("margin-top","2px").select(".list-item").style("line-height","1em").style("cursor","pointer").style("font-weight","normal").style("color",n),this._styles.select(this._selector+".open .list").style("display","block").style("border",this._state.border_width+"px solid "+r).style("background-color",e).style("z-index","1").style("animation","dropdown-out 200ms"),this._styles.select(this._selector+" .list-item:hover").style("opacity","0.6"),this._styles.select(this._selector+" .list-item.selected, "+this._selector+" .list-item.selected:hover").style("opacity","1").style("cursor","default"),"bottom"==this._state.border_style&&this._styles.select(this._selector+" .main").style("padding-left",0).style("padding-right","0.1rem"),this._stylesheet.innerHTML=this._styles.print()};var Fd=Object.freeze({play_color:null,handle_color:null,font_color:null,track_color:null,handle_height:1,track_height:.2,margin:4.5,play_button:!0});function Ld(e,t,n){for(var r in this._state=e,Fd)void 0===this._state[r]&&(this._state[r]=Fd[r]);return this._layout=n||{},this._styles=new kd,this._selector=t,this._createStylesheet(),this}Ld.prototype._createStylesheet=function(){this._stylesheet=document.createElement("style"),this._stylesheet.className="fl-ui-styles-slider",document.head.appendChild(this._stylesheet)},Ld.prototype.update=function(){this._styles.clear();var e=this._state.track_color||"#dddddd",t=this._state.font_color||this._layout.font_color||"currentColor",n=this._state.handle_color||this._layout.font_color||"currentColor",r=this._state.play_color||this._layout.font_color||"currentColor",i=Math.round(Nd(this._state.handle_height)),a=Nd(this._state.track_height);this._styles.select(this._selector+" .fl-controls-slider").style("height",2*i+"px"),this._styles.select(this._selector+" .slider-play").style("fill",r).style("width",i+"px").style("height",i+"px").style("display",this._state.play_button?null:"none"),this._styles.select(this._selector+" .slider-label").style("padding-inline-start","0.3rem").style("box-sizing","content-box").style("color",t),this._styles.select(this._selector+" input[type=range]").style("-webkit-appearance","none").style("color","currentColor").style("background-color","transparent"),this._styles.select(this._selector+" input[type=range]::-webkit-slider-runnable-track").style("-webkit-appearance","none").style("background",e).style("border-radius","100px").style("height",a+"px"),this._styles.select(this._selector+" input[type=range]::-webkit-slider-thumb").style("-webkit-appearance","none").style("width",i+"px").style("height",i+"px").style("border-radius","100px").style("background",n).style("margin-top",-i/2+a/2+"px"),this._styles.select(this._selector+" input[type=range]::-moz-range-track").style("-webkit-appearance","none").style("background",e).style("border-radius","100px").style("height",a+"px"),this._styles.select(this._selector+" input[type=range]::-moz-range-thumb").style("-webkit-appearance","none").style("width",i+"px").style("height",i+"px").style("border-radius","100px").style("border","none").style("background",n),this._stylesheet.innerHTML=this._styles.print()},"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}return t});var Od,jd,Dd={},$d=25,Pd=10,Ud=10,Bd={};function Hd(e,t,n,r,i,a,o){var l=n-e/2-Ud,s=n+e/2+Ud,u=e/2+Math.min(0,l-i.left)+Math.max(0,s-i.right);return{pos:[u,o],shape:u-Pd<5?[-u,-15*a,Math.max(Pd,5-u),-10*a]:u+Pd>e-5?[Math.min(-10,e-u-5),-10*a,Math.min(Pd,e-u),-15*a]:[-10,-10*a,Pd,-10*a]}}function qd(e,t,n,r,i,a,o){var l=r-t/2-Ud,s=r+t/2+Ud,u=t/2+Math.min(0,l-i.top)+Math.max(0,s-i.bottom);return{pos:[o,u],shape:u-Pd<5?[-15*a,-u,-10*a,Math.max(Pd,5-u)]:u+Pd>t-5?[-10*a,Math.min(-10,t-u-5),-15*a,Math.min(Pd,t-u)]:[-10*a,-10,-10*a,Pd]}}function Yd(e,t,n,r,i,a){var o=Bd[e](t,n,r,i,a),l=r-$d-o.pos[0],s=i-$d-o.pos[1];return{left:l,top:s,right:l+t+50,bottom:s+n+50}}function Rd(e,t,n){var r,i=document.createElementNS("http://www.w3.org/2000/svg",e);if(t)for(r in t)i.setAttribute(r,t[r]);var a=i.style;if(n)for(r in n)a[r]=n[r];return i}function Id(){return Od||((Od=document.createElement("div")).id="flourish-popup-constrainer",Od.setAttribute("aria-hidden",!0),(jd=Od.style).overflow="hidden",jd.pointerEvents="none",jd.position="absolute",jd.left="0",jd.top="0",jd.margin="0",jd.padding="0",document.body.appendChild(Od),this._resizeConstrainer(),Od)}Bd.bottom=function(e,t){return{shape:[-10,-10,Pd,-10],pos:[e/2,t+Ud]}},Bd.top=function(e,t){return{shape:[-10,Ud,Pd,Ud],pos:[e/2,-10]}},Bd.left=function(e,t){return{shape:[Ud,Pd,Ud,-10],pos:[-10,t/2]}},Bd.right=function(e,t){return{shape:[-10,Pd,-10,-10],pos:[e+Ud,t/2]}},Bd.topLeft=function(e,t){return{shape:[15,Ud,Ud,15],pos:[-10,-10]}},Bd.bottomLeft=function(e,t){return{shape:[15,-10,Ud,-15],pos:[-10,t+Ud]}},Bd.topRight=function(e,t){return{shape:[-15,Ud,-10,15],pos:[e+Ud,-10]}},Bd.bottomRight=function(e,t){return{shape:[-15,-10,-10,-15],pos:[e+Ud,t+Ud]}},Bd.bottomFlexible=function(e,t,n,r,i){return Hd(e,0,n,0,i,1,t+Ud)},Bd.topFlexible=function(e,t,n,r,i){return Hd(e,0,n,0,i,-1,-10)},Bd.rightFlexible=function(e,t,n,r,i){return qd(0,t,0,r,i,1,e+Ud)},Bd.leftFlexible=function(e,t,n,r,i){return qd(0,t,0,r,i,-1,-10)};var Wd={container:document.body,maxWidth:"70%",point:null,html:null,directions:["bottom","top","left","right","topLeft","bottomLeft","topRight","bottomRight","bottomFlexible","topFlexible","leftFlexible","rightFlexible"],fallbackFit:"horizontal"};function Vd(){for(var e in this.unique_id=function(){let e,t;return"Flourish"in window?(e=window.Flourish,t="__popup_next_unique_id"):(e=window,t="__flourish_popup_next_unique_id"),e[t]?(e[t]+=1,e[t]):e[t]=1e3}(),this.is_visible=!0,this.element=null,Wd)this["_"+e]=Wd[e];this.handlers={click:[]}}function Gd(e){Vd.prototype[e]=function(t){return void 0===t?this["_"+e]:(this["_"+e]=t,this)}}for(var Xd in Wd)Gd(Xd);function Zd(){return new Vd}Vd.prototype.point=function(e,t){if(void 0===e)return this._point;if(Array.isArray(e))this._point=[e[0],e[1]];else if(void 0!==t)this._point=[e,t];else if(e instanceof HTMLElement||e instanceof SVGElement){var n=e.getBoundingClientRect();this._point=[Math.floor(n.left+n.width/2),Math.floor(n.top+n.height/2)]}else console.error("Popup: could not understand argument");return this},Vd.prototype.directions=function(e){return void 0===e?this._directions:("string"==typeof e&&(e=[e]),this._directions=e.slice(),this)},Vd.prototype.text=function(e){return this._html=e.replace(/[&<>]/g,(function(e){return{"&":"&amp;","<":"&lt;",">":"&gt;"}[e]})),this},Vd.prototype.on=function(e,t){if(!(e in this.handlers))throw new Error("Popup.on: No such event: "+e);return this.handlers[e].push(t),this},Vd.prototype.fire=function(e,t){if(!(e in this.handlers))throw new Error("Popup.fire: No such event: "+e);for(var n=this.handlers[e],r=0;r<n.length;r++)n[r].call(this,t);return this},Vd.prototype._getElement=function(){var e=this,t=e.element;if(!t){t=e.element=document.createElement("div");var n="flourish-popup-"+e.unique_id;t.className="flourish-popup",t.id=n;var r=t.style;r.display="none",r.margin=r.padding=0,r.position="absolute",r.width="80px",r.height="40px",r.boxSizing="border-box",t.addEventListener("click",(function(t){e.fire("click",t)}),!1);var i=Rd("svg",{class:"flourish-popup-svg"},{position:"absolute",top:0,left:0,bottom:0,right:0}),a=Rd("filter",{id:"dropshadow-"+e.unique_id,height:"130%"});a.appendChild(Rd("feGaussianBlur",{in:"SourceAlpha",stdDeviation:5})),a.appendChild(Rd("feOffset",{dx:0,dy:2,result:"offsetblur"}));var o=Rd("feComponentTransfer");o.appendChild(Rd("feFuncA",{type:"linear",slope:.2})),a.appendChild(o);var l=Rd("feMerge");a.appendChild(l),l.appendChild(Rd("feMergeNode")),l.appendChild(Rd("feMergeNode",{in:"SourceGraphic"})),i.appendChild(a);var s=Rd("g",{filter:"url(#dropshadow-"+e.unique_id+")",fill:"white",stroke:"none"});s.appendChild(Rd("rect",{x:$d,y:$d,rx:5})),s.appendChild(Rd("path")),i.appendChild(s),t.appendChild(i);var u=document.createElement("div");u.className="flourish-popup-content",(r=u.style).position="absolute",r.top=r.left="25px",r.padding="10px",t.appendChild(u),e._getConstrainer().appendChild(t)}return e._resizeConstrainer(),t},Vd.prototype._getConstrainer=Id,Vd.prototype._resizeConstrainer=function(){Od||Id.call(this);var e=jd.display;jd.display="none",jd.width=document.documentElement.scrollWidth+"px",jd.height=document.documentElement.scrollHeight+"px",jd.display=e},Vd.prototype.draw=function(){var e=this;if(e.is_visible=!0,e._point){var t=document.documentElement.getBoundingClientRect(),n=e._point[0],r=e._point[1],i=e._container.getBoundingClientRect();n<i.left?n=i.left:n>i.right&&(n=i.right),r<i.top?r=i.top:r>i.bottom&&(r=i.bottom);var a=n-t.left,o=r-t.top,l=e._getElement(),s=l.style,u=l.querySelector(".flourish-popup-svg"),c=u.querySelector("g"),d=c.querySelector("rect"),f=c.querySelector("path"),p=l.querySelector(".flourish-popup-content");s.display="block",p.style.maxWidth=function(t){return e._maxWidth.match(/^\d+(?:\.\d+)?%$/)?t.width*parseFloat(e._maxWidth)/100:e._maxWidth.match(/^\d+(?:\.\d+)?(?:px)?$/)?parseFloat(e._maxWidth):(null!=e._maxWidth&&console.error("Popup: Unknown value for maxWidth: "+e._maxWidth),t.width)}(i)+"px",e._inner_html!=e._html&&(p.innerHTML=e._inner_html=e._html);var h,_,y=p.getBoundingClientRect();do{h=Math.ceil(y.width),_=Math.ceil(y.height),s.width=h+50+"px",s.height=_+50+"px",y=p.getBoundingClientRect()}while(h!=Math.ceil(y.width)||_!=Math.ceil(y.height));d.setAttribute("width",h),d.setAttribute("height",_),u.setAttribute("width",h+50),u.setAttribute("height",_+50);for(var b,m,g=null,v=null,w=null,x=1/0,k=1/0,M=0;M<e._directions.length;M++){var A=e._directions[M],z=Yd(A,h,_,n,r,i),T=Math.max(0,Math.floor(i.left)-z.left-15)+Math.max(0,z.right-Math.ceil(i.right)-15),C=Math.max(0,Math.floor(i.top)-z.top-15)+Math.max(0,z.bottom-Math.ceil(i.bottom)-15);if(0==T&&0==C){g=A;break}(T<x||T==x&&C<b)&&(x=T,b=C,v=A),(C<k||C==k&&T<m)&&(k=C,m=T,w=A)}return g?A=g:"horizontal"==e._fallbackFit?A=v:"vertical"==e._fallbackFit?A=w:(console.warn("Popup: failed to point box of size ("+h+", "+_+") at ("+n+", "+r+") within ("+i.left+", "+i.top+", "+i.right+", "+i.bottom+")"),A=e._directions[0]),function(e,t,n,r,i,a,o,l,s,u){var c=Bd[e](r,i,l,s,u);t.left=a-$d-c.pos[0]+"px",t.top=o-$d-c.pos[1]+"px",n.setAttribute("d","M0,0L"+c.shape.join(",")+"Z"),n.setAttribute("transform","translate("+(c.pos[0]+$d)+","+(c.pos[1]+$d)+")")}(A,s,f,h,_,a,o,n,r,i),e}console.error("Popup: cannot draw popup till point() has been specified")},Vd.prototype.hide=function(){return this.is_visible?(this.is_visible=!1,this._getElement().style.display="none",this):this},Zd.version="2.1.5";var Jd,Qd,Kd=0,ef=0,tf=0,nf=0,rf=0,af=0,of="object"==typeof performance&&performance.now?performance:Date,lf="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function sf(){return rf||(lf(uf),rf=of.now()+af)}function uf(){rf=0}function cf(){this._call=this._time=this._next=null}function df(e,t,n){var r=new cf;return r.restart(e,t,n),r}function ff(){sf(),++Kd;for(var e,t=Jd;t;)(e=rf-t._time)>=0&&t._call.call(null,e),t=t._next;--Kd}function pf(){rf=(nf=of.now())+af,Kd=ef=0;try{ff()}finally{Kd=0,function(){var e,t,n=Jd,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Jd=t);Qd=e,_f(r)}(),rf=0}}function hf(){var e=of.now(),t=e-nf;t>1e3&&(af-=t,nf=e)}function _f(e){Kd||(ef&&(ef=clearTimeout(ef)),e-rf>24?(e<1/0&&(ef=setTimeout(pf,e-of.now()-af)),tf&&(tf=clearInterval(tf))):(tf||(nf=of.now(),tf=setInterval(hf,1e3)),Kd=1,lf(pf)))}function yf(e,t,n){var r=new cf;return t=null==t?0:+t,r.restart((function(n){r.stop(),e(n+t)}),t,n),r}cf.prototype=df.prototype={constructor:cf,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?sf():+n)+(null==t?0:+t),this._next||Qd===this||(Qd?Qd._next=this:Jd=this,Qd=this),this._call=e,this._time=n,_f()},stop:function(){this._call&&(this._call=null,this._time=1/0,_f())}};var bf={value:function(){}};function mf(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new gf(r)}function gf(e){this._=e}function vf(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function wf(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=bf,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}gf.prototype=mf.prototype={constructor:gf,on:function(e,t){var n,r,i=this._,a=(r=i,(e+"").trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),o=-1,l=a.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<l;)if(n=(e=a[o]).type)i[n]=wf(i[n],e.name,t);else if(null==t)for(n in i)i[n]=wf(i[n],e.name,null);return this}for(;++o<l;)if((n=(e=a[o]).type)&&(n=vf(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new gf(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,n=(r=this._[e]).length;a<n;++a)r[a].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};var xf=mf("start","end","cancel","interrupt"),kf=[];function Mf(e,t,n,r,i,a){var o=e.__transition;if(o){if(n in o)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function a(e){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)}function o(a){var u,c,d,f;if(1!==n.state)return s();for(u in i)if((f=i[u]).name===n.name){if(3===f.state)return yf(o);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete i[u]):+u<t&&(f.state=6,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete i[u])}if(yf((function(){3===n.state&&(n.state=4,n.timer.restart(l,n.delay,n.time),l(a))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(d=n.tween.length),u=0,c=-1;u<d;++u)(f=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(r[++c]=f);r.length=c+1}}function l(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(s),n.state=5,1),a=-1,o=r.length;++a<o;)r[a].call(e,i);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){for(var r in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=df(a,0,n.time)}(e,n,{name:t,index:r,group:i,on:xf,tween:kf,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function Af(e,t){var n=Tf(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function zf(e,t){var n=Tf(e,t);if(n.state>3)throw new Error("too late; already running");return n}function Tf(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Cf(e,t){var n,r;return function(){var i=zf(this,e),a=i.tween;if(a!==n)for(var o=0,l=(r=n=a).length;o<l;++o)if(r[o].name===t){(r=r.slice()).splice(o,1);break}i.tween=r}}function Ef(e,t,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var a=zf(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var l={name:t,value:n},s=0,u=i.length;s<u;++s)if(i[s].name===t){i[s]=l;break}s===u&&i.push(l)}a.tween=i}}function Sf(e,t,n){var r=e._id;return e.each((function(){var e=zf(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return Tf(e,r).value[t]}}function Nf(e,t){var n;return("number"==typeof t?Fc:t instanceof mr?zc:(n=mr(t))?(t=n,zc):Dc)(e,t)}function Ff(e){return function(){this.removeAttribute(e)}}function Lf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Of(e,t,n){var r,i,a=n+"";return function(){var o=this.getAttribute(e);return o===a?null:o===r?i:i=t(r=o,n)}}function jf(e,t,n){var r,i,a=n+"";return function(){var o=this.getAttributeNS(e.space,e.local);return o===a?null:o===r?i:i=t(r=o,n)}}function Df(e,t,n){var r,i,a;return function(){var o,l,s=n(this);if(null!=s)return(o=this.getAttribute(e))===(l=s+"")?null:o===r&&l===i?a:(i=l,a=t(r=o,s));this.removeAttribute(e)}}function $f(e,t,n){var r,i,a;return function(){var o,l,s=n(this);if(null!=s)return(o=this.getAttributeNS(e.space,e.local))===(l=s+"")?null:o===r&&l===i?a:(i=l,a=t(r=o,s));this.removeAttributeNS(e.space,e.local)}}function Pf(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,i)),n}return i._value=t,i}function Uf(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,i)),n}return i._value=t,i}function Bf(e,t){return function(){Af(this,e).delay=+t.apply(this,arguments)}}function Hf(e,t){return t=+t,function(){Af(this,e).delay=t}}function qf(e,t){return function(){zf(this,e).duration=+t.apply(this,arguments)}}function Yf(e,t){return t=+t,function(){zf(this,e).duration=t}}var Rf=se.prototype.constructor;function If(e){return function(){this.style.removeProperty(e)}}var Wf=0;function Vf(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Gf(){return++Wf}var Xf=se.prototype;Vf.prototype={constructor:Vf,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=s(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var l,u,c=r[o],d=c.length,f=a[o]=new Array(d),p=0;p<d;++p)(l=c[p])&&(u=e.call(l,l.__data__,p,c))&&("__data__"in l&&(u.__data__=l.__data__),f[p]=u,Mf(f[p],t,n,p,f,Tf(l,n)));return new Vf(a,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=c(e));for(var r=this._groups,i=r.length,a=[],o=[],l=0;l<i;++l)for(var s,u=r[l],d=u.length,f=0;f<d;++f)if(s=u[f]){for(var p,h=e.call(s,s.__data__,f,u),_=Tf(s,n),y=0,b=h.length;y<b;++y)(p=h[y])&&Mf(p,t,n,y,h,_);a.push(h),o.push(s)}return new Vf(a,o,t,n)},filter:function(e){"function"!=typeof e&&(e=d(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o=t[i],l=o.length,s=r[i]=[],u=0;u<l;++u)(a=o[u])&&e.call(a,a.__data__,u,o)&&s.push(a);return new Vf(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),l=0;l<a;++l)for(var s,u=t[l],c=n[l],d=u.length,f=o[l]=new Array(d),p=0;p<d;++p)(s=u[p]||c[p])&&(f[p]=s);for(;l<r;++l)o[l]=t[l];return new Vf(o,this._parents,this._name,this._id)},selection:function(){return new Rf(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=Gf(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o,l=r[a],s=l.length,u=0;u<s;++u)if(o=l[u]){var c=Tf(o,t);Mf(o,e,n,u,l,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Vf(r,this._parents,e,n)},call:Xf.call,nodes:Xf.nodes,node:Xf.node,size:Xf.size,empty:Xf.empty,each:Xf.each,on:function(e,t){var n=this._id;return arguments.length<2?Tf(this.node(),n).on.on(e):this.each(function(e,t,n){var r,i,a=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?Af:zf;return function(){var o=a(this,e),l=o.on;l!==r&&(i=(r=l).copy()).on(t,n),o.on=i}}(n,e,t))},attr:function(e,t){var n=r(e),i="transform"===n?Gc:Nf;return this.attrTween(e,"function"==typeof t?(n.local?$f:Df)(n,i,Sf(this,"attr."+e,t)):null==t?(n.local?Lf:Ff)(n):(n.local?jf:Of)(n,i,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var i=r(e);return this.tween(n,(i.local?Pf:Uf)(i,t))},style:function(e,t,n){var r="transform"==(e+="")?Vc:Nf;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var a=T(this,e),o=(this.style.removeProperty(e),T(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}(e,r)).on("end.style."+e,If(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,i,a;return function(){var o=T(this,e),l=n(this),s=l+"";return null==l&&(this.style.removeProperty(e),s=l=T(this,e)),o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,l))}}(e,r,Sf(this,"style."+e,t))).each(function(e,t){var n,r,i,a,o="style."+t,l="end."+o;return function(){var s=zf(this,e),u=s.on,c=null==s.value[o]?a||(a=If(t)):void 0;u===n&&i===c||(r=(n=u).copy()).on(l,i=c),s.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,a=n+"";return function(){var o=T(this,e);return o===a?null:o===r?i:i=t(r=o,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,i;function a(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&function(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}(e,a,n)),r}return a._value=t,a}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(Sf(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){return function(t){this.textContent=e.call(this,t)}}(r)),t}return r._value=e,r}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=Tf(this.node(),n).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===e)return r.value;return null}return this.each((null==t?Cf:Ef)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Bf:Hf)(t,e)):Tf(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?qf:Yf)(t,e)):Tf(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){zf(this,e).ease=t}}(t,e)):Tf(this.node(),t).ease},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise((function(a,o){var l={value:o},s={value:function(){0==--i&&a()}};n.each((function(){var n=zf(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(l),t._.interrupt.push(l),t._.end.push(s)),n.on=t}))}))}};var Zf={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Jf(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))return Zf.time=sf(),Zf;return n}se.prototype.interrupt=function(e){return this.each((function(){!function(e,t){var n,r,i,a=e.__transition,o=!0;if(a){for(i in t=null==t?null:t+"",a)(n=a[i]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete a[i]):o=!1;o&&delete e.__transition}}(this,e)}))},se.prototype.transition=function(e){var t,n;e instanceof Vf?(t=e._id,e=e._name):(t=Gf(),(n=Zf).time=sf(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,l=r[a],s=l.length,u=0;u<s;++u)(o=l[u])&&Mf(o,e,t,u,l,n||Jf(o,t));return new Vf(r,this._parents,e,t)};var Qf=1,Kf={container:document.body,point:[window.innerWidth/2,window.innerHeight/2],html:"",open_duration:250,close_duration:250,popup_custom_template:"",position:"overlay",shadow:!0,underlay_color:"rgba(255, 255, 255, 0.75)",width_side:35,height_side:35,width_overlay:80,height_overlay:80,vertical_position:"click",max_width:null,max_height:null,closeable:!0};function ep(){var e=this;for(var t in e.unique_id=Qf++,e._is_open=!1,e._onclose=null,Kf)e["_"+t]=Kf[t]}function tp(e){ep.prototype[e]=function(t){return void 0===t?this["_"+e]:(this["_"+e]=t,this)}}for(var np in Kf)tp(np);ep.prototype.point=function(e,t){if(void 0===e)return this._point;if(Array.isArray(e))this._point=[e[0],e[1]];else if(void 0!==t)this._point=[e,t];else if(e instanceof HTMLElement||e instanceof SVGElement){var n=e.getBoundingClientRect();this._point=[Math.floor(n.left+n.width/2),Math.floor(n.top+n.height/2)]}else console.error("Panel: could not understand argument");return this},ep.prototype.container=function(e){return e&&(this._container=e),this},ep.prototype.hide=function(){if(this._is_open)return function(e){e._getElement().style.pointerEvents="none",e._is_open=!1;var t=e._close_duration;ue(e._getElement()).transition().duration(t).style("background","rgba(255, 255, 255, 0)").on("interrupt",(function(){ue(this).style("display",e._is_open?"block":"none")})).on("end",(function(){ue(this).style("display","none"),ue(e._content).html("")})).select(".flourish-panel-close").style("opacity","0"),ue(e._inner).transition().duration(t).style("opacity",0),ue(e._content).transition().duration(t/2).style("opacity",0)}(this),this},ep.prototype.close=ep.prototype.hide,ep.prototype.draw=function(){var e=this;return e._content.innerHTML=e._html,function(e){var t=e._is_open||e._html==e._default?0:e._open_duration,n=window.innerWidth,r=window.innerHeight,i="overlay"==e._position,a="top"==e._position||"bottom"==e._position,o="left"==e._position||"right"==e._position,l=100*(e._max_width||1/0)/n,s=100*(e._max_height||1/0)/r,u=100*e._point[1]/r,c="click"==e._vertical_position&&!Flourish.fixed_height,d=i?Math.min(e._width_overlay,l):a?100:Math.min(e._width_side,l),f=i?Math.min(e._height_overlay,s):o?100:Math.min(e._height_side,s),p=i?(100-d)/2:"right"==e._position?100-d:0,h=c?Math.max(1,Math.min(u-f/2,99-f)):(100-f)/2,_=i?h:"bottom"==e._position?100-f:0,y=i?0:d,b=i?0:f,m=i?100*e._point[0]/n:"right"==e._position?100:"left"==e._position?-d:0,g=i?u:"bottom"==e._position?100:"top"==e._position?-f:0;ue(e._getElement()).style("display","block").transition().duration(t).delay(.25*t).style("background",i?e._underlay_color:"rgba(255, 255, 255, 0)").style("pointer-events",i?null:"none"),ue(e._inner).style("opacity",1).style("display","block").style("pointer-events","none").style("width",y+"%").style("height",b+"%").style("left",m+"%").style("top",g+"%").transition().duration(t).style("width",d+"%").style("height",f+"%").style("left",p+"%").style("top",_+"%").on("end",(function(){ue(e._inner).style("pointer-events","all").style("width",d+"%").style("height",f+"%").style("left",p+"%").style("top",_+"%")})).on("interrupt",(function(){ue(e._inner).style("pointer-events","all").style("width",d+"%").style("height",f+"%").style("left",p+"%").style("top",_+"%")}));var v=o&&c;ue(e._content).transition().duration(t/4).delay(t).style("opacity",1).on("interrupt",(function(){ue(this).style("opacity",1)})),ue(e._content).select(".flourish-panel-content-inner").style("position",v?"absolute":null).style("top",v?u+"%":null).style("transform",v?"translateY(-50%)":null),ue(e._inner).select(".flourish-panel-close").style("opacity",0).transition().duration(t/4).delay(t).style("opacity",e._closeable?1:0).attr("tabindex","0"),e._is_open=!0,ff()}(e),this},ep.prototype.on=function(e,t){return"close"==e?t&&(this._onclose=t):console.error("Panel .on() method only supports 'close' events"),this},ep.prototype.margins=function(){var e={top:0,right:0,bottom:0,left:0};if(this._is_open&&"overlay"!=this._position){var t=this._getElement().getBoundingClientRect();"top"==this._position&&(e.top=t.top+t.height),"right"==this._position&&(e.right=t.left),"bottom"==this._position&&(e.bottom=t.top),"left"==this._position&&(e.left=t.left+t.width)}return e.css=e.top+"px "+e.right+"px "+e.bottom+"px "+e.left+"px",e},ep.prototype._getElement=function(){var e=this,t="flourish-panel-"+e.unique_id,n=document.getElementById(t);if(!n){(n=document.createElement("div")).className="flourish-panel",n.id=t,n.addEventListener("click",(function(e){e.stopPropagation(),l()})),window.addEventListener("keydown",(function(t){e._is_open&&"Escape"===t.key&&(t.stopPropagation(),t.preventDefault(),l())}),!1);var r=n.style;r.position="absolute",r.zIndex="999999",r.pointerEvents="none",r.width="100%",r.height="100%",r.top="0",r.left="0",r.background="rgba(255, 255, 255, 0)";var i=document.createElement("div");i.className="flourish-panel-inner",n.appendChild(i),e._inner=i,(r=i.style).width="0",r.height="0",r.position="absolute",r.boxSizing="border-box";var a=document.createElement("div");a.className="flourish-panel-shadow",i.appendChild(a);var o=document.createElement("div");o.className="flourish-panel-content",i.appendChild(o),e._content=o,(r=o.style).opacity="0",r.overflowY="auto",r.height="100%",function(e){ue(e._inner).append("svg").attr("class","flourish-panel-close fl-ignore-svg-download").attr("viewBox","0 0 40 40").style("width","1.25rem").style("height","1.25rem").style("position","absolute").style("right","1rem").style("top","1rem").style("cursor","pointer").style("opacity",0).attr("tabindex","-1").on("mouseover",(function(){e._closeable&&(this.style.opacity=.66)})).on("mouseout",(function(){e._closeable&&(this.style.opacity=1)})).on("click",(function(){Q.stopPropagation(),e.hide(),e._onclose&&e._onclose()})).on("touch",(function(){Q.stopPropagation(),e.hide(),e._onclose&&e._onclose()})).on("keydown",(function(){"Enter"==Q.key&&(Q.stopPropagation(),Q.preventDefault(),e.hide(),e._onclose&&e._onclose())})).append("path").attr("stroke","#333333").attr("stroke-width","0.5rem").attr("stroke-linecap","round").attr("d","M 10,10 L 30,30 M 30,10 L 10,30")}(e),e._container.appendChild(n)}function l(){e.hide(),e._onclose&&e._onclose()}return n};var rp={mode:"popup",locked_id:null,popup_is_custom:!1,popup_custom_header:"Popup header",popup_custom_main:"Popup main content. Write your column names in between double curly brackets to display dynamic content.",popup_custom_accessible:"",popup_teaser_default:"Click to see more",popup_text_color:"#333333",popup_align:"start",popup_font_size:1,popup_width:18,popup_background:"#ffffff",popup_background_opacity:1,popup_padding:.5,popup_radius:.2,popup_shadow:!0,popup_pointer:!0,popup_header_background:"#333333",popup_header_text_color:"#ffffff",popup_header_type:"block",popup_list_type:"table",popup_list_label_weight:"normal",popup_list_separator:": ",panel_is_custom:!1,panel_custom_header:"Custom panel header",panel_custom_main:"Custom panel main content",panel_side_default_content:"<h3>Tap or click to explore</h3>",panel_side_fixed:!1,panel_position:"overlay",panel_width_overlay:80,panel_height_overlay:80,panel_vertical_position:"center",panel_width_side:35,panel_height_side:35,panel_max_width:null,panel_max_height:null,panel_text_color:"#333333",panel_align:"start",panel_font_size:1.25,panel_background:"#ffffff",panel_background_opacity:.9,panel_padding:1.2,panel_radius:.2,panel_shadow:!0,panel_open_duration:250,panel_close_duration:250,panel_list_type:"table",panel_list_label_weight:"normal",panel_list_separator:": "};const ip=/\{\{((?:[^}]|\}[^}])*)\}\}/g;function ap(e){return!(""!==e&&!Number.isNaN(e)&&null!=e)}function op(e,t){let n={title:null,subtitle:null,main:{}};var r={};const i=t[e._title_key],a=t[e._subtitle_key];if(i){n.title=i;const t=e._column_names[e._title_key];r[t]=!0}if(a){n.subtitle=a;const t=e._column_names[e._subtitle_key];r[t]=!0}const o=Object.keys(e._column_names);o.includes("metadata")&&o.push(o.splice(o.indexOf("metadata"),1)[0]);for(let i=0;i<o.length;i++){const a=o[i];if(e._column_names_hidden.indexOf(a)>-1)continue;if(a==e._title_key)continue;if(a==e._subtitle_key)continue;const l=e._column_names[a];if(Array.isArray(l))l.forEach((function(e,i){r[e]||ap(t[a])||(r[e]=!0,n.main[e]=t[a][i])}));else{if(r[l]||ap(t[a]))continue;r[l]=!0,n.main[l]=t[a]}}return n}function lp(e,t){let n="";var r=e._popup_default_template;const i=fp(e,t);if(e._state.popup_is_custom&&e._state.popup_custom_accessible){const t=e._state.popup_custom_accessible;n=dp(t,e,i)}else if(r){var a={};r.match(ip).forEach((t=>{t.replace(ip,(function(t,r){var o;const l=e._column_names[r];if(Array.isArray(l)){if(0==l.length)return;l.forEach((function(e,t){if(a[e])return;a[e]=!0;const n=i[r][t];Ta(n)||ap(n)||(o=`${e}: ${n}, `)}))}else{const e=i[r];if(Ta(e)||ap(e))return;if(a[l])return;a[l]=!0,o=`${l}: ${e}, `}void 0!==o&&(n+=o)}))}))}else{let t=op(e,i);for(var o in t.title&&(n+=`${t.title}, `),t.subtitle&&(n+=`${t.subtitle}, `),t.main){const e=t.main[o];ap(e)||(n+=`${o}: ${e}, `)}}return n=n.replace(/, $/,""),function(e){const t=document.createElement("div");return t.innerHTML=e,t.innerText}(n)}function sp(e,t,n){var r="<div class='flourish-panel-content-inner'>",i=e["_"+n+"_default_template"],a=e._state[n+"_list_type"],o=e._state[n+"_list_separator"],l="<br />"===o,s=l?"":o,u=l?o:"";if(i)r+=i.replace(ip,(function(n,r){var i,a=e._column_names[r];if(Array.isArray(a)){if(0==a.length)return"";i="<ul>",a.forEach((function(e,n){i+="<li>"+e+o+t[r][n]+"</li>"})),i+="</ul>"}else i=t[r];return void 0!==i?i:""}));else{let n=op(e,t);if((n.title||n.subtitle)&&(r+="<header>",n.title&&(r+=`<h3>${n.title}</h3>`),n.subtitle&&(r+=`<h4>${n.subtitle}</h4>`),r+="</header>"),Object.keys(n.main).length){let e="";for(var c in n.main){const t=n.main[c];"table"==a?(e+="<tr><td class='table-col-label'><span class='data-heading'>",e+=c+"</span></td><td class='table-col-value'>",e+=t+"</td></tr>"):"ul"==a&&(e+="<li><span class='data-heading'>"+c+s,e+=" </span> "+u+t+"</li>")}r+="<div class='main-content'><"+a+">",r+=e,r+="</"+a+"></div></div>"}}return r}function up(e,t,n){var r;return Object.keys(e._column_names).some((function(i){if(Array.isArray(e._column_names[i])){var a=e._column_names[i].indexOf(t);if(a>=0)return r=n[i][a],!0}else if(e._column_names[i]==t)return r=n[i],!0})),void 0!==r?r:""}function cp(e,t,n){var r="";const i="popup"===n?e._state.popup_custom_header:e._state.panel_custom_header,a="popup"===n?e._state.popup_custom_main:e._state.panel_custom_main;var o=dp(i,e,t),l=dp(a,e,t);return o&&(r+="<header>"+o+"</header>"),l&&(r+="<div class='main-content'>"+l+"</div>"),r}function dp(e,t,n){return e.replace(/\{\{#if ((?:[^}]|\}[^}])*)\}\}([\s\S]*?)\{\{\/if\}\}/g,(function(e,r,i){return""==up(t,r,n)?"":i})).replace(/\{\{(visualisation|story)\/(.*)\}\}/g,(function(e,t,n){var r=n.split("/");if(r.length<1||!["visualisation","story"].includes(t))return e;var i,a={id:r[0],w:r[1]||"100%",h:r[2]||"400px%"},l="https://flo.uri.sh/"+t+"/"+a.id+"/embed?";return(i="iframe",ue(o(i).call(document.documentElement))).attr("src",l).attr("title","Interactive or visual content").attr("class","flourish-embed-iframe").attr("frameborder","0").attr("scrolling","no").attr("sandbox","allow-same-origin allow-forms allow-scripts allow-downloads allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation").style("width",a.width).style("height",a.height).node().outerHTML})).replace(ip,(function(e,r){return up(t,r,n)})).trim()}function fp(e,t){var n=e._formatters,r={};for(var i in t)if(n&&n[i])if(Array.isArray(n[i])){for(var a=[],o=0;o<n[i].length;o++){let e;e=ap(t[i][o])?"":n[i][o](t[i][o]),a.push(e)}r[i]=a}else{if(ap(t[i]))continue;r[i]=ap(t[i])?"":n[i](t[i])}else r[i]=ap(t[i])?"":t[i];return r}function pp(e,t,n){var r="",i=fp(e,t);return n&&!e._state.popup_is_custom?r+="<div class='main-content'>"+e._state.popup_teaser_default+"</div>":n||e._state.popup_is_custom?r+=cp(e,i,"popup"):r+=sp(e,i,"popup"),r}function hp(e,t){var n="",r=fp(e,t);return e._state.panel_is_custom?n+=cp(e,r,"panel"):n+=sp(e,r,"panel"),n}function _p(e){var t=e.popup._getElement(),n=t.querySelector(".flourish-popup-content");n.style.padding="0",n.style.textAlign=e._state.popup_align,n.style.color=e._state.popup_text_color,n.style.fontSize=e._state.popup_font_size+"rem",n.style.borderRadius=e._state.popup_radius+"rem",n.addEventListener("click",(function(){event.stopPropagation()}));var r=e.panel._getElement(),i=r.querySelector(".flourish-panel-inner"),a=r.querySelector(".flourish-panel-content"),o=Ii(e._state.panel_background);i.style.background="rgba("+o.r+","+o.g+","+o.b+","+e._state.panel_background_opacity+")",i.style.borderRadius=e._state.popup_radius+"rem",i.style.boxShadow="overlay"==e._state.panel_position&&e._state.panel_shadow?"0 0 1.5rem rgba(0,0,0,0.2)":"",i.addEventListener("click",(function(){event.stopPropagation()})),a.style.padding=e._state.panel_padding+"rem",a.style.textAlign=e._state.panel_align,a.style.color=e._state.panel_text_color,a.style.fontSize=e._state.panel_font_size+"rem",a.style.boxSizing="border-box";var l=t.querySelector(".flourish-popup-svg g");l.style.fill=e._state.popup_background,l.style.opacity=e._state.popup_background_opacity;var s=r.querySelector(".flourish-panel-close path");s&&(s.style.stroke=e._state.panel_text_color),0==e._state.popup_shadow?l.removeAttribute("filter"):l.setAttribute("filter","url(#dropshadow-"+e.popup.unique_id+")"),l.querySelector("rect").setAttribute("rx",e._state.popup_radius+"rem"),l.querySelector("path").style.display=e._state.popup_pointer?"block":"none",function(e){if(!document.querySelector("#popup-styles")){var t=document.createElement("style");t.id="popup-styles",document.head.appendChild(t)}var n=new Zn,r="block"==e._state.popup_header_type,i=Ii(e._state.popup_header_background||"transparent");i.opacity=e._state.popup_header_background?e._state.popup_background_opacity:0;var a=e._state.panel_position;n.select(".flourish-panel .flourish-panel-shadow").style("pointer-events","none").style("position","absolute").style("display","overlay"!=a&&e._state.panel_shadow?"block":"none").style("top","bottom"==a?"-3rem":"top"==a?"auto":0).style("right","left"==a?"-3rem":"right"==a?"auto":0).style("bottom","top"==a?"-3rem":"bottom"==a?"auto":0).style("left","right"==a?"-3rem":"left"==a?"auto":0).style("width","left"==a||"right"==a?"3rem":"100%").style("height","top"==a||"bottom"==a?"3rem":"100%").style("z-index","-1").style("overflow","hidden"),n.select(".flourish-panel .flourish-panel-shadow:before").style("content","''").style("display","block").style("position","absolute").style("width","left"==a||"right"==a?"1.5rem":"100%").style("height","top"==a||"bottom"==a?"1.5rem":"100%").style("border-radius","50%").style("background","rgba(0,0,0,0.3)").style("bottom","bottom"==a?"-50%":"top"==a?"auto":0).style("left","left"==a?"-50%":"right"==a?"auto":0).style("top","top"==a?"-50%":"bottom"==a?"auto":0).style("right","right"==a?"-50%":"left"==a?"auto":0).style("filter","blur(15px)"),n.select(".flourish-popup").style("pointer-events","none").select(".flourish-popup-content").style("pointer-events","auto").style("max-width",null==e._state.popup_width?null:e._state.popup_width+"rem !important"),n.select(".flourish-popup header, .flourish-panel header").style("margin","0"),n.select(".flourish-popup header").style("font-weight","bold").style("color",r?e._state.popup_header_text_color:null).style("background",r?i.rgb():null).style("padding",e._state.popup_padding+"rem").style("border-radius",e._state.popup_radius+"rem "+e._state.popup_radius+"rem 0 0"),n.select(".flourish-popup header:not(:last-child)").style("padding-bottom",r?null:"0"),n.select(".flourish-popup header:not(:last-child)").style("padding-bottom",r?null:"0"),n.select(".flourish-panel .flourish-panel-content-inner").style("overflow","auto"),n.select(".flourish-panel header").style("font-weight","bold").style("margin-bottom","0.5em").style("padding-right","1rem"),n.select(".flourish-popup .main-content").style("padding",e._state.popup_padding+"rem"),n.select(".flourish-popup header + .main-content").style("padding",e._state.popup_padding+"rem").style("padding-top",r?null:"0"),n.select(".flourish-popup h3, .flourish-panel h3").style("font-size","1em").style("margin","0"),n.select(".flourish-popup h3, .flourish-popup h4, .flourish-popup ul li").style("text-align",e._state.popup_align),n.select(".flourish-panel h3, .flourish-panel h4, .flourish-panel ul li").style("text-align",e._state.panel_align),n.select(".flourish-popup h4, .flourish-panel h4").style("font-size","1em").style("margin",r?"0":"0 0 0.25em").style("opacity","0.6").style("font-weight","normal"),n.select(".flourish-popup h4:empty, .flourish-panel h4:empty, .flourish-popup h3:empty, .flourish-panel h3:empty, .flourish-popup p:empty, .flourish-panel p:empty").style("display","none"),n.select(".flourish-popup p, .flourish-panel p").style("margin","0").style("font-size","inherit").style("font-weight","normal"),n.select(".flourish-popup table, .flourish-panel table").style("margin","0").style("width","100%").style("border-collapse","collapse").style("table-layout","auto"),n.select(".flourish-popup table tr, .flourish-panel table tr").style("border-top","1px solid #eee"),n.select(".flourish-popup table tr:first-child, .flourish-panel table tr:first-child").style("border-top","none"),n.select(".flourish-popup table tr td, .flourish-panel table tr td").style("padding","0.25em 0 0.25em 0").style("padding-inline-end","0.25em").style("vertical-align","top").style("font-size","inherit").style("text-align","start").style("font-weight","normal").style("overflow","hidden").style("text-overflow","ellipsis"),n.select(".flourish-popup table tr:last-child td, .flourish-panel table tr:last-child td").style("padding-bottom","0"),n.select(".flourish-popup .data-heading").style("font-weight",e._state.popup_list_label_weight).style("display","inline-block"),n.select(".flourish-panel .data-heading").style("font-weight",e._state.panel_list_label_weight).style("display","inline-block"),n.select(".flourish-popup table tr td.table-col-value, .flourish-panel table tr td.table-col-value").style("text-align","end").style("padding","0.25em 0 0.25em 0").style("padding-inline-end","0.25em"),n.select(".flourish-popup table tr:last-child td.table-col-value, .flourish-panel table tr:last-child td.table-col-value").style("padding-bottom","0"),n.select(".flourish-popup ul, .flourish-panel ul").style("padding","0").style("margin","0"),n.select(".flourish-popup ul li, .flourish-panel ul li").style("font-size","inherit").style("list-style-type","none"),e._state.popup_is_custom&&(console.log("is custom",e._state.popup_is_custom),n.select(".flourish-popup ul, .flourish-panel ul, .flourish-popup ol").style("padding-inline-start","1.5em").style("padding-inline-end","0.5em"),n.select(".flourish-popup ul li, .flourish-panel ul li").style("list-style-type","disc"),n.select(".flourish-popup ul li, .flourish-panel ul li").style("font-size","inherit").style("list-style-position","outside"),n.select(".flourish-popup ol li").style("padding-inline-start","0.5em")),document.head.querySelector("#popup-styles").innerHTML=n.print()}(e)}function yp(e,t,n){var r=this;for(var i in this._state=e,this._popup_default_template=null,this._panel_default_template=null,this._title_key="name",this._subtitle_key=null,this._first_load=!0,this._on_panel_close=null,this._show_default_content_timer=null,this._panel_container=t||document.body,this._popup_container=n||document.body,this._popup_directions=["top","bottom","left","right"],this._column_names=[],this._column_names_hidden=[],this._formatters=null,this._getLockedPosition=function(){return null},rp)null==e[i]&&(e[i]=rp[i]);this.panel=(new ep).container(this._panel_container).on("close",(function(){r._state.locked_id=null,r.popup.hide(),"function"==typeof r._on_panel_close&&r._on_panel_close()})),this.popup=Zd().container(this._popup_container).point(0,0).draw().hide()}function bp(e){e.popup._getElement().querySelector(".flourish-popup-content").style.pointerEvents="none"}function mp(e){e.popup._getElement().querySelector(".flourish-popup-content").style.pointerEvents="auto"}function gp(e){return e||0===e}yp.prototype.getLockedPosition=function(e){return"function"!=typeof e?console.error("Invalid function passed to @flourish/info-popup getLockedPosition"):this._getLockedPosition=e,this},yp.prototype.update=function(e){if(null!==this._state.locked_id&&"none"!=this._state.mode){var t=this._getLockedPosition(this._state.locked_id);t?this.click(t[0],t[1],this._state.locked_id,e):console.warn("@flourish/info-popup: failed to return value from getLockedPosition function")}else this.clickout()},yp.prototype.click=function(e,t,n,r){if("none"!=this._state.mode){var i="popup"==this._state.mode?"popup":"panel";this._checkIfPopupIsEmpty(t,i)?"panel"===i?this.hidePanel():this.hidePopup():(this._point(e),null!=n?(this._state.locked_id=n,mp(this)):this._state.locked_id=null,"panel"==i?(clearTimeout(this._show_default_content_timer),this.popup.hide(),this._drawPanel(t,r)):"popup"==i&&(this.panel.hide(),this._drawPopup(t,r)))}},yp.prototype.clickout=function(){this._state.locked_id=null,"both"!=this._state.mode&&"panel"!=this._state.mode||(this.popup.draw(),this.popup.hide(),"overlay"!=this._state.panel_position&&this._state.panel_side_fixed?this._showDefaultPanelContent():this.panel.hide()),"popup"==this._state.mode&&(this.panel.hide(),this.popup.draw(),this.popup.hide()),"none"==this._state.mode&&(this.panel.hide(),this.popup.draw(),this.popup.hide())},yp.prototype.touch=function(e,t,n,r){this.mouseover(e,t,r,!0,n)},yp.prototype.mouseover=function(e,t,n,r,i){var a="panel"==this._state.mode?"panel":"popup";if(this._checkIfPopupIsEmpty(t,a,"both"==this._state.mode))"panel"===a?this.hidePanel():this.hidePopup();else{var o=this;if("both"==this._state.mode)if(this._point(e),this._drawPopup(t,n,!0),r?mp(this):bp(this),r)o.popup._getElement().querySelector(".flourish-popup-content").onclick=function(){o.click(e,t,i,n)};if("popup"==this._state.mode){if(null!==this._state.locked_id)return;bp(this),this._point(e),this._drawPopup(t,n)}if("panel"==this._state.mode){if(null!==this._state.locked_id||"overlay"==this._state.panel_position)return;if(!this._state.panel_side_fixed)return;clearTimeout(this._show_default_content_timer),this._point(e),this._drawPanel(t,n)}}},yp.prototype.mouseout=function(){if("both"==this._state.mode&&this.popup.hide(),"popup"==this._state.mode){if(null!==this._state.locked_id)return;this.popup.hide()}if("panel"==this._state.mode){if(null!==this._state.locked_id)return;if("overlay"==this._state.panel_position||!this._state.panel_side_fixed)return;this._showDefaultPanelContent()}},yp.prototype.locked=function(){return this._state.locked_id},yp.prototype.mode=function(){return this._state.mode},yp.prototype.setColumnNames=function(e){return this._column_names=e,this},yp.prototype.hideColumnNames=function(e){return this._column_names_hidden=e,this},yp.prototype.setFormatters=function(e){var t={};for(var n in e)if("function"==typeof e[n])t[n]=e[n];else if(Array.isArray(e[n])){for(var r=[],i=0;i<e[n].length;i++){var a;a="function"==typeof e[n][i]?e[n][i]:Xn(e[n][i].output_format_id),r.push(a)}t[n]=r}else t[n]=Xn(e[n].output_format_id);return this._formatters=t,this},yp.prototype._showDefaultPanelContent=function(){var e=this;clearTimeout(this._show_default_content_timer),this._show_default_content_timer=setTimeout((function(){e.panel.html(e._state.panel_side_default_content),e._drawPanel()}),100),e._drawPanel()},yp.prototype._checkIfPopupIsEmpty=function(e,t,n){if(this._state.popup_is_custom)return""===("panel"===t?hp(this,e):pp(this,e,n)).trim();if(gp(e[this._title_key]))return!1;for(var r=Object.keys(this._column_names),i=0;i<r.length;i++){var a=r[i];if(!this._column_names_hidden.includes(a)){var o=e[a];if(Array.isArray(o)){for(let e=0;e<o.length;e++)if(gp(o[e]))return!1}else if(gp(o))return!1}}return!0},yp.prototype.getAccessiblePopupContent=function(e){return lp(this,e)},yp.prototype.onPanelClose=function(e){return this._on_panel_close=e,this},yp.prototype._drawPopup=function(e,t,n){return e&&this.popup.html(pp(this,e,n)),_p(this),this.popup.draw(),t&&t(this.popup._getElement(),e),this},yp.prototype._drawPanel=function(e,t){return _p(this),this.panel.open_duration(this._state.panel_open_duration).close_duration(this._state.panel_close_duration).width_overlay(this._state.panel_width_overlay).height_overlay(this._state.panel_height_overlay).vertical_position(this._state.panel_vertical_position).width_side(this._state.panel_width_side).height_side(this._state.panel_height_side).position(this._state.panel_position).max_width(this._state.panel_max_width).max_height(this._state.panel_max_height).closeable("overlay"==this._state.panel_position||!this._state.panel_side_fixed),void 0===e?this.panel.draw():this.panel.html(hp(this,e)).draw(),t&&t(this.panel._getElement(),e),this},yp.prototype.hidePanel=function(){return this.panel.hide(),this},yp.prototype.hidePopup=function(){return this.popup.hide(),this},yp.prototype.popupDirections=function(e){return e?(this._popup_directions=e,this):this._popup_directions.slice()},yp.prototype.margins=function(){return this.panel.margins()},yp.prototype._getBiggestGap=function(e){var t,n,r=this._popup_container.getBoundingClientRect(),i=0,a={right:(r.width+r.left-(e.width+e.left))/r.width,bottom:(r.height+r.top-(e.height+e.top))/r.height,left:(e.left-r.left)/r.width,top:(e.top-r.top)/r.height},o={right:["left","leftFlexible","topLeft","bottomLeft","bottomFlexible","bottom","topFlexible","top","bottomRight","topRight","rightFlexible","right"],left:["right","rightFlexible","topRight","bottomRight","top","topFlexible","bottom","bottomFlexible","bottomLeft","topLeft","leftFlexible","left"],top:["bottom","bottomFlexible","bottomRight","bottomLeft","rightFlexible","leftFlexible","right","left","topRight","topLeft","topFlexible","top"],bottom:["top","topFlexible","topLeft","topRight","left","right","leftFlexible","rightFlexible","bottomLeft","bottomRight","bottomFlexible","bottom"]};for(var l in a)this._popup_directions.indexOf(l)<0||a[l]>i&&(i=a[l],t=l,n=o[l]);var s=e.left,u=e.top;return"left"==t||"right"==t?u+=.5*e.height:"bottom"==t&&(u+=e.height),"top"==t||"bottom"==t?s+=.5*e.width:"right"==t&&(s+=e.width),{side:t,arrow_directions:n,x:s,y:u}},yp.prototype._point=function(e){var t,n,r=this._popup_directions;if(Array.isArray(e))t=e[0],n=e[1];else{if(!e||!e.getBoundingClientRect)return console.warn("@flourish/info-popup: Invalid positional value passed in point function, should be a coordinates array, or a node. Current value is",e),this;var i=e.getBoundingClientRect(),a=this._getBiggestGap(i);t=a.x,n=a.y,r=a.arrow_directions}return this.panel.point(e),this.popup.directions(r).point(t,n),this},yp.prototype.popupDefaultTemplate=function(e){return null!=e?(this._popup_default_template=e,this):this._popup_default_template},yp.prototype.panelDefaultTemplate=function(e){return null!=e?(this._panel_default_template=e,this):this._panel_default_template},yp.prototype.titleKey=function(e){return null!=e?(this._title_key=e,this):this._title_key},yp.prototype.subtitleKey=function(e){return null!=e?(this._subtitle_key=e,this):this._subtitle_key};var vp={root:null},wp="object"==typeof global&&global&&global.Object===Object&&global,xp="object"==typeof self&&self&&self.Object===Object&&self,kp=wp||xp||Function("return this")(),Mp=kp.Symbol,Ap=Object.prototype,zp=Ap.hasOwnProperty,Tp=Ap.toString,Cp=Mp?Mp.toStringTag:void 0;var Ep=Object.prototype.toString;var Sp=Mp?Mp.toStringTag:void 0;function Np(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Sp&&Sp in Object(e)?function(e){var t=zp.call(e,Cp),n=e[Cp];try{e[Cp]=void 0;var r=!0}catch(e){}var i=Tp.call(e);return r&&(t?e[Cp]=n:delete e[Cp]),i}(e):function(e){return Ep.call(e)}(e)}function Fp(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Lp(e){if(!Fp(e))return!1;var t=Np(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var Op,jp=kp["__core-js_shared__"],Dp=(Op=/[^.]+$/.exec(jp&&jp.keys&&jp.keys.IE_PROTO||""))?"Symbol(src)_1."+Op:"";var $p=Function.prototype.toString;function Pp(e){if(null!=e){try{return $p.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var Up=/^\[object .+?Constructor\]$/,Bp=Function.prototype,Hp=Object.prototype,qp=Bp.toString,Yp=Hp.hasOwnProperty,Rp=RegExp("^"+qp.call(Yp).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ip(e){return!(!Fp(e)||(t=e,Dp&&Dp in t))&&(Lp(e)?Rp:Up).test(Pp(e));var t}function Wp(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Ip(n)?n:void 0}var Vp=Wp(Object,"create");var Gp=Object.prototype.hasOwnProperty;var Xp=Object.prototype.hasOwnProperty;function Zp(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Jp(e,t){return e===t||e!=e&&t!=t}function Qp(e,t){for(var n=e.length;n--;)if(Jp(e[n][0],t))return n;return-1}Zp.prototype.clear=function(){this.__data__=Vp?Vp(null):{},this.size=0},Zp.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Zp.prototype.get=function(e){var t=this.__data__;if(Vp){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Gp.call(t,e)?t[e]:void 0},Zp.prototype.has=function(e){var t=this.__data__;return Vp?void 0!==t[e]:Xp.call(t,e)},Zp.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Vp&&void 0===t?"__lodash_hash_undefined__":t,this};var Kp=Array.prototype.splice;function eh(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}eh.prototype.clear=function(){this.__data__=[],this.size=0},eh.prototype.delete=function(e){var t=this.__data__,n=Qp(t,e);return!(n<0)&&(n==t.length-1?t.pop():Kp.call(t,n,1),--this.size,!0)},eh.prototype.get=function(e){var t=this.__data__,n=Qp(t,e);return n<0?void 0:t[n][1]},eh.prototype.has=function(e){return Qp(this.__data__,e)>-1},eh.prototype.set=function(e,t){var n=this.__data__,r=Qp(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var th=Wp(kp,"Map");function nh(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function rh(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}rh.prototype.clear=function(){this.size=0,this.__data__={hash:new Zp,map:new(th||eh),string:new Zp}},rh.prototype.delete=function(e){var t=nh(this,e).delete(e);return this.size-=t?1:0,t},rh.prototype.get=function(e){return nh(this,e).get(e)},rh.prototype.has=function(e){return nh(this,e).has(e)},rh.prototype.set=function(e,t){var n=nh(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function ih(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new rh;++t<n;)this.add(e[t])}function ah(e){return e!=e}function oh(e,t){return!!(null==e?0:e.length)&&function(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):function(e,t,n){for(var r=e.length,i=n+-1;++i<r;)if(t(e[i],i,e))return i;return-1}(e,ah,n)}(e,t,0)>-1}function lh(e,t){return e.has(t)}ih.prototype.add=ih.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},ih.prototype.has=function(e){return this.__data__.has(e)};var sh=Wp(kp,"Set");function uh(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var ch=sh&&1/uh(new sh([,-0]))[1]==1/0?function(e){return new sh(e)}:function(){};function dh(e,t,n){var r=-1,i=oh,a=e.length,o=!0,l=[],s=l;if(a>=200){var u=t?null:ch(e);if(u)return uh(u);o=!1,i=lh,s=new ih}else s=t?[]:l;e:for(;++r<a;){var c=e[r],d=t?t(c):c;if(c=0!==c?c:0,o&&d==d){for(var f=s.length;f--;)if(s[f]===d)continue e;t&&s.push(d),l.push(c)}else i(s,d,n)||(s!==l&&s.push(d),l.push(c))}return l}function fh(e){return e&&e.length?dh(e):[]}function ph(e){var t=this.__data__=new eh(e);this.size=t.size}function hh(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}ph.prototype.clear=function(){this.__data__=new eh,this.size=0},ph.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},ph.prototype.get=function(e){return this.__data__.get(e)},ph.prototype.has=function(e){return this.__data__.has(e)},ph.prototype.set=function(e,t){var n=this.__data__;if(n instanceof eh){var r=n.__data__;if(!th||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new rh(r)}return n.set(e,t),this.size=n.size,this};function _h(e,t,n,r,i,a){var o=1&n,l=e.length,s=t.length;if(l!=s&&!(o&&s>l))return!1;var u=a.get(e),c=a.get(t);if(u&&c)return u==t&&c==e;var d=-1,f=!0,p=2&n?new ih:void 0;for(a.set(e,t),a.set(t,e);++d<l;){var h=e[d],_=t[d];if(r)var y=o?r(_,h,d,t,e,a):r(h,_,d,e,t,a);if(void 0!==y){if(y)continue;f=!1;break}if(p){if(!hh(t,(function(e,t){if(!lh(p,t)&&(h===e||i(h,e,n,r,a)))return p.push(t)}))){f=!1;break}}else if(h!==_&&!i(h,_,n,r,a)){f=!1;break}}return a.delete(e),a.delete(t),f}var yh=kp.Uint8Array;function bh(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}var mh=Mp?Mp.prototype:void 0,gh=mh?mh.valueOf:void 0;var vh=Array.isArray;var wh=Object.prototype.propertyIsEnumerable,xh=Object.getOwnPropertySymbols,kh=xh?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}(xh(e),(function(t){return wh.call(e,t)})))}:function(){return[]};function Mh(e){return null!=e&&"object"==typeof e}function Ah(e){return Mh(e)&&"[object Arguments]"==Np(e)}var zh=Object.prototype,Th=zh.hasOwnProperty,Ch=zh.propertyIsEnumerable,Eh=Ah(function(){return arguments}())?Ah:function(e){return Mh(e)&&Th.call(e,"callee")&&!Ch.call(e,"callee")};var Sh="object"==typeof e&&e&&!e.nodeType&&e,Nh=Sh&&"object"==typeof module&&module&&!module.nodeType&&module,Fh=Nh&&Nh.exports===Sh?kp.Buffer:void 0,Lh=(Fh?Fh.isBuffer:void 0)||function(){return!1},Oh=/^(?:0|[1-9]\d*)$/;function jh(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&Oh.test(e))&&e>-1&&e%1==0&&e<t}function Dh(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}var $h={};$h["[object Float32Array]"]=$h["[object Float64Array]"]=$h["[object Int8Array]"]=$h["[object Int16Array]"]=$h["[object Int32Array]"]=$h["[object Uint8Array]"]=$h["[object Uint8ClampedArray]"]=$h["[object Uint16Array]"]=$h["[object Uint32Array]"]=!0,$h["[object Arguments]"]=$h["[object Array]"]=$h["[object ArrayBuffer]"]=$h["[object Boolean]"]=$h["[object DataView]"]=$h["[object Date]"]=$h["[object Error]"]=$h["[object Function]"]=$h["[object Map]"]=$h["[object Number]"]=$h["[object Object]"]=$h["[object RegExp]"]=$h["[object Set]"]=$h["[object String]"]=$h["[object WeakMap]"]=!1;var Ph,Uh="object"==typeof e&&e&&!e.nodeType&&e,Bh=Uh&&"object"==typeof module&&module&&!module.nodeType&&module,Hh=Bh&&Bh.exports===Uh&&wp.process,qh=function(){try{var e=Bh&&Bh.require&&Bh.require("util").types;return e||Hh&&Hh.binding&&Hh.binding("util")}catch(e){}}(),Yh=qh&&qh.isTypedArray,Rh=Yh?(Ph=Yh,function(e){return Ph(e)}):function(e){return Mh(e)&&Dh(e.length)&&!!$h[Np(e)]},Ih=Object.prototype.hasOwnProperty;function Wh(e,t){var n=vh(e),r=!n&&Eh(e),i=!n&&!r&&Lh(e),a=!n&&!r&&!i&&Rh(e),o=n||r||i||a,l=o?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],s=l.length;for(var u in e)!Ih.call(e,u)||o&&("length"==u||i&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||jh(u,s))||l.push(u);return l}var Vh=Object.prototype;var Gh=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),Xh=Object.prototype.hasOwnProperty;function Zh(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||Vh))return Gh(e);var t,n,r=[];for(var i in Object(e))Xh.call(e,i)&&"constructor"!=i&&r.push(i);return r}function Jh(e){return null!=(t=e)&&Dh(t.length)&&!Lp(t)?Wh(e):Zh(e);var t}function Qh(e){return function(e,t,n){var r=t(e);return vh(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,Jh,kh)}var Kh=Object.prototype.hasOwnProperty;var e_=Wp(kp,"DataView"),t_=Wp(kp,"Promise"),n_=Wp(kp,"WeakMap"),r_="[object Map]",i_="[object Promise]",a_="[object Set]",o_="[object WeakMap]",l_="[object DataView]",s_=Pp(e_),u_=Pp(th),c_=Pp(t_),d_=Pp(sh),f_=Pp(n_),p_=Np;(e_&&p_(new e_(new ArrayBuffer(1)))!=l_||th&&p_(new th)!=r_||t_&&p_(t_.resolve())!=i_||sh&&p_(new sh)!=a_||n_&&p_(new n_)!=o_)&&(p_=function(e){var t=Np(e),n="[object Object]"==t?e.constructor:void 0,r=n?Pp(n):"";if(r)switch(r){case s_:return l_;case u_:return r_;case c_:return i_;case d_:return a_;case f_:return o_}return t});var h_="[object Arguments]",__="[object Array]",y_="[object Object]",b_=Object.prototype.hasOwnProperty;function m_(e,t,n,r,i,a){var o=vh(e),l=vh(t),s=o?__:p_(e),u=l?__:p_(t),c=(s=s==h_?y_:s)==y_,d=(u=u==h_?y_:u)==y_,f=s==u;if(f&&Lh(e)){if(!Lh(t))return!1;o=!0,c=!1}if(f&&!c)return a||(a=new ph),o||Rh(e)?_h(e,t,n,r,i,a):function(e,t,n,r,i,a,o){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new yh(e),new yh(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Jp(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var l=bh;case"[object Set]":var s=1&r;if(l||(l=uh),e.size!=t.size&&!s)return!1;var u=o.get(e);if(u)return u==t;r|=2,o.set(e,t);var c=_h(l(e),l(t),r,i,a,o);return o.delete(e),c;case"[object Symbol]":if(gh)return gh.call(e)==gh.call(t)}return!1}(e,t,s,n,r,i,a);if(!(1&n)){var p=c&&b_.call(e,"__wrapped__"),h=d&&b_.call(t,"__wrapped__");if(p||h){var _=p?e.value():e,y=h?t.value():t;return a||(a=new ph),i(_,y,n,r,a)}}return!!f&&(a||(a=new ph),function(e,t,n,r,i,a){var o=1&n,l=Qh(e),s=l.length;if(s!=Qh(t).length&&!o)return!1;for(var u=s;u--;){var c=l[u];if(!(o?c in t:Kh.call(t,c)))return!1}var d=a.get(e),f=a.get(t);if(d&&f)return d==t&&f==e;var p=!0;a.set(e,t),a.set(t,e);for(var h=o;++u<s;){var _=e[c=l[u]],y=t[c];if(r)var b=o?r(y,_,c,t,e,a):r(_,y,c,e,t,a);if(!(void 0===b?_===y||i(_,y,n,r,a):b)){p=!1;break}h||(h="constructor"==c)}if(p&&!h){var m=e.constructor,g=t.constructor;m==g||!("constructor"in e)||!("constructor"in t)||"function"==typeof m&&m instanceof m&&"function"==typeof g&&g instanceof g||(p=!1)}return a.delete(e),a.delete(t),p}(e,t,n,r,i,a))}function g_(e,t,n,r,i){return e===t||(null==e||null==t||!Mh(e)&&!Mh(t)?e!=e&&t!=t:m_(e,t,n,r,g_,i))}function v_(e){return e==e&&!Fp(e)}function w_(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function x_(e){var t=function(e){for(var t=Jh(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,v_(i)]}return t}(e);return 1==t.length&&t[0][2]?w_(t[0][0],t[0][1]):function(n){return n===e||function(e,t,n,r){var i=n.length,a=i;if(null==e)return!a;for(e=Object(e);i--;){var o=n[i];if(o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++i<a;){var l=(o=n[i])[0],s=e[l],u=o[1];if(o[2]){if(void 0===s&&!(l in e))return!1}else if(!g_(u,s,3,r,new ph))return!1}return!0}(n,0,t)}}function k_(e){return"symbol"==typeof e||Mh(e)&&"[object Symbol]"==Np(e)}var M_=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,A_=/^\w*$/;function z_(e,t){if(vh(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!k_(e))||(A_.test(e)||!M_.test(e)||null!=t&&e in Object(t))}function T_(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(T_.Cache||rh),n}T_.Cache=rh;var C_=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,E_=/\\(\\)?/g,S_=function(e){var t=T_(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(C_,(function(e,n,r,i){t.push(r?i.replace(E_,"$1"):n||e)})),t}));var N_=Mp?Mp.prototype:void 0,F_=N_?N_.toString:void 0;function L_(e){if("string"==typeof e)return e;if(vh(e))return function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}(e,L_)+"";if(k_(e))return F_?F_.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function O_(e,t){return vh(e)?e:z_(e,t)?[e]:S_(function(e){return null==e?"":L_(e)}(e))}function j_(e){if("string"==typeof e||k_(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function D_(e,t){for(var n=0,r=(t=O_(t,e)).length;null!=e&&n<r;)e=e[j_(t[n++])];return n&&n==r?e:void 0}function $_(e,t){return null!=e&&t in Object(e)}function P_(e,t){return null!=e&&function(e,t,n){for(var r=-1,i=(t=O_(t,e)).length,a=!1;++r<i;){var o=j_(t[r]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&Dh(i)&&jh(o,i)&&(vh(e)||Eh(e))}(e,t,$_)}function U_(e,t){return z_(e)&&v_(t)?w_(j_(e),t):function(n){var r=function(e,t,n){var r=null==e?void 0:D_(e,t);return void 0===r?n:r}(n,e);return void 0===r&&r===t?P_(n,e):g_(t,r,3)}}function B_(e){return e}function H_(e){return z_(e)?(t=j_(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return D_(t,e)}}(e);var t}function q_(e,t){return e&&e.length?dh(e,"function"==typeof(n=t)?n:null==n?B_:"object"==typeof n?vh(n)?U_(n[0],n[1]):x_(n):H_(n)):[];var n}function Y_(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function R_(e,t){e instanceof Map?(e=[void 0,e],void 0===t&&(t=W_)):void 0===t&&(t=I_);for(var n,r,i,a,o,l=new X_(e),s=[l];n=s.pop();)if((i=t(n.data))&&(o=(i=Array.from(i)).length))for(n.children=i,a=o-1;a>=0;--a)s.push(r=i[a]=new X_(i[a])),r.parent=n,r.depth=n.depth+1;return l.eachBefore(G_)}function I_(e){return e.children}function W_(e){return Array.isArray(e)?e[1]:null}function V_(e){void 0!==e.data.value&&(e.value=e.data.value),e.data=e.data.data}function G_(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function X_(e){this.data=e,this.depth=this.height=0,this.parent=null}function Z_(e){for(var t,n,r=0,i=(e=function(e){for(var t,n,r=e.length;r;)n=Math.random()*r--|0,t=e[r],e[r]=e[n],e[n]=t;return e}(Array.from(e))).length,a=[];r<i;)t=e[r],n&&K_(n,t)?++r:(n=ty(a=J_(a,t)),r=0);return n}function J_(e,t){var n,r;if(ey(t,e))return[t];for(n=0;n<e.length;++n)if(Q_(t,e[n])&&ey(ny(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(Q_(ny(e[n],e[r]),t)&&Q_(ny(e[n],t),e[r])&&Q_(ny(e[r],t),e[n])&&ey(ry(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function Q_(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function K_(e,t){var n=e.r-t.r+1e-9*Math.max(e.r,t.r,1),r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function ey(e,t){for(var n=0;n<t.length;++n)if(!K_(e,t[n]))return!1;return!0}function ty(e){switch(e.length){case 1:return{x:(t=e[0]).x,y:t.y,r:t.r};case 2:return ny(e[0],e[1]);case 3:return ry(e[0],e[1],e[2])}var t}function ny(e,t){var n=e.x,r=e.y,i=e.r,a=t.x,o=t.y,l=t.r,s=a-n,u=o-r,c=l-i,d=Math.sqrt(s*s+u*u);return{x:(n+a+s/d*c)/2,y:(r+o+u/d*c)/2,r:(d+i+l)/2}}function ry(e,t,n){var r=e.x,i=e.y,a=e.r,o=t.x,l=t.y,s=t.r,u=n.x,c=n.y,d=n.r,f=r-o,p=r-u,h=i-l,_=i-c,y=s-a,b=d-a,m=r*r+i*i-a*a,g=m-o*o-l*l+s*s,v=m-u*u-c*c+d*d,w=p*h-f*_,x=(h*v-_*g)/(2*w)-r,k=(_*y-h*b)/w,M=(p*g-f*v)/(2*w)-i,A=(f*b-p*y)/w,z=k*k+A*A-1,T=2*(a+x*k+M*A),C=x*x+M*M-a*a,E=-(z?(T+Math.sqrt(T*T-4*z*C))/(2*z):C/T);return{x:r+x+k*E,y:i+M+A*E,r:E}}function iy(e,t,n){var r,i,a,o,l=e.x-t.x,s=e.y-t.y,u=l*l+s*s;u?(i=t.r+n.r,i*=i,o=e.r+n.r,i>(o*=o)?(r=(u+o-i)/(2*u),a=Math.sqrt(Math.max(0,o/u-r*r)),n.x=e.x-r*l-a*s,n.y=e.y-r*s+a*l):(r=(u+i-o)/(2*u),a=Math.sqrt(Math.max(0,i/u-r*r)),n.x=t.x+r*l-a*s,n.y=t.y+r*s+a*l)):(n.x=t.x+n.r,n.y=t.y)}function ay(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function oy(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,a=(t.y*n.r+n.y*t.r)/r;return i*i+a*a}function ly(e){this._=e,this.next=null,this.previous=null}function sy(e){if(!(i=(e=function(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}(e)).length))return 0;var t,n,r,i,a,o,l,s,u,c,d;if((t=e[0]).x=0,t.y=0,!(i>1))return t.r;if(n=e[1],t.x=-n.r,n.x=t.r,n.y=0,!(i>2))return t.r+n.r;iy(n,t,r=e[2]),t=new ly(t),n=new ly(n),r=new ly(r),t.next=r.previous=n,n.next=t.previous=r,r.next=n.previous=t;e:for(l=3;l<i;++l){iy(t._,n._,r=e[l]),r=new ly(r),s=n.next,u=t.previous,c=n._.r,d=t._.r;do{if(c<=d){if(ay(s._,r._)){n=s,t.next=n,n.previous=t,--l;continue e}c+=s._.r,s=s.next}else{if(ay(u._,r._)){(t=u).next=n,n.previous=t,--l;continue e}d+=u._.r,u=u.previous}}while(s!==u.next);for(r.previous=t,r.next=n,t.next=n.previous=n=r,a=oy(t);(r=r.next)!==n;)(o=oy(r))<a&&(t=r,a=o);n=t.next}for(t=[n._],r=n;(r=r.next)!==n;)t.push(r._);for(r=Z_(t),l=0;l<i;++l)(t=e[l]).x-=r.x,t.y-=r.y;return r.r}function uy(e){if("function"!=typeof e)throw new Error;return e}function cy(){return 0}function dy(e){return function(){return e}}function fy(e){return Math.sqrt(e.value)}function py(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function hy(e,t){return function(n){if(r=n.children){var r,i,a,o=r.length,l=e(n)*t||0;if(l)for(i=0;i<o;++i)r[i].r+=l;if(a=sy(r),l)for(i=0;i<o;++i)r[i].r-=l;n.r=a+l}}}function _y(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function yy(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function by(e,t,n,r,i){for(var a,o=e.children,l=-1,s=o.length,u=e.value&&(r-t)/e.value;++l<s;)(a=o[l]).y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*u}function my(e,t){return e.parent===t.parent?1:2}function gy(e){var t=e.children;return t?t[0]:e.t}function vy(e){var t=e.children;return t?t[t.length-1]:e.t}function wy(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function xy(e,t,n){return e.a.parent===t.parent?e.a:n}function ky(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function My(e,t,n,r,i){for(var a,o=e.children,l=-1,s=o.length,u=e.value&&(i-n)/e.value;++l<s;)(a=o[l]).x0=t,a.x1=r,a.y0=n,a.y1=n+=a.value*u}X_.prototype=R_.prototype={constructor:X_,count:function(){return this.eachAfter(Y_)},each:function(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this},eachAfter:function(e,t){for(var n,r,i,a=this,o=[a],l=[],s=-1;a=o.pop();)if(l.push(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r]);for(;a=l.pop();)e.call(t,a,++s,this);return this},eachBefore:function(e,t){for(var n,r,i=this,a=[i],o=-1;i=a.pop();)if(e.call(t,i,++o,this),n=i.children)for(r=n.length-1;r>=0;--r)a.push(n[r]);return this},find:function(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r},sum:function(e){return this.eachAfter((function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n}))},sort:function(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;e=n.pop(),t=r.pop();for(;e===t;)i=e,e=n.pop(),t=r.pop();return i}(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){return Array.from(this)},leaves:function(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e},links:function(){var e=this,t=[];return e.each((function(n){n!==e&&t.push({source:n.parent,target:n})})),t},copy:function(){return R_(this).eachBefore(V_)},[Symbol.iterator]:function*(){var e,t,n,r,i=this,a=[i];do{for(e=a.reverse(),a=[];i=e.pop();)if(yield i,t=i.children)for(n=0,r=t.length;n<r;++n)a.push(t[n])}while(a.length)}},ky.prototype=Object.create(X_.prototype);var Ay=(1+Math.sqrt(5))/2;function zy(e,t,n,r,i,a){for(var o,l,s,u,c,d,f,p,h,_,y,b=[],m=t.children,g=0,v=0,w=m.length,x=t.value;g<w;){s=i-n,u=a-r;do{c=m[v++].value}while(!c&&v<w);for(d=f=c,y=c*c*(_=Math.max(u/s,s/u)/(x*e)),h=Math.max(f/y,y/d);v<w;++v){if(c+=l=m[v].value,l<d&&(d=l),l>f&&(f=l),y=c*c*_,(p=Math.max(f/y,y/d))>h){c-=l;break}h=p}b.push(o={value:c,dice:s<u,children:m.slice(g,v)}),o.dice?by(o,n,r,i,x?r+=u*c/x:a):My(o,n,r,x?n+=s*c/x:i,a),x-=c,g=v}return b}var Ty=function e(t){function n(e,n,r,i,a){zy(t,e,n,r,i,a)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(Ay);var Cy=function e(t){function n(e,n,r,i,a){if((o=e._squarify)&&o.ratio===t)for(var o,l,s,u,c,d=-1,f=o.length,p=e.value;++d<f;){for(s=(l=o[d]).children,u=l.value=0,c=s.length;u<c;++u)l.value+=s[u].value;l.dice?by(l,n,r,i,p?r+=(a-r)*l.value/p:a):My(l,n,r,p?n+=(i-n)*l.value/p:i,a),p-=l.value}else e._squarify=o=zy(t,e,n,r,i,a),o.ratio=t}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(Ay);let Ey={Count:e=>e.reduce(((e,t)=>e+1),0),Sum:e=>e.reduce(((e,t)=>e+(isNaN(t.value)?0:t.value)),0)};function Sy(e,t){if(0===e.length||0===Dd.data.column_names.nest_columns.length)return[];let n=function(e){let t=Dd.data.column_names.nest_columns,n=Dd.data.column_names.size_columns.indexOf(Zu.size_by),r=e.map((e=>{let r={};for(let n=0;n<t.length;n++)r[t[n]]=e.nest_columns[n];return r.value=n>-1?e.size_columns[n]:0,r.original_data=e,r}));return r}(e);t&&(n=function(e){var t=e.filter((e=>e.value>=0));return t.length,e.length,t}(n));Dd.data.column_names.size_columns.length>0&&0===n.filter((e=>0!==e.value&&null!==e.value)).length&&(n=[]);let r=ui(),i=Dd.data.column_names.size_columns.length>0?Zu.aggregation_type:"Count";return Dd.data.column_names.nest_columns.forEach((e=>{r=r.key((t=>t[e]))})),r=r.rollup((e=>({values:e,rollup_value:Ey[i](e)}))),r=r.entries(n),r}function Ny(e){let t=e.ancestors().slice(0,-1).map((e=>e.data.key)).reverse();e.id=0===e.depth?"root":e.depth+"-"+t.join("-"),e.children&&e.children.forEach((e=>{Ny(e)}))}function Fy(e){e.children&&(e.children.sort(((e,t)=>e.value>t.value?-1:e.value<t.value?1:0)),e.children.forEach(Fy))}function Ly(e){e.children&&(e.children.sort(((e,t)=>e.data.key>t.data.key?1:e.data.key<t.data.key?-1:0)),e.children.forEach(Ly))}function Oy(e){void 0!==e&&e.forEach((e=>{e.level1_key=e.ancestors()[e.depth-1].data.key,Oy(e.children)}))}function jy(e){let t;return 0===e.length?(t=R_({}),t.id="root",t.value=0,t.data.key="",t.data.value=0,t):(t=R_({values:e},(e=>e.values)),t.descendants().forEach((e=>{e.data.column_name=Dd.data.column_names.nest_columns[e.depth-1]})),t.leaves().forEach((e=>{let t=e.data.value.values;1===t.length&&(e.data.unique_row=t[0].original_data),e.data.value=e.data.value.rollup_value})),t.sum((e=>e.value)),Ny(t),"value"===Zu.sort_by?Fy(t):"name"===Zu.sort_by&&Ly(t),Oy(t.children),t)}function Dy(e,t){if(!t)return null;let n=e.descendants();for(let e=0;e<n.length;e++){let r=n[e];if(r.id===t)return r}return null}function $y(e){if(!e)return null;let t=e.ancestors().slice(0,-1);return t=t.map((e=>e.data.key)),t.reverse(),t}function Py(e,t){let n=e.ancestors(),r=!1;for(let e=0;e<n.length;e++)n[e].id===t.id&&(r=!0);return r}var Uy=Object.freeze({categorical_type:"palette",categorical_palette:["#4328E7","#9654E5","#FF6283","#FF8800","#FFC502","#007D8E","#1AA7EE","#29DAE4","#88E99A","#019C00","#C11F1F","#730000"],categorical_extend:!0,categorical_custom_palette:"",numeric_type:"sequential",sequential_palette:"Blues",sequential_custom_min:"#F7F7F7",sequential_custom_max:"#FF6283",sequential_color_space:"rgb",sequential_reverse:!1,sequential_custom_domain:!1,sequential_domain_min:0,sequential_domain_max:1,diverging_palette:"RdBu",diverging_custom_min:"#1AA7EE",diverging_custom_mid:"#F7F7F7",diverging_custom_max:"#FF6283",diverging_color_space:"rgb",diverging_reverse:!1,diverging_custom_domain:!1,diverging_domain_min:0,diverging_domain_mid:.5,diverging_domain_max:1,binning:!1,bin_count:4,bin_mode:"fixed",bin_thresholds:""}),By=360/((1+Math.sqrt(5))/2),Hy="#FF0000";function qy(e,t,n){return function(r,i){Array.isArray(r)||(r=r?[r]:[Hy]),i=void 0!==i?i:By;var a=r.map((function(t){return e(t)})).filter((function(e){return!isNaN(e[t])&&!isNaN(e[n])}));a.length||(a=[e(Hy)]);var o,l=a.length,s=a.reduce((function(e,n){return e+n[t]}),0)/l,u=a.reduce((function(e,t){return e+t[n]}),0)/l,c=l;do{o=a[--c].h}while(isNaN(o)&&c>0);var d=0;return function(){var t=++d*i;return Ii(e((o+t)%360,s,u)).hex()}}}var Yy={hcl:qy(ka,"c","l"),hsl:qy(ia,"s","l")};function Ry(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function Iy(e){return Cc(e[e.length-1])}var Wy=Iy(new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Ry)),Vy=Iy(new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Ry)),Gy=Iy(new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Ry)),Xy=Iy(new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Ry)),Zy=Iy(new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Ry)),Jy=Iy(new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Ry)),Qy=Iy(new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Ry)),Ky=Iy(new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Ry)),eb=Iy(new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Ry)),tb=Iy(new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Ry)),nb=Iy(new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Ry)),rb=Iy(new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Ry)),ib=Iy(new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Ry)),ab=Iy(new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Ry)),ob=Iy(new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Ry)),lb=Iy(new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Ry)),sb=Iy(new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Ry)),ub=Iy(new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Ry)),cb=Iy(new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Ry)),db=Iy(new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Ry)),fb=Iy(new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Ry)),pb=Iy(new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Ry)),hb=Iy(new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Ry)),_b=Iy(new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Ry)),yb=Iy(new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Ry)),bb=Iy(new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Ry)),mb=Iy(new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Ry)),gb=Kc(ii(300,.5,0),ii(-240,.5,1)),vb=Kc(ii(-100,.75,.35),ii(80,1.5,.8)),wb=Kc(ii(260,.75,.35),ii(80,1.5,.8));function xb(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}ii();var kb=xb(Ry("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Mb=xb(Ry("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Ab=xb(Ry("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),zb=xb(Ry("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Tb(e,t){return e-t}function Cb(e,t){var n=t[0],r=t[t.length-1],i=fd().domain([n,r]),a=Math.floor(e.bin_count);return i.range(ic(a)),i.thresholds()}function Eb(e,t,n){var r;return r="fixed"==e.bin_mode?Cb(e,t):"quantile"==e.bin_mode?function(e,t,n){var r=dd().domain(n),i=Math.floor(e.bin_count);return r.range(ic(i)),r.quantiles()}(e,0,n):function(e){return e.bin_thresholds.split(";").map(parseFloat).filter((function(e){return!isNaN(e)&&null!==e})).sort(Tb)}(e),r}function Sb(e,t,n,r,i){for(var a=1+t;a<=e+t;a++)i.push(r(n(a)))}function Nb(e,t,n){var r=t.length,i=cd(),a=[];if(1===r)a.push(n(.5));else if(2===e.length)i.domain([1,r]).range([0,1]),Sb(r,0,i,n,a);else if(2===r)a.push(n(0)),a.push(n(1));else{var o,l,s=e[1],u=function(e,t){var n;return e.forEach((function(e,r){Math.abs(e-t)<.001&&(n=r)})),n}(t,s);u?(o=u,l=r-u-1,i.domain([1,o+1]).range([0,.5]),Sb(o,0,i,n,a),a.push(n(.5)),i.domain([1,l+1]).range([.5,1]),Sb(l,1,i,n,a)):(o=function(e,t){var n=0;return e.forEach((function(e){e<t&&n++})),n}(t,s),l=r-o,i.domain([1,o+1]).range([0,.5]),Sb(o,0,i,n,a),i.domain([1,l+1]).range([.5,1]),Sb(l,1,i,n,a))}return a}function Fb(e,t,n,r){var i,a=Eb(e,t,n),o=function(e,t,n){var r=[];if(0===t.length)return[.5*(e+n)];r.push(.5*(e+t[0]));for(var i=0;i<t.length-1;i++)r.push(.5*(t[i]+t[i+1]));return r.push(.5*(n+t[t.length-1])),r}(t[0],a,t[t.length-1]),l=Nb(t,o,r);(i="quantile"==e.bin_mode?dd().domain(n):pd().domain(a)).range(l);var s=function(e){return isNaN(e)||null===e?null:i(e)};return s.domain=Object.freeze(t),s.thresholds=Object.freeze(a),s.centers=Object.freeze(o),s}function Lb(e){return Array.isArray(e)?rc(e):[0,1]}var Ob=Object.freeze(["#efeca4","#e9e28f","#dccf64","#e3b23c","#e49547","#e37746","#dc5b36","#cb4144","#bb2244","#972545","#6a2c4f"]),jb=Object.freeze({Blues:pb,BuGn:tb,BuPu:nb,Carrots:Cc(Ob),Cool:wb,CubehelixDefault:gb,GnBu:rb,Greens:hb,Greys:_b,Inferno:Ab,Magma:Mb,Oranges:mb,OrRd:ib,Plasma:zb,PuBu:ob,PuBuGn:ab,PuRd:lb,Purples:yb,RdPu:sb,Reds:bb,Viridis:kb,Warm:vb,YlGn:cb,YlGnBu:ub,YlOrBr:db,YlOrRd:fb}),Db={hcl:Jc,hsl:Xc,lab:Zc,rgb:zc};function $b(e,t){var n=e.sequential_custom_domain?[e.sequential_domain_min,e.sequential_domain_max]:Lb(t),r=function(t){var n=jb[e.sequential_palette]||function(e){var t=e.sequential_color_space,n=e.sequential_custom_min,r=e.sequential_custom_max;return Db[t](n,r)}(e);return e.sequential_reverse?n(1-t):n(t)};if(e.binning)return Fb(e,n,t,r);var i=_d(r).domain(n),a=function(e){return isNaN(e)||null===e?null:i(e)};return a.domain=Object.freeze(n),a}var Pb=Object.freeze({BrBG:Wy,PiYG:Gy,PRGn:Vy,PuOr:Xy,RdBu:Zy,RdGy:Jy,RdYlBu:Qy,RdYlGn:Ky,Spectral:eb}),Ub={hcl:Jc,hsl:Xc,lab:Zc,rgb:zc};function Bb(e){var t=e.diverging_color_space,n=e.diverging_custom_min,r=e.diverging_custom_mid,i=e.diverging_custom_max;return function(e,t){for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return a[t](e-t)}}(Ub[t],[n,r,i])}var Hb=function(e){var t=null;for(var n in Uy)void 0===e[n]&&(e[n]=Uy[n]);var r=null,i=function(e){return t&&t(e)||r};return{getColor:i,updateColorScale:function(n){return"number"!=typeof n[0]?t=function(e,t){var n={},r=yi(t).values(),i=e.categorical_palette,a=i.length;if(e.categorical_extend){var o=Uy.rotation_angle,l=Yy.hcl(i,o);r.forEach((function(e,t){n[e]=t<a?i[t]:l()}))}else r.forEach((function(e,t){n[e]=i[t%a]}));e.categorical_custom_palette.split("\n").filter(Boolean).forEach((function(e){var t=e.lastIndexOf(":");if(-1!==t){var r=e.slice(0,t).trim(),i=e.slice(t+1).trim();r&&i&&(n[r]=i)}}));var s=function(e){return n[e]};return s.domain=r.slice(),s.colors=r.map((function(e){return n[e]})),s.items=r.map((function(e){return{label:e,color:n[e]}})),s}(e,n):"sequential"===e.numeric_type?t=$b(e,n):"diverging"===e.numeric_type&&(t=function(e,t){var n=Lb(t),r=n[0]<0&&n[1]>0?0:(n[0]+n[1])/2,i=[n[0],r,n[1]];e.diverging_custom_domain&&(i=[e.diverging_domain_min,e.diverging_domain_mid,e.diverging_domain_max]);var a=function(t){var n=Pb[e.diverging_palette]||Bb(e);return e.diverging_reverse?n(1-t):n(t)};if(e.binning)return Fb(e,i,t,a);var o=yd(a).domain(i),l=function(e){return isNaN(e)||null===e?null:o(e)};return l.domain=Object.freeze(i),l.midpoint=e.diverging_custom_domain?e.diverging_domain_mid:r,l}(e,n)),i.thresholds=t.thresholds,i.centers=t.centers,i.midpoint=t.midpoint,i.domain=t.domain,i.colors=t.colors,i.items=t.items,this},fallback:function(e){return void 0===e?r:(r="default"===e?null:e,this)}}}(Zu.color),qb=[];function Yb(e){return 180*e/Math.PI}function Rb(e){return e*Math.PI/180}function Ib(e){return e&&e.getTime?e.getTime():null}function Wb(){let e=Zu.color.categorical_custom_palette,t=[];return e.split("\n").filter(Boolean).forEach((function(e){var n=e.lastIndexOf(":");if(-1!==n){var r=e.slice(0,n).trim();r&&t.push(r)}})),t}function Vb(e){return Wb().indexOf(e)>-1}function Gb(e){return e.depth>1&&Vb(e.data.key)}function Xb(e,t){return 0===e.depth?"none":1===e.depth||Vb(e.data.key)?Hb.getColor(e.data.key):t?"white":Hb.getColor(e.level1_key)}function Zb(e){return Xb(e,!0)}function Jb(e){return Xb(e,!1)}function Qb(){return{low:16,medium:24,high:32}[Zu.cellPadding]}function Kb(e){return"allUpperCase"===Zu.label_case||(!(!e||"bottomUpperCase"!==Zu.label_case)||!e&&"topUpperCase"===Zu.label_case)}function em(e){return"allBold"===Zu.label_weight||e&&"bottomBold"===Zu.label_weight?"bold":e||"topBold"!==Zu.label_weight?"normal":"bold"}function tm(e,t,n){let r=Sa(e+"...",n||"");if(t-r-8>0)return e;let i=Math.floor(e.length*t/r);return i=Math.max(0,i-3),(e=e.slice(0,i)).length>0&&(e+="…"),e}function nm(){return vp.root.leaves()[0].depth+1}function rm(){return Dy(vp.root,Zu.zoomed_node_id)||vp.root}function im(e){if(0===e.depth)return!1;if(!e.display.visible)return!1;if(null===Zu.zoomed_node_id)return!0;if(!e.parent)return!1;const t=e.ancestors();for(let e=0;e<t.length;e++)if(t[e].id===Zu.zoomed_node_id)return!0;return!1}function am(e,t,n,r,i,a){let o=10*(t-2*r)/Sa(e,"10px "+i+(a?" bold":"")),l=Math.max(0,n-2*r);return Math.min(o,l)}function om(e,t,n,r,i,a){let o=function(e){const t=e.split(/\s+/g);return t[t.length-1]||t.pop(),t[0]||t.shift(),t}(e),l=t&&""!==t;l&&o.push(t);let s=[],u={text:""},c=r+"px "+a;for(let e=0;e<o.length;e++){if(s.length*r>i)return[];let t=o[e];if(Sa(t,c)>n)return[];if(l&&e===o.length-1)u={text:t},s.push(u);else if(""===u.text)u.text=t,s.push(u);else{let e=u.text+" "+t;Sa(e,c)<=n?u.text=e:(u={text:t},s.push(u))}}return s=s.map((function(e){return e.text})),s}function lm(e,t,n,r,i,a){let o=om(e,t,n,r,i,a).length;return o>0?o*r:1/0}function sm(e,t,n,r,i,a,o,l,s){let u=.5*(n+r),c=lm(e,t,i,Math.pow(2,u),a,s);return c<=a&&u>o&&(o=u),0===l?o:c<a?sm(e,t,u,r,i,a,o,l-1,s):sm(e,t,n,u,i,a,o,l-1,s)}function um(e,t,n,r,i,a,o,l,s){let u=Math.max(0,n-2*i),c=Math.max(0,r-2*i);if(lm(e,t,u,o,c,s)<=c){return{lines:om(e,t,u,o,c,s),size:o}}if(a>c)return{lines:[],size:a};if(lm(e,"",u,a,c,s)>c){let t=function(e,t,n,r,i){let a=om(e,null,t,n,1/0,i);if(0===a.length)return[];let o=Math.floor(r/n);if(0===o)return[];let l=a.slice(0,o),s=l.slice(-1)[0].slice(0,-3)+"…";return l[l.length-1]=s,l}(e,u,a,c,s);if(0===t.length)t=[tm(e,u,a+"px "+s)];return{lines:t,size:a}}let d=lm(e,t,u,a,c,s)<=c?t:"",f=Math.log(a)/Math.log(2),p=sm(e,d,f,Math.log(o)/Math.log(2),u,c,f,2,s),h=Math.pow(2,p);return{lines:om(e,d,u,h,c,s),size:h}}function cm(){return Zu.bar_axis_labels_above?Ea(Zu.bar_axis_label_size):0}function dm(e,t){let n=e/t-Zu.bar_bar_padding-cm();return n=Math.min(n,Zu.bar_max_bar_thickness),n=Math.max(n,Zu.bar_min_bar_thickness),n}function fm(e){return"never"!==e&&("editor"!==e||"editor"===Flourish.environment||"story_editor"===Flourish.environment)}const pm=Gn(Zu.size_by_number_formatter),hm=Gn(Zu.filter_number_formatter);let _m,ym,bm,mm,gm=e=>e,vm=e=>e;function wm(){!function(){let e=Dd.data.column_names.size_columns.indexOf(Zu.size_by);if(-1===e)return;let t=Dd.data.metadata.size_columns;gm=pm(t[e].output_format_id)}(),function(){let e=Dd.data.metadata.filter;if(void 0===e)return;let t=e.output_format_id;switch(e.type){case"datetime":vm=Xn(t);break;case"number":vm=hm(t);break;default:vm=e=>e}}()}function xm(){let e=Dd.data.metadata.filter;return void 0===e?[]:q_(Dd.data.map((function(e){return e.filter})),"datetime"===e.type?Ib:e=>e)}function km(e){return Zu.filter_include_all?[Zu.filter_all_label].concat(e):e}function Mm(){bm="filter"in Dd.data.column_names;let e=bm&&fm(Zu.filter_control_visibility);if(pw.visible(e),_m&&!bm&&(pw.remove(),_m=!1,Zu.filter=null),!bm)return;_m||(ww.add([pw]),pw.on("change",(function(e){Zu.filter=e,Zv()})),_m=!0);let t=xm(),n=km(t);var r;pw.options(n).format(vm,Zu.filter_include_all?[Zu.filter_all_label]:[]).value(Zu.filter),pw.update(),function(e){let t=e.map(vm);return e.length===fh(t).length}(t)||(r="Two or more filter values result in the same formatted value.",Flourish.warn?Flourish.warn(r):console.warn(r))}function Am(){mm=Dd.data.column_names.size_columns.length>1;let e=mm&&fm(Zu.size_by_control_visibility);if(hw.visible(e),ym&&!mm&&(hw.remove(),ym=!1),!mm)return;let t=Dd.data.column_names.size_columns.map((e=>e));ym||(ww.add([hw]),hw.on("change",(function(e){Zu.size_by=e,Zv()})),ym=!0),hw.options(t).value(Zu.size_by).update()}const zm={x:10,y:10},Tm={x:10,y:10},Cm=40,Em=.2,Sm="#ffffff",Nm="#333333",Fm=10;var Lm,Om,jm,Dm,$m,Pm,Um,Bm,Hm,qm;const Ym=Rm("(prefers-reduced-motion: reduce)");function Rm(e){if("function"!=typeof window.matchMedia)return()=>!1;const t=window.matchMedia(e);let n=t.matches;return t.addEventListener("change",(e=>{n=e.matches}),!1),function(){return n}}function Im(e){let t=e.id||e.data.id;e.display&&!1===e.display.visible||Dv||"root"===t||(!function(e,t){let n=Dy(vp.root,t.id);if(!fw(n))return;let r=sw(n),i=iw(n);ew.locked()||ew.setColumnNames(r.column_names).setFormatters(r.formatters);ew.mouseover(i,r.datum)}(0,e),"popup"!==Zu.popup.mode&&"both"!==Zu.popup.mode||rw(e.id),ew.locked()||Kv("updateHighlightedNode",t))}function Wm(e){var t;e.display&&!1===e.display.visible||Dv||(t=Q.relatedTarget,tw.contains(t)||(ew.mouseout(),ew.locked()||(rw(null),Kv("updateHighlightedNode",null))))}function Vm(e){e.display&&!1===e.display.visible||Dv||(Q.stopPropagation(),0!==e.height&&Kv("zoomToNode",e))}function Gm(e){e.display&&!1===e.display.visible||Dv||("Enter"===Q.key?Vm(e):"Escape"===Q.key&&Wm(e))}function Xm(){ue(this).on("mouseover",Im).on("mouseout",Wm).on("click",Vm).on("keydown",Gm)}Rm("(prefers-color-scheme: dark)");var Zm={treemapBinary:function(e,t,n,r,i){var a,o,l=e.children,s=l.length,u=new Array(s+1);for(u[0]=o=a=0;a<s;++a)u[a+1]=o+=l[a].value;!function e(t,n,r,i,a,o,s){if(t>=n-1){var c=l[t];return c.x0=i,c.y0=a,c.x1=o,void(c.y1=s)}var d=u[t],f=r/2+d,p=t+1,h=n-1;for(;p<h;){var _=p+h>>>1;u[_]<f?p=_+1:h=_}f-u[p-1]<u[p]-f&&t+1<p&&--p;var y=u[p]-d,b=r-y;if(o-i>s-a){var m=r?(i*b+o*y)/r:o;e(t,p,y,i,a,m,s),e(p,n,b,m,a,o,s)}else{var g=r?(a*b+s*y)/r:s;e(t,p,y,i,a,o,g),e(p,n,b,i,g,o,s)}}(0,s,e.value,t,n,r,i)},treemapResquarify:Cy,treemapSlice:My,treemapDice:by,treemapSliceDice:function(e,t,n,r,i){(1&e.depth?My:by)(e,t,n,r,i)}},Jm=function(){var e=Ty,t=!1,n=1,r=1,i=[0],a=cy,o=cy,l=cy,s=cy,u=cy;function c(e){return e.x0=e.y0=0,e.x1=n,e.y1=r,e.eachBefore(d),i=[0],t&&e.eachBefore(yy),e}function d(t){var n=i[t.depth],r=t.x0+n,c=t.y0+n,d=t.x1-n,f=t.y1-n;d<r&&(r=d=(r+d)/2),f<c&&(c=f=(c+f)/2),t.x0=r,t.y0=c,t.x1=d,t.y1=f,t.children&&(n=i[t.depth+1]=a(t)/2,r+=u(t)-n,c+=o(t)-n,(d-=l(t)-n)<r&&(r=d=(r+d)/2),(f-=s(t)-n)<c&&(c=f=(c+f)/2),e(t,r,c,d,f))}return c.round=function(e){return arguments.length?(t=!!e,c):t},c.size=function(e){return arguments.length?(n=+e[0],r=+e[1],c):[n,r]},c.tile=function(t){return arguments.length?(e=uy(t),c):e},c.padding=function(e){return arguments.length?c.paddingInner(e).paddingOuter(e):c.paddingInner()},c.paddingInner=function(e){return arguments.length?(a="function"==typeof e?e:dy(+e),c):a},c.paddingOuter=function(e){return arguments.length?c.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):c.paddingTop()},c.paddingTop=function(e){return arguments.length?(o="function"==typeof e?e:dy(+e),c):o},c.paddingRight=function(e){return arguments.length?(l="function"==typeof e?e:dy(+e),c):l},c.paddingBottom=function(e){return arguments.length?(s="function"==typeof e?e:dy(+e),c):s},c.paddingLeft=function(e){return arguments.length?(u="function"==typeof e?e:dy(+e),c):u},c}();function Qm(e,t,n){e.display.x0=t(e.x0),e.display.x1=t(e.x1),e.display.y0=n(e.y0),e.display.y1=n(e.y1),void 0!==e.children&&e.children.forEach((e=>{Qm(e,t,n)}))}function Km(e,t,n){e.children.forEach((e=>{e.display.x0=t(e.display.x0),e.display.x1=t(e.display.x1),e.display.y0=n(e.display.y0),e.display.y1=n(e.display.y1),e.display.x1<e.display.x0&&(e.display.x1=e.display.x0),e.display.y1<e.display.y0&&(e.display.y1=e.display.y0),e.children&&Km(e,t,n)}))}function eg(e,t){if(!e.children)return;Km(e,cd().domain([e.display.x0,e.display.x1]).range([e.display.x0+t,e.display.x1-t]),cd().domain([e.display.y0,e.display.y1]).range([e.display.y0+t,e.display.y1-t])),e.children.forEach((e=>{eg(e,t)}))}function tg(e,t){if(e.display.top_label="",!1===e.display.visible_leaf&&0!==e.depth){let r=Qb(),i=e.display.x1-e.display.x0-2*r,a=e.data.key,o="'"+Zu.layout.body_font.name+"'";if(Zu.zoomed_node_id&&Zu.zoomed_node_id===e.id){var n=$y(e);a=n?n.join(" | "):""}Kb(!1)&&(a=a.toUpperCase()),e.display.top_label=tm(a,i,"10px "+o),e.display.top_label_font_size=11;let l=.5*(r-16),s=e.display.x1-e.display.x0,u=4+l;e.display.top_label_x=Xu?s-u:u,e.display.top_label_y=12+l,e.display.top_label_opacity=e.depth<t.depth?0:1}e.display.top_label_weight=em(!1),e.children&&e.children.forEach((e=>{tg(e,t)}))}function ng(e){let t=e.display.x1-e.display.x0,n=e.display.y1-e.display.y0,r=Ea(Zu.min_label_size),i=Ea(Zu.max_label_size),a=e.data.key,o="'"+Zu.layout.body_font.name+"'";if(e.display.multi_line_label=!1,e.display.multi_line_center_label_lines=[],e.display.visible&&e.display.visible_leaf){Kb(!0)&&(a=a.toUpperCase());let l=Zu.show_value_labels?gm(e.value):"";if(Zu.multi_line_labels||0===Zu.size_by_number_formatter.prefix.indexOf(":")||(l=" "+l),Zu.multi_line_labels){e.display.multi_line_label=!0;let s=um(a,l,t,n,Ea(Zu.label_padding),r,i,0,o),u=-.5*s.lines.length*s.size;e.display.multi_line_center_label_lines=s.lines.map(((e,t)=>{let n=s.size,r=em(!0),i=u+(t+.8)*n;if(Zu.show_value_labels&&t===s.lines.length-1){n*=Zu.value_label_relative_size,r=Zu.value_label_bold?"bold":"normal";let e=3;i-=.8*(s.size-n)-e}return{text:e,size:n,weight:r,line_offset:i}}))}else if(r>n)e.display.center_label_text="",e.display.value_text="",e.display.center_label_font_size=0;else{let i=!0,s=am(a+l,t,n,Ea(Zu.label_padding),o);s=Math.min(Ea(Zu.max_label_size),s),s<r&&(i=!1,s=am(a,t,n,Ea(Zu.label_padding),o),s=Math.min(Ea(Zu.max_label_size),s),s<r&&(a=tm(a,t,r+"px "+o))),e.display.center_label_text=a,e.display.center_value_text=i?l:null,e.display.center_label_font_size=s,e.display.center_label_weight=em(!0)}}e.display.center_label_x=.5*t,e.display.center_label_y=.5*n,e.children&&e.children.forEach((e=>{ng(e)}))}function rg(e,t,n){let r=[Math.max(t-2,0),Math.max(n-2,0)],i=Qb(),a=Math.min(r[0],r[1]);i=Math.min(i,.5*a);var o=Zm[Zu.treemap_type];"treemapResquarify"==Zu.treemap_type&&(o=o.ratio(Zu.treemap_ratio)),Jm.size(r).tile(o),Jm(e);let l=cd(),s=cd();l.domain([0,r[0]]).range([0,r[0]]),s.domain([0,r[1]]).range([0,r[1]]);var u=rm();if("root"!==u.id){if(!u)return Kv("zoomOut");l.domain([u.x0,u.x1]),s.domain([u.y0,u.y1])}else l.domain([i,r[0]-i]),s.domain([i,r[1]-i]);Qm(e,l,s),eg(u||e,i),tg(e,u),ng(e)}let ig=null;function ag(e){ig=e}function og(e){if(null!=Zu.label_color)return Zu.label_color;var t=Jb(e),n="sunburst"===Zu.hierarchy_layout?1-Zu.sunburst_depth_fade:Em,r=Math.min(Zu.num_of_visible_levels,e.depth+e.height)-1,i=zc("white",t)(Math.pow(1-n,r));return"none"===t||ao(i)?Nm:Sm}function lg(e,t){ue(this).style("fill",Zb).style("stroke",Zu.stroke_color||Zu.layout.background_color).style("display",e.display.visible?"inline":"none").style("cursor",e.children&&Zu.zoomed_node_id!==e.id?"pointer":"default").transition().duration(t).attr("width",e.display.x1-e.display.x0).attr("height",e.display.y1-e.display.y0).attr("tabindex",(e=>im(e)?"0":null)).attr("aria-label",uw)}function sg(e,t){e.display.visible&&!0===e.display.visible_leaf&&(ue(this).attr("dy","0.33em").text(e.display.center_label_text).style("font-weight",e.display.center_label_weight).transition("font-size").duration(t).style("font-size",e.display.center_label_font_size+"px"),ue(this).append("tspan").style("font-weight",Zu.value_label_bold?"bold":"normal").style("font-size",Zu.value_label_relative_size+"em").text(e.display.center_value_text)),ue(this).transition().duration(t).style("opacity",!0!==e.display.visible||!0!==e.display.visible_leaf||e.display.multi_line_label?0:1).attr("x",e.display.center_label_x).attr("y",e.display.center_label_y)}function ug(e,t){let n=e.display.multi_line_center_label_lines;if(ue(this).transition("label-center").duration(t).attr("transform","translate("+e.display.center_label_x+","+e.display.center_label_y+")"),JSON.stringify(this.__current_multi_lines)===JSON.stringify(n.map((e=>e.text))))return ue(this).transition("center-label").duration(t).style("opacity",!0===e.display.visible&&!0===e.display.visible_leaf&&e.display.multi_line_label?1:0),void ue(this).selectAll("tspan").data(n).transition("center-label").duration(t).style("font-weight",(e=>e.weight)).style("font-size",(e=>e.size+"px")).attr("y",(e=>e.line_offset));ue(this).transition("center-label").duration(.5*t).style("opacity",0).on("end",(function(){ue(this).transition("center-label").duration(.5*t).style("opacity",!0===e.display.visible&&!0===e.display.visible_leaf&&e.display.multi_line_label?1:0);var r=ue(this).selectAll("tspan").data(n);r.enter().append("tspan").merge(r).text((function(e){return e.text})).transition("center-label").duration(0).style("font-size",(e=>e.size+"px")).style("font-weight",(e=>e.weight)).attr("x",0).attr("y",(e=>e.line_offset)),r.exit().remove(),this.__current_multi_lines=n.map((e=>e.text))}))}function cg(e,t){0!==e.depth&&(ue(this).style("display",!0===e.display.visible&&!1===e.display.visible_leaf?"inline":"none").style("fill",og).style("font-weight",e.display.top_label_weight).transition().duration(t).style("opacity",e.display.top_label_opacity),!1===e.display.visible_leaf&&ue(this).attr("x",e.display.top_label_x).attr("y",e.display.top_label_y).style("font-size",e.display.top_label_font_size+"px").text(e.display.top_label))}function dg(){$m.selectAll("g").select("rect").style("opacity",(e=>{if(!1===e.display.visible)return 0;var t=Gb(e);let n=t||1==e.depth?1:Em,r=1==e.depth||t?.8:2;return n*(e.id===ig?r:1)}))}function fg(e,t,n){let r=!1===e||Ym()?0:1e3*Zu.animation_duration;if($m.transition().duration(r).style("opacity","treemap"===Zu.hierarchy_layout?1:0).on("end",(function(){"treemap"!==Zu.hierarchy_layout&&$m.selectAll("g").remove()})),"treemap"!==Zu.hierarchy_layout)return;rg(vp.root,t,n);let i=$m.selectAll("g").data(vp.root.descendants(),(e=>e.id)),a=i.enter().append("g").attr("class",(e=>window.Flourish.cypress?e.id:null)).classed("node",!0).attr("transform",(e=>"translate("+[e.display.x0,e.display.y0]+")"));a.append("rect").attr("width",(e=>e.display.x1-e.display.x0)).attr("height",(e=>e.display.y1-e.display.y0)).style("stroke-width",1),a.append("text").classed("text-center",!0).attr("x",(e=>e.display.center_label_x)).attr("y",(e=>e.display.center_label_y)).style("pointer-events","none").style("font-size","0px").style("font-weight","normal").style("text-anchor","middle"),a.append("text").classed("text-center-multiline",!0).attr("transform",(e=>"translate("+e.display.center_label_x+","+e.display.center_label_y+")")).style("pointer-events","none").style("font-weight","normal").style("text-anchor","middle"),a.append("text").classed("text-top",!0).style("pointer-events","none").style("font-size","11px"),a.merge(i).transition().duration(r).attr("transform",(function(e){return"translate("+[e.display.x0,e.display.y0]+")"})),a.each(Xm),a.merge(i).style("pointer-events",(function(e){return e.display.visible?"all":"none"})).select("rect").each((function(e){lg.call(this,e,r)})),a.merge(i).select("text.text-center").style("fill",og).each((function(e){sg.call(this,e,r)})),a.merge(i).select("text.text-center-multiline").style("fill",og).each((function(e){ug.call(this,e,r)})),a.merge(i).select("text.text-top").each((function(e){cg.call(this,e,r)})),i.exit().remove(),dg()}function pg(){ue(this).on("mouseover",Im).on("mouseout",Wm).on("keydown",Gm).on("click",(e=>{if(e.display.visible&&!Dv){if(Q.stopPropagation(),0===e.height){let t=rm(),n=e.path(t);if(!(n.length>2))return;Kv("zoomToNode",n[n.length-2])}Kv("zoomToNode",e)}}))}var hg=function(){var e=null,t=1,n=1,r=cy;function i(i){return i.x=t/2,i.y=n/2,e?i.eachBefore(py(e)).eachAfter(hy(r,.5)).eachBefore(_y(1)):i.eachBefore(py(fy)).eachAfter(hy(cy,1)).eachAfter(hy(r,i.r/Math.min(t,n))).eachBefore(_y(Math.min(t,n)/(2*i.r))),i}return i.radius=function(t){return arguments.length?(e=function(e){return null==e?null:uy(e)}(t),i):e},i.size=function(e){return arguments.length?(t=+e[0],n=+e[1],i):[t,n]},i.padding=function(e){return arguments.length?(r="function"==typeof e?e:dy(+e),i):r},i}();function _g(e,t,n,r){e.display.x=t(e.x),e.display.y=n(e.y),e.display.r=r(e.r),void 0!==e.children&&e.children.forEach((e=>{_g(e,t,n,r)}))}function yg(e){let t,n=Math.max(e.display.r-Fm,0);if(e.children)if(e.display.visible_leaf||!e.display.visible)t=!1;else if(e.display.r<30)t=!1;else if(1===e.children.length){t=e.display.r-e.children[0].display.r>10,t&&(n=.5*(e.display.r+e.children[0].display.r)-3),e.children[0].display.visible_leaf&&(t=!0)}else{let n=cc(e.children.map((e=>e.display.r)));e.display.max_child_r=n,t=e.display.r-n>10}else t=!1;e.display.enough_space_for_top_label=t,e.display.top_label_path_r=n,e.children&&e.children.forEach((e=>{yg(e)}))}function bg(e){let t;if(e.display.top_label_visible=e.display.visible,0===e.depth)t="";else if(0===e.height)t="";else if(e.display.visible_leaf)t="";else if(e.display.visible)if(Zu.zoomed_node_id&&e.depth<rm().depth)t="";else if(e.display.enough_space_for_top_label)if(Zu.zoomed_node_id===e.id){t=$y(e).join(" > ")}else{let n=function(e){let t=e.ancestors().slice(1,-1),n=[];for(let e=0;e<t.length;e++){let r=t[e];if(r.display.enough_space_for_top_label)break;n.push(r)}return n}(e);if(n.reverse(),n.length>0){t=n.map((e=>e.data.key)).join(" > ")+" > "+e.data.key}else t=e.data.key}else t="";else t="";let n=tm(t,Math.PI*e.display.r);Kb(!1)&&(n=n.toUpperCase()),e.display.top_label_text=n,""===n&&(e.display.top_label_visible=!1),e.display.top_label_weight=em(!1),e.children&&e.children.forEach((e=>{bg(e)}))}function mg(e){let t=e.display.r,n=2.2*Math.sqrt(t*t/2),r="'"+Zu.layout.body_font.name+"'",i=Ea(Zu.min_label_size),a=Ea(Zu.max_label_size),o=e.data.key;if(e.display.multi_line_label=!1,e.display.multi_line_center_label_lines=[],e.display.visible&&e.display.visible_leaf){Kb(!0)&&(o=o.toUpperCase());let l=Zu.show_value_labels?gm(e.value):"";if(Zu.multi_line_labels||0===Zu.size_by_number_formatter.prefix.indexOf(":")||(l=" "+l),Zu.multi_line_labels){e.display.multi_line_label=!0;let t=um(o,l,n,n,Ea(Zu.label_padding),i,a,0,r),s=-.5*t.lines.length*t.size;e.display.multi_line_center_label_lines=t.lines.map(((e,n)=>{let r=t.size,i=em(!0),a=s+(n+.8)*r;if(Zu.show_value_labels&&n===t.lines.length-1){r*=Zu.value_label_relative_size,i=Zu.value_label_bold?"bold":"normal";let e=3;a-=.8*(t.size-r)-e}return{text:e,size:r,weight:i,line_offset:a}}))}else if(i>2*t)e.display.center_label_text="",e.display.value_text="",e.display.center_label_font_size=0;else{let n=!0,a=am(o+l,2*t,2*t,Ea(Zu.label_padding),r);a=Math.min(Ea(Zu.max_label_size),a),a<i&&(n=!1,a=am(o,2*t,2*t,Ea(Zu.label_padding),r),a=Math.min(Ea(Zu.max_label_size),a),a<i&&(o=tm(o,2*t,i+"px "+r))),e.display.center_label_text=o,e.display.center_value_text=n?l:null,e.display.center_label_font_size=a,e.display.center_label_weight=em(!0)}}e.children&&e.children.forEach((e=>{mg(e)}))}function gg(e,t,n){let r=t-2*zm.x,i=n-2*zm.y;r=Math.max(0,r),i=Math.max(0,i);let a=Math.min(4,Math.min(r,i));hg.size([r,i]).padding(a),hg(e),"root"===e.id&&0===e.height&&(e.r=0);let o=cd(),l=cd(),s=cd();o.domain([0,r]).range([0,r]),l.domain([0,i]).range([0,i]);var u=rm();if("root"!==u.id){if(!u)return Kv("zoomOut");let e,t;r>i?(t=2*u.r,e=t*(r/i),s.range([0,i/t])):(e=2*u.r,t=e*(i/r),s.range([0,r/e]));let n=u.x-.5*e,a=u.x+.5*e,c=u.y-.5*t,d=u.y+.5*t;o.domain([n,a]),l.domain([c,d])}_g(e,o,l,s),yg(e),bg(e),mg(e)}function vg(e,t){ue(this).style("fill",Zb).style("display",e.display.visible?"inline":"none").style("cursor",e.children&&Zu.zoomed_node_id!==e.id?"pointer":"default").transition().duration(t).attr("r",e.display.r).attr("tabindex",(e=>im(e)?"0":null)).attr("aria-label",uw)}function wg(e,t){e.display.visible&&!0===e.display.visible_leaf&&(ue(this).attr("dy","0.33em").text(e.display.center_label_text).style("fill",og).style("font-weight",e.display.center_label_weight).transition("font-size").duration(t).style("font-size",e.display.center_label_font_size+"px"),ue(this).append("tspan").style("font-weight",Zu.value_label_bold?"bold":"normal").style("font-size",Zu.value_label_relative_size+"em").text(e.display.center_value_text)),ue(this).transition().duration(t).style("opacity",!0===e.display.visible&&!0===e.display.visible_leaf?1:0)}function xg(e,t){let n=e.display.multi_line_center_label_lines;if(JSON.stringify(this.__current_multi_lines)===JSON.stringify(n.map((e=>e.text))))return ue(this).transition("center-label").duration(t).style("opacity",!0===e.display.visible&&!0===e.display.visible_leaf&&e.display.multi_line_label?1:0),void ue(this).selectAll("tspan").data(n).transition("center-label").duration(t).style("font-weight",(e=>e.weight)).style("font-size",(e=>e.size+"px")).attr("y",(e=>e.line_offset));ue(this).transition("center-label").duration(.5*t).style("opacity",0).on("end",(function(){ue(this).transition("center-label").duration(.5*t).style("opacity",!0===e.display.visible&&!0===e.display.visible_leaf&&e.display.multi_line_label?1:0);var r=ue(this).selectAll("tspan").data(n);r.enter().append("tspan").merge(r).text((function(e){return e.text})).transition("center-label").duration(0).style("font-size",(e=>e.size+"px")).style("font-weight",(e=>e.weight)).attr("x",0).attr("y",(e=>e.line_offset)),r.exit().remove(),this.__current_multi_lines=n.map((e=>e.text))}))}function kg(e,t){if(0===e.depth)return;let n=e.display.top_label_path_r;ue(this).transition().duration(t).attr("d",`M-0.5,${n} A${n},${n} 0 1,1 0.5,${n}`)}const Mg=cd().domain([30,60]).range([-.1,0]).clamp(!0);function Ag(e,t){0!==e.depth&&(ue(this).transition().duration(t).style("opacity",!0===e.display.top_label_visible?1:0),!1===e.display.visible_leaf&&ue(this).select("textPath").style("fill",og).style("font-weight",(e=>e.display.top_label_weight)).style("letter-spacing",(e=>Mg(e.display.r)+"em")).text(e.display.top_label_text))}function zg(){Pm.selectAll("g").select("circle").style("opacity",(e=>{if(!1===e.display.visible)return 0;var t=Gb(e);let n=t||1==e.depth?1:.2,r=1==e.depth||t?.8:2;return n*(e.id===ig?r:1)}))}function Tg(e,t,n){let r=!1===e||Ym()?0:1e3*Zu.animation_duration;if(Pm.transition().duration(r).style("opacity","circlePacking"===Zu.hierarchy_layout?1:0).on("end",(function(){"circlePacking"!==Zu.hierarchy_layout&&Pm.selectAll("g").remove()})),"circlePacking"!==Zu.hierarchy_layout)return;gg(vp.root,t,n);let i=Pm.selectAll("g").data(vp.root.descendants(),(e=>e.id)),a=i.enter().append("g").attr("transform",(function(e){return"translate("+[e.display.x,e.display.y]+")"})).classed("node",!0);a.append("circle"),a.append("text").classed("text-center",!0).style("font-weight","normal").style("text-anchor","middle").style("font-size","0px").style("pointer-events","none"),a.append("text").classed("text-center-multiline",!0).style("pointer-events","none").style("font-weight","normal").style("text-anchor","middle"),a.append("path").classed("label-path",!0).attr("id",(e=>"pack-label-path-"+e.id)).attr("d",(()=>{let e=-Fm;return`M-0.5,${e} A${e},${e} 0 1,1 0.5,${e}`})).style("fill","none"),a.append("text").classed("text-top",!0).style("opacity",0).append("textPath").attr("href",(e=>"#pack-label-path-"+e.id)).attr("startOffset","50%").style("text-anchor","middle").style("pointer-events","none").style("font-weight","bold").style("font-size","11px"),a.merge(i).transition().duration(r).attr("transform",(function(e){return"translate("+[e.display.x,e.display.y]+")"})),a.each(pg),a.merge(i).select("circle").each((function(e){vg.call(this,e,r)})),a.merge(i).select("text.text-center").each((function(e){wg.call(this,e,r)})),a.merge(i).select("text.text-center-multiline").style("fill",og).each((function(e){xg.call(this,e,r)})),a.merge(i).select("path.label-path").each((function(e){kg.call(this,e,r)})),a.merge(i).select("text.text-top").each((function(e){Ag.call(this,e,r)})),i.exit().remove(),zg()}function Cg(){ue(this).on("mouseover",Im).on("mouseout",Wm).on("click",Vm).on("keydown",Gm)}var Eg=function(){var e=1,t=1,n=0,r=!1;function i(i){var a=i.height+1;return i.x0=i.y0=n,i.x1=e,i.y1=t/a,i.eachBefore(function(e,t){return function(r){r.children&&by(r,r.x0,e*(r.depth+1)/t,r.x1,e*(r.depth+2)/t);var i=r.x0,a=r.y0,o=r.x1-n,l=r.y1-n;o<i&&(i=o=(i+o)/2),l<a&&(a=l=(a+l)/2),r.x0=i,r.y0=a,r.x1=o,r.y1=l}}(t,a)),r&&i.eachBefore(yy),i}return i.round=function(e){return arguments.length?(r=!!e,i):r},i.size=function(n){return arguments.length?(e=+n[0],t=+n[1],i):[e,t]},i.padding=function(e){return arguments.length?(n=+e,i):n},i}();function Sg(e,t){e.display=e.display||{},e.display.visible=!0,e.display.isTopVisibleLevel=e.depth===t,e.display.opacity=Math.pow(Zu.sunburst_depth_fade,e.depth-1),void 0!==e.children&&e.children.forEach((e=>{Sg(e,t)}))}function Ng(e,t){t&&t.id===e.id||0===e.height?e.display.cursorType="default":e.display.cursorType="pointer",void 0!==e.children&&e.children.forEach((e=>{Ng(e,t)}))}function Fg(e,t,n){e.display=e.display||{},e.display.a0=n(e.x0),e.display.a1=n(e.x1),e.display.r0=t(e.y0),e.display.r1=t(e.y1),e.display.rMid=.5*(e.display.r0+e.display.r1),void 0!==e.children&&e.children.forEach((e=>{Fg(e,t,n)}))}function Lg(e){let t=e.display.r1-e.display.r0;t*=.9,t=Math.max(t,0);let n=.5*(e.display.r0+e.display.r1)*(e.display.a1-e.display.a0);n*=.9,n=Math.max(n,0);let r=0===e.display.r0&&0===e.display.a0&&e.display.a1===2*Math.PI,i="radial"===Zu.sunburst_labelling||"circular"!==Zu.sunburst_labelling&&t>n,a=r?"center":i?"radial":"circular",o="'"+Zu.layout.body_font.name+"'",l=Ea(Zu.min_label_size),s=Ea(Zu.max_label_size);e.display.radialLabel="",e.display.circularLabel="",e.display.centerLabel="";let u=e.data.key,c=Zu.show_value_labels?gm(e.value):"";0!==Zu.size_by_number_formatter.prefix.indexOf(":")&&(c=" "+c),e.display.radialLabelOpacity=0,e.display.circularLabelOpacity=0,e.display.centerLabelOpacity=0,e.display.fontSize=0;let d=0,f=e.display.isTopVisibleLevel;if(e.depth>0)switch(Kb(!f)&&(u=u.toUpperCase()),a){case"radial":e.display.radialLabel=u,e.display.radialValueLabel=c,e.display.radialLabelOpacity=1,d=am(u+c,t,n,4,o,Zu.sunburst_bold_labels);break;case"circular":e.display.circularLabel=u,e.display.circularValueLabel=c,e.display.circularLabelOpacity=1,d=am(u+c,n,t,4,o,Zu.sunburst_bold_labels);break;case"center":e.display.centerLabel=u,e.display.centerValueLabel=c,e.display.centerLabelOpacity=1,d=am(u+c,2*t,.5*t,Ea(Zu.label_padding),o,Zu.sunburst_bold_labels)}d=Math.min(s,d),d<l&&(e.display.circularLabel="",e.display.circularValueLabel="",e.display.radialLabel="",e.display.radialValueLabel="",e.display.centerLabel="",e.display.centerValueLabel=""),e.display.fontSize=d,e.display.fontWeight=em(!f),void 0!==e.children&&e.children.forEach((e=>{Lg(e)}))}function Og(e,t,n){let r=.5*Math.min(t-2*Tm.x,n-2*Tm.y),i=nm();Eg.size([2*Math.PI,i]),Eg(e);let a=Zu.sunburst_show_zoomed_node_in_center?0:r*Zu.sunburst_inner_radius/100,o=cd().range([a,r*Zu.sunburst_outer_radius/100]).clamp(!0),l=cd().range([0,2*Math.PI]).clamp(!0),s=Zu.zoomed_node_id?Dy(e,Zu.zoomed_node_id):e,u=s.depth,c=Zu.sunburst_show_zoomed_node_in_center?u:Math.max(u,1),d=Math.min(u+Zu.num_of_visible_levels+1,i);if(u>0&&!s)return Kv("zoomOut");o.domain([c,d]),l.domain([s.x0,s.x1]),Fg(e,o,l),Sg(e,u),Ng(e,s),Lg(e)}var jg=Math.PI,Dg=2*jg,$g=1e-6,Pg=Dg-$g;function Ug(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Bg(){return new Ug}function Hg(e){return function(){return e}}Ug.prototype=Bg.prototype={constructor:Ug,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,l=n-e,s=r-t,u=a-e,c=o-t,d=u*u+c*c;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(d>$g)if(Math.abs(c*l-s*u)>$g&&i){var f=n-a,p=r-o,h=l*l+s*s,_=f*f+p*p,y=Math.sqrt(h),b=Math.sqrt(d),m=i*Math.tan((jg-Math.acos((h+d-_)/(2*y*b)))/2),g=m/b,v=m/y;Math.abs(g-1)>$g&&(this._+="L"+(e+g*u)+","+(t+g*c)),this._+="A"+i+","+i+",0,0,"+ +(c*f>u*p)+","+(this._x1=e+v*l)+","+(this._y1=t+v*s)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,r,i,a){e=+e,t=+t,a=!!a;var o=(n=+n)*Math.cos(r),l=n*Math.sin(r),s=e+o,u=t+l,c=1^a,d=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+s+","+u:(Math.abs(this._x1-s)>$g||Math.abs(this._y1-u)>$g)&&(this._+="L"+s+","+u),n&&(d<0&&(d=d%Dg+Dg),d>Pg?this._+="A"+n+","+n+",0,1,"+c+","+(e-o)+","+(t-l)+"A"+n+","+n+",0,1,"+c+","+(this._x1=s)+","+(this._y1=u):d>$g&&(this._+="A"+n+","+n+",0,"+ +(d>=jg)+","+c+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var qg=Math.abs,Yg=Math.atan2,Rg=Math.cos,Ig=Math.max,Wg=Math.min,Vg=Math.sin,Gg=Math.sqrt,Xg=1e-12,Zg=Math.PI,Jg=Zg/2,Qg=2*Zg;function Kg(e){return e>=1?Jg:e<=-1?-Jg:Math.asin(e)}function ev(e){return e.innerRadius}function tv(e){return e.outerRadius}function nv(e){return e.startAngle}function rv(e){return e.endAngle}function iv(e){return e&&e.padAngle}function av(e,t,n,r,i,a,o){var l=e-n,s=t-r,u=(o?a:-a)/Gg(l*l+s*s),c=u*s,d=-u*l,f=e+c,p=t+d,h=n+c,_=r+d,y=(f+h)/2,b=(p+_)/2,m=h-f,g=_-p,v=m*m+g*g,w=i-a,x=f*_-h*p,k=(g<0?-1:1)*Gg(Ig(0,w*w*v-x*x)),M=(x*g-m*k)/v,A=(-x*m-g*k)/v,z=(x*g+m*k)/v,T=(-x*m+g*k)/v,C=M-y,E=A-b,S=z-y,N=T-b;return C*C+E*E>S*S+N*N&&(M=z,A=T),{cx:M,cy:A,x01:-c,y01:-d,x11:M*(i/w-1),y11:A*(i/w-1)}}var ov=function(){var e=ev,t=tv,n=Hg(0),r=null,i=nv,a=rv,o=iv,l=null;function s(){var s,u,c=+e.apply(this,arguments),d=+t.apply(this,arguments),f=i.apply(this,arguments)-Jg,p=a.apply(this,arguments)-Jg,h=qg(p-f),_=p>f;if(l||(l=s=Bg()),d<c&&(u=d,d=c,c=u),d>Xg)if(h>Qg-Xg)l.moveTo(d*Rg(f),d*Vg(f)),l.arc(0,0,d,f,p,!_),c>Xg&&(l.moveTo(c*Rg(p),c*Vg(p)),l.arc(0,0,c,p,f,_));else{var y,b,m=f,g=p,v=f,w=p,x=h,k=h,M=o.apply(this,arguments)/2,A=M>Xg&&(r?+r.apply(this,arguments):Gg(c*c+d*d)),z=Wg(qg(d-c)/2,+n.apply(this,arguments)),T=z,C=z;if(A>Xg){var E=Kg(A/c*Vg(M)),S=Kg(A/d*Vg(M));(x-=2*E)>Xg?(v+=E*=_?1:-1,w-=E):(x=0,v=w=(f+p)/2),(k-=2*S)>Xg?(m+=S*=_?1:-1,g-=S):(k=0,m=g=(f+p)/2)}var N=d*Rg(m),F=d*Vg(m),L=c*Rg(w),O=c*Vg(w);if(z>Xg){var j,D=d*Rg(g),$=d*Vg(g),P=c*Rg(v),U=c*Vg(v);if(h<Zg&&(j=function(e,t,n,r,i,a,o,l){var s=n-e,u=r-t,c=o-i,d=l-a,f=d*s-c*u;if(!(f*f<Xg))return[e+(f=(c*(t-a)-d*(e-i))/f)*s,t+f*u]}(N,F,P,U,D,$,L,O))){var B=N-j[0],H=F-j[1],q=D-j[0],Y=$-j[1],R=1/Vg(function(e){return e>1?0:e<-1?Zg:Math.acos(e)}((B*q+H*Y)/(Gg(B*B+H*H)*Gg(q*q+Y*Y)))/2),I=Gg(j[0]*j[0]+j[1]*j[1]);T=Wg(z,(c-I)/(R-1)),C=Wg(z,(d-I)/(R+1))}}k>Xg?C>Xg?(y=av(P,U,N,F,d,C,_),b=av(D,$,L,O,d,C,_),l.moveTo(y.cx+y.x01,y.cy+y.y01),C<z?l.arc(y.cx,y.cy,C,Yg(y.y01,y.x01),Yg(b.y01,b.x01),!_):(l.arc(y.cx,y.cy,C,Yg(y.y01,y.x01),Yg(y.y11,y.x11),!_),l.arc(0,0,d,Yg(y.cy+y.y11,y.cx+y.x11),Yg(b.cy+b.y11,b.cx+b.x11),!_),l.arc(b.cx,b.cy,C,Yg(b.y11,b.x11),Yg(b.y01,b.x01),!_))):(l.moveTo(N,F),l.arc(0,0,d,m,g,!_)):l.moveTo(N,F),c>Xg&&x>Xg?T>Xg?(y=av(L,O,D,$,c,-T,_),b=av(N,F,P,U,c,-T,_),l.lineTo(y.cx+y.x01,y.cy+y.y01),T<z?l.arc(y.cx,y.cy,T,Yg(y.y01,y.x01),Yg(b.y01,b.x01),!_):(l.arc(y.cx,y.cy,T,Yg(y.y01,y.x01),Yg(y.y11,y.x11),!_),l.arc(0,0,c,Yg(y.cy+y.y11,y.cx+y.x11),Yg(b.cy+b.y11,b.cx+b.x11),_),l.arc(b.cx,b.cy,T,Yg(b.y11,b.x11),Yg(b.y01,b.x01),!_))):l.arc(0,0,c,w,v,_):l.lineTo(L,O)}else l.moveTo(0,0);if(l.closePath(),s)return l=null,s+""||null}return s.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Zg/2;return[Rg(r)*n,Vg(r)*n]},s.innerRadius=function(t){return arguments.length?(e="function"==typeof t?t:Hg(+t),s):e},s.outerRadius=function(e){return arguments.length?(t="function"==typeof e?e:Hg(+e),s):t},s.cornerRadius=function(e){return arguments.length?(n="function"==typeof e?e:Hg(+e),s):n},s.padRadius=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:Hg(+e),s):r},s.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:Hg(+e),s):i},s.endAngle=function(e){return arguments.length?(a="function"==typeof e?e:Hg(+e),s):a},s.padAngle=function(e){return arguments.length?(o="function"==typeof e?e:Hg(+e),s):o},s.context=function(e){return arguments.length?(l=null==e?null:e,s):l},s}();function lv(e,t){0!==e.depth&&(ue(this).style("cursor",e.display.cursorType).select("path").style("fill",Jb).style("stroke",Zu.stroke_color||Zu.layout.background_color).style("stroke-width","0.5").style("display",e.display.visible?"inline":"none").attr("tabindex",(e=>im(e)?"0":null)).attr("aria-label",uw),ue(this).select("text.radial-label").style("font-weight",e.display.fontWeight).text(e.display.radialLabel).append("tspan").style("font-weight",Zu.value_label_bold?"bold":null).style("font-size",Zu.value_label_relative_size+"em").text(e.display.radialValueLabel),ue(this).attr("dy","0.33em").select("text.circular-label textPath").style("font-weight",e.display.fontWeight).text(e.display.circularLabel).append("tspan").style("font-weight",Zu.value_label_bold?"bold":null).style("font-size",Zu.value_label_relative_size+"em").text(e.display.circularValueLabel),ue(this).select("text.center-label").style("font-weight",e.display.fontWeight).text(e.display.centerLabel).append("tspan").style("font-weight",Zu.value_label_bold?"bold":null).style("font-size",Zu.value_label_relative_size+"em").text(e.display.centerValueLabel),ue(this).transition().duration(t).tween("sunburst",(function(e){let t=this,n=ue(t).select("path.segment"),r=ue(t).select("text.radial-label"),i=ue(t).select("text.circular-label"),a=ue(t).select("path.label-path"),o=ue(t).select("text.center-label");t.__curTweenState=t.__curTweenState||{a0:e.display.a0,a1:e.display.a1,r0:e.display.r0,r1:e.display.r1,radialLabelOpacity:e.display.radialLabelOpacity,circularLabelOpacity:e.display.circularLabelOpacity,centerLabelOpacity:e.display.centerLabelOpacity,fontSize:e.display.fontSize};let l=t.__curTweenState,s=$c(l.a0,e.display.a0),u=$c(l.a1,e.display.a1),c=$c(l.r0,e.display.r0),d=$c(l.r1,e.display.r1),f=$c(l.radialLabelOpacity,e.display.radialLabelOpacity),p=$c(l.circularLabelOpacity,e.display.circularLabelOpacity),h=$c(l.centerLabelOpacity,e.display.centerLabelOpacity),_=$c(l.fontSize,e.display.fontSize);return function(e){t.__curTweenState.a0=s(e),t.__curTweenState.a1=u(e),t.__curTweenState.r0=c(e),t.__curTweenState.r1=d(e),t.__curTweenState.radialLabelOpacity=f(e),t.__curTweenState.circularLabelOpacity=p(e),t.__curTweenState.centerLabelOpacity=h(e),t.__curTweenState.fontSize=_(e);let l=s(e),y=u(e),b=c(e),m=d(e);n.attr("d",ov({startAngle:l,endAngle:y,innerRadius:b,outerRadius:m})).style("stroke-width",y-l==0?0:.5);let g=Yb(.5*(s(e)+u(e)))-90,v=.5*(b+m);r.style("opacity",f(e)).style("font-size",Math.floor(_(e))+"px").attr("transform",g>90?`rotate(${g-180})translate(${-v}, 0)`:`rotate(${g})translate(${v}, 0)`),i.style("font-size",Math.floor(_(e))+"px").style("opacity",p(e)),o.style("opacity",h(e)).style("font-size",Math.floor(_(e))+"px");let w=v*Math.sin(s(e))+1e-4,x=-v*Math.cos(s(e)),k=v*Math.sin(u(e))-1e-4,M=-v*Math.cos(u(e)),A=u(e)-s(e)>=Math.PI?1:0,z=.5*(s(e)+u(e)),T=z>.5*Math.PI&&z<1.5*Math.PI?`M${k},${M} A${v},${v} 0 ${A},0 ${w},${x}`:`M${w},${x} A${v},${v} 0 ${A},1 ${k},${M}`;a.attr("d",T)}})).on("end",(function(){ue(this).select("text.radial-label").text((e=>e.display.radialLabel)).append("tspan").style("font-weight",Zu.value_label_bold?"bold":"normal").style("font-size",Zu.value_label_relative_size+"em").text((e=>e.display.radialValueLabel)),ue(this).select("text.circular-label textPath").text((e=>e.display.circularLabel)).append("tspan").style("font-weight",Zu.value_label_bold?"bold":"normal").style("font-size",Zu.value_label_relative_size+"em").text(e.display.circularValueLabel),ue(this).select("text.center-label").text((e=>e.display.centerLabel)).append("tspan").style("font-weight",Zu.value_label_bold?"bold":"normal").style("font-size",Zu.value_label_relative_size+"em").text(e.display.centerValueLabel)})))}function sv(){Um.selectAll("g").select("path").style("opacity",(e=>{if(!1===e.display.visible)return 0;return(Gb(e)||1==e.depth?1:e.display.opacity)*(e.id===ig?.8:1)}))}function uv(e,t,n){let r=!1===e||Ym()?0:1e3*Zu.animation_duration;if(Um.transition().duration(r).style("opacity","sunburst"===Zu.hierarchy_layout?1:0).on("end",(function(){"sunburst"!==Zu.hierarchy_layout&&Um.selectAll("g").remove()})),"sunburst"!==Zu.hierarchy_layout)return;Og(vp.root,t,n),Um.attr("transform",`translate(${.5*t}, ${.5*n})`);let i=Um.selectAll("g").data(vp.root.descendants(),(e=>e.id)),a=i.enter().append("g").classed("node",!0);a.append("path").classed("segment",!0),a.append("text").classed("radial-label",!0).style("text-anchor","middle").attr("dy","0.33em").style("pointer-events","none"),a.append("path").classed("label-path",!0).style("fill","none").attr("id",(e=>"sunburst-label-path-"+e.id)),a.append("text").classed("circular-label",!0).attr("dy","0.33em").append("textPath").attr("xlink:xlink:href",(e=>"#sunburst-label-path-"+e.id)).attr("startOffset","50%").style("text-anchor","middle").style("pointer-events","none"),a.append("text").classed("center-label",!0).style("text-anchor","middle").attr("dy","0.33em").style("pointer-events","none"),a.each(Cg),a.merge(i).each((function(e){lv.call(this,e,r)})),a.merge(i).select(".radial-label").style("fill",og),a.merge(i).select(".circular-label").style("fill",og),a.merge(i).select(".center-label").style("fill",og),i.exit().remove(),sv()}function cv(){ue(this).select("rect").on("mouseover",Im).on("mouseout",Wm).on("click",Vm).on("keydown",Gm),ue(this).select(".axis-label").on("click",(e=>{Dv||(Q.stopPropagation(),Kv("zoomToNode",e))}))}function dv(){return.7*Zu.bar_axis_label_space*Ea(Zu.bar_axis_label_size)}function fv(e){let t="'"+Zu.layout.body_font.name+"'",n=e.data.key;n&&Kb(!0)&&(n=n.toUpperCase());let r=.2*e.display.thickness;e.display.fontSize=Math.min(Ea(Zu.label_size),e.display.thickness-2*r),e.display.fontWeight=em(!0),e.display.barLabelText=tm(n,.9*e.display.l,e.display.fontSize+"px "+t),e.display.barLabelX=e.display.x+.5*e.display.l,e.display.barLabelY=e.display.y+.5*e.display.thickness,e.display.axisLabelY=Zu.bar_axis_labels_above?e.display.y:e.display.barLabelY,e.display.axisLabelDy=Zu.bar_axis_labels_above?"-0.2em":"0.33em",e.display.axisLabelDx=Zu.bar_axis_labels_above?"0em":"-0.3em",e.display.axisLabelSize=Ea(Zu.bar_axis_label_size),e.display.valueLabelX=e.display.x+e.display.l+Ea(.5),e.display.valueLabelY=e.display.barLabelY,e.display.valueLabelText=gm(e.value)}function pv(e,t,n,r){e.display=e.display||{};let i="",a=nm(),o=Math.min(a-1-t.depth,Zu.num_of_visible_levels);if(e.display.visible=Py(e,t)&&e.depth-t.depth===o,e.depth>0){i=e.data.key,Kb(!1)&&(i=i.toUpperCase());let t=Zu.bar_axis_labels_above?n:dv(),r="'"+Zu.layout.body_font.name+"'";i=tm(i,t,e.display.axisLabelSize+"px "+r)}e.display.axisLabelText=i,e.display.axisLabelVisible=Py(e,t)&&t.depth===e.depth-1,e.display.axisFontWeight=em(!1),e.display.valueLabelVisible=Zu.show_value_labels&&Py(e,t)&&t.depth===e.depth-1,e.display.fill=Jb(e),e.children&&(!function(e,t){let n=t.ancestors(),r=!1;for(let t=0;t<n.length;t++)n[t].id===e.id&&(r=!0);return r}(e,t)?function(e){let t=cd().domain([0,e.value]).range([0,e.display.l]),n=e.display.x;e.children.forEach((r=>{r.display=r.display||{},r.display.x=n,r.display.l=t(r.value),r.display.y=e.display.y,r.display.thickness=e.display.thickness,fv(r),r.display.barLabelVisible=!0,n+=t(r.value)}))}(e):function(e,t,n){let r,i,a=[0,Math.max(t-5,0)],o=cc(e.children,(e=>e.value)),l=cd().domain([0,o]).range(a);Zu.bar_max_value&&l.domain([0,Zu.bar_max_value]);let s=cm();if(Zu.auto_set_height&&!1===Flourish.fixed_height)r=Zu.bar_min_bar_thickness;else{let t=n-Cm,i=e.children.length;r=dm(t,i)}i=r+Zu.bar_bar_padding+s,e.children.forEach(((e,t)=>{e.display=e.display||{},e.display.x=0,e.display.l=l(e.value),e.display.y=t*i+s,e.display.thickness=r,fv(e),e.display.barLabelVisible=!1}))}(e,n,r),e.children.forEach((e=>{pv(e,t,n,r)})))}function hv(e,t){ue(this).select("rect").transition().duration(t).attr("x",e.display.x).attr("y",e.display.y).attr("width",e.display.l).attr("height",e.display.thickness).style("fill",e.display.fill).style("opacity",e.display.visible?1:0).style("pointer-events",e.display.visible?"all":"none").style("stroke",Zu.stroke_color||Zu.layout.background_color).attr("tabindex",(e=>im(e)?"0":null)).attr("aria-label",uw),ue(this).select("text.bar-label").transition().duration(t).attr("x",e.display.barLabelX).attr("y",e.display.barLabelY).style("font-size",e.display.fontSize+"px").style("font-weight",e.display.fontWeight).style("opacity",e.display.visible&&e.display.barLabelVisible?1:0).text(e.display.barLabelText),ue(this).select("text.axis-label").transition().duration(t).attr("y",e.display.axisLabelY).attr("dx",e.display.axisLabelDx).attr("dy",e.display.axisLabelDy).style("opacity",e.display.axisLabelVisible?1:0).style("font-size",e.display.axisLabelSize+"px").style("font-weight",e.display.axisFontWeight).style("pointer-events",e.display.axisLabelVisible?"all":"none").style("fill",Zu.axis_label_color||Zu.layout.font_color).style("text-anchor",Zu.bar_axis_labels_above!==Xu?"start":"end").text(e.display.axisLabelText),ue(this).select("text.value-label").transition().duration(t).attr("x",e.display.valueLabelX).attr("y",e.display.valueLabelY).text((e=>e.display.valueLabelText)).style("font-size",e.display.fontSize+"px").style("font-weight",Zu.value_label_bold?"bold":"normal").style("opacity",e.display.valueLabelVisible?1:0).style("fill",Zu.axis_label_color||Zu.layout.font_color).style("text-anchor",Xu?"end":"start")}function _v(e,t,n){let r=!1===e||Ym()?0:1e3*Zu.animation_duration;if(Bm.transition().duration(r).style("opacity","bar"===Zu.hierarchy_layout?1:0).on("end",(function(){"bar"!==Zu.hierarchy_layout&&Bm.select(".bars").selectAll("*").remove()})),"bar"!==Zu.hierarchy_layout)return;let i=Zu.bar_axis_labels_above?0:dv(),a=t-i-(Zu.show_value_labels?Ea(Zu.bar_value_label_space):0),o=rm();!function(e,t,n,r){pv(e,t,n,r)}(vp.root,o,a,n);let l=vp.root.descendants().slice(1);l.reverse();let s=Bm.select(".bars").selectAll("g.node").data(l,(e=>e.id));Bm.select(".bars").transition().duration(r).attr("transform",`translate(${i}, ${Cm})`);let u=s.enter().append("g").classed("node",!0);u.append("rect").attr("x",(e=>e.display.x)).attr("y",(e=>e.display.y)).attr("width",(e=>e.display.l)).attr("height",(e=>e.display.thickness)).style("fill",(e=>e.display.fill)),u.append("text").classed("bar-label",!0).attr("x",(e=>e.display.barLabelX)).attr("y",(e=>e.display.barLabelY)).attr("dy","0.33em").style("text-anchor","middle").style("opacity",0).style("pointer-events","none"),u.append("text").classed("axis-label",!0).attr("y",(e=>e.display.axisLabelY)).style("opacity",0).style("text-anchor","end"),u.append("text").classed("value-label",!0).attr("x",(e=>e.display.valueLabelX)).attr("y",(e=>e.display.valueLabelY)).attr("dy","0.33em").style("opacity",0).style("pointer-events","none"),u.each(cv),u.merge(s).style("cursor",(e=>e.children?"pointer":"default")).each((function(e){hv.call(this,e,r)})),u.merge(s).select(".bar-label").style("fill",og),s.exit().remove(),function(e,t,n){let r=e.ancestors().slice(0,-1).reverse(),i=Zu.bar_axis_labels_above?0:dv();t.select(".breadcrumb").transition().duration(n).attr("transform",`translate(${i}, 30)`);let a=t.select(".breadcrumb").style("font-weight","allBold"===Zu.label_weight||"topBold"===Zu.label_weight?"bold":"normal").select("text").selectAll("tspan.item").data(r),o=a.enter().append("tspan").style("opacity",0).style("fill",Zu.axis_label_color||Zu.layout.font_color).classed("item",!0);o.append("tspan").classed("separator",!0).text(" > "),o.append("tspan").classed("label",!0).on("click",(e=>{Dv||(Q.stopPropagation(),Kv("zoomToNode",e))})),o.merge(a).transition().duration(n).style("fill",Zu.axis_label_color||Zu.layout.font_color).style("opacity",1),a.select("tspan.label").text((e=>"allUpperCase"===Zu.label_case||"topUpperCase"===Zu.label_case?e.data.key.toUpperCase():e.data.key)),a.exit().transition().duration(n).style("opacity",0).remove()}(o,Bm,r)}function yv(){Bm.select(".bars").selectAll("g").select("rect").style("opacity",(e=>{let t=e.id===ig;return e.display.visible?t?.7:1:0}))}function bv(e,t){return{x:t*Math.cos(e),y:t*Math.sin(e)}}function mv(e,t,n,r,i,a,o,l,s,u){e.each((function(e){var c,d=Yb(l(e.data.x)),f=s(e.data.y),p=e.data.value,h=e.data.value<0,_=0===e.height||e.depth===t.depth+Zu.num_of_visible_levels,y=0===e.depth;e.data.display.rotate=d,e.data.display.translate=f,e.data.display.parent_rotate=Yb(l(e.data.parent_x)),e.data.display.parent_translate=s(e.data.parent_y),e.data.display.cp2_translate=e.depth===t.depth+1?0:(e.data.display.translate+e.data.display.parent_translate)/2,e.data.display.bar_width=i,e.data.display.bar_length=_?Math.abs(u(p)):0,e.data.display.bar_translate=_?p>0?0:-e.data.display.bar_length:0,e.data.display.circle_opacity=_||y?0:1,e.data.display.bar_opacity=_?1:0,function(e,t,n,r,i,a,o,l,s,u){let c={},d=e.data.key;d&&Kb(!0)&&(d=d.toUpperCase()),c.normal=n?"translate(4, 0)":"translate(8, 0)",i||(c.normal+="translate("+e.data.display.bar_length+", 0)"),c.reversed=n?"rotate(180)translate(-4, 0)":"rotate(180)translate(-8, 0)",i||(c.reversed+="translate("+-e.data.display.bar_length+", 0)");var f=a>-90&&a<90?"normal":"reversed";e.data.display.name_label_orientation=f,e.data.id===r.data.id&&(e.data.display.name_label_orientation="normal",c.normal="rotate("+-a+")translate(8, 0)",d&&Kb(!1)&&(d=d.toUpperCase())),e.data.display.name_label_transform=c;let p="'"+Zu.layout.body_font.name+"'",h=l>20?.2*l:.05*l,_=em(e.data.id!==r.data.id),y=Math.min(Ea(Zu.label_size),Math.floor(l-2*h)),b=y+"px "+p,m="bold "+b,g=_+" "+b,v={text:"",y:null,dy:null,x:null},w=[];const x=1.2*y;let k=n?Math.max(Math.floor(.9*l/x),1):3,M=!1;if(n){let t=u-4-e.data.display.bar_length,n=!1;if(Zu.show_value_labels){k>1&&(M=!0,k-=1),v.text=gm(o);let e=Sa(v.text+" ",m);e>=t&&(v.text=tm(v.text,t,m),n=!0),n||M||(t-=e)}n&&!M||(w=La(d,g,k,t))}else t||(w=La(d,g,k,.9*s));const A=w.length+(M?1:0),z=A>1;if(d){const e=A-1,t=.33*y-.5*e*x;w=w.map(((e,n)=>({text:e,y:z?t:null,dy:z?n*x:null,x:z?0:null}))),v.x=z?0:null,v.y=z?t:null,v.dy=z?e*x:null}e.data.display.label_size=y,e.data.display.font_weight=_,e.data.display.name_label=w,e.data.display.value_label=v}(e,y,_,t,h,d,p,i,a,o),e.data.display.color=Jb(e),Zu.radial_tree_colored_links?(c=Xi(e.data.display.color)).opacity=.25:c=Zu.radial_tree_link_color,e.data.display.link_color=c;var b=bv(Rb(d),f+(_?e.data.display.bar_length:0));e.data.display.popup={x:.5*n+b.x,y:.5*r+b.y}}))}function gv(){ue(this).on("mouseover",Im).on("mouseout",Wm).on("keydown",Gm).on("click",(e=>{Vm(Dy(vp.root,e.data.id))}))}function vv(e,t,n){var r=e.append("g").classed("label-"+n,!0).style("opacity",0).style("fill",(function(e){return e.data.display.color})).style("font-size",(function(e){return e.data.display.label_size+"px"})).style("font-weight",t.data.display.font_weight);!function(e){e.append("tspan").classed("name-label",!0),e.append("tspan").classed("value-label",!0).style("font-weight","bold")}(r.append("text").classed("label-text",!0).attr("dy","0.33em").style("stroke-width","0.5em").style("stroke-linejoin","round").attr("paint-order","stroke"))}function wv(e,t){var n=ue(this);this._tween={rotate:e.data.display.prev_rotate,translate:e.data.display.prev_translate},n.classed("node",!0).style("opacity",0).transition().duration(.5*t).delay(.5*t).style("opacity",1).attr("tabindex",0).attr("aria-label",uw),n.classed("node",!0).attr("transform",(function(e){return"rotate("+e.data.display.prev_rotate+")"})),(n=n.append("g")).classed("translate-layer",!0).attr("transform",(function(e){return"translate("+e.data.display.prev_translate+")"})),n.append("circle").attr("r",4).style("opacity",0).style("fill",(function(e){return e.data.display.color})),vv(n,e,"normal"),vv(n,e,"reversed"),n.append("rect").style("opacity",0).style("fill",(function(e){return e.data.display.color}))}function xv(e){var t=this,n=this._tween.rotate,r=this._tween.translate,i=$c(n,e.data.display.rotate),a=$c(r,e.data.display.translate);return function(e){ue(t).attr("transform","rotate("+i(e)+")").select(".translate-layer").attr("transform","translate("+a(e)+")"),t._tween.rotate=i(e),t._tween.translate=a(e)}}function kv(e){ue(this).transition().duration(.5*e).style("opacity",0),ue(this).transition("nodes").duration(e).tween("node",xv).on("end",(function(){ue(this).remove()}))}function Mv(e,t){Hm.select(".nodes").selectAll("g.node").data(vp.root.descendants(),(function(e){return e.data.id}));var n=Hm.select(".nodes").selectAll("g.node").data(e.descendants(),(function(e){return e.data.id}));n.enter().append("g").each((function(e){wv.call(this,e,t)})).each(gv).merge(n).transition("nodes").duration(t).tween("node",xv),n.exit().each((function(){kv.call(this,t)})),Hm.select(".nodes").selectAll("g.node").transition().delay(t).duration(.1*t).style("opacity",1),Hm.select(".nodes").selectAll("g.node").select("circle").transition("nodes").duration(t).style("fill",(function(e){return e.data.display.color})).style("opacity",(function(e){return e.data.display.circle_opacity})),Hm.select(".nodes").selectAll("g.node").select("rect").transition("nodes").duration(t).style("fill",(function(e){return e.data.display.color})).style("opacity",(function(e){return e.data.display.bar_opacity})).attr("y",(function(e){return-.5*e.data.display.bar_width})).attr("x",(function(e){return e.data.display.bar_translate})).attr("width",(function(e){return e.data.display.bar_length})).attr("height",(function(e){return e.data.display.bar_width})),Hm.select(".nodes").selectAll("g.node").select("g.label-normal").each((function(e){ue(this).select(".label-text").style("stroke",Zu.layout.background_color),ue(this).select("tspan.value-label").text(Zu.show_value_labels?(Xu?" ":"")+e.data.display.value_label.text:"").attr("x",e.data.display.value_label.x).attr("y",e.data.display.value_label.y).attr("dy",e.data.display.value_label.dy).style("font-weight",Zu.value_label_bold?"bold":"normal");var t=ue(this).select("tspan.name-label").text(Xu?"":" ");t.selectAll("tspan.name-label-line").data(e.data.display.name_label).join("tspan").classed("name-label-line",!0).text((e=>e.text)).attr("x",(e=>e.x)).attr("y",(e=>e.y)).attr("dy",(e=>e.dy)).style("font-weight",e.data.display.font_weight),Xu?t.lower():t.raise()})).style("text-anchor",Xu?"end":"start").transition().duration(t).style("fill",(function(e){return e.data.display.color})).style("font-size",(function(e){return e.data.display.label_size+"px"})).style("font-weight",(function(e){return e.data.display.font_weight})).attr("transform",(function(e){return e.data.display.name_label_transform.normal})).style("opacity",(function(e){return"normal"===e.data.display.name_label_orientation?1:0})),Hm.select(".nodes").selectAll("g.node").select("g.label-reversed").each((function(e){ue(this).select(".label-text").attr("x","0").style("stroke",Zu.layout.background_color),ue(this).select("tspan.name-label").text(Xu?"":" ").selectAll("tspan.name-label-line").data(e.data.display.name_label).join("tspan").classed("name-label-line",!0).text((e=>e.text)).attr("x",(e=>e.x)).attr("y",(e=>e.y)).attr("dy",(e=>e.dy)).style("font-weight",e.data.display.font_weight);var t=ue(this).select("tspan.value-label").text(Zu.show_value_labels?e.data.display.value_label.text+(Xu?" ":""):"").attr("x",e.data.display.value_label.x).attr("y",e.data.display.value_label.y).attr("dy",e.data.display.value_label.dy).style("font-weight",Zu.value_label_bold?"bold":"normal");Xu?t.lower():t.raise()})).style("text-anchor",Xu?"start":"end").transition().duration(t).style("fill",(function(e){return e.data.display.color})).style("font-size",(function(e){return e.data.display.label_size+"px"})).attr("transform",(function(e){return e.data.display.name_label_transform.reversed})).style("opacity",(function(e){return"normal"===e.data.display.name_label_orientation?0:1}))}function Av(e,t){var n=ue(this);this._tween={rotate:e.data.display.prev_rotate,translate:e.data.display.prev_translate,parent_rotate:e.data.display.prev_parent_rotate,parent_translate:e.data.display.prev_parent_translate,cp2_translate:e.data.display.cp2_translate},n.classed("link",!0).style("opacity",0).transition().duration(.5*t).delay(.5*t).style("opacity",1)}function zv(e){var t=this;this._tween=this._tween||{};var n=this._tween.rotate||0,r=this._tween.translate||0,i=this._tween.parent_rotate||0,a=this._tween.parent_translate||0,o=this._tween.cp2_translate||0,l=$c(n,e.data.display.rotate),s=$c(r,e.data.display.translate),u=$c(i,e.data.display.parent_rotate),c=$c(a,e.data.display.parent_translate),d=$c(o,e.data.display.cp2_translate);return function(e){var n=l(e),r=s(e),i=u(e),a=c(e),o=d(e),f=function(e,t,n,r,i){var a=bv(Rb(e),t),o=bv(Rb(e),(t+r)/2),l=bv(Rb(n),i),s=bv(Rb(n),r);return"M"+a.x+","+a.y+"C"+o.x+","+o.y+" "+l.x+","+l.y+" "+s.x+","+s.y}(n,r,i,a,o);ue(t).attr("d",f),t._tween.rotate=n,t._tween.translate=r,t._tween.parent_rotate=i,t._tween.parent_translate=a,t._tween.cp2_translate=o}}function Tv(e){ue(this).transition().duration(.5*e).style("opacity",0),ue(this).transition("links").duration(e).tween("link",zv).on("end",(function(){ue(this).remove()}))}function Cv(e,t){Hm.select(".links").selectAll("path").data(vp.root.descendants().slice(1),(function(e){return e.data.id}));var n=Hm.select(".links").selectAll("path").data(e.descendants().slice(1),(function(e){return e.data.id}));n.enter().append("path").each((function(e){Av.call(this,e,t)})).merge(n).transition("links").duration(t).style("stroke",(function(e){return e.data.display.link_color})).style("fill","none").tween("link",zv),n.exit().each((function(){Tv.call(this,t)})),Hm.select(".links").selectAll("path").transition().delay(t).duration(.1*t).style("opacity",1)}var Ev,Sv,Nv,Fv,Lv,Ov,jv,Dv,$v=2*Math.PI,Pv={},Uv=function(){var e=my,t=1,n=1,r=null;function i(i){var s=function(e){for(var t,n,r,i,a,o=new ky(e,0),l=[o];t=l.pop();)if(r=t._.children)for(t.children=new Array(a=r.length),i=a-1;i>=0;--i)l.push(n=t.children[i]=new ky(r[i],i)),n.parent=t;return(o.parent=new ky(null,0)).children=[o],o}(i);if(s.eachAfter(a),s.parent.m=-s.z,s.eachBefore(o),r)i.eachBefore(l);else{var u=i,c=i,d=i;i.eachBefore((function(e){e.x<u.x&&(u=e),e.x>c.x&&(c=e),e.depth>d.depth&&(d=e)}));var f=u===c?1:e(u,c)/2,p=f-u.x,h=t/(c.x+f+p),_=n/(d.depth||1);i.eachBefore((function(e){e.x=(e.x+p)*h,e.y=e.depth*_}))}return i}function a(t){var n=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(n){!function(e){for(var t,n=0,r=0,i=e.children,a=i.length;--a>=0;)(t=i[a]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(t);var a=(n[0].z+n[n.length-1].z)/2;i?(t.z=i.z+e(t._,i._),t.m=t.z-a):t.z=a}else i&&(t.z=i.z+e(t._,i._));t.parent.A=function(t,n,r){if(n){for(var i,a=t,o=t,l=n,s=a.parent.children[0],u=a.m,c=o.m,d=l.m,f=s.m;l=vy(l),a=gy(a),l&&a;)s=gy(s),(o=vy(o)).a=t,(i=l.z+d-a.z-u+e(l._,a._))>0&&(wy(xy(l,t,r),t,i),u+=i,c+=i),d+=l.m,u+=a.m,f+=s.m,c+=o.m;l&&!vy(o)&&(o.t=l,o.m+=d-c),a&&!gy(s)&&(s.t=a,s.m+=u-f,r=t)}return r}(t,i,t.parent.A||r[0])}function o(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function l(e){e.x*=t,e.y=e.depth*n}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i}().separation((function(){return 1})),Bv=cd(),Hv=cd(),qv=cd();function Yv(e){var t=Hv(e),n=2*Math.PI;return t<-n&&(t=-n),t>n&&(t=n),t+=Rb(Zu.radial_tree_rotation)}function Rv(e,t){var n=e.copy();return n.eachBefore((function(e){e.depth===t&&delete e.children})),n.each((function(e){e.isTruncated=!0,e.id=e.data.id})),n}function Iv(e,t,n){let r=!1===e||Ym()?0:1e3*Zu.animation_duration;if(function(e){Hm.transition().duration(e).style("opacity","radialTree"===Zu.hierarchy_layout?1:0).on("end",(function(){"radialTree"!==Zu.hierarchy_layout&&(Hm.select(".nodes").selectAll("*").remove(),Hm.select(".links").selectAll("*").remove())}))}(r),"radialTree"===Zu.hierarchy_layout){var i=rm();vp.root.each((function(e){e.data.id=e.id,e.data.value=e.value})),function(e){e.each((function(e){if(void 0!==Pv[e.id]){var t=Pv[e.id];e.data.display={prev_rotate:t.rotate,prev_translate:t.translate,prev_parent_rotate:t.parent_rotate,prev_parent_translate:t.parent_translate,cp2_translate:t.cp2_translate}}else e.data.display={prev_rotate:0,prev_translate:0,prev_parent_rotate:0,prev_parent_translate:0,cp2_translate:0}}))}(vp.root),function(e,t){var n=Rv(e,t);Uv(e),Uv(n);var r,i=(r={},n.each((function(e){r[e.data.id]=e})),r);e.eachBefore((function(e){var t=i[e.data.id];if(e.data.y=e.y,void 0!==t)e.data.x=t.x,e.data.x_delta=t.x-e.x;else{var n=e.parent.data.x_delta;e.data.x=e.x+n,e.data.x_delta=n}0===e.depth?(e.data.parent_x=e.data.x,e.data.parent_y=e.data.y):(e.data.parent_x=e.parent.data.x,e.data.parent_y=e.parent.data.y)}))}(vp.root,i.depth+Zu.num_of_visible_levels);var a=Rv(i,Zu.num_of_visible_levels);!function(e,t,n,r){var i=Math.min(e,t),a=Zu.num_of_visible_levels;n+Zu.num_of_visible_levels>r&&(a=r-n),Ev=.5*Zu.radial_tree_outer_radius*i/100,Sv=.5*Zu.radial_tree_bar_length*i/100,Nv=Ev/a,Fv=.5*i-Ev,Lv=Zu.radial_tree_bar_width}(t,n,i.depth,vp.root.height),function(e){var t=e.leaves().length,n=Ev>0?t*Lv/Ev:0;n>=$v?(Ov=Ev*$v/t-1,jv=$v):(jv=n,Ov=Lv-2),Ov=Math.max(Ov,0),jv-=(Ov+1)/Ev,jv=Math.max(jv,0)}(a),function(e,t){var n=e.leaves(),r=rc(n,(function(e){return e.data.x}));Hv.domain(r).range([-.5*jv,.5*jv]),1===n.length&&Hv.range([0,0]);var i=[t.data.y,n[0].data.y];qv.domain(i).range([0,Ev]),Bv.domain([0,cc(n,(function(e){return Math.abs(e.data.value)}))]).range([0,Sv])}(a,i),mv(vp.root,i,t,n,Ov,Nv,Fv,Yv,qv,Bv),Hm.attr("transform",`translate(${.5*t}, ${.5*n})`),Mv(a,r),Cv(a,r),function(e){e.each((function(e){Pv[e.id]=e.data.display}))}(vp.root)}}function Wv(){Dv||Hm.select(".nodes").selectAll(".node").style("opacity",(function(e){return e.data&&e.data.id===ig?.7:1}))}function Vv(e,t){let n=Zu.num_of_visible_levels;e.display={},e.display.visible=e.depth<t+n+1,e.display.leaf=!e.children,e.display.visible_leaf=e.depth===t+n||e.display.leaf&&e.depth<t+n,e.children&&e.children.forEach((e=>{Vv(e,t)}))}function Gv(){let e=rm(),t=e?e.depth:0;Vv(vp.root,t)}function Xv(){var e=Wb(),t=rm(),n=function(){let e=Wb(),t=rm(),n=[];return t.each((function(r){e.includes(r.data.key)&&r.depth-t.depth<=Zu.num_of_visible_levels&&n.push(r.data.key)})),fh(n)}(),r="off"===Zu.legend_mode,i=[];i=Zu.filter&&Zu.filter!==Zu.filter_all_label?fh([Zu.filter].concat(n)):Zu.legend_only_show_custom_overrides?e:fh(qb.concat(e));var a=t.depth>0?i.filter((function(e){return n.includes(e)||t.level1_key===e&&!n.includes(t.data.key)})):i.filter((function(t){return!e.includes(t)||n.includes(t)})),o=i.filter((function(e){return!a.includes(e)}));gw.data(r?[]:i,Hb.getColor).filtered(o),vw.update()}function Zv(e){let t;!function(){let e=Dd.data.column_names.size_columns.map((e=>e));0===e.length?Zu.size_by=null:-1===e.indexOf(Zu.size_by)&&(Zu.size_by=e[0]);let t=km(xm());0===t.length?Zu.filter=null:-1===t.indexOf(Zu.filter)&&Zu.filter!==Zu.filter_all_label&&(Zu.filter=t[0])}(),wm(),Mm(),Am(),(mm||bm)&&ww.update(),t=bm?Dd.data.filter((function(e){return Zu.filter===Zu.filter_all_label||("datetime"===Dd.data.metadata.filter.type?Ib(e.filter)===Ib(Zu.filter):e.filter===Zu.filter)})):Dd.data;let n=!0;"radialTree"===Zu.hierarchy_layout&&(n=!1);let r=Sy(t,n);vp.root=jy(r),qb=fh(Dd.data.map((e=>e.nest_columns[0]))),Hb.updateColorScale(qb),Xv(),Gu.update(),Xu="rtl"===Na(),function(){let e=Zu.hierarchy_layout,t=Math.max(0,Gu.getPrimaryWidth()),n=Math.max(0,Gu.getPrimaryHeight()),r=n,i=rm(),a=i.children?i.children.length:0;var o=!1;if(Zu.auto_set_height&&!1===Flourish.fixed_height)if("treemap"===e){let e=t<Zu.responsive_narrow_breakpoint?.01*t*Zu.treemap_aspect_ratio_narrow:.01*t*Zu.treemap_aspect_ratio_normal;Gu.setHeight(e),r=e}else if("circlePacking"===e||"sunburst"===e||"radialTree"===e)Gu.setHeight(t),r=t;else if("bar"===e){let e=cm(),t=Zu.bar_min_bar_thickness+Zu.bar_bar_padding+e,n=Cm+a*t;Gu.setHeight(n),r=n}else Gu.setHeight(null);else if(Gu.setHeight(null),"bar"===e){let e=dm(n-Cm,a),t=cm(),i=a*(e+Zu.bar_bar_padding+t)+Cm;i>n&&(r=i,o=!0)}jm.attr("width",t).attr("height",r),Dm.attr("width",t).attr("height",r),Lm.select("#fl-layout-primary-container").style("overflow-y",o?"auto":"hidden")}();let i=Math.max(0,Gu.getPrimaryWidth()),a=Math.max(0,Gu.getPrimaryHeight());vp.w=i,vp.h=a,function(){let e=ew.locked();if(e){let t=Dy(vp.root,e);if(!t||!fw(t))return void ew.clickout();{let e=sw(t);ew.setColumnNames(e.column_names).setFormatters(e.formatters)}}ew.update(),ue(".flourish-popup").classed("all-events","popup"===Zu.popup.mode||"both"===Zu.popup.mode)}(),Gv(),fg(e,i,a),Tg(e,i,a),uv(e,i,a),_v(e,i,a),Iv(e,i,a),function(){let e=Zu.zoomed_node_id&&fm(Zu.ascend_button_visibility);qm.style("display",e?"block":"none").style("background",Zu.zoom_out_button_color).classed("top-left","right"===Zu.popup.panel_position).classed("bottom-right","top"===Zu.popup.panel_position).on("touchstart",(()=>{Q.stopPropagation(),Kv("zoomOut")})).on("click",(()=>{Q.stopPropagation(),Kv("zoomOut")})).select("svg path").style("fill",Zu.zoom_out_arrow_color)}(),_w.update(),yw.update(),bw.update(),mw.update(),Gu.showOverlay(void 0===vp.root.children?"No data to display":null)}function Jv(){Zv()}function Qv(){dg(),zg(),sv(),yv(),Wv()}function Kv(e,t){switch(e){case"updateHighlightedNode":ag(t),Qv();break;case"zoomToNode":Dv=!0,t.children&&(Zu.zoomed_node_id=t.id),ag(null),Jv(),ew.clickout();var n=Ym()?0:1e3*Zu.animation_duration+100;setTimeout((function(){Dv=!1}),n);break;case"zoomOut":if(null===Zu.zoomed_node_id)return;Dv=!0;let e=Dy(vp.root,Zu.zoomed_node_id),r=e?e.ancestors():null;Zu.zoomed_node_id=r&&2!==r.length?r[1].id:null,ag(null),Jv(),ew.clickout(),setTimeout((function(){Dv=!1}),1e3*Zu.animation_duration+100);break;case"hidePopup":ew.clickout(),ag(null),Jv()}}let ew,tw,nw=null;function rw(e){nw=e}function iw(e){if(!e)return;let t,n,r=jm.node().getBoundingClientRect().left,i=jm.node().getBoundingClientRect().top;switch(Zu.hierarchy_layout){case"treemap":t=.5*(e.display.x1+e.display.x0),n=e.display.visible_leaf?.5*(e.display.y1+e.display.y0)+15:e.display.y0+10;break;case"circlePacking":t=e.display.x+zm.x,n=e.display.visible_leaf?e.display.y+zm.y+15:e.display.y-e.display.r+zm.y+15;break;case"sunburst":let r=.5*(e.display.a0+e.display.a1),i=r>.5*Math.PI&&r<1.5*Math.PI?.4:.6,a=i*e.display.r0+(1-i)*e.display.r1;t=.5*vp.w+a*Math.sin(r),n=.5*vp.h-a*Math.cos(r);break;case"bar":t=e.display.x+.5*e.display.l+(Zu.bar_axis_labels_above?0:dv()),n=e.display.y+.5*e.display.thickness+Cm+10;break;case"radialTree":t=e.data.display.popup.x,n=e.data.display.popup.y+15;break;default:console.log("Missing handler for "+Zu.hierarchy_layout+" in popup")}return t+=r,n+=i,[t,n]}function aw(e){let t=Dy(vp.root,e),n=sw(t);return[iw(t),n.datum]}function ow(e,t,n,r){t.__value="VALUE",r.__value=e.value,n.__value=gm,t.__size_by="SIZEBY",r.__size_by="Sum"===Zu.aggregation_type?Zu.size_by:"Count",t.__name="NAME",r.__name=e.data.key}function lw(e,t,n,r){Dd.data.metadata.popup_metadata&&(t.meta=Dd.data.column_names.popup_metadata,r.meta=Dd.data.metadata.popup_metadata.map(((t,n)=>e.popup_metadata[n])),n.meta=Dd.data.metadata.popup_metadata.map((e=>"datetime"===e.type||"number"===e.type?Xn(e.output_format_id):e=>e)))}function sw(e){let t={},n={},r={},i="popup"===Zu.popup.mode&&Zu.popup.popup_is_custom||"both"===Zu.popup.mode&&(Zu.popup.popup_is_custom||Zu.popup.panel_is_custom),a=e.ancestors().slice(0,-1),o=e.data.unique_row;return e.height>0||0===e.height&&!o?i?(n.ancestors=a.map((e=>e.data.column_name)),t.ancestors=a.map((e=>e.data.key)),n.value=Zu.size_by??"Count",t.value=e.value,r.value=gm,ow(e,n,r,t)):(t.__title=e.data.key,n.ancestors=a.map((e=>e.data.column_name)).slice(1),t.ancestors=a.map((e=>e.data.key)).slice(1),n.value=Zu.size_by??"Count",t.value=e.value,r.value=gm):i?(n.ancestors=a.map((e=>e.data.column_name)),t.ancestors=a.map((e=>e.data.key)),n.value=Zu.size_by??"Count",t.value=e.value,r.value=gm,lw(o,n,r,t),ow(e,n,r,t)):(t.__title=e.data.key,n.ancestors=a.map((e=>e.data.column_name)).slice(1),t.ancestors=a.map((e=>e.data.key)).slice(1),n.value=Zu.size_by??"Count",t.value=e.value,r.value=gm,lw(o,n,r,t)),{datum:t,column_names:n,formatters:r}}function uw(e){const t=sw(Dy(vp.root,e.id));return ew.setColumnNames(t.column_names).setFormatters(t.formatters),ew.getAccessiblePopupContent(t.datum)}function cw(){Kv("updateHighlightedNode",null)}function dw(){if(ew.locked()&&("popup"===Zu.popup.mode||"both"===Zu.popup.mode))return void ew.clickout();let e=nw,t=Dy(vp.root,e),n=sw(t),r=iw(t);ew.setColumnNames(n.column_names).setFormatters(n.formatters).click(r,n.datum,e),Kv("updateHighlightedNode",e)}function fw(e){let t=rm(),n=e.depth>=t.depth&&e.depth<=t.depth+Zu.num_of_visible_levels,r=!Zu.popup_active_levels||"all_levels"===Zu.popup_active_levels||"top_level"===Zu.popup_active_levels&&1===e.depth||"below_top_level"===Zu.popup_active_levels&&e.depth>1||"above_bottom_level"===Zu.popup_active_levels&&e.height>0||"bottom_level"===Zu.popup_active_levels&&0===e.height;return n&&r}Gu=Vu(Zu.layout);var pw=zi(Zu.filter_control),hw=zi(Zu.size_by_control),_w=function(e,t,n){return new zd(e,t,n)}(Zu.controls_style,".fl-control",Zu.layout),yw=function(e,t,n){return new Sd(e,t,n)}(Zu.dropdown_style,".fl-control-dropdown",Zu.layout),bw=function(e,t,n){return new Cd(e,t,n)}(Zu.button_style,".fl-control-buttons",Zu.layout),mw=function(e,t,n){return new Ld(e,t,n)}(Zu.slider_style,".fl-control-slider",Zu.layout);const gw=function(e){return new _c(e)}(Zu.legend_categorical);ew=function(e,t,n){return new yp(e,t,n)}(Zu.popup),ew.titleKey("__title").subtitleKey("__subtitle").getLockedPosition(aw).onPanelClose(cw),tw=ue(".flourish-popup").node(),ue(".flourish-popup-content").on("click",dw),ue(".flourish-popup").on("mouseleave",(()=>ew.mouseout()));var vw=function(e){return new xd(e)}(Zu.legend_container).appendTo(Gu.getSection("legend")).add(gw),ww=function(e){return new xi(e)}(Zu.controls_container).appendTo(Gu.getSection("controls")),xw=function(){return kp.Date.now()},kw=/\s/;var Mw=/^\s+/;function Aw(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&kw.test(e.charAt(t)););return t}(e)+1).replace(Mw,""):e}var zw=/^[-+]0x[0-9a-f]+$/i,Tw=/^0b[01]+$/i,Cw=/^0o[0-7]+$/i,Ew=parseInt;function Sw(e){if("number"==typeof e)return e;if(k_(e))return NaN;if(Fp(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Fp(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Aw(e);var n=Tw.test(e);return n||Cw.test(e)?Ew(e.slice(2),n?2:8):zw.test(e)?NaN:+e}var Nw=Math.max,Fw=Math.min;function Lw(e,t,n){var r,i,a,o,l,s,u=0,c=!1,d=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=r,a=i;return r=i=void 0,u=t,o=e.apply(a,n)}function h(e){var n=e-s;return void 0===s||n>=t||n<0||d&&e-u>=a}function _(){var e=xw();if(h(e))return y(e);l=setTimeout(_,function(e){var n=t-(e-s);return d?Fw(n,a-(e-u)):n}(e))}function y(e){return l=void 0,f&&r?p(e):(r=i=void 0,o)}function b(){var e=xw(),n=h(e);if(r=arguments,i=this,s=e,n){if(void 0===l)return function(e){return u=e,l=setTimeout(_,t),c?p(e):o}(s);if(d)return clearTimeout(l),l=setTimeout(_,t),p(s)}return void 0===l&&(l=setTimeout(_,t)),o}return t=Sw(t)||0,Fp(n)&&(c=!!n.leading,a=(d="maxWait"in n)?Nw(Sw(n.maxWait)||0,t):a,f="trailing"in n?!!n.trailing:f),b.cancel=function(){void 0!==l&&clearTimeout(l),u=0,r=s=i=l=void 0},b.flush=function(){return void 0===l?o:y(xw())},b}var Ow;function jw(e,t,n){for(var r in t){var i=t[r];if("object"!=typeof i||null===i||Array.isArray(i))n.indexOf(r)>-1?e[r]=i:Flourish.warn("State property `"+r+"` not whitelisted for use in URL");else{var a=r.length,o=n.filter((function(e){return e.substring(0,a)==r})).map((function(e){return e.substring(a+1)}));jw(e[r],i,o)}}}function Dw(e,t){var n=location.hash.substring(1);if(""!=n){var r;try{r=JSON.parse(decodeURIComponent(n))}catch(e){Flourish.warn({message:"Invalid JSON passed to template URL hash",explanation:e})}r&&jw(e,r,t)}}var $w=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Fp(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Lw(e,t,{leading:r,maxWait:t,trailing:i})}((function(){Zv(Ow==window.innerWidth),Ow=window.innerWidth}),500);return e.data=Dd,e.draw=function(){var e,t,n,r;e=Zu.url_state,t=Zu,n=Zv,r=(e.enabled,e.whitelist||"").split(/\n/),Dw(t,r),window.addEventListener("hashchange",(function(){Dw(t,r),n&&n()})),Lm=ue(document.body),Om=ue(Gu.getSection("primary")),jm=Om.append("svg").classed("noselect",!0),Dm=jm.append("rect").classed("background",!0).style("fill","none").style("pointer-events","visible"),$m=jm.append("g").classed("g-treemap",!0),Pm=jm.append("g").classed("g-circle-packing",!0).attr("transform",`translate(${zm.x},${zm.y})`),Um=jm.append("g").classed("g-sunburst",!0),(Bm=jm.append("g").classed("g-bar",!0)).append("g").classed("breadcrumb",!0).append("text"),Bm.append("g").classed("bars",!0),(Hm=jm.append("g").classed("g-radial-tree",!0)).append("g").classed("links",!0),Hm.append("g").classed("nodes",!0),(qm=Om.append("div").classed("zoomout-button",!0).attr("title","Go up a level").attr("tabindex","0").on("click",(()=>{Kv("zoomOut")})).on("keydown",(()=>{"Enter"===Q.key&&Kv("zoomOut")}))).append("svg").append("path").attr("d","M7.285,16.01l4.12,4.119l5.137,-5.137l0,21.201l5.825,0l0,-21.201l5.138,5.137l4.119,-4.119l-12.169,-12.169l-12.17,12.169Z"),Dm.on("click",(()=>{Kv("zoomOut")})),ue(Gu.getWrapper()).on("click",(()=>{event.target.closest&&event.target.closest(".fl-control")||Kv("hidePopup")})),Ow=window.innerWidth,window.addEventListener("resize",(function(){$w()})),Gu.awaitFonts((()=>Zv(!1)))},e.state=Zu,e.update=Jv,e}({});
//# sourceMappingURL=template.js.map
</script><script src="embedded.js"></script><script>
			function _Flourish_unflattenInto(dest, src) {
				dest = dest || {};
				for (var k in src) {
					var t = dest;
					for (var i = k.indexOf("."), p = 0; i >= 0; i = k.indexOf(".", p = i+1)) {
						var s = k.substring(p, i);
						if (!(s in t)) t[s] = {};
						t = t[s];
					}
					t[k.substring(p)] = src[k];
				}
				return dest;
			}
			var _Flourish_settings = {"auto_set_height":true,"color.categorical_custom_palette":"","color.categorical_palette":["#f34d5b","#1e8fcc","#1e558c","#94d2e6","#b3325d","#ff75a3","#aecc70","#d9ccc3"],"filter_control_visibility":"never","hierarchy_layout":"treemap","layout.footer_note":"Shanghai produces Model 3/Model Y; Berlin makes Model Y","layout.source_name":"company Q3 2024 report","layout.subtitle":"Installed annual vehicle capacity ('000)","layout.title":"Shanghai accounts for more than 40% of Tesla’s car manufacturing capacity","popup.mode":"none","show_value_labels":true,"sort_by":"data","treemap_aspect_ratio_narrow":200,"treemap_aspect_ratio_normal":80,"layout.font_size_mobile_small":100,"layout.font_size_mobile_big":100,"layout.font_size_tablet":100,"layout.font_size_desktop":100,"layout.font_size_big_screen":120,"layout.body_font":{"name":"Metric Web","url":"https://mississippi.river.to/right/f/fonts/stylesheet.css"},"layout.margin_top":0,"layout.margin_right":0,"layout.margin_bottom":0,"layout.margin_left":0,"layout.space_between_sections":"custom","layout.space_between_sections_custom":1.75,"layout.background_color":"transparent","layout.header_logo_enabled":true,"layout.header_logo_src":"https://mississippi.river.to/right/f/uploads/1c064a3c-9c0f-4043-8de0-379265d5d2c9.svg","layout.header_logo_height":0.25,"layout.header_logo_margin_top":0,"layout.header_logo_margin_right":0,"layout.title_size":"custom","layout.title_size_custom":1.5,"layout.title_line_height":1.25,"layout.title_weight":"normal","layout.title_space_above":"custom","layout.title_space_above_custom":0.75,"layout.title_styling":true,"layout.subtitle_size":"custom","layout.subtitle_size_custom":1.125,"layout.subtitle_line_height":1.25,"layout.subtitle_color":"#4d4845","layout.subtitle_space_above":"custom","layout.subtitle_space_above_custom":1.25,"layout.subtitle_styling":true,"layout.header_text_size":"custom","layout.header_text_size_custom":1,"layout.header_text_line_height":1.25,"layout.header_text_color":"#4d4845","layout.footer_text_size":0.875,"layout.footer_text_color":"#4d4845","layout.footer_logo_enabled":true,"layout.footer_logo_src":"https://mississippi.river.to/right/f/uploads/43d2c31d-7939-4110-a079-53f54ba93ac6.svg","layout.footer_logo_height":0.75,"layout.footer_logo_margin":1,"layout.footer_logo_order":"left","layout.header_text_styling":false,"line_labels.text_color":"#4d4845","color.categorical_extend":false,"controls.control_type":"buttons","controls.button_group_width_mode":"auto","controls.control_styles":true,"controls_style.padding":0.7,"button_style.font_color":"#006b74","button_style.background_selected":"#006b74","button_style.background_hover":"#e3e0d6","button_style.border_transparency":1,"button_style.border_color":"#006b74","button_style.border_radius":0,"button_style.button_styles_advanced":true,"dropdown_style.border_styles_advanced":false,"x.line_and_tick_color":"#999189","x.line_and_tick_width":0.063,"x.tick_label_size":1,"x.tick_label_color":"#4d4845","x.tick_label_angle":"0","x.gridline_color":"#ccc1b7","x.gridline_width":0.063,"x.title_mode":"custom","x.title_color":"#66605C","x.title_styling":false,"x.tick_label_styling":true,"x.gridline_styling":false,"y.line_visible":false,"y.line_and_tick_color":"#999189","y.line_and_tick_width":0,"y.tick_mode":"number","y.tick_number":4,"y.tick_label_size":1,"y.tick_label_color":"#4d4845","y.gridline_color":"#ccc1b7","y.gridline_width":0.063,"y.title_mode":"custom","y.title_color":"#66605C","y.title_styling":false,"y.tick_label_styling":true,"y.gridlines_styling":true,"y2.line_visible":false,"y2.line_and_tick_color":"#999189","y2.line_and_tick_width":0,"y2.tick_label_size":1,"y2.tick_label_color":"#4d4845","y2.gridline_color":"#ccc1b7","y2.gridline_width":0.063,"y2.title_mode":"custom","y2.title_color":"#66605C","y2.title_styling":false,"y2.tick_label_styling":true,"y2.gridlines_styling":true,"legend_categorical.swatch_width":1.25,"legend_categorical.swatch_height":0.625,"legend_categorical.swatch_radius":0,"colors.categorical_palette":["#1e558c","#94d2e6","#1e8fcc","#b3325d","#ff75a3","#aecc70","#f34d5b","#d9ccc3"],"color.palette":["#1e558c","#94d2e6","#1e8fcc","#b3325d","#ff75a3","#aecc70","#f34d5b","#d9ccc3"],"colors.palette":["#1e558c","#94d2e6","#1e8fcc","#b3325d","#ff75a3","#aecc70","#f34d5b","#d9ccc3"],"map_categorical_colors.palette":["#1e558c","#94d2e6","#1e8fcc","#b3325d","#ff75a3","#aecc70","#f34d5b","#d9ccc3"],"point_categorical_colors.palette":["#1e558c","#94d2e6","#1e8fcc","#b3325d","#ff75a3","#aecc70","#f34d5b","#d9ccc3"],"point_colors.categorical_palette":["#1e558c","#94d2e6","#1e8fcc","#b3325d","#ff75a3","#aecc70","#f34d5b","#d9ccc3"],"map_colors.categorical_palette":["#1e558c","#94d2e6","#1e8fcc","#b3325d","#ff75a3","#aecc70","#f34d5b","#d9ccc3"],"legend_categorical_points.swatch_width":1.25,"legend_categorical_map.swatch_width":1.25,"legend_categorical_points.swatch_height":0.625,"legend_categorical_map.swatch_height":0.625,"legend_categorical_points.swatch_radius":0,"legend_categorical_map.swatch_radius":0,"url_state.enabled":true};
			_Flourish_unflattenInto(window.template.state, _Flourish_settings);
	
			var _Flourish_data_column_names = {"data":{"filter":"Country","nest_columns":["Country","Production"],"popup_metadata":[],"size_columns":["Value"]}},
				_Flourish_data_metadata = {"data":{"filter":{"type":"string","type_id":"string$arbitrary_string","output_format_id":"string$arbitrary_string"},"nest_columns":[{"type":"string","type_id":"string$arbitrary_string","output_format_id":"string$arbitrary_string"},{"type":"string","type_id":"string$arbitrary_string","output_format_id":"string$arbitrary_string"}],"popup_metadata":[],"size_columns":[{"type":"number","type_id":"number$comma_point","output_format_id":"number$comma_point"}]}},
				_Flourish_data_timestamps = {"data":{"last_updated":new Date(1732796211802)}},
				_Flourish_data = {"data":[{"filter":"China","nest_columns":["China","Shanghai"],"popup_metadata":[],"size_columns":[950]},{"filter":"US","nest_columns":["US","California (Model 3/Model Y)"],"popup_metadata":[],"size_columns":[550]},{"filter":"US","nest_columns":["US","Texas (Model Y)"],"popup_metadata":[],"size_columns":[250]},{"filter":"US","nest_columns":["US","Texas (Cybertruck)"],"popup_metadata":[],"size_columns":[125]},{"filter":"US","nest_columns":["US","California (Model S/Model X)"],"popup_metadata":[],"size_columns":[100]},{"filter":"Europe","nest_columns":["Europe","Berlin"],"popup_metadata":[],"size_columns":[375]}]},
				_Flourish_visualisation_id = 20526888,
				_Flourish_visualisation_version_number = 96,
				_Flourish_template_id = 75295;
			for (var _Flourish_dataset in _Flourish_data) {
					window.template.data[_Flourish_dataset] = _Flourish_data[_Flourish_dataset];
					window.template.data[_Flourish_dataset].column_names = _Flourish_data_column_names[_Flourish_dataset];
					window.template.data[_Flourish_dataset].metadata = _Flourish_data_metadata[_Flourish_dataset];
					window.template.data[_Flourish_dataset].timestamps = _Flourish_data_timestamps[_Flourish_dataset];
			}
	
			if (Flourish.enableCustomerAnalytics) { Flourish.enableCustomerAnalytics(); }
			window.template.draw();
		</script></body></html>